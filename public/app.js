(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){

/* jqBootstrapValidation
 * A plugin for automating validation on Twitter Bootstrap formatted forms.
 *
 * v1.3.6
 *
 * License: MIT <http://opensource.org/licenses/mit-license.php> - see LICENSE file
 *
 * http://ReactiveRaven.github.com/jqBootstrapValidation/
 */

(function( $ ){

	var createdElements = [];

	var defaults = {
		options: {
			prependExistingHelpBlock: false,
			sniffHtml: true, // sniff for 'required', 'maxlength', etc
			preventSubmit: true, // stop the form submit event from firing if validation fails
			submitError: false, // function called if there is an error when trying to submit
			submitSuccess: false, // function called just before a successful submit event is sent to the server
            semanticallyStrict: false, // set to true to tidy up generated HTML output
			autoAdd: {
				helpBlocks: true
			},
            filter: function () {
                // return $(this).is(":visible"); // only validate elements you can see
                return true; // validate everything
            }
		},
    methods: {
      init : function( options ) {

        var settings = $.extend(true, {}, defaults);

        settings.options = $.extend(true, settings.options, options);

        var $siblingElements = this;

        var uniqueForms = $.unique(
          $siblingElements.map( function () {
            return $(this).parents("form")[0];
          }).toArray()
        );

        $(uniqueForms).bind("submit", function (e) {
          var $form = $(this);
          var warningsFound = 0;
          var $inputs = $form.find("input,textarea,select").not("[type=submit],[type=image]").filter(settings.options.filter);
          $inputs.trigger("submit.validation").trigger("validationLostFocus.validation");

          $inputs.each(function (i, el) {
            var $this = $(el),
              $controlGroup = $this.parents(".control-group").first();
            if (
              $controlGroup.hasClass("warning")
            ) {
              $controlGroup.removeClass("warning").addClass("error");
              warningsFound++;
            }
          });

          $inputs.trigger("validationLostFocus.validation");

          if (warningsFound) {
            if (settings.options.preventSubmit) {
              e.preventDefault();
            }
            $form.addClass("error");
            if ($.isFunction(settings.options.submitError)) {
              settings.options.submitError($form, e, $inputs.jqBootstrapValidation("collectErrors", true));
            }
          } else {
            $form.removeClass("error");
            if ($.isFunction(settings.options.submitSuccess)) {
              settings.options.submitSuccess($form, e);
            }
          }
        });

        return this.each(function(){

          // Get references to everything we're interested in
          var $this = $(this),
            $controlGroup = $this.parents(".control-group").first(),
            $helpBlock = $controlGroup.find(".help-block").first(),
            $form = $this.parents("form").first(),
            validatorNames = [];

          // create message container if not exists
          if (!$helpBlock.length && settings.options.autoAdd && settings.options.autoAdd.helpBlocks) {
              $helpBlock = $('<div class="help-block" />');
              $controlGroup.find('.controls').append($helpBlock);
							createdElements.push($helpBlock[0]);
          }

          // =============================================================
          //                                     SNIFF HTML FOR VALIDATORS
          // =============================================================

          // *snort sniff snuffle*

          if (settings.options.sniffHtml) {
            var message = "";
            // ---------------------------------------------------------
            //                                                   PATTERN
            // ---------------------------------------------------------
            if ($this.attr("pattern") !== undefined) {
              message = "Not in the expected format<!-- data-validation-pattern-message to override -->";
              if ($this.data("validationPatternMessage")) {
                message = $this.data("validationPatternMessage");
              }
              $this.data("validationPatternMessage", message);
              $this.data("validationPatternRegex", $this.attr("pattern"));
            }
            // ---------------------------------------------------------
            //                                                       MAX
            // ---------------------------------------------------------
            if ($this.attr("max") !== undefined || $this.attr("aria-valuemax") !== undefined) {
              var max = ($this.attr("max") !== undefined ? $this.attr("max") : $this.attr("aria-valuemax"));
              message = "Too high: Maximum of '" + max + "'<!-- data-validation-max-message to override -->";
              if ($this.data("validationMaxMessage")) {
                message = $this.data("validationMaxMessage");
              }
              $this.data("validationMaxMessage", message);
              $this.data("validationMaxMax", max);
            }
            // ---------------------------------------------------------
            //                                                       MIN
            // ---------------------------------------------------------
            if ($this.attr("min") !== undefined || $this.attr("aria-valuemin") !== undefined) {
              var min = ($this.attr("min") !== undefined ? $this.attr("min") : $this.attr("aria-valuemin"));
              message = "Too low: Minimum of '" + min + "'<!-- data-validation-min-message to override -->";
              if ($this.data("validationMinMessage")) {
                message = $this.data("validationMinMessage");
              }
              $this.data("validationMinMessage", message);
              $this.data("validationMinMin", min);
            }
            // ---------------------------------------------------------
            //                                                 MAXLENGTH
            // ---------------------------------------------------------
            if ($this.attr("maxlength") !== undefined) {
              message = "Too long: Maximum of '" + $this.attr("maxlength") + "' characters<!-- data-validation-maxlength-message to override -->";
              if ($this.data("validationMaxlengthMessage")) {
                message = $this.data("validationMaxlengthMessage");
              }
              $this.data("validationMaxlengthMessage", message);
              $this.data("validationMaxlengthMaxlength", $this.attr("maxlength"));
            }
            // ---------------------------------------------------------
            //                                                 MINLENGTH
            // ---------------------------------------------------------
            if ($this.attr("minlength") !== undefined) {
              message = "Too short: Minimum of '" + $this.attr("minlength") + "' characters<!-- data-validation-minlength-message to override -->";
              if ($this.data("validationMinlengthMessage")) {
                message = $this.data("validationMinlengthMessage");
              }
              $this.data("validationMinlengthMessage", message);
              $this.data("validationMinlengthMinlength", $this.attr("minlength"));
            }
            // ---------------------------------------------------------
            //                                                  REQUIRED
            // ---------------------------------------------------------
            if ($this.attr("required") !== undefined || $this.attr("aria-required") !== undefined) {
              message = settings.builtInValidators.required.message;
              if ($this.data("validationRequiredMessage")) {
                message = $this.data("validationRequiredMessage");
              }
              $this.data("validationRequiredMessage", message);
            }
            // ---------------------------------------------------------
            //                                                    NUMBER
            // ---------------------------------------------------------
            if ($this.attr("type") !== undefined && $this.attr("type").toLowerCase() === "number") {
              message = settings.builtInValidators.number.message;
              if ($this.data("validationNumberMessage")) {
                message = $this.data("validationNumberMessage");
              }
              $this.data("validationNumberMessage", message);
            }
            // ---------------------------------------------------------
            //                                                     EMAIL
            // ---------------------------------------------------------
            if ($this.attr("type") !== undefined && $this.attr("type").toLowerCase() === "email") {
              message = "Not a valid email address<!-- data-validator-validemail-message to override -->";
              if ($this.data("validationValidemailMessage")) {
                message = $this.data("validationValidemailMessage");
              } else if ($this.data("validationEmailMessage")) {
                message = $this.data("validationEmailMessage");
              }
              $this.data("validationValidemailMessage", message);
            }
            // ---------------------------------------------------------
            //                                                MINCHECKED
            // ---------------------------------------------------------
            if ($this.attr("minchecked") !== undefined) {
              message = "Not enough options checked; Minimum of '" + $this.attr("minchecked") + "' required<!-- data-validation-minchecked-message to override -->";
              if ($this.data("validationMincheckedMessage")) {
                message = $this.data("validationMincheckedMessage");
              }
              $this.data("validationMincheckedMessage", message);
              $this.data("validationMincheckedMinchecked", $this.attr("minchecked"));
            }
            // ---------------------------------------------------------
            //                                                MAXCHECKED
            // ---------------------------------------------------------
            if ($this.attr("maxchecked") !== undefined) {
              message = "Too many options checked; Maximum of '" + $this.attr("maxchecked") + "' required<!-- data-validation-maxchecked-message to override -->";
              if ($this.data("validationMaxcheckedMessage")) {
                message = $this.data("validationMaxcheckedMessage");
              }
              $this.data("validationMaxcheckedMessage", message);
              $this.data("validationMaxcheckedMaxchecked", $this.attr("maxchecked"));
            }
          }

          // =============================================================
          //                                       COLLECT VALIDATOR NAMES
          // =============================================================

          // Get named validators
          if ($this.data("validation") !== undefined) {
            validatorNames = $this.data("validation").split(",");
          }

          // Get extra ones defined on the element's data attributes
          $.each($this.data(), function (i, el) {
            var parts = i.replace(/([A-Z])/g, ",$1").split(",");
            if (parts[0] === "validation" && parts[1]) {
              validatorNames.push(parts[1]);
            }
          });

          // =============================================================
          //                                     NORMALISE VALIDATOR NAMES
          // =============================================================

          var validatorNamesToInspect = validatorNames;
          var newValidatorNamesToInspect = [];

          do // repeatedly expand 'shortcut' validators into their real validators
          {
            // Uppercase only the first letter of each name
            $.each(validatorNames, function (i, el) {
              validatorNames[i] = formatValidatorName(el);
            });

            // Remove duplicate validator names
            validatorNames = $.unique(validatorNames);

            // Pull out the new validator names from each shortcut
            newValidatorNamesToInspect = [];
            $.each(validatorNamesToInspect, function(i, el) {
              if ($this.data("validation" + el + "Shortcut") !== undefined) {
                // Are these custom validators?
                // Pull them out!
                $.each($this.data("validation" + el + "Shortcut").split(","), function(i2, el2) {
                  newValidatorNamesToInspect.push(el2);
                });
              } else if (settings.builtInValidators[el.toLowerCase()]) {
                // Is this a recognised built-in?
                // Pull it out!
                var validator = settings.builtInValidators[el.toLowerCase()];
                if (validator.type.toLowerCase() === "shortcut") {
                  $.each(validator.shortcut.split(","), function (i, el) {
                    el = formatValidatorName(el);
                    newValidatorNamesToInspect.push(el);
                    validatorNames.push(el);
                  });
                }
              }
            });

            validatorNamesToInspect = newValidatorNamesToInspect;

          } while (validatorNamesToInspect.length > 0)

          // =============================================================
          //                                       SET UP VALIDATOR ARRAYS
          // =============================================================

          var validators = {};

          $.each(validatorNames, function (i, el) {
            // Set up the 'override' message
            var message = $this.data("validation" + el + "Message");
            var hasOverrideMessage = (message !== undefined);
            var foundValidator = false;
            message =
              (
                message
                  ? message
                  : "'" + el + "' validation failed <!-- Add attribute 'data-validation-" + el.toLowerCase() + "-message' to input to change this message -->"
              )
            ;

            $.each(
              settings.validatorTypes,
              function (validatorType, validatorTemplate) {
                if (validators[validatorType] === undefined) {
                  validators[validatorType] = [];
                }
                if (!foundValidator && $this.data("validation" + el + formatValidatorName(validatorTemplate.name)) !== undefined) {
                  validators[validatorType].push(
                    $.extend(
                      true,
                      {
                        name: formatValidatorName(validatorTemplate.name),
                        message: message
                      },
                      validatorTemplate.init($this, el)
                    )
                  );
                  foundValidator = true;
                }
              }
            );

            if (!foundValidator && settings.builtInValidators[el.toLowerCase()]) {

              var validator = $.extend(true, {}, settings.builtInValidators[el.toLowerCase()]);
              if (hasOverrideMessage) {
                validator.message = message;
              }
              var validatorType = validator.type.toLowerCase();

              if (validatorType === "shortcut") {
                foundValidator = true;
              } else {
                $.each(
                  settings.validatorTypes,
                  function (validatorTemplateType, validatorTemplate) {
                    if (validators[validatorTemplateType] === undefined) {
                      validators[validatorTemplateType] = [];
                    }
                    if (!foundValidator && validatorType === validatorTemplateType.toLowerCase()) {
                      $this.data("validation" + el + formatValidatorName(validatorTemplate.name), validator[validatorTemplate.name.toLowerCase()]);
                      validators[validatorType].push(
                        $.extend(
                          validator,
                          validatorTemplate.init($this, el)
                        )
                      );
                      foundValidator = true;
                    }
                  }
                );
              }
            }

            if (! foundValidator) {
              $.error("Cannot find validation info for '" + el + "'");
            }
          });

          // =============================================================
          //                                         STORE FALLBACK VALUES
          // =============================================================

          $helpBlock.data(
            "original-contents",
            (
              $helpBlock.data("original-contents")
                ? $helpBlock.data("original-contents")
                : $helpBlock.html()
            )
          );

          $helpBlock.data(
            "original-role",
            (
              $helpBlock.data("original-role")
                ? $helpBlock.data("original-role")
                : $helpBlock.attr("role")
            )
          );

          $controlGroup.data(
            "original-classes",
            (
              $controlGroup.data("original-clases")
                ? $controlGroup.data("original-classes")
                : $controlGroup.attr("class")
            )
          );

          $this.data(
            "original-aria-invalid",
            (
              $this.data("original-aria-invalid")
                ? $this.data("original-aria-invalid")
                : $this.attr("aria-invalid")
            )
          );

          // =============================================================
          //                                                    VALIDATION
          // =============================================================

          $this.bind(
            "validation.validation",
            function (event, params) {

              var value = getValue($this);

              // Get a list of the errors to apply
              var errorsFound = [];

              $.each(validators, function (validatorType, validatorTypeArray) {
                if (value || value.length || (params && params.includeEmpty) || (!!settings.validatorTypes[validatorType].blockSubmit && params && !!params.submitting)) {
                  $.each(validatorTypeArray, function (i, validator) {
                    if (settings.validatorTypes[validatorType].validate($this, value, validator)) {
                      errorsFound.push(validator.message);
                    }
                  });
                }
              });

              return errorsFound;
            }
          );

          $this.bind(
            "getValidators.validation",
            function () {
              return validators;
            }
          );

          // =============================================================
          //                                             WATCH FOR CHANGES
          // =============================================================
          $this.bind(
            "submit.validation",
            function () {
              return $this.triggerHandler("change.validation", {submitting: true});
            }
          );
          $this.bind(
            [
              "keyup",
              "focus",
              "blur",
              "click",
              "keydown",
              "keypress",
              "change"
            ].join(".validation ") + ".validation",
            function (e, params) {

              var value = getValue($this);

              var errorsFound = [];

              $controlGroup.find("input,textarea,select").each(function (i, el) {
                var oldCount = errorsFound.length;
                $.each($(el).triggerHandler("validation.validation", params), function (j, message) {
                  errorsFound.push(message);
                });
                if (errorsFound.length > oldCount) {
                  $(el).attr("aria-invalid", "true");
                } else {
                  var original = $this.data("original-aria-invalid");
                  $(el).attr("aria-invalid", (original !== undefined ? original : false));
                }
              });

              $form.find("input,select,textarea").not($this).not("[name=\"" + $this.attr("name") + "\"]").trigger("validationLostFocus.validation");

              errorsFound = $.unique(errorsFound.sort());

              // Were there any errors?
              if (errorsFound.length) {
                // Better flag it up as a warning.
                $controlGroup.removeClass("success error").addClass("warning");

                // How many errors did we find?
                if (settings.options.semanticallyStrict && errorsFound.length === 1) {
                  // Only one? Being strict? Just output it.
                  $helpBlock.html(errorsFound[0] +
                    ( settings.options.prependExistingHelpBlock ? $helpBlock.data("original-contents") : "" ));
                } else {
                  // Multiple? Being sloppy? Glue them together into an UL.
                  $helpBlock.html("<ul role=\"alert\"><li>" + errorsFound.join("</li><li>") + "</li></ul>" +
                    ( settings.options.prependExistingHelpBlock ? $helpBlock.data("original-contents") : "" ));
                }
              } else {
                $controlGroup.removeClass("warning error success");
                if (value.length > 0) {
                  $controlGroup.addClass("success");
                }
                $helpBlock.html($helpBlock.data("original-contents"));
              }

              if (e.type === "blur") {
                $controlGroup.removeClass("success");
              }
            }
          );
          $this.bind("validationLostFocus.validation", function () {
            $controlGroup.removeClass("success");
          });
        });
      },
      destroy : function( ) {

        return this.each(
          function() {

            var
              $this = $(this),
              $controlGroup = $this.parents(".control-group").first(),
              $helpBlock = $controlGroup.find(".help-block").first();

            // remove our events
            $this.unbind('.validation'); // events are namespaced.
            // reset help text
            $helpBlock.html($helpBlock.data("original-contents"));
            // reset classes
            $controlGroup.attr("class", $controlGroup.data("original-classes"));
            // reset aria
            $this.attr("aria-invalid", $this.data("original-aria-invalid"));
            // reset role
            $helpBlock.attr("role", $this.data("original-role"));
						// remove all elements we created
						if (createdElements.indexOf($helpBlock[0]) > -1) {
							$helpBlock.remove();
						}

          }
        );

      },
      collectErrors : function(includeEmpty) {

        var errorMessages = {};
        this.each(function (i, el) {
          var $el = $(el);
          var name = $el.attr("name");
          var errors = $el.triggerHandler("validation.validation", {includeEmpty: true});
          errorMessages[name] = $.extend(true, errors, errorMessages[name]);
        });

        $.each(errorMessages, function (i, el) {
          if (el.length === 0) {
            delete errorMessages[i];
          }
        });

        return errorMessages;

      },
      hasErrors: function() {

        var errorMessages = [];

        this.each(function (i, el) {
          errorMessages = errorMessages.concat(
            $(el).triggerHandler("getValidators.validation") ? $(el).triggerHandler("validation.validation", {submitting: true}) : []
          );
        });

        return (errorMessages.length > 0);
      },
      override : function (newDefaults) {
        defaults = $.extend(true, defaults, newDefaults);
      }
    },
		validatorTypes: {
      callback: {
        name: "callback",
        init: function ($this, name) {
          return {
            validatorName: name,
            callback: $this.data("validation" + name + "Callback"),
            lastValue: $this.val(),
            lastValid: true,
            lastFinished: true
          };
        },
        validate: function ($this, value, validator) {
          if (validator.lastValue === value && validator.lastFinished) {
            return !validator.lastValid;
          }

          if (validator.lastFinished === true)
          {
            validator.lastValue = value;
            validator.lastValid = true;
            validator.lastFinished = false;

            var rrjqbvValidator = validator;
            var rrjqbvThis = $this;
            executeFunctionByName(
              validator.callback,
              window,
              $this,
              value,
              function (data) {
                if (rrjqbvValidator.lastValue === data.value) {
                  rrjqbvValidator.lastValid = data.valid;
                  if (data.message) {
                    rrjqbvValidator.message = data.message;
                  }
                  rrjqbvValidator.lastFinished = true;
                  rrjqbvThis.data("validation" + rrjqbvValidator.validatorName + "Message", rrjqbvValidator.message);
                  // Timeout is set to avoid problems with the events being considered 'already fired'
                  setTimeout(function () {
                    rrjqbvThis.trigger("change.validation");
                  }, 1); // doesn't need a long timeout, just long enough for the event bubble to burst
                }
              }
            );
          }

          return false;

        }
      },
      ajax: {
        name: "ajax",
        init: function ($this, name) {
          return {
            validatorName: name,
            url: $this.data("validation" + name + "Ajax"),
            lastValue: $this.val(),
            lastValid: true,
            lastFinished: true
          };
        },
        validate: function ($this, value, validator) {
          if (""+validator.lastValue === ""+value && validator.lastFinished === true) {
            return validator.lastValid === false;
          }

          if (validator.lastFinished === true)
          {
            validator.lastValue = value;
            validator.lastValid = true;
            validator.lastFinished = false;
            $.ajax({
              url: validator.url,
              data: "value=" + value + "&field=" + $this.attr("name"),
              dataType: "json",
              success: function (data) {
                if (""+validator.lastValue === ""+data.value) {
                  validator.lastValid = !!(data.valid);
                  if (data.message) {
                    validator.message = data.message;
                  }
                  validator.lastFinished = true;
                  $this.data("validation" + validator.validatorName + "Message", validator.message);
                  // Timeout is set to avoid problems with the events being considered 'already fired'
                  setTimeout(function () {
                    $this.trigger("change.validation");
                  }, 1); // doesn't need a long timeout, just long enough for the event bubble to burst
                }
              },
              failure: function () {
                validator.lastValid = true;
                validator.message = "ajax call failed";
                validator.lastFinished = true;
                $this.data("validation" + validator.validatorName + "Message", validator.message);
                // Timeout is set to avoid problems with the events being considered 'already fired'
                setTimeout(function () {
                  $this.trigger("change.validation");
                }, 1); // doesn't need a long timeout, just long enough for the event bubble to burst
              }
            });
          }

          return false;

        }
      },
			regex: {
				name: "regex",
				init: function ($this, name) {
					return {regex: regexFromString($this.data("validation" + name + "Regex"))};
				},
				validate: function ($this, value, validator) {
					return (!validator.regex.test(value) && ! validator.negative)
						|| (validator.regex.test(value) && validator.negative);
				}
			},
			required: {
				name: "required",
				init: function ($this, name) {
					return {};
				},
				validate: function ($this, value, validator) {
					return !!(value.length === 0  && ! validator.negative)
						|| !!(value.length > 0 && validator.negative);
				},
        blockSubmit: true
			},
			match: {
				name: "match",
				init: function ($this, name) {
					var element = $this.parents("form").first().find("[name=\"" + $this.data("validation" + name + "Match") + "\"]").first();
					element.bind("validation.validation", function () {
						$this.trigger("change.validation", {submitting: true});
					});
					return {"element": element};
				},
				validate: function ($this, value, validator) {
					return (value !== validator.element.val() && ! validator.negative)
						|| (value === validator.element.val() && validator.negative);
				},
        blockSubmit: true
			},
			max: {
				name: "max",
				init: function ($this, name) {
					return {max: $this.data("validation" + name + "Max")};
				},
				validate: function ($this, value, validator) {
					return (parseFloat(value, 10) > parseFloat(validator.max, 10) && ! validator.negative)
						|| (parseFloat(value, 10) <= parseFloat(validator.max, 10) && validator.negative);
				}
			},
			min: {
				name: "min",
				init: function ($this, name) {
					return {min: $this.data("validation" + name + "Min")};
				},
				validate: function ($this, value, validator) {
					return (parseFloat(value) < parseFloat(validator.min) && ! validator.negative)
						|| (parseFloat(value) >= parseFloat(validator.min) && validator.negative);
				}
			},
			maxlength: {
				name: "maxlength",
				init: function ($this, name) {
					return {maxlength: $this.data("validation" + name + "Maxlength")};
				},
				validate: function ($this, value, validator) {
					return ((value.length > validator.maxlength) && ! validator.negative)
						|| ((value.length <= validator.maxlength) && validator.negative);
				}
			},
			minlength: {
				name: "minlength",
				init: function ($this, name) {
					return {minlength: $this.data("validation" + name + "Minlength")};
				},
				validate: function ($this, value, validator) {
					return ((value.length < validator.minlength) && ! validator.negative)
						|| ((value.length >= validator.minlength) && validator.negative);
				}
			},
			maxchecked: {
				name: "maxchecked",
				init: function ($this, name) {
					var elements = $this.parents("form").first().find("[name=\"" + $this.attr("name") + "\"]");
					elements.bind("click.validation", function () {
						$this.trigger("change.validation", {includeEmpty: true});
					});
					return {maxchecked: $this.data("validation" + name + "Maxchecked"), elements: elements};
				},
				validate: function ($this, value, validator) {
					return (validator.elements.filter(":checked").length > validator.maxchecked && ! validator.negative)
						|| (validator.elements.filter(":checked").length <= validator.maxchecked && validator.negative);
				},
        blockSubmit: true
			},
			minchecked: {
				name: "minchecked",
				init: function ($this, name) {
					var elements = $this.parents("form").first().find("[name=\"" + $this.attr("name") + "\"]");
					elements.bind("click.validation", function () {
						$this.trigger("change.validation", {includeEmpty: true});
					});
					return {minchecked: $this.data("validation" + name + "Minchecked"), elements: elements};
				},
				validate: function ($this, value, validator) {
					return (validator.elements.filter(":checked").length < validator.minchecked && ! validator.negative)
						|| (validator.elements.filter(":checked").length >= validator.minchecked && validator.negative);
				},
        blockSubmit: true
			}
		},
		builtInValidators: {
			email: {
				name: "Email",
				type: "shortcut",
				shortcut: "validemail"
			},
			validemail: {
				name: "Validemail",
				type: "regex",
				regex: "[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\\.[A-Za-z]{2,4}",
				message: "Not a valid email address<!-- data-validator-validemail-message to override -->"
			},
			passwordagain: {
				name: "Passwordagain",
				type: "match",
				match: "password",
				message: "Does not match the given password<!-- data-validator-paswordagain-message to override -->"
			},
			positive: {
				name: "Positive",
				type: "shortcut",
				shortcut: "number,positivenumber"
			},
			negative: {
				name: "Negative",
				type: "shortcut",
				shortcut: "number,negativenumber"
			},
			number: {
				name: "Number",
				type: "regex",
				regex: "([+-]?\\\d+(\\\.\\\d*)?([eE][+-]?[0-9]+)?)?",
				message: "Must be a number<!-- data-validator-number-message to override -->"
			},
			integer: {
				name: "Integer",
				type: "regex",
				regex: "[+-]?\\\d+",
				message: "No decimal places allowed<!-- data-validator-integer-message to override -->"
			},
			positivenumber: {
				name: "Positivenumber",
				type: "min",
				min: 0,
				message: "Must be a positive number<!-- data-validator-positivenumber-message to override -->"
			},
			negativenumber: {
				name: "Negativenumber",
				type: "max",
				max: 0,
				message: "Must be a negative number<!-- data-validator-negativenumber-message to override -->"
			},
			required: {
				name: "Required",
				type: "required",
				message: "This is required<!-- data-validator-required-message to override -->"
			},
			checkone: {
				name: "Checkone",
				type: "minchecked",
				minchecked: 1,
				message: "Check at least one option<!-- data-validation-checkone-message to override -->"
			}
		}
	};

	var formatValidatorName = function (name) {
		return name
			.toLowerCase()
			.replace(
				/(^|\s)([a-z])/g ,
				function(m,p1,p2) {
					return p1+p2.toUpperCase();
				}
			)
		;
	};

	var getValue = function ($this) {
		// Extract the value we're talking about
		var value = $this.val();
		var type = $this.attr("type");
		if (type === "checkbox") {
			value = ($this.is(":checked") ? value : "");
		}
		if (type === "radio") {
			value = ($('input[name="' + $this.attr("name") + '"]:checked').length > 0 ? value : "");
		}
		return value;
	};

  function regexFromString(inputstring) {
		return new RegExp("^" + inputstring + "$");
	}

  /**
   * Thanks to Jason Bunting via StackOverflow.com
   *
   * http://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string#answer-359910
   * Short link: http://tinyurl.com/executeFunctionByName
  **/
  function executeFunctionByName(functionName, context /*, args*/) {
    var args = Array.prototype.slice.call(arguments).splice(2);
    var namespaces = functionName.split(".");
    var func = namespaces.pop();
    for(var i = 0; i < namespaces.length; i++) {
      context = context[namespaces[i]];
    }
    return context[func].apply(this, args);
  }

	$.fn.jqBootstrapValidation = function( method ) {

		if ( defaults.methods[method] ) {
			return defaults.methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
		} else if ( typeof method === 'object' || ! method ) {
			return defaults.methods.init.apply( this, arguments );
		} else {
		$.error( 'Method ' +  method + ' does not exist on jQuery.jqBootstrapValidation' );
			return null;
		}

	};

  $.jqBootstrapValidation = function (options) {
    $(":input").not("[type=image],[type=submit]").jqBootstrapValidation.apply(this,arguments);
  };

})( jQuery );
/*-------------------------------------------------------------------------------------
[TABLE OF CONTENTS]

	01. SMARTMENUS
	02. PICTUREFILL RETINA IMAGE
	03. WOW
	04. ISOTOPE
	05. IMAGESLOADED
	06. BACKGROUND VIDEO PARALLAX
	07. LIGHTGALLERY
	08. OWL CAROUSEL
	09. TAB COLLAPSE
	10. PROGRESSBAR
	11. WAYPOINTS
	12. COUNTER UP
	13. CIRCLE PROGRESS BAR
	14. VANILLA
	15. INSTAFEED
	16. FITVIDS
	17. LOCALSCROLL & SCROLLTO
	18. PRETTIFY
	19. LAZY LOAD GOOGLE MAPS

-------------------------------------------------------------------------------------*/
/*-----------------------------------------------------------------------------------*/
/*	01. SMARTMENUS
/*-----------------------------------------------------------------------------------*/
/*! SmartMenus jQuery Plugin - v1.0.0-beta1 - June 1, 2015
 * http://www.smartmenus.org/
 * Copyright 2015 Vasil Dinkov, Vadikom Web Ltd. http://vadikom.com; Licensed MIT */(function(t){function i(i){var r=".smartmenus_mouse";if(h||i)h&&i&&(t(document).unbind(r),h=!1);else{var u=!0,l=null;t(document).bind(o([["mousemove",function(i){var e={x:i.pageX,y:i.pageY,timeStamp:(new Date).getTime()};if(l){var s=Math.abs(l.x-e.x),o=Math.abs(l.y-e.y);if((s>0||o>0)&&2>=s&&2>=o&&300>=e.timeStamp-l.timeStamp&&(n=!0,u)){var r=t(i.target).closest("a");r.is("a")&&t.each(a,function(){return t.contains(this.$root[0],r[0])?(this.itemEnter({currentTarget:r[0]}),!1):void 0}),u=!1}}l=e}],[s()?"touchstart":"pointerover pointermove pointerout MSPointerOver MSPointerMove MSPointerOut",function(t){e(t.originalEvent)&&(n=!1)}]],r)),h=!0}}function e(t){return!/^(4|mouse)$/.test(t.pointerType)}function s(){return"ontouchstart"in window}function o(i,e){e||(e="");var s={};return t.each(i,function(t,i){s[i[0].split(" ").join(e+" ")+e]=i[1]}),s}var a=[],r=!!window.createPopup,n=!1,h=!1;t.SmartMenus=function(i,e){this.$root=t(i),this.opts=e,this.rootId="",this.accessIdPrefix="",this.$subArrow=null,this.activatedItems=[],this.visibleSubMenus=[],this.showTimeout=0,this.hideTimeout=0,this.scrollTimeout=0,this.clickActivated=!1,this.focusActivated=!1,this.zIndexInc=0,this.idInc=0,this.$firstLink=null,this.$firstSub=null,this.disabled=!1,this.$disableOverlay=null,this.isTouchScrolling=!1,this.wasCollapsible=!1,this.init()},t.extend(t.SmartMenus,{hideAll:function(){t.each(a,function(){this.menuHideAll()})},destroy:function(){for(;a.length;)a[0].destroy();i(!0)},prototype:{init:function(e){var s=this;if(!e){a.push(this),this.rootId=((new Date).getTime()+Math.random()+"").replace(/\D/g,""),this.accessIdPrefix="sm-"+this.rootId+"-",this.$root.hasClass("sm-rtl")&&(this.opts.rightToLeftSubMenus=!0);var r=".smartmenus";this.$root.data("smartmenus",this).attr("data-smartmenus-id",this.rootId).dataSM("level",1).bind(o([["mouseover focusin",t.proxy(this.rootOver,this)],["mouseout focusout",t.proxy(this.rootOut,this)],["keydown",t.proxy(this.rootKeyDown,this)]],r)).delegate("a",o([["mouseenter",t.proxy(this.itemEnter,this)],["mouseleave",t.proxy(this.itemLeave,this)],["mousedown",t.proxy(this.itemDown,this)],["focus",t.proxy(this.itemFocus,this)],["blur",t.proxy(this.itemBlur,this)],["click",t.proxy(this.itemClick,this)],["touchend",t.proxy(this.itemTouchEnd,this)]],r)),r+=this.rootId,this.opts.hideOnClick&&t(document).bind(o([["touchstart",t.proxy(this.docTouchStart,this)],["touchmove",t.proxy(this.docTouchMove,this)],["touchend",t.proxy(this.docTouchEnd,this)],["click",t.proxy(this.docClick,this)]],r)),t(window).bind(o([["resize orientationchange",t.proxy(this.winResize,this)]],r)),this.opts.subIndicators&&(this.$subArrow=t("<span/>").addClass("sub-arrow"),this.opts.subIndicatorsText&&this.$subArrow.html(this.opts.subIndicatorsText)),i()}if(this.$firstSub=this.$root.find("ul").each(function(){s.menuInit(t(this))}).eq(0),this.$firstLink=this.$root.find("a").eq(0),this.opts.markCurrentItem){var n=/(index|default)\.[^#\?\/]*/i,h=/#.*/,u=window.location.href.replace(n,""),l=u.replace(h,"");this.$root.find("a").each(function(){var i=this.href.replace(n,""),e=t(this);(i==u||i==l)&&(e.addClass("current"),s.opts.markCurrentTree&&e.parentsUntil("[data-smartmenus-id]","ul").each(function(){t(this).dataSM("parent-a").addClass("current")}))})}this.wasCollapsible=this.isCollapsible()},destroy:function(i){if(!i){var e=".smartmenus";this.$root.removeData("smartmenus").removeAttr("data-smartmenus-id").removeDataSM("level").unbind(e).undelegate(e),e+=this.rootId,t(document).unbind(e),t(window).unbind(e),this.opts.subIndicators&&(this.$subArrow=null)}this.menuHideAll();var s=this;this.$root.find("ul").each(function(){var i=t(this);i.dataSM("scroll-arrows")&&i.dataSM("scroll-arrows").remove(),i.dataSM("shown-before")&&((s.opts.subMenusMinWidth||s.opts.subMenusMaxWidth)&&i.css({width:"",minWidth:"",maxWidth:""}).removeClass("sm-nowrap"),i.dataSM("scroll-arrows")&&i.dataSM("scroll-arrows").remove(),i.css({zIndex:"",top:"",left:"",marginLeft:"",marginTop:"",display:""})),0==i.attr("id").indexOf(s.accessIdPrefix)&&i.removeAttr("id")}).removeDataSM("in-mega").removeDataSM("shown-before").removeDataSM("ie-shim").removeDataSM("scroll-arrows").removeDataSM("parent-a").removeDataSM("level").removeDataSM("beforefirstshowfired").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeAttr("aria-expanded"),this.$root.find("a.has-submenu").each(function(){var i=t(this);0==i.attr("id").indexOf(s.accessIdPrefix)&&i.removeAttr("id")}).removeClass("has-submenu").removeDataSM("sub").removeAttr("aria-haspopup").removeAttr("aria-controls").removeAttr("aria-expanded").closest("li").removeDataSM("sub"),this.opts.subIndicators&&this.$root.find("span.sub-arrow").remove(),this.opts.markCurrentItem&&this.$root.find("a.current").removeClass("current"),i||(this.$root=null,this.$firstLink=null,this.$firstSub=null,this.$disableOverlay&&(this.$disableOverlay.remove(),this.$disableOverlay=null),a.splice(t.inArray(this,a),1))},disable:function(i){if(!this.disabled){if(this.menuHideAll(),!i&&!this.opts.isPopup&&this.$root.is(":visible")){var e=this.$root.offset();this.$disableOverlay=t('<div class="sm-jquery-disable-overlay"/>').css({position:"absolute",top:e.top,left:e.left,width:this.$root.outerWidth(),height:this.$root.outerHeight(),zIndex:this.getStartZIndex(!0),opacity:0}).appendTo(document.body)}this.disabled=!0}},docClick:function(i){return this.isTouchScrolling?(this.isTouchScrolling=!1,void 0):((this.visibleSubMenus.length&&!t.contains(this.$root[0],i.target)||t(i.target).is("a"))&&this.menuHideAll(),void 0)},docTouchEnd:function(){if(this.lastTouch){if(!(!this.visibleSubMenus.length||void 0!==this.lastTouch.x2&&this.lastTouch.x1!=this.lastTouch.x2||void 0!==this.lastTouch.y2&&this.lastTouch.y1!=this.lastTouch.y2||this.lastTouch.target&&t.contains(this.$root[0],this.lastTouch.target))){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0);var i=this;this.hideTimeout=setTimeout(function(){i.menuHideAll()},350)}this.lastTouch=null}},docTouchMove:function(t){if(this.lastTouch){var i=t.originalEvent.touches[0];this.lastTouch.x2=i.pageX,this.lastTouch.y2=i.pageY}},docTouchStart:function(t){var i=t.originalEvent.touches[0];this.lastTouch={x1:i.pageX,y1:i.pageY,target:i.target}},enable:function(){this.disabled&&(this.$disableOverlay&&(this.$disableOverlay.remove(),this.$disableOverlay=null),this.disabled=!1)},getClosestMenu:function(i){for(var e=t(i).closest("ul");e.dataSM("in-mega");)e=e.parent().closest("ul");return e[0]||null},getHeight:function(t){return this.getOffset(t,!0)},getOffset:function(t,i){var e;"none"==t.css("display")&&(e={position:t[0].style.position,visibility:t[0].style.visibility},t.css({position:"absolute",visibility:"hidden"}).show());var s=t[0].getBoundingClientRect&&t[0].getBoundingClientRect(),o=s&&(i?s.height||s.bottom-s.top:s.width||s.right-s.left);return o||0===o||(o=i?t[0].offsetHeight:t[0].offsetWidth),e&&t.hide().css(e),o},getStartZIndex:function(t){var i=parseInt(this[t?"$root":"$firstSub"].css("z-index"));return!t&&isNaN(i)&&(i=parseInt(this.$root.css("z-index"))),isNaN(i)?1:i},getTouchPoint:function(t){return t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0]||t},getViewport:function(t){var i=t?"Height":"Width",e=document.documentElement["client"+i],s=window["inner"+i];return s&&(e=Math.min(e,s)),e},getViewportHeight:function(){return this.getViewport(!0)},getViewportWidth:function(){return this.getViewport()},getWidth:function(t){return this.getOffset(t)},handleEvents:function(){return!this.disabled&&this.isCSSOn()},handleItemEvents:function(t){return this.handleEvents()&&!this.isLinkInMegaMenu(t)},isCollapsible:function(){return"static"==this.$firstSub.css("position")},isCSSOn:function(){return"block"==this.$firstLink.css("display")},isFixed:function(){var i="fixed"==this.$root.css("position");return i||this.$root.parentsUntil("body").each(function(){return"fixed"==t(this).css("position")?(i=!0,!1):void 0}),i},isLinkInMegaMenu:function(i){return t(this.getClosestMenu(i[0])).hasClass("mega-menu")},isTouchMode:function(){return!n||this.isCollapsible()},itemActivate:function(i,e){var s=i.closest("ul"),o=s.dataSM("level");if(o>1&&(!this.activatedItems[o-2]||this.activatedItems[o-2][0]!=s.dataSM("parent-a")[0])){var a=this;t(s.parentsUntil("[data-smartmenus-id]","ul").get().reverse()).add(s).each(function(){a.itemActivate(t(this).dataSM("parent-a"))})}if((!this.isCollapsible()||e)&&this.menuHideSubMenus(this.activatedItems[o-1]&&this.activatedItems[o-1][0]==i[0]?o:o-1),this.activatedItems[o-1]=i,this.$root.triggerHandler("activate.smapi",i[0])!==!1){var r=i.dataSM("sub");r&&(this.isTouchMode()||!this.opts.showOnClick||this.clickActivated)&&this.menuShow(r)}},itemBlur:function(i){var e=t(i.currentTarget);this.handleItemEvents(e)&&this.$root.triggerHandler("blur.smapi",e[0])},itemClick:function(i){if(this.isTouchScrolling)return this.isTouchScrolling=!1,i.stopPropagation(),!1;var e=t(i.currentTarget);if(this.handleItemEvents(e)){if(this.$root.triggerHandler("click.smapi",e[0])===!1)return!1;e.dataSM("href")&&e.attr("href",e.dataSM("href")).removeDataSM("href");var s=t(i.target).is("span.sub-arrow"),o=e.dataSM("sub");if(o&&!o.is(":visible")){if(this.itemActivate(e),o.is(":visible"))return this.focusActivated=!0,!1}else if(this.isCollapsible()&&s)return this.itemActivate(e),this.menuHide(o),!1;return this.opts.showOnClick&&o&&2==o.dataSM("level")?(this.clickActivated=!0,this.menuShow(o),!1):e.hasClass("disabled")?!1:this.$root.triggerHandler("select.smapi",e[0])===!1?!1:void 0}},itemDown:function(i){var e=t(i.currentTarget);this.handleItemEvents(e)&&e.dataSM("mousedown",!0)},itemEnter:function(i){var e=t(i.currentTarget);if(this.handleItemEvents(e)){if(!this.isTouchMode()){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0);var s=this;this.showTimeout=setTimeout(function(){s.itemActivate(e)},this.opts.showOnClick&&1==e.closest("ul").dataSM("level")?1:this.opts.showTimeout)}this.$root.triggerHandler("mouseenter.smapi",e[0])}},itemFocus:function(i){var e=t(i.currentTarget);this.handleItemEvents(e)&&(!this.focusActivated||this.isTouchMode()&&e.dataSM("mousedown")||this.activatedItems.length&&this.activatedItems[this.activatedItems.length-1][0]==e[0]||this.itemActivate(e,!0),this.$root.triggerHandler("focus.smapi",e[0]))},itemLeave:function(i){var e=t(i.currentTarget);this.handleItemEvents(e)&&(this.isTouchMode()||this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0),e.removeDataSM("mousedown"),this.$root.triggerHandler("mouseleave.smapi",e[0]))},itemTouchEnd:function(i){var e=t(i.currentTarget);if(this.handleItemEvents(e)){var s=e.dataSM("sub");"#"!==e.attr("href").charAt(0)&&s&&!s.is(":visible")&&e.dataSM("href",e.attr("href")).attr("href","#")}},menuHide:function(i){if(this.$root.triggerHandler("beforehide.smapi",i[0])!==!1&&(i.stop(!0,!0),"none"!=i.css("display"))){var e=function(){i.css("z-index","")};this.isCollapsible()?this.opts.collapsibleHideFunction?this.opts.collapsibleHideFunction.call(this,i,e):i.hide(this.opts.collapsibleHideDuration,e):this.opts.hideFunction?this.opts.hideFunction.call(this,i,e):i.hide(this.opts.hideDuration,e),i.dataSM("ie-shim")&&i.dataSM("ie-shim").remove(),i.dataSM("scroll")&&(this.menuScrollStop(i),i.css({"touch-action":"","-ms-touch-action":""}).unbind(".smartmenus_scroll").removeDataSM("scroll").dataSM("scroll-arrows").hide()),i.dataSM("parent-a").removeClass("highlighted").attr("aria-expanded","false"),i.attr({"aria-expanded":"false","aria-hidden":"true"});var s=i.dataSM("level");this.activatedItems.splice(s-1,1),this.visibleSubMenus.splice(t.inArray(i,this.visibleSubMenus),1),this.$root.triggerHandler("hide.smapi",i[0])}},menuHideAll:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0);for(var t=this.opts.isPopup?1:0,i=this.visibleSubMenus.length-1;i>=t;i--)this.menuHide(this.visibleSubMenus[i]);this.opts.isPopup&&(this.$root.stop(!0,!0),this.$root.is(":visible")&&(this.opts.hideFunction?this.opts.hideFunction.call(this,this.$root):this.$root.hide(this.opts.hideDuration),this.$root.dataSM("ie-shim")&&this.$root.dataSM("ie-shim").remove())),this.activatedItems=[],this.visibleSubMenus=[],this.clickActivated=!1,this.focusActivated=!1,this.zIndexInc=0},menuHideSubMenus:function(t){for(var i=this.activatedItems.length-1;i>=t;i--){var e=this.activatedItems[i].dataSM("sub");e&&this.menuHide(e)}},menuIframeShim:function(i){r&&this.opts.overlapControlsInIE&&!i.dataSM("ie-shim")&&i.dataSM("ie-shim",t("<iframe/>").attr({src:"javascript:0",tabindex:-9}).css({position:"absolute",top:"auto",left:"0",opacity:0,border:"0"}))},menuInit:function(t){if(!t.dataSM("in-mega")){t.hasClass("mega-menu")&&t.find("ul").dataSM("in-mega",!0);for(var i=2,e=t[0];(e=e.parentNode.parentNode)!=this.$root[0];)i++;var s=t.prevAll("a").eq(-1);s.length||(s=t.prevAll().find("a").eq(-1)),s.addClass("has-submenu").dataSM("sub",t),t.dataSM("parent-a",s).dataSM("level",i).parent().dataSM("sub",t);var o=s.attr("id")||this.accessIdPrefix+ ++this.idInc,a=t.attr("id")||this.accessIdPrefix+ ++this.idInc;s.attr({id:o,"aria-haspopup":"true","aria-controls":a,"aria-expanded":"false"}),t.attr({id:a,role:"group","aria-hidden":"true","aria-labelledby":o,"aria-expanded":"false"}),this.opts.subIndicators&&s[this.opts.subIndicatorsPos](this.$subArrow.clone())}},menuPosition:function(i){var e,a,r=i.dataSM("parent-a"),n=r.closest("li"),h=n.parent(),u=i.dataSM("level"),l=this.getWidth(i),c=this.getHeight(i),d=r.offset(),m=d.left,p=d.top,f=this.getWidth(r),v=this.getHeight(r),b=t(window),S=b.scrollLeft(),g=b.scrollTop(),M=this.getViewportWidth(),w=this.getViewportHeight(),T=h.hasClass("sm")&&!h.hasClass("sm-vertical"),I=this.opts.rightToLeftSubMenus&&!n.is("[data-sm-reverse]")||!this.opts.rightToLeftSubMenus&&n.is("[data-sm-reverse]"),$=2==u?this.opts.mainMenuSubOffsetX:this.opts.subMenusSubOffsetX,x=2==u?this.opts.mainMenuSubOffsetY:this.opts.subMenusSubOffsetY;if(T?(e=I?f-l-$:$,a=this.opts.bottomToTopSubMenus?-c-x:v+x):(e=I?$-l:f-$,a=this.opts.bottomToTopSubMenus?v-x-c:x),this.opts.keepInViewport){var y=m+e,C=p+a;if(I&&S>y?e=T?S-y+e:f-$:!I&&y+l>S+M&&(e=T?S+M-l-y+e:$-l),T||(w>c&&C+c>g+w?a+=g+w-c-C:(c>=w||g>C)&&(a+=g-C)),T&&(C+c>g+w+.49||g>C)||!T&&c>w+.49){var H=this;i.dataSM("scroll-arrows")||i.dataSM("scroll-arrows",t([t('<span class="scroll-up"><span class="scroll-up-arrow"></span></span>')[0],t('<span class="scroll-down"><span class="scroll-down-arrow"></span></span>')[0]]).bind({mouseenter:function(){i.dataSM("scroll").up=t(this).hasClass("scroll-up"),H.menuScroll(i)},mouseleave:function(t){H.menuScrollStop(i),H.menuScrollOut(i,t)},"mousewheel DOMMouseScroll":function(t){t.preventDefault()}}).insertAfter(i));var A=".smartmenus_scroll";i.dataSM("scroll",{step:1,itemH:v,subH:c,arrowDownH:this.getHeight(i.dataSM("scroll-arrows").eq(1))}).bind(o([["mouseover",function(t){H.menuScrollOver(i,t)}],["mouseout",function(t){H.menuScrollOut(i,t)}],["mousewheel DOMMouseScroll",function(t){H.menuScrollMousewheel(i,t)}]],A)).dataSM("scroll-arrows").css({top:"auto",left:"0",marginLeft:e+(parseInt(i.css("border-left-width"))||0),width:l-(parseInt(i.css("border-left-width"))||0)-(parseInt(i.css("border-right-width"))||0),zIndex:i.css("z-index")}).eq(T&&this.opts.bottomToTopSubMenus?0:1).show(),this.isFixed()&&i.css({"touch-action":"none","-ms-touch-action":"none"}).bind(o([[s()?"touchstart touchmove touchend":"pointerdown pointermove pointerup MSPointerDown MSPointerMove MSPointerUp",function(t){H.menuScrollTouch(i,t)}]],A))}}i.css({top:"auto",left:"0",marginLeft:e,marginTop:a-v}),this.menuIframeShim(i),i.dataSM("ie-shim")&&i.dataSM("ie-shim").css({zIndex:i.css("z-index"),width:l,height:c,marginLeft:e,marginTop:a-v})},menuScroll:function(t,i,e){var s,o=t.dataSM("scroll"),a=t.dataSM("scroll-arrows"),r=parseFloat(t.css("margin-top")),h=o.up?o.upEnd:o.downEnd;if(!i&&o.velocity){if(o.velocity*=.9,s=o.velocity,.5>s)return this.menuScrollStop(t),void 0}else s=e||(i||!this.opts.scrollAccelerate?this.opts.scrollStep:Math.floor(o.step));var u=t.dataSM("level");this.activatedItems[u-1]&&this.activatedItems[u-1].dataSM("sub")&&this.activatedItems[u-1].dataSM("sub").is(":visible")&&this.menuHideSubMenus(u-1);var l=o.up&&r>=h||!o.up&&h>=r?r:Math.abs(h-r)>s?r+(o.up?s:-s):h;if(t.add(t.dataSM("ie-shim")).css("margin-top",l),n&&(o.up&&l>o.downEnd||!o.up&&o.upEnd>l)&&a.eq(o.up?1:0).show(),l==h)n&&a.eq(o.up?0:1).hide(),this.menuScrollStop(t);else if(!i){this.opts.scrollAccelerate&&o.step<this.opts.scrollStep&&(o.step+=.5);var c=this;this.scrollTimeout=setTimeout(function(){c.menuScroll(t)},this.opts.scrollInterval)}},menuScrollMousewheel:function(t,i){if(this.getClosestMenu(i.target)==t[0]){i=i.originalEvent;var e=(i.wheelDelta||-i.detail)>0;t.dataSM("scroll-arrows").eq(e?0:1).is(":visible")&&(t.dataSM("scroll").up=e,this.menuScroll(t,!0))}i.preventDefault()},menuScrollOut:function(i,e){n&&(/^scroll-(up|down)/.test((e.relatedTarget||"").className)||(i[0]==e.relatedTarget||t.contains(i[0],e.relatedTarget))&&this.getClosestMenu(e.relatedTarget)==i[0]||i.dataSM("scroll-arrows").css("visibility","hidden"))},menuScrollOver:function(t,i){if(n&&!/^scroll-(up|down)/.test(i.target.className)&&this.getClosestMenu(i.target)==t[0]){this.menuScrollRefreshData(t);var e=t.dataSM("scroll");t.dataSM("scroll-arrows").eq(0).css("margin-top",e.upEnd).end().eq(1).css("margin-top",e.downEnd+e.subH-e.arrowDownH).end().css("visibility","visible")}},menuScrollRefreshData:function(i){var e=i.dataSM("scroll"),s=t(window),o=s.scrollTop()-i.dataSM("parent-a").offset().top-e.itemH;t.extend(e,{upEnd:o,downEnd:o+this.getViewportHeight()-e.subH})},menuScrollStop:function(i){return this.scrollTimeout?(clearTimeout(this.scrollTimeout),this.scrollTimeout=0,t.extend(i.dataSM("scroll"),{step:1,velocity:0}),!0):void 0},menuScrollTouch:function(i,s){if(s=s.originalEvent,e(s)){var o=this.getTouchPoint(s);if(this.getClosestMenu(o.target)==i[0]){var a=i.dataSM("scroll");if(/(start|down)$/i.test(s.type))this.menuScrollStop(i)?(s.preventDefault(),this.isTouchScrolling=!0):this.isTouchScrolling=!1,this.menuScrollRefreshData(i),t.extend(a,{touchY:o.pageY,touchTimestamp:s.timeStamp,velocity:0});else if(/move$/i.test(s.type)){var r=a.touchY;void 0!==r&&r!=o.pageY&&(this.isTouchScrolling=!0,t.extend(a,{up:o.pageY>r,touchY:o.pageY,touchTimestamp:s.timeStamp,velocity:a.velocity+.5*Math.abs(o.pageY-r)}),this.menuScroll(i,!0,Math.abs(a.touchY-r))),s.preventDefault()}else void 0!==a.touchY&&(120>s.timeStamp-a.touchTimestamp&&a.velocity>0&&(a.velocity*=.5,this.menuScrollStop(i),this.menuScroll(i),s.preventDefault()),delete a.touchY)}}},menuShow:function(t){if((t.dataSM("beforefirstshowfired")||(t.dataSM("beforefirstshowfired",!0),this.$root.triggerHandler("beforefirstshow.smapi",t[0])!==!1))&&this.$root.triggerHandler("beforeshow.smapi",t[0])!==!1&&(t.dataSM("shown-before",!0).stop(!0,!0),!t.is(":visible"))){var i=t.dataSM("parent-a");if((this.opts.keepHighlighted||this.isCollapsible())&&i.addClass("highlighted"),this.isCollapsible())t.removeClass("sm-nowrap").css({zIndex:"",width:"auto",minWidth:"",maxWidth:"",top:"",left:"",marginLeft:"",marginTop:""});else{if(t.css("z-index",this.zIndexInc=(this.zIndexInc||this.getStartZIndex())+1),(this.opts.subMenusMinWidth||this.opts.subMenusMaxWidth)&&(t.css({width:"auto",minWidth:"",maxWidth:""}).addClass("sm-nowrap"),this.opts.subMenusMinWidth&&t.css("min-width",this.opts.subMenusMinWidth),this.opts.subMenusMaxWidth)){var e=this.getWidth(t);t.css("max-width",this.opts.subMenusMaxWidth),e>this.getWidth(t)&&t.removeClass("sm-nowrap").css("width",this.opts.subMenusMaxWidth)}this.menuPosition(t),t.dataSM("ie-shim")&&t.dataSM("ie-shim").insertBefore(t)}var s=function(){t.css("overflow","")};this.isCollapsible()?this.opts.collapsibleShowFunction?this.opts.collapsibleShowFunction.call(this,t,s):t.show(this.opts.collapsibleShowDuration,s):this.opts.showFunction?this.opts.showFunction.call(this,t,s):t.show(this.opts.showDuration,s),i.attr("aria-expanded","true"),t.attr({"aria-expanded":"true","aria-hidden":"false"}),this.visibleSubMenus.push(t),this.$root.triggerHandler("show.smapi",t[0])}},popupHide:function(t){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0);var i=this;this.hideTimeout=setTimeout(function(){i.menuHideAll()},t?1:this.opts.hideTimeout)},popupShow:function(t,i){if(!this.opts.isPopup)return alert('SmartMenus jQuery Error:\n\nIf you want to show this menu via the "popupShow" method, set the isPopup:true option.'),void 0;if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0),this.$root.dataSM("shown-before",!0).stop(!0,!0),!this.$root.is(":visible")){this.$root.css({left:t,top:i}),this.menuIframeShim(this.$root),this.$root.dataSM("ie-shim")&&this.$root.dataSM("ie-shim").css({zIndex:this.$root.css("z-index"),width:this.getWidth(this.$root),height:this.getHeight(this.$root),left:t,top:i}).insertBefore(this.$root);var e=this,s=function(){e.$root.css("overflow","")};this.opts.showFunction?this.opts.showFunction.call(this,this.$root,s):this.$root.show(this.opts.showDuration,s),this.visibleSubMenus[0]=this.$root}},refresh:function(){this.destroy(!0),this.init(!0)},rootKeyDown:function(i){if(this.handleEvents())switch(i.keyCode){case 27:var e=this.activatedItems[0];if(e){this.menuHideAll(),e[0].focus();var s=e.dataSM("sub");s&&this.menuHide(s)}break;case 32:var o=t(i.target);if(o.is("a")&&this.handleItemEvents(o)){var s=o.dataSM("sub");s&&!s.is(":visible")&&(this.itemClick({currentTarget:i.target}),i.preventDefault())}}},rootOut:function(t){if(this.handleEvents()&&!this.isTouchMode()&&t.target!=this.$root[0]&&(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0),!this.opts.showOnClick||!this.opts.hideOnClick)){var i=this;this.hideTimeout=setTimeout(function(){i.menuHideAll()},this.opts.hideTimeout)}},rootOver:function(t){this.handleEvents()&&!this.isTouchMode()&&t.target!=this.$root[0]&&this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},winResize:function(t){if(this.handleEvents()){if(!("onorientationchange"in window)||"orientationchange"==t.type){var i=this.isCollapsible();this.wasCollapsible&&i||(this.activatedItems.length&&this.activatedItems[this.activatedItems.length-1][0].blur(),this.menuHideAll()),this.wasCollapsible=i}}else if(this.$disableOverlay){var e=this.$root.offset();this.$disableOverlay.css({top:e.top,left:e.left,width:this.$root.outerWidth(),height:this.$root.outerHeight()})}}}}),t.fn.dataSM=function(t,i){return i?this.data(t+"_smartmenus",i):this.data(t+"_smartmenus")},t.fn.removeDataSM=function(t){return this.removeData(t+"_smartmenus")},t.fn.smartmenus=function(i){if("string"==typeof i){var e=arguments,s=i;return Array.prototype.shift.call(e),this.each(function(){var i=t(this).data("smartmenus");i&&i[s]&&i[s].apply(i,e)})}var o=t.extend({},t.fn.smartmenus.defaults,i);return this.each(function(){new t.SmartMenus(this,o)})},t.fn.smartmenus.defaults={isPopup:!1,mainMenuSubOffsetX:0,mainMenuSubOffsetY:0,subMenusSubOffsetX:0,subMenusSubOffsetY:0,subMenusMinWidth:"10em",subMenusMaxWidth:"20em",subIndicators:!0,subIndicatorsPos:"prepend",subIndicatorsText:"+",scrollStep:30,scrollInterval:30,scrollAccelerate:!0,showTimeout:250,hideTimeout:500,showDuration:0,showFunction:null,hideDuration:0,hideFunction:function(t,i){t.fadeOut(200,i)},collapsibleShowDuration:0,collapsibleShowFunction:function(t,i){t.slideDown(200,i)},collapsibleHideDuration:0,collapsibleHideFunction:function(t,i){t.slideUp(200,i)},showOnClick:!1,hideOnClick:!0,keepInViewport:!0,keepHighlighted:!0,markCurrentItem:!1,markCurrentTree:!0,rightToLeftSubMenus:!1,bottomToTopSubMenus:!1,overlapControlsInIE:!0}})(jQuery);
/*! SmartMenus jQuery Plugin Bootstrap Addon - v0.2.0 - June 1, 2015
 * http://www.smartmenus.org/
 * Copyright 2015 Vasil Dinkov, Vadikom Web Ltd. http://vadikom.com; Licensed MIT */(function(t){t(function(){var s=t("ul.navbar-nav:not([data-sm-skip])");s.each(function(){function s(){var t=i.getViewportWidth();t!=a&&(i.isCollapsible()?(e.addClass("sm-collapsible"),e.is("[data-sm-skip-collapsible-behavior]")||o.addClass("navbar-toggle sub-arrow")):(e.removeClass("sm-collapsible"),e.is("[data-sm-skip-collapsible-behavior]")||o.removeClass("navbar-toggle sub-arrow")),a=t)}var e=t(this);e.addClass("sm").smartmenus({subMenusSubOffsetX:2,subMenusSubOffsetY:-6,subIndicators:!1,collapsibleShowFunction:null,collapsibleHideFunction:null,rightToLeftSubMenus:e.hasClass("navbar-right"),bottomToTopSubMenus:e.closest(".navbar").hasClass("navbar-fixed-bottom")}).bind({"show.smapi":function(s,e){var i=t(e),a=i.dataSM("scroll-arrows");a&&a.css("background-color",t(document.body).css("background-color")),i.parent().addClass("open")},"hide.smapi":function(s,e){t(e).parent().removeClass("open")}}).find("a.current").parent().addClass("active");var i=e.data("smartmenus");e.is("[data-sm-skip-collapsible-behavior]")&&e.bind({"click.smapi":function(s,e){if(i.isCollapsible()){var a=t(e),o=a.parent().dataSM("sub");if(o&&o.dataSM("shown-before")&&o.is(":visible"))return i.itemActivate(a),i.menuHide(o),!1}}});var a,o=e.find(".caret");s(),t(window).bind("resize.smartmenus"+i.rootId,s)})}),t.SmartMenus.prototype.isCollapsible=function(){return"left"!=this.$firstLink.parent().css("float")}})(jQuery);
/*-----------------------------------------------------------------------------------*/
/*	02. PICTUREFILL RETINA IMAGE
/*-----------------------------------------------------------------------------------*/
/*! Picturefill - v2.3.1 - 2015-04-09
* http://scottjehl.github.io/picturefill
* Copyright (c) 2015 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT */
window.matchMedia||(window.matchMedia=function(){"use strict";var a=window.styleMedia||window.media;if(!a){var b=document.createElement("style"),c=document.getElementsByTagName("script")[0],d=null;b.type="text/css",b.id="matchmediajs-test",c.parentNode.insertBefore(b,c),d="getComputedStyle"in window&&window.getComputedStyle(b,null)||b.currentStyle,a={matchMedium:function(a){var c="@media "+a+"{ #matchmediajs-test { width: 1px; } }";return b.styleSheet?b.styleSheet.cssText=c:b.textContent=c,"1px"===d.width}}}return function(b){return{matches:a.matchMedium(b||"all"),media:b||"all"}}}()),function(a,b,c){"use strict";function d(b){"object"==typeof module&&"object"==typeof module.exports?module.exports=b:"function"==typeof define&&define.amd&&define("picturefill",function(){return b}),"object"==typeof a&&(a.picturefill=b)}function e(a){var b,c,d,e,f,i=a||{};b=i.elements||g.getAllElements();for(var j=0,k=b.length;k>j;j++)if(c=b[j],d=c.parentNode,e=void 0,f=void 0,"IMG"===c.nodeName.toUpperCase()&&(c[g.ns]||(c[g.ns]={}),i.reevaluate||!c[g.ns].evaluated)){if(d&&"PICTURE"===d.nodeName.toUpperCase()){if(g.removeVideoShim(d),e=g.getMatch(c,d),e===!1)continue}else e=void 0;(d&&"PICTURE"===d.nodeName.toUpperCase()||!g.sizesSupported&&c.srcset&&h.test(c.srcset))&&g.dodgeSrcset(c),e?(f=g.processSourceSet(e),g.applyBestCandidate(f,c)):(f=g.processSourceSet(c),(void 0===c.srcset||c[g.ns].srcset)&&g.applyBestCandidate(f,c)),c[g.ns].evaluated=!0}}function f(){function c(){clearTimeout(d),d=setTimeout(h,60)}g.initTypeDetects(),e();var d,f=setInterval(function(){return e(),/^loaded|^i|^c/.test(b.readyState)?void clearInterval(f):void 0},250),h=function(){e({reevaluate:!0})};a.addEventListener?a.addEventListener("resize",c,!1):a.attachEvent&&a.attachEvent("onresize",c)}if(a.HTMLPictureElement)return void d(function(){});b.createElement("picture");var g=a.picturefill||{},h=/\s+\+?\d+(e\d+)?w/;g.ns="picturefill",function(){g.srcsetSupported="srcset"in c,g.sizesSupported="sizes"in c,g.curSrcSupported="currentSrc"in c}(),g.trim=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},g.makeUrl=function(){var a=b.createElement("a");return function(b){return a.href=b,a.href}}(),g.restrictsMixedContent=function(){return"https:"===a.location.protocol},g.matchesMedia=function(b){return a.matchMedia&&a.matchMedia(b).matches},g.getDpr=function(){return a.devicePixelRatio||1},g.getWidthFromLength=function(a){var c;if(!a||a.indexOf("%")>-1!=!1||!(parseFloat(a)>0||a.indexOf("calc(")>-1))return!1;a=a.replace("vw","%"),g.lengthEl||(g.lengthEl=b.createElement("div"),g.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden",g.lengthEl.className="helper-from-picturefill-js"),g.lengthEl.style.width="0px";try{g.lengthEl.style.width=a}catch(d){}return b.body.appendChild(g.lengthEl),c=g.lengthEl.offsetWidth,0>=c&&(c=!1),b.body.removeChild(g.lengthEl),c},g.detectTypeSupport=function(b,c){var d=new a.Image;return d.onerror=function(){g.types[b]=!1,e()},d.onload=function(){g.types[b]=1===d.width,e()},d.src=c,"pending"},g.types=g.types||{},g.initTypeDetects=function(){g.types["image/jpeg"]=!0,g.types["image/gif"]=!0,g.types["image/png"]=!0,g.types["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),g.types["image/webp"]=g.detectTypeSupport("image/webp","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")},g.verifyTypeSupport=function(a){var b=a.getAttribute("type");if(null===b||""===b)return!0;var c=g.types[b];return"string"==typeof c&&"pending"!==c?(g.types[b]=g.detectTypeSupport(b,c),"pending"):"function"==typeof c?(c(),"pending"):c},g.parseSize=function(a){var b=/(\([^)]+\))?\s*(.+)/g.exec(a);return{media:b&&b[1],length:b&&b[2]}},g.findWidthFromSourceSize=function(c){for(var d,e=g.trim(c).split(/\s*,\s*/),f=0,h=e.length;h>f;f++){var i=e[f],j=g.parseSize(i),k=j.length,l=j.media;if(k&&(!l||g.matchesMedia(l))&&(d=g.getWidthFromLength(k)))break}return d||Math.max(a.innerWidth||0,b.documentElement.clientWidth)},g.parseSrcset=function(a){for(var b=[];""!==a;){a=a.replace(/^\s+/g,"");var c,d=a.search(/\s/g),e=null;if(-1!==d){c=a.slice(0,d);var f=c.slice(-1);if((","===f||""===c)&&(c=c.replace(/,+$/,""),e=""),a=a.slice(d+1),null===e){var g=a.indexOf(",");-1!==g?(e=a.slice(0,g),a=a.slice(g+1)):(e=a,a="")}}else c=a,a="";(c||e)&&b.push({url:c,descriptor:e})}return b},g.parseDescriptor=function(a,b){var c,d=b||"100vw",e=a&&a.replace(/(^\s+|\s+$)/g,""),f=g.findWidthFromSourceSize(d);if(e)for(var h=e.split(" "),i=h.length-1;i>=0;i--){var j=h[i],k=j&&j.slice(j.length-1);if("h"!==k&&"w"!==k||g.sizesSupported){if("x"===k){var l=j&&parseFloat(j,10);c=l&&!isNaN(l)?l:1}}else c=parseFloat(parseInt(j,10)/f)}return c||1},g.getCandidatesFromSourceSet=function(a,b){for(var c=g.parseSrcset(a),d=[],e=0,f=c.length;f>e;e++){var h=c[e];d.push({url:h.url,resolution:g.parseDescriptor(h.descriptor,b)})}return d},g.dodgeSrcset=function(a){a.srcset&&(a[g.ns].srcset=a.srcset,a.srcset="",a.setAttribute("data-pfsrcset",a[g.ns].srcset))},g.processSourceSet=function(a){var b=a.getAttribute("srcset"),c=a.getAttribute("sizes"),d=[];return"IMG"===a.nodeName.toUpperCase()&&a[g.ns]&&a[g.ns].srcset&&(b=a[g.ns].srcset),b&&(d=g.getCandidatesFromSourceSet(b,c)),d},g.backfaceVisibilityFix=function(a){var b=a.style||{},c="webkitBackfaceVisibility"in b,d=b.zoom;c&&(b.zoom=".999",c=a.offsetWidth,b.zoom=d)},g.setIntrinsicSize=function(){var c={},d=function(a,b,c){b&&a.setAttribute("width",parseInt(b/c,10))};return function(e,f){var h;e[g.ns]&&!a.pfStopIntrinsicSize&&(void 0===e[g.ns].dims&&(e[g.ns].dims=e.getAttribute("width")||e.getAttribute("height")),e[g.ns].dims||(f.url in c?d(e,c[f.url],f.resolution):(h=b.createElement("img"),h.onload=function(){if(c[f.url]=h.width,!c[f.url])try{b.body.appendChild(h),c[f.url]=h.width||h.offsetWidth,b.body.removeChild(h)}catch(a){}e.src===f.url&&d(e,c[f.url],f.resolution),e=null,h.onload=null,h=null},h.src=f.url)))}}(),g.applyBestCandidate=function(a,b){var c,d,e;a.sort(g.ascendingSort),d=a.length,e=a[d-1];for(var f=0;d>f;f++)if(c=a[f],c.resolution>=g.getDpr()){e=c;break}e&&(e.url=g.makeUrl(e.url),b.src!==e.url&&(g.restrictsMixedContent()&&"http:"===e.url.substr(0,"http:".length).toLowerCase()?void 0!==window.console&&console.warn("Blocked mixed content image "+e.url):(b.src=e.url,g.curSrcSupported||(b.currentSrc=b.src),g.backfaceVisibilityFix(b))),g.setIntrinsicSize(b,e))},g.ascendingSort=function(a,b){return a.resolution-b.resolution},g.removeVideoShim=function(a){var b=a.getElementsByTagName("video");if(b.length){for(var c=b[0],d=c.getElementsByTagName("source");d.length;)a.insertBefore(d[0],c);c.parentNode.removeChild(c)}},g.getAllElements=function(){for(var a=[],c=b.getElementsByTagName("img"),d=0,e=c.length;e>d;d++){var f=c[d];("PICTURE"===f.parentNode.nodeName.toUpperCase()||null!==f.getAttribute("srcset")||f[g.ns]&&null!==f[g.ns].srcset)&&a.push(f)}return a},g.getMatch=function(a,b){for(var c,d=b.childNodes,e=0,f=d.length;f>e;e++){var h=d[e];if(1===h.nodeType){if(h===a)return c;if("SOURCE"===h.nodeName.toUpperCase()){null!==h.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var i=h.getAttribute("media");if(h.getAttribute("srcset")&&(!i||g.matchesMedia(i))){var j=g.verifyTypeSupport(h);if(j===!0){c=h;break}if("pending"===j)return!1}}}}return c},f(),e._=g,d(e)}(window,window.document,new window.Image);
/*-----------------------------------------------------------------------------------*/
/*	03. WOW
/*-----------------------------------------------------------------------------------*/
/* Copyright (c) 2015 Matthieu Aussaguel; Licensed MIT */(function(){var a,b,c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=function(){function a(){}return a.prototype.extend=function(a,b){var c,d;for(c in b)d=b[c],null==a[c]&&(a[c]=d);return a},a.prototype.isMobile=function(a){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)},a.prototype.addEvent=function(a,b,c){return null!=a.addEventListener?a.addEventListener(b,c,!1):null!=a.attachEvent?a.attachEvent("on"+b,c):a[b]=c},a.prototype.removeEvent=function(a,b,c){return null!=a.removeEventListener?a.removeEventListener(b,c,!1):null!=a.detachEvent?a.detachEvent("on"+b,c):delete a[b]},a.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},a}(),c=this.WeakMap||this.MozWeakMap||(c=function(){function a(){this.keys=[],this.values=[]}return a.prototype.get=function(a){var b,c,d,e,f;for(f=this.keys,b=d=0,e=f.length;e>d;b=++d)if(c=f[b],c===a)return this.values[b]},a.prototype.set=function(a,b){var c,d,e,f,g;for(g=this.keys,c=e=0,f=g.length;f>e;c=++e)if(d=g[c],d===a)return void(this.values[c]=b);return this.keys.push(a),this.values.push(b)},a}()),a=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(a=function(){function a(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return a.notSupported=!0,a.prototype.observe=function(){},a}()),d=this.getComputedStyle||function(a){return this.getPropertyValue=function(b){var c;return"float"===b&&(b="styleFloat"),e.test(b)&&b.replace(e,function(a,b){return b.toUpperCase()}),(null!=(c=a.currentStyle)?c[b]:void 0)||null},this},e=/(\-([a-z]){1})/g,this.WOW=function(){function e(a){null==a&&(a={}),this.scrollCallback=f(this.scrollCallback,this),this.scrollHandler=f(this.scrollHandler,this),this.start=f(this.start,this),this.scrolled=!0,this.config=this.util().extend(a,this.defaults),this.animationNameCache=new c}return e.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null},e.prototype.init=function(){var a;return this.element=window.document.documentElement,"interactive"===(a=document.readyState)||"complete"===a?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},e.prototype.start=function(){var b,c,d,e;if(this.stopped=!1,this.boxes=function(){var a,c,d,e;for(d=this.element.querySelectorAll("."+this.config.boxClass),e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b);return e}.call(this),this.all=function(){var a,c,d,e;for(d=this.boxes,e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b);return e}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(e=this.boxes,c=0,d=e.length;d>c;c++)b=e[c],this.applyStyle(b,!0);return this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new a(function(a){return function(b){var c,d,e,f,g;for(g=[],e=0,f=b.length;f>e;e++)d=b[e],g.push(function(){var a,b,e,f;for(e=d.addedNodes||[],f=[],a=0,b=e.length;b>a;a++)c=e[a],f.push(this.doSync(c));return f}.call(a));return g}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},e.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},e.prototype.sync=function(){return a.notSupported?this.doSync(this.element):void 0},e.prototype.doSync=function(a){var b,c,d,e,f;if(null==a&&(a=this.element),1===a.nodeType){for(a=a.parentNode||a,e=a.querySelectorAll("."+this.config.boxClass),f=[],c=0,d=e.length;d>c;c++)b=e[c],g.call(this.all,b)<0?(this.boxes.push(b),this.all.push(b),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(b,!0),f.push(this.scrolled=!0)):f.push(void 0);return f}},e.prototype.show=function(a){return this.applyStyle(a),a.className=""+a.className+" "+this.config.animateClass,null!=this.config.callback?this.config.callback(a):void 0},e.prototype.applyStyle=function(a,b){var c,d,e;return d=a.getAttribute("data-wow-duration"),c=a.getAttribute("data-wow-delay"),e=a.getAttribute("data-wow-iteration"),this.animate(function(f){return function(){return f.customStyle(a,b,d,c,e)}}(this))},e.prototype.animate=function(){return"requestAnimationFrame"in window?function(a){return window.requestAnimationFrame(a)}:function(a){return a()}}(),e.prototype.resetStyle=function(){var a,b,c,d,e;for(d=this.boxes,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.style.visibility="visible");return e},e.prototype.customStyle=function(a,b,c,d,e){return b&&this.cacheAnimationName(a),a.style.visibility=b?"hidden":"visible",c&&this.vendorSet(a.style,{animationDuration:c}),d&&this.vendorSet(a.style,{animationDelay:d}),e&&this.vendorSet(a.style,{animationIterationCount:e}),this.vendorSet(a.style,{animationName:b?"none":this.cachedAnimationName(a)}),a},e.prototype.vendors=["moz","webkit"],e.prototype.vendorSet=function(a,b){var c,d,e,f;f=[];for(c in b)d=b[c],a[""+c]=d,f.push(function(){var b,f,g,h;for(g=this.vendors,h=[],b=0,f=g.length;f>b;b++)e=g[b],h.push(a[""+e+c.charAt(0).toUpperCase()+c.substr(1)]=d);return h}.call(this));return f},e.prototype.vendorCSS=function(a,b){var c,e,f,g,h,i;for(e=d(a),c=e.getPropertyCSSValue(b),i=this.vendors,g=0,h=i.length;h>g;g++)f=i[g],c=c||e.getPropertyCSSValue("-"+f+"-"+b);return c},e.prototype.animationName=function(a){var b;try{b=this.vendorCSS(a,"animation-name").cssText}catch(c){b=d(a).getPropertyValue("animation-name")}return"none"===b?"":b},e.prototype.cacheAnimationName=function(a){return this.animationNameCache.set(a,this.animationName(a))},e.prototype.cachedAnimationName=function(a){return this.animationNameCache.get(a)},e.prototype.scrollHandler=function(){return this.scrolled=!0},e.prototype.scrollCallback=function(){var a;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){var b,c,d,e;for(d=this.boxes,e=[],b=0,c=d.length;c>b;b++)a=d[b],a&&(this.isVisible(a)?this.show(a):e.push(a));return e}.call(this),this.boxes.length||this.config.live)?void 0:this.stop()},e.prototype.offsetTop=function(a){for(var b;void 0===a.offsetTop;)a=a.parentNode;for(b=a.offsetTop;a=a.offsetParent;)b+=a.offsetTop;return b},e.prototype.isVisible=function(a){var b,c,d,e,f;return c=a.getAttribute("data-wow-offset")||this.config.offset,f=window.pageYOffset,e=f+Math.min(this.element.clientHeight,this.util().innerHeight())-c,d=this.offsetTop(a),b=d+a.clientHeight,e>=d&&b>=f},e.prototype.util=function(){return null!=this._util?this._util:this._util=new b},e.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},e}()}).call(this);
/*-----------------------------------------------------------------------------------*/
/*	04. ISOTOPE
/*-----------------------------------------------------------------------------------*/
/*!
 * Isotope PACKAGED v2.0.0
 * Filter & sort magical layouts
 * http://isotope.metafizzy.co
 */


/*	05. IMAGESLOADED
/*-----------------------------------------------------------------------------------*/
/*!
 * imagesLoaded PACKAGED v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

(function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function(e){var t,n,i=this._getEvents();if("object"==typeof e){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===t(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(i=t(o[r],n),-1!==i&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if("object"===n)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,i,r,o,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(i=s[r].length;i--;)n=s[r][i],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=o,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}).call(this),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(i=function(e,n,i){e[n+i]=i.handleEvent?function(){var n=t(e);i.handleEvent.call(i,n)}:function(){var n=t(e);i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var r=function(){};n.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var o={bind:i,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",o):e.eventie=o}(this),function(e,t){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(n,i){return t(e,n,i)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,n){function i(e,t){for(var n in t)e[n]=t[n];return e}function r(e){return"[object Array]"===d.call(e)}function o(e){var t=[];if(r(e))t=e;else if("number"==typeof e.length)for(var n=0,i=e.length;i>n;n++)t.push(e[n]);else t.push(e);return t}function s(e,t,n){if(!(this instanceof s))return new s(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=o(e),this.options=i({},this.options),"function"==typeof t?n=t:i(this.options,t),n&&this.on("always",n),this.getImages(),a&&(this.jqDeferred=new a.Deferred);var r=this;setTimeout(function(){r.check()})}function f(e){this.img=e}function c(e){this.src=e,v[e]=this}var a=e.jQuery,u=e.console,h=u!==void 0,d=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var n=this.elements[e];"IMG"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var r=n.querySelectorAll("img"),o=0,s=r.length;s>o;o++){var f=r[o];this.addImage(f)}}},s.prototype.addImage=function(e){var t=new f(e);this.images.push(t)},s.prototype.check=function(){function e(e,r){return t.options.debug&&h&&u.log("confirm",e,r),t.progress(e),n++,n===i&&t.complete(),!0}var t=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return this.complete(),void 0;for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",e),o.check()}},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})},a&&(a.fn.imagesLoaded=function(e,t){var n=new s(this,e,t);return n.jqDeferred.promise(a(this))}),f.prototype=new t,f.prototype.check=function(){var e=v[this.img.src]||new c(this.img.src);if(e.isConfirmed)return this.confirm(e.isLoaded,"cached was confirmed"),void 0;if(this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var t=this;e.on("confirm",function(e,n){return t.confirm(e.isLoaded,n),!0}),e.check()},f.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var v={};return c.prototype=new t,c.prototype.check=function(){if(!this.isChecked){var e=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},c.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},c.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},c.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},c.prototype.unbindProxyEvents=function(e){n.unbind(e.target,"load",this),n.unbind(e.target,"error",this)},s});
/*-----------------------------------------------------------------------------------*/
/*	06. BACKGROUND VIDEO PARALLAX
/*-----------------------------------------------------------------------------------*/
!function(i,t,o,s){"use strict";function e(t,o){function s(){e.options.originalVideoW=e.options.$video[0].videoWidth,e.options.originalVideoH=e.options.$video[0].videoHeight,e.initialised||e.init()}var e=this;this.element=t,this.options=i.extend({},r,o),this._defaults=r,this._name=n,this.options.$video=i(t),this.detectBrowser(),this.shimRequestAnimationFrame(),this.options.has3d=this.detect3d(),this.options.$videoWrap.css({position:"relative",overflow:"hidden","z-index":"10"}),this.options.$video.css({position:"absolute","z-index":"1"}),this.options.$video.on("canplay canplaythrough",s),this.options.$video[0].readyState>3&&s()}var n="backgroundVideo",r={$videoWrap:i("#video-wrap"),$outerWrap:i(t),$window:i(t),minimumVideoWidth:400,preventContextMenu:!1,parallax:!0,parallaxOptions:{effect:1.5},pauseVideoOnViewLoss:!1};e.prototype={init:function(){var i=this;this.initialised=!0,this.lastPosition=-1,this.ticking=!1,this.options.$window.resize(function(){i.positionObject()}),this.options.parallax&&this.options.$window.on("scroll",function(){i.update()}),this.options.pauseVideoOnViewLoss&&this.playPauseVideo(),this.options.preventContextMenu&&this.options.$video.on("contextmenu",function(){return!1}),this.options.$window.trigger("resize")},requestTick:function(){var i=this;this.ticking||(t.requestAnimationFrame(i.positionObject.bind(i)),this.ticking=!0)},update:function(){this.lastPosition=t.pageYOffset,this.requestTick()},detect3d:function(){var i,e,n=o.createElement("p"),r={WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MSTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};o.body.insertBefore(n,o.body.lastChild);for(i in r)n.style[i]!==s&&(n.style[i]="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",e=t.getComputedStyle(n).getPropertyValue(r[i]));return n.parentNode.removeChild(n),e!==s?"none"!==e:!1},detectBrowser:function(){var i=navigator.userAgent.toLowerCase();i.indexOf("chrome")>-1||i.indexOf("safari")>-1?(this.options.browser="webkit",this.options.browserPrexix="-webkit-"):i.indexOf("firefox")>-1?(this.options.browser="firefox",this.options.browserPrexix="-moz-"):-1!==i.indexOf("MSIE")||i.indexOf("Trident/")>0?(this.options.browser="ie",this.options.browserPrexix="-ms-"):i.indexOf("Opera")>-1&&(this.options.browser="opera",this.options.browserPrexix="-o-")},scaleObject:function(){var i,t,o;return this.options.$videoWrap.width(this.options.$outerWrap.width()),this.options.$videoWrap.height(this.options.$outerWrap.height()),i=this.options.$window.width()/this.options.originalVideoW,t=this.options.$window.height()/this.options.originalVideoH,o=i>t?i:t,o*this.options.originalVideoW<this.options.minimumVideoWidth&&(o=this.options.minimumVideoWidth/this.options.originalVideoW),this.options.$video.width(o*this.options.originalVideoW),this.options.$video.height(o*this.options.originalVideoH),{xPos:-(parseInt(this.options.$video.width()-this.options.$window.width())/2),yPos:parseInt(this.options.$video.height()-this.options.$window.height())/2}},positionObject:function(){var i=this,o=t.pageYOffset,s=this.scaleObject(this.options.$video,i.options.$videoWrap),e=s.xPos,n=s.yPos;n=this.options.parallax?o>=0?this.calculateYPos(n,o):this.calculateYPos(n,0):-n,i.options.has3d?(this.options.$video.css(i.options.browserPrexix+"transform3d","translate3d(-"+e+"px, "+n+"px, 0)"),this.options.$video.css("transform","translate3d("+e+"px, "+n+"px, 0)")):(this.options.$video.css(i.options.browserPrexix+"transform","translate(-"+e+"px, "+n+"px)"),this.options.$video.css("transform","translate("+e+"px, "+n+"px)")),this.ticking=!1},calculateYPos:function(i,t){var o,s;return o=parseInt(this.options.$videoWrap.offset().top),s=o-t,i=-(s/this.options.parallaxOptions.effect+i)},disableParallax:function(){this.options.$window.unbind(".backgroundVideoParallax")},playPauseVideo:function(){var i=this;this.options.$window.on("scroll.backgroundVideoPlayPause",function(){i.options.$window.scrollTop()<i.options.$videoWrap.height()?i.options.$video.get(0).play():i.options.$video.get(0).pause()})},shimRequestAnimationFrame:function(){for(var i=0,o=["ms","moz","webkit","o"],s=0;s<o.length&&!t.requestAnimationFrame;++s)t.requestAnimationFrame=t[o[s]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o[s]+"CancelAnimationFrame"]||t[o[s]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(o){var s=(new Date).getTime(),e=Math.max(0,16-(s-i)),n=t.setTimeout(function(){o(s+e)},e);return i=s+e,n}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(i){clearTimeout(i)})}},i.fn[n]=function(t){return this.each(function(){i.data(this,"plugin_"+n)||i.data(this,"plugin_"+n,new e(this,t))})}}(jQuery,window,document);
/*-----------------------------------------------------------------------------------*/
/*	07. LIGHTGALLERY
/*-----------------------------------------------------------------------------------*/
/*! lightgallery - v1.2.8 - 2015-12-13
* http://sachinchoolur.github.io/lightGallery/
* Copyright (c) 2015 Sachin N; Licensed Apache 2.0 */
!function(a,b,c,d){"use strict";function e(b,d){if(this.el=b,this.$el=a(b),this.s=a.extend({},f,d),this.s.dynamic&&"undefined"!==this.s.dynamicEl&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length)throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.modules={},this.lGalleryOn=!1,this.lgBusy=!1,this.hideBartimeout=!1,this.isTouch="ontouchstart"in c.documentElement,this.s.slideEndAnimatoin&&(this.s.hideControlOnEnd=!1),this.s.dynamic?this.$items=this.s.dynamicEl:"this"===this.s.selector?this.$items=this.$el:""!==this.s.selector?this.s.selectWithin?this.$items=a(this.s.selectWithin).find(this.s.selector):this.$items=this.$el.find(a(this.s.selector)):this.$items=this.$el.children(),this.$slide="",this.$outer="",this.init(),this}var f={mode:"lg-slide",cssEasing:"cubic-bezier(0.25, 0, 0.25, 1)",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6e3,useLeft:!1,closable:!0,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimatoin:!0,hideControlOnEnd:!1,mousewheel:!0,appendSubHtmlTo:".lg-sub-html",preload:1,showAfterLoad:!0,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:!1,iframeMaxWidth:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],galleryId:1};e.prototype.init=function(){var c=this;c.s.preload>c.$items.length&&(c.s.preload=c.$items.length);var d=b.location.hash;d.indexOf("lg="+this.s.galleryId)>0&&(c.index=parseInt(d.split("&slide=")[1],10),a("body").addClass("lg-from-hash"),a("body").hasClass("lg-on")||setTimeout(function(){c.build(c.index),a("body").addClass("lg-on")})),c.s.dynamic?(c.$el.trigger("onBeforeOpen.lg"),c.index=c.s.index||0,a("body").hasClass("lg-on")||setTimeout(function(){c.build(c.index),a("body").addClass("lg-on")})):c.$items.on("click.lgcustom",function(b){try{b.preventDefault(),b.preventDefault()}catch(d){b.returnValue=!1}c.$el.trigger("onBeforeOpen.lg"),c.index=c.s.index||c.$items.index(this),a("body").hasClass("lg-on")||(c.build(c.index),a("body").addClass("lg-on"))})},e.prototype.build=function(b){var c=this;c.structure(),a.each(a.fn.lightGallery.modules,function(b){c.modules[b]=new a.fn.lightGallery.modules[b](c.el)}),c.slide(b,!1,!1),c.s.keyPress&&c.keyPress(),c.$items.length>1&&(c.arrow(),setTimeout(function(){c.enableDrag(),c.enableSwipe()},50),c.s.mousewheel&&c.mousewheel()),c.counter(),c.closeGallery(),c.$el.trigger("onAfterOpen.lg"),c.$outer.on("mousemove.lg click.lg touchstart.lg",function(){c.$outer.removeClass("lg-hide-items"),clearTimeout(c.hideBartimeout),c.hideBartimeout=setTimeout(function(){c.$outer.addClass("lg-hide-items")},c.s.hideBarsDelay)})},e.prototype.structure=function(){var c,d="",e="",f=0,g="",h=this;for(a("body").append('<div class="lg-backdrop"></div>'),a(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms"),f=0;f<this.$items.length;f++)d+='<div class="lg-item"></div>';if(this.s.controls&&this.$items.length>1&&(e='<div class="lg-actions"><div class="lg-prev lg-icon">'+this.s.prevHtml+'</div><div class="lg-next lg-icon">'+this.s.nextHtml+"</div></div>"),".lg-sub-html"===this.s.appendSubHtmlTo&&(g='<div class="lg-sub-html"></div>'),c='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+d+'</div><div class="lg-toolbar group"><span class="lg-close lg-icon"></span></div>'+e+g+"</div></div>",a("body").append(c),this.$outer=a(".lg-outer"),this.$slide=this.$outer.find(".lg-item"),this.s.useLeft?(this.$outer.addClass("lg-use-left"),this.s.mode="lg-slide"):this.$outer.addClass("lg-use-css3"),h.setTop(),a(b).on("resize.lg orientationchange.lg",function(){setTimeout(function(){h.setTop()},100)}),this.$slide.eq(this.index).addClass("lg-current"),this.doCss()?this.$outer.addClass("lg-css3"):(this.$outer.addClass("lg-css"),this.s.speed=0),this.$outer.addClass(this.s.mode),this.s.enableDrag&&this.$items.length>1&&this.$outer.addClass("lg-grab"),this.s.showAfterLoad&&this.$outer.addClass("lg-show-after-load"),this.doCss()){var i=this.$outer.find(".lg-inner");i.css("transition-timing-function",this.s.cssEasing),i.css("transition-duration",this.s.speed+"ms")}a(".lg-backdrop").addClass("in"),setTimeout(function(){h.$outer.addClass("lg-visible")},this.s.backdropDuration),this.s.download&&this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>'),this.prevScrollTop=a(b).scrollTop()},e.prototype.setTop=function(){if("100%"!==this.s.height){var c=a(b).height(),d=(c-parseInt(this.s.height,10))/2,e=this.$outer.find(".lg");c>=parseInt(this.s.height,10)?e.css("top",d+"px"):e.css("top","0px")}},e.prototype.doCss=function(){var a=function(){var a=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],b=c.documentElement,d=0;for(d=0;d<a.length;d++)if(a[d]in b.style)return!0};return a()?!0:!1},e.prototype.isVideo=function(a,b){var c;if(c=this.s.dynamic?this.s.dynamicEl[b].html:this.$items.eq(b).attr("data-html"),!a&&c)return{html5:!0};var d=a.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),e=a.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),f=a.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i);return d?{youtube:d}:e?{vimeo:e}:f?{dailymotion:f}:void 0},e.prototype.counter=function(){this.s.counter&&a(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")},e.prototype.addHtml=function(b){var c,d=null;if(this.s.dynamic?this.s.dynamicEl[b].subHtmlUrl?c=this.s.dynamicEl[b].subHtmlUrl:d=this.s.dynamicEl[b].subHtml:this.$items.eq(b).attr("data-sub-html-url")?c=this.$items.eq(b).attr("data-sub-html-url"):d=this.$items.eq(b).attr("data-sub-html"),!c)if("undefined"!=typeof d&&null!==d){var e=d.substring(0,1);d="."===e||"#"===e?a(d).html():d}else d="";".lg-sub-html"===this.s.appendSubHtmlTo?c?this.$outer.find(this.s.appendSubHtmlTo).load(c):this.$outer.find(this.s.appendSubHtmlTo).html(d):c?this.$slide.eq(b).load(c):this.$slide.eq(b).append(d),"undefined"!=typeof d&&null!==d&&(""===d?this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html"):this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")),this.$el.trigger("onAfterAppendSubHtml.lg",[b])},e.prototype.preload=function(a){var b=1,c=1;for(b=1;b<=this.s.preload&&!(b>=this.$items.length-a);b++)this.loadContent(a+b,!1,0);for(c=1;c<=this.s.preload&&!(0>a-c);c++)this.loadContent(a-c,!1,0)},e.prototype.loadContent=function(c,d,e){var f,g,h,i,j,k,l=this,m=!1,n=function(c){for(var d=[],e=[],f=0;f<c.length;f++){var h=c[f].split(" ");""===h[0]&&h.splice(0,1),e.push(h[0]),d.push(h[1])}for(var i=a(b).width(),j=0;j<d.length;j++)if(parseInt(d[j],10)>i){g=e[j];break}};if(l.s.dynamic){if(l.s.dynamicEl[c].poster&&(m=!0,h=l.s.dynamicEl[c].poster),k=l.s.dynamicEl[c].html,g=l.s.dynamicEl[c].src,l.s.dynamicEl[c].responsive){var o=l.s.dynamicEl[c].responsive.split(",");n(o)}i=l.s.dynamicEl[c].srcset,j=l.s.dynamicEl[c].sizes}else{if(l.$items.eq(c).attr("data-poster")&&(m=!0,h=l.$items.eq(c).attr("data-poster")),k=l.$items.eq(c).attr("data-html"),g=l.$items.eq(c).attr("href")||l.$items.eq(c).attr("data-src"),l.$items.eq(c).attr("data-responsive")){var p=l.$items.eq(c).attr("data-responsive").split(",");n(p)}i=l.$items.eq(c).attr("data-srcset"),j=l.$items.eq(c).attr("data-sizes")}var q=!1;l.s.dynamic?l.s.dynamicEl[c].iframe&&(q=!0):"true"===l.$items.eq(c).attr("data-iframe")&&(q=!0);var r=l.isVideo(g,c);if(!l.$slide.eq(c).hasClass("lg-loaded")){if(q)l.$slide.eq(c).prepend('<div class="lg-video-cont" style="max-width:'+l.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+g+'"  allowfullscreen="true"></iframe></div></div>');else if(m){var s="";s=r&&r.youtube?"lg-has-youtube":r&&r.vimeo?"lg-has-vimeo":"lg-has-html5",l.$slide.eq(c).prepend('<div class="lg-video-cont '+s+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+h+'" /></div></div>')}else r?(l.$slide.eq(c).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>'),l.$el.trigger("hasVideo.lg",[c,g,k])):l.$slide.eq(c).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+g+'" /></div>');if(l.$el.trigger("onAferAppendSlide.lg",[c]),f=l.$slide.eq(c).find(".lg-object"),j&&f.attr("sizes",j),i){f.attr("srcset",i);try{picturefill({elements:[f[0]]})}catch(t){console.error("Make sure you have included Picturefill version 2")}}".lg-sub-html"!==this.s.appendSubHtmlTo&&l.addHtml(c),l.$slide.eq(c).addClass("lg-loaded")}l.$slide.eq(c).find(".lg-object").on("load.lg error.lg",function(){var b=0;e&&!a("body").hasClass("lg-from-hash")&&(b=e),setTimeout(function(){l.$slide.eq(c).addClass("lg-complete"),l.$el.trigger("onSlideItemLoad.lg",[c,e||0])},b)}),r&&r.html5&&!m&&l.$slide.eq(c).addClass("lg-complete"),d===!0&&(l.$slide.eq(c).hasClass("lg-complete")?l.preload(c):l.$slide.eq(c).find(".lg-object").on("load.lg error.lg",function(){l.preload(c)}))},e.prototype.slide=function(b,c,d){var e=this.$outer.find(".lg-current").index(),f=this;if(!f.lGalleryOn||e!==b){var g=this.$slide.length,h=f.lGalleryOn?this.s.speed:0,i=!1,j=!1;if(!f.lgBusy){if(this.$el.trigger("onBeforeSlide.lg",[e,b,c,d]),f.lgBusy=!0,clearTimeout(f.hideBartimeout),".lg-sub-html"===this.s.appendSubHtmlTo&&setTimeout(function(){f.addHtml(b)},h),this.arrowDisable(b),c){var k=b-1,l=b+1;0===b&&e===g-1?(l=0,k=g-1):b===g-1&&0===e&&(l=0,k=g-1),this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide"),f.$slide.eq(k).addClass("lg-prev-slide"),f.$slide.eq(l).addClass("lg-next-slide"),f.$slide.eq(b).addClass("lg-current")}else f.$outer.addClass("lg-no-trans"),this.$slide.removeClass("lg-prev-slide lg-next-slide"),e>b?(j=!0,0!==b||e!==g-1||d||(j=!1,i=!0)):b>e&&(i=!0,b!==g-1||0!==e||d||(j=!0,i=!1)),j?(this.$slide.eq(b).addClass("lg-prev-slide"),this.$slide.eq(e).addClass("lg-next-slide")):i&&(this.$slide.eq(b).addClass("lg-next-slide"),this.$slide.eq(e).addClass("lg-prev-slide")),setTimeout(function(){f.$slide.removeClass("lg-current"),f.$slide.eq(b).addClass("lg-current"),f.$outer.removeClass("lg-no-trans")},50);if(f.lGalleryOn?(setTimeout(function(){f.loadContent(b,!0,0)},this.s.speed+50),setTimeout(function(){f.lgBusy=!1,f.$el.trigger("onAfterSlide.lg",[e,b,c,d])},this.s.speed)):(f.loadContent(b,!0,f.s.backdropDuration),f.lgBusy=!1,f.$el.trigger("onAfterSlide.lg",[e,b,c,d])),this.s.download){var m;m=f.s.dynamic?f.s.dynamicEl[b].downloadUrl||f.s.dynamicEl[b].src:f.$items.eq(b).attr("data-download-url")||f.$items.eq(b).attr("href")||f.$items.eq(b).attr("data-src"),a("#lg-download").attr("href",m)}f.lGalleryOn=!0,this.s.counter&&a("#lg-counter-current").text(b+1)}}},e.prototype.goToNextSlide=function(a){var b=this;b.lgBusy||(b.index+1<b.$slide.length?(b.index++,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1)):b.s.loop?(b.index=0,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1)):b.s.slideEndAnimatoin&&(b.$outer.addClass("lg-right-end"),setTimeout(function(){b.$outer.removeClass("lg-right-end")},400)))},e.prototype.goToPrevSlide=function(a){var b=this;b.lgBusy||(b.index>0?(b.index--,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1)):b.s.loop?(b.index=b.$items.length-1,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1)):b.s.slideEndAnimatoin&&(b.$outer.addClass("lg-left-end"),setTimeout(function(){b.$outer.removeClass("lg-left-end")},400)))},e.prototype.keyPress=function(){var c=this;this.$items.length>1&&a(b).on("keyup.lg",function(a){c.$items.length>1&&(37===a.keyCode&&(a.preventDefault(),c.goToPrevSlide()),39===a.keyCode&&(a.preventDefault(),c.goToNextSlide()))}),a(b).on("keydown.lg",function(a){c.s.escKey===!0&&27===a.keyCode&&(a.preventDefault(),c.$outer.hasClass("lg-thumb-open")?c.$outer.removeClass("lg-thumb-open"):c.destroy())})},e.prototype.arrow=function(){var a=this;this.$outer.find(".lg-prev").on("click.lg",function(){a.goToPrevSlide()}),this.$outer.find(".lg-next").on("click.lg",function(){a.goToNextSlide()})},e.prototype.arrowDisable=function(a){!this.s.loop&&this.s.hideControlOnEnd&&(a+1<this.$slide.length?this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled"),a>0?this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled"))},e.prototype.setTranslate=function(a,b,c){this.s.useLeft?a.css("left",b):a.css({transform:"translate3d("+b+"px, "+c+"px, 0px)"})},e.prototype.touchMove=function(b,c){var d=c-b;this.$outer.addClass("lg-dragging"),this.setTranslate(this.$slide.eq(this.index),d,0),this.setTranslate(a(".lg-prev-slide"),-this.$slide.eq(this.index).width()+d,0),this.setTranslate(a(".lg-next-slide"),this.$slide.eq(this.index).width()+d,0)},e.prototype.touchEnd=function(a){var b=this;"lg-slide"!==b.s.mode&&b.$outer.addClass("lg-slide"),this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0"),setTimeout(function(){b.$outer.removeClass("lg-dragging"),0>a&&Math.abs(a)>b.s.swipeThreshold?b.goToNextSlide(!0):a>0&&Math.abs(a)>b.s.swipeThreshold?b.goToPrevSlide(!0):Math.abs(a)<5&&b.$el.trigger("onSlideClick.lg"),b.$slide.removeAttr("style")}),setTimeout(function(){b.$outer.hasClass("lg-dragging")||"lg-slide"===b.s.mode||b.$outer.removeClass("lg-slide")},b.s.speed+100)},e.prototype.enableSwipe=function(){var a=this,b=0,c=0,d=!1;a.s.enableSwipe&&a.isTouch&&a.doCss()&&(a.$slide.on("touchstart.lg",function(c){a.$outer.hasClass("lg-zoomed")||a.lgBusy||(c.preventDefault(),a.manageSwipeClass(),b=c.originalEvent.targetTouches[0].pageX)}),a.$slide.on("touchmove.lg",function(e){a.$outer.hasClass("lg-zoomed")||(e.preventDefault(),c=e.originalEvent.targetTouches[0].pageX,a.touchMove(b,c),d=!0)}),a.$slide.on("touchend.lg",function(){a.$outer.hasClass("lg-zoomed")||(d?(d=!1,a.touchEnd(c-b)):a.$el.trigger("onSlideClick.lg"))}))},e.prototype.enableDrag=function(){var c=this,d=0,e=0,f=!1,g=!1;c.s.enableDrag&&!c.isTouch&&c.doCss()&&(c.$slide.on("mousedown.lg",function(b){c.$outer.hasClass("lg-zoomed")||(a(b.target).hasClass("lg-object")||a(b.target).hasClass("lg-video-play"))&&(b.preventDefault(),c.lgBusy||(c.manageSwipeClass(),d=b.pageX,f=!0,c.$outer.scrollLeft+=1,c.$outer.scrollLeft-=1,c.$outer.removeClass("lg-grab").addClass("lg-grabbing"),c.$el.trigger("onDragstart.lg")))}),a(b).on("mousemove.lg",function(a){f&&(g=!0,e=a.pageX,c.touchMove(d,e),c.$el.trigger("onDragmove.lg"))}),a(b).on("mouseup.lg",function(b){g?(g=!1,c.touchEnd(e-d),c.$el.trigger("onDragend.lg")):(a(b.target).hasClass("lg-object")||a(b.target).hasClass("lg-video-play"))&&c.$el.trigger("onSlideClick.lg"),f&&(f=!1,c.$outer.removeClass("lg-grabbing").addClass("lg-grab"))}))},e.prototype.manageSwipeClass=function(){var a=this.index+1,b=this.index-1,c=this.$slide.length;this.s.loop&&(0===this.index?b=c-1:this.index===c-1&&(a=0)),this.$slide.removeClass("lg-next-slide lg-prev-slide"),b>-1&&this.$slide.eq(b).addClass("lg-prev-slide"),this.$slide.eq(a).addClass("lg-next-slide")},e.prototype.mousewheel=function(){var a=this;a.$outer.on("mousewheel.lg",function(b){b.deltaY&&(b.deltaY>0?a.goToPrevSlide():a.goToNextSlide(),b.preventDefault())})},e.prototype.closeGallery=function(){var b=this,c=!1;this.$outer.find(".lg-close").on("click.lg",function(){b.destroy()}),b.s.closable&&(b.$outer.on("mousedown.lg",function(b){c=a(b.target).is(".lg-outer")||a(b.target).is(".lg-item ")||a(b.target).is(".lg-img-wrap")?!0:!1}),b.$outer.on("mouseup.lg",function(d){(a(d.target).is(".lg-outer")||a(d.target).is(".lg-item ")||a(d.target).is(".lg-img-wrap")&&c)&&(b.$outer.hasClass("lg-dragging")||b.destroy())}))},e.prototype.destroy=function(c){var d=this;c||d.$el.trigger("onBeforeClose.lg"),a(b).scrollTop(d.prevScrollTop),c&&(d.s.dynamic||this.$items.off("click.lg click.lgcustom"),a.removeData(d.el,"lightGallery")),this.$el.off(".lg.tm"),a.each(a.fn.lightGallery.modules,function(a){d.modules[a]&&d.modules[a].destroy()}),this.lGalleryOn=!1,clearTimeout(d.hideBartimeout),this.hideBartimeout=!1,a(b).off(".lg"),a("body").removeClass("lg-on lg-from-hash"),d.$outer&&d.$outer.removeClass("lg-visible"),a(".lg-backdrop").removeClass("in"),setTimeout(function(){d.$outer&&d.$outer.remove(),a(".lg-backdrop").remove(),c||d.$el.trigger("onCloseAfter.lg")},d.s.backdropDuration+50)},a.fn.lightGallery=function(b){return this.each(function(){if(a.data(this,"lightGallery"))try{a(this).data("lightGallery").init()}catch(c){console.error("lightGallery has not initiated properly")}else a.data(this,"lightGallery",new e(this,b))})},a.fn.lightGallery.modules={}}(jQuery,window,document),function(a,b,c,d){"use strict";var e={autoplay:!1,pause:5e3,progressBar:!0,fourceAutoplay:!1,autoplayControls:!0,appendAutoplayControlsTo:".lg-toolbar"},f=function(b){return this.core=a(b).data("lightGallery"),this.$el=a(b),this.core.$items.length<2?!1:(this.core.s=a.extend({},e,this.core.s),this.interval=!1,this.fromAuto=!0,this.canceledOnTouch=!1,this.fourceAutoplayTemp=this.core.s.fourceAutoplay,this.core.doCss()||(this.core.s.progressBar=!1),this.init(),this)};f.prototype.init=function(){var a=this;a.core.s.autoplayControls&&a.controls(),a.core.s.progressBar&&a.core.$outer.find(".lg").append('<div class="lg-progress-bar"><div class="lg-progress"></div></div>'),a.progress(),a.core.s.autoplay&&a.startlAuto(),a.$el.on("onDragstart.lg.tm touchstart.lg.tm",function(){a.interval&&(a.cancelAuto(),a.canceledOnTouch=!0)}),a.$el.on("onDragend.lg.tm touchend.lg.tm onSlideClick.lg.tm",function(){!a.interval&&a.canceledOnTouch&&(a.startlAuto(),a.canceledOnTouch=!1)})},f.prototype.progress=function(){var a,b,c=this;c.$el.on("onBeforeSlide.lg.tm",function(){c.core.s.progressBar&&c.fromAuto&&(a=c.core.$outer.find(".lg-progress-bar"),b=c.core.$outer.find(".lg-progress"),c.interval&&(b.removeAttr("style"),a.removeClass("lg-start"),setTimeout(function(){b.css("transition","width "+(c.core.s.speed+c.core.s.pause)+"ms ease 0s"),a.addClass("lg-start")},20))),c.fromAuto||c.core.s.fourceAutoplay||c.cancelAuto(),c.fromAuto=!1})},f.prototype.controls=function(){var b=this,c='<span class="lg-autoplay-button lg-icon"></span>';a(this.core.s.appendAutoplayControlsTo).append(c),b.core.$outer.find(".lg-autoplay-button").on("click.lg",function(){a(b.core.$outer).hasClass("lg-show-autoplay")?(b.cancelAuto(),b.core.s.fourceAutoplay=!1):b.interval||(b.startlAuto(),b.core.s.fourceAutoplay=b.fourceAutoplayTemp)})},f.prototype.startlAuto=function(){var a=this;a.core.$outer.find(".lg-progress").css("transition","width "+(a.core.s.speed+a.core.s.pause)+"ms ease 0s"),a.core.$outer.addClass("lg-show-autoplay"),a.core.$outer.find(".lg-progress-bar").addClass("lg-start"),a.interval=setInterval(function(){a.core.index+1<a.core.$items.length?a.core.index=a.core.index:a.core.index=-1,a.core.index++,a.fromAuto=!0,a.core.slide(a.core.index,!1,!1)},a.core.s.speed+a.core.s.pause)},f.prototype.cancelAuto=function(){clearInterval(this.interval),this.interval=!1,this.core.$outer.find(".lg-progress").removeAttr("style"),this.core.$outer.removeClass("lg-show-autoplay"),this.core.$outer.find(".lg-progress-bar").removeClass("lg-start")},f.prototype.destroy=function(){this.cancelAuto(),this.core.$outer.find(".lg-progress-bar").remove()},a.fn.lightGallery.modules.autoplay=f}(jQuery,window,document),function(a,b,c,d){"use strict";var e={fullScreen:!0},f=function(b){return this.core=a(b).data("lightGallery"),this.$el=a(b),this.core.s=a.extend({},e,this.core.s),this.init(),this};f.prototype.init=function(){var a="";if(this.core.s.fullScreen){if(!(c.fullscreenEnabled||c.webkitFullscreenEnabled||c.mozFullScreenEnabled||c.msFullscreenEnabled))return;a='<span class="lg-fullscreen lg-icon"></span>',this.core.$outer.find(".lg-toolbar").append(a),this.fullScreen()}},f.prototype.requestFullscreen=function(){var a=c.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},f.prototype.exitFullscreen=function(){c.exitFullscreen?c.exitFullscreen():c.msExitFullscreen?c.msExitFullscreen():c.mozCancelFullScreen?c.mozCancelFullScreen():c.webkitExitFullscreen&&c.webkitExitFullscreen()},f.prototype.fullScreen=function(){var b=this;a(c).on("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg",function(){b.core.$outer.toggleClass("lg-fullscreen-on")}),this.core.$outer.find(".lg-fullscreen").on("click.lg",function(){c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement||c.msFullscreenElement?b.exitFullscreen():b.requestFullscreen()})},f.prototype.destroy=function(){this.exitFullscreen(),a(c).off("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg")},a.fn.lightGallery.modules.fullscreen=f}(jQuery,window,document),function(a,b,c,d){"use strict";var e={pager:!1},f=function(b){return this.core=a(b).data("lightGallery"),this.$el=a(b),this.core.s=a.extend({},e,this.core.s),this.core.s.pager&&this.core.$items.length>1&&this.init(),this};f.prototype.init=function(){var b,c,d,e=this,f="";if(e.core.$outer.find(".lg").append('<div class="lg-pager-outer"></div>'),e.core.s.dynamic)for(var g=0;g<e.core.s.dynamicEl.length;g++)f+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+e.core.s.dynamicEl[g].thumb+'" /></div></span>';else e.core.$items.each(function(){f+=e.core.s.exThumbImage?'<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+a(this).attr(e.core.s.exThumbImage)+'" /></div></span>':'<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+a(this).find("img").attr("src")+'" /></div></span>'});c=e.core.$outer.find(".lg-pager-outer"),c.html(f),b=e.core.$outer.find(".lg-pager-cont"),b.on("click.lg touchend.lg",function(){var b=a(this);e.core.index=b.index(),e.core.slide(e.core.index,!1,!1)}),c.on("mouseover.lg",function(){clearTimeout(d),c.addClass("lg-pager-hover")}),c.on("mouseout.lg",function(){d=setTimeout(function(){c.removeClass("lg-pager-hover")})}),e.core.$el.on("onBeforeSlide.lg.tm",function(a,c,d){b.removeClass("lg-pager-active"),b.eq(d).addClass("lg-pager-active")})},f.prototype.destroy=function(){},a.fn.lightGallery.modules.pager=f}(jQuery,window,document),function(a,b,c,d){"use strict";var e={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toogleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0},f=function(b){return this.core=a(b).data("lightGallery"),this.core.s=a.extend({},e,this.core.s),this.$el=a(b),this.$thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.left=0,this.init(),this};f.prototype.init=function(){this.core.s.thumbnail&&this.core.$items.length>1&&(this.core.s.showThumbByDefault&&this.core.$outer.addClass("lg-thumb-open"),this.core.s.pullCaptionUp&&this.core.$outer.addClass("lg-pull-caption-up"),this.build(),this.core.s.animateThumb?(this.core.s.enableThumbDrag&&!this.core.isTouch&&this.core.doCss()&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.core.isTouch&&this.core.doCss()&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toogle(),this.thumbkeyPress())},f.prototype.build=function(){function c(a,b,c){var d,h=e.core.isVideo(a,c)||{},i="";h.youtube||h.vimeo||h.dailymotion?h.youtube?d=e.core.s.loadYoutubeThumbnail?"//img.youtube.com/vi/"+h.youtube[1]+"/"+e.core.s.youtubeThumbSize+".jpg":b:h.vimeo?e.core.s.loadVimeoThumbnail?(d="//i.vimeocdn.com/video/error_"+g+".jpg",i=h.vimeo[1]):d=b:h.dailymotion&&(d=e.core.s.loadDailymotionThumbnail?"//www.dailymotion.com/thumbnail/video/"+h.dailymotion[1]:b):d=b,f+='<div data-vimeo-id="'+i+'" class="lg-thumb-item" style="width:'+e.core.s.thumbWidth+"px; margin-right: "+e.core.s.thumbMargin+'px"><img src="'+d+'" /></div>',i=""}var d,e=this,f="",g="",h='<div class="lg-thumb-outer"><div class="lg-thumb group"></div></div>';switch(this.core.s.vimeoThumbSize){case"thumbnail_large":g="640";break;case"thumbnail_medium":g="200x150";break;case"thumbnail_small":g="100x75"}if(e.core.$outer.addClass("lg-has-thumb"),e.core.$outer.find(".lg").append(h),e.$thumbOuter=e.core.$outer.find(".lg-thumb-outer"),e.thumbOuterWidth=e.$thumbOuter.width(),e.core.s.animateThumb&&e.core.$outer.find(".lg-thumb").css({width:e.thumbTotalWidth+"px",position:"relative"}),this.core.s.animateThumb&&e.$thumbOuter.css("height",e.core.s.thumbContHeight+"px"),e.core.s.dynamic)for(var i=0;i<e.core.s.dynamicEl.length;i++)c(e.core.s.dynamicEl[i].src,e.core.s.dynamicEl[i].thumb,i);else e.core.$items.each(function(b){e.core.s.exThumbImage?c(a(this).attr("href")||a(this).attr("data-src"),a(this).attr(e.core.s.exThumbImage),b):c(a(this).attr("href")||a(this).attr("data-src"),a(this).find("img").attr("src"),b)});e.core.$outer.find(".lg-thumb").html(f),d=e.core.$outer.find(".lg-thumb-item"),d.each(function(){var b=a(this),c=b.attr("data-vimeo-id");c&&a.getJSON("http://www.vimeo.com/api/v2/video/"+c+".json?callback=?",{format:"json"},function(a){b.find("img").attr("src",a[0][e.core.s.vimeoThumbSize])})}),d.eq(e.core.index).addClass("active"),e.core.$el.on("onBeforeSlide.lg.tm",function(){d.removeClass("active"),d.eq(e.core.index).addClass("active")}),d.on("click.lg touchend.lg",function(){var b=a(this);setTimeout(function(){(e.thumbClickable&&!e.core.lgBusy||!e.core.doCss())&&(e.core.index=b.index(),e.core.slide(e.core.index,!1,!0))},50)}),e.core.$el.on("onBeforeSlide.lg.tm",function(){e.animateThumb(e.core.index)}),a(b).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){e.animateThumb(e.core.index),e.thumbOuterWidth=e.$thumbOuter.width()},200)})},f.prototype.setTranslate=function(a){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+a+"px, 0px, 0px)"})},f.prototype.animateThumb=function(a){var b=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var c;switch(this.core.s.currentPagerPosition){case"left":c=0;break;case"middle":c=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":c=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*a-1-c,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),this.left<0&&(this.left=0),this.core.lGalleryOn?(b.hasClass("on")||this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms"),this.core.doCss()||b.animate({left:-this.left+"px"},this.core.s.speed)):this.core.doCss()||b.css("left",-this.left+"px"),this.setTranslate(this.left)}},f.prototype.enableThumbDrag=function(){var c=this,d=0,e=0,f=!1,g=!1,h=0;c.$thumbOuter.addClass("lg-grab"),c.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(a){c.thumbTotalWidth>c.thumbOuterWidth&&(a.preventDefault(),d=a.pageX,f=!0,c.core.$outer.scrollLeft+=1,c.core.$outer.scrollLeft-=1,c.thumbClickable=!1,c.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),a(b).on("mousemove.lg.thumb",function(a){f&&(h=c.left,g=!0,e=a.pageX,c.$thumbOuter.addClass("lg-dragging"),h-=e-d,h>c.thumbTotalWidth-c.thumbOuterWidth&&(h=c.thumbTotalWidth-c.thumbOuterWidth),0>h&&(h=0),c.setTranslate(h))}),a(b).on("mouseup.lg.thumb",function(){g?(g=!1,c.$thumbOuter.removeClass("lg-dragging"),c.left=h,Math.abs(e-d)<c.core.s.swipeThreshold&&(c.thumbClickable=!0)):c.thumbClickable=!0,f&&(f=!1,c.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab"))})},f.prototype.enableThumbSwipe=function(){var a=this,b=0,c=0,d=!1,e=0;a.core.$outer.find(".lg-thumb").on("touchstart.lg",function(c){a.thumbTotalWidth>a.thumbOuterWidth&&(c.preventDefault(),b=c.originalEvent.targetTouches[0].pageX,a.thumbClickable=!1)}),a.core.$outer.find(".lg-thumb").on("touchmove.lg",function(f){a.thumbTotalWidth>a.thumbOuterWidth&&(f.preventDefault(),c=f.originalEvent.targetTouches[0].pageX,d=!0,a.$thumbOuter.addClass("lg-dragging"),e=a.left,e-=c-b,e>a.thumbTotalWidth-a.thumbOuterWidth&&(e=a.thumbTotalWidth-a.thumbOuterWidth),0>e&&(e=0),a.setTranslate(e))}),a.core.$outer.find(".lg-thumb").on("touchend.lg",function(){a.thumbTotalWidth>a.thumbOuterWidth&&d?(d=!1,a.$thumbOuter.removeClass("lg-dragging"),Math.abs(c-b)<a.core.s.swipeThreshold&&(a.thumbClickable=!0),a.left=e):a.thumbClickable=!0})},f.prototype.toogle=function(){var a=this;a.core.s.toogleThumb&&(a.core.$outer.addClass("lg-can-toggle"),a.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>'),a.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){a.core.$outer.toggleClass("lg-thumb-open")}))},f.prototype.thumbkeyPress=function(){var c=this;a(b).on("keydown.lg.thumb",function(a){38===a.keyCode?(a.preventDefault(),c.core.$outer.addClass("lg-thumb-open")):40===a.keyCode&&(a.preventDefault(),c.core.$outer.removeClass("lg-thumb-open"))})},f.prototype.destroy=function(){this.core.s.thumbnail&&this.core.$items.length>1&&(a(b).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb"),this.$thumbOuter.remove(),this.core.$outer.removeClass("lg-has-thumb"))},a.fn.lightGallery.modules.Thumbnail=f}(jQuery,window,document),function(a,b,c,d){"use strict";var e={videoMaxWidth:"855px",youtubePlayerParams:!1,vimeoPlayerParams:!1,dailymotionPlayerParams:!1,videojs:!1},f=function(b){return this.core=a(b).data("lightGallery"),this.$el=a(b),this.core.s=a.extend({},e,this.core.s),this.videoLoaded=!1,this.init(),this};f.prototype.init=function(){var b=this;b.core.$el.on("hasVideo.lg.tm",function(a,c,d,e){if(b.core.$slide.eq(c).find(".lg-video").append(b.loadVideo(d,"lg-object",!0,c,e)),e)if(b.core.s.videojs)try{videojs(b.core.$slide.eq(c).find(".lg-html5").get(0),{},function(){b.videoLoaded||this.play()})}catch(f){console.error("Make sure you have included videojs")}else b.core.$slide.eq(c).find(".lg-html5").get(0).play()}),b.core.$el.on("onAferAppendSlide.lg.tm",function(a,c){b.core.$slide.eq(c).find(".lg-video-cont").css("max-width",b.core.s.videoMaxWidth),b.videoLoaded=!0});var c=function(a){if(a.find(".lg-object").hasClass("lg-has-poster")&&a.find(".lg-object").is(":visible"))if(a.hasClass("lg-has-video")){var c=a.find(".lg-youtube").get(0),d=a.find(".lg-vimeo").get(0),e=a.find(".lg-dailymotion").get(0),f=a.find(".lg-html5").get(0);if(c)c.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");else if(d)try{$f(d).api("play")}catch(g){console.error("Make sure you have included froogaloop2 js")}else if(e)e.contentWindow.postMessage("play","*");else if(f)if(b.core.s.videojs)try{videojs(f).play()}catch(g){console.error("Make sure you have included videojs")}else f.play();a.addClass("lg-video-palying")}else{a.addClass("lg-video-palying lg-has-video");var h,i,j=function(c,d){if(a.find(".lg-video").append(b.loadVideo(c,"",!1,b.core.index,d)),d)if(b.core.s.videojs)try{videojs(b.core.$slide.eq(b.core.index).find(".lg-html5").get(0),{},function(){this.play()})}catch(e){console.error("Make sure you have included videojs")}else b.core.$slide.eq(b.core.index).find(".lg-html5").get(0).play()};b.core.s.dynamic?(h=b.core.s.dynamicEl[b.core.index].src,i=b.core.s.dynamicEl[b.core.index].html,j(h,i)):(h=b.core.$items.eq(b.core.index).attr("href")||b.core.$items.eq(b.core.index).attr("data-src"),
i=b.core.$items.eq(b.core.index).attr("data-html"),j(h,i));var k=a.find(".lg-object");a.find(".lg-video").append(k),a.find(".lg-video-object").hasClass("lg-html5")||(a.removeClass("lg-complete"),a.find(".lg-video-object").on("load.lg error.lg",function(){a.addClass("lg-complete")}))}};b.core.doCss()&&b.core.$items.length>1&&(b.core.s.enableSwipe&&b.core.isTouch||b.core.s.enableDrag&&!b.core.isTouch)?b.core.$el.on("onSlideClick.lg.tm",function(){var a=b.core.$slide.eq(b.core.index);c(a)}):b.core.$slide.on("click.lg",function(){c(a(this))}),b.core.$el.on("onBeforeSlide.lg.tm",function(a,c){var d=b.core.$slide.eq(c),e=d.find(".lg-youtube").get(0),f=d.find(".lg-vimeo").get(0),g=d.find(".lg-dailymotion").get(0),h=d.find(".lg-html5").get(0);if(e)e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");else if(f)try{$f(f).api("pause")}catch(i){console.error("Make sure you have included froogaloop2 js")}else if(g)g.contentWindow.postMessage("pause","*");else if(h)if(b.core.s.videojs)try{videojs(h).pause()}catch(i){console.error("Make sure you have included videojs")}else h.pause()}),b.core.$el.on("onAfterSlide.lg.tm",function(a,c){b.core.$slide.eq(c).removeClass("lg-video-palying")})},f.prototype.loadVideo=function(b,c,d,e,f){var g="",h=1,i="",j=this.core.isVideo(b,e)||{};if(d&&(h=this.videoLoaded?0:1),j.youtube)i="?wmode=opaque&autoplay="+h+"&enablejsapi=1",this.core.s.youtubePlayerParams&&(i=i+"&"+a.param(this.core.s.youtubePlayerParams)),g='<iframe class="lg-video-object lg-youtube '+c+'" width="560" height="315" src="//www.youtube.com/embed/'+j.youtube[1]+i+'" frameborder="0" allowfullscreen></iframe>';else if(j.vimeo)i="?autoplay="+h+"&api=1",this.core.s.vimeoPlayerParams&&(i=i+"&"+a.param(this.core.s.vimeoPlayerParams)),g='<iframe class="lg-video-object lg-vimeo '+c+'" width="560" height="315"  src="http://player.vimeo.com/video/'+j.vimeo[1]+i+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';else if(j.dailymotion)i="?wmode=opaque&autoplay="+h+"&api=postMessage",this.core.s.dailymotionPlayerParams&&(i=i+"&"+a.param(this.core.s.dailymotionPlayerParams)),g='<iframe class="lg-video-object lg-dailymotion '+c+'" width="560" height="315" src="//www.dailymotion.com/embed/video/'+j.dailymotion[1]+i+'" frameborder="0" allowfullscreen></iframe>';else if(j.html5){var k=f.substring(0,1);("."===k||"#"===k)&&(f=a(f).html()),g=f}return g},f.prototype.destroy=function(){this.videoLoaded=!1},a.fn.lightGallery.modules.video=f}(jQuery,window,document),function(a,b,c,d){"use strict";var e={scale:1,zoom:!0,enableZoomAfter:300},f=function(c){return this.core=a(c).data("lightGallery"),this.core.s=a.extend({},e,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=a(b).width()/2,this.pageY=a(b).height()/2+a(b).scrollTop()),this};f.prototype.init=function(){var c=this,d='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';this.core.$outer.find(".lg-toolbar").append(d),c.core.$el.on("onSlideItemLoad.lg.tm.zoom",function(b,d,e){var f=c.core.s.enableZoomAfter+e;a("body").hasClass("lg-from-hash")&&e?f=0:a("body").removeClass("lg-from-hash"),c.zoomabletimeout=setTimeout(function(){c.core.$slide.eq(d).addClass("lg-zoomable")},f+30)});var e=1,f=function(d){var e,f,g=c.core.$outer.find(".lg-current .lg-image"),h=(a(b).width()-g.width())/2,i=(a(b).height()-g.height())/2+a(b).scrollTop();e=c.pageX-h,f=c.pageY-i;var j=(d-1)*e,k=(d-1)*f;g.css("transform","scale3d("+d+", "+d+", 1)").attr("data-scale",d),g.parent().css("transform","translate3d(-"+j+"px, -"+k+"px, 0)").attr("data-x",j).attr("data-y",k)},g=function(){e>1?c.core.$outer.addClass("lg-zoomed"):c.resetZoom(),1>e&&(e=1),f(e)};c.core.$el.on("onAferAppendSlide.lg.tm.zoom",function(a,b){var d=c.core.$slide.eq(b).find(".lg-image");d.dblclick(function(a){var f,h=d.width(),i=c.core.$items.eq(b).attr("data-width")||d[0].naturalWidth||h;c.core.$outer.hasClass("lg-zoomed")?e=1:i>h&&(f=i/h,e=f||2),c.pageX=a.pageX,c.pageY=a.pageY,g(),setTimeout(function(){c.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")},10)})}),a(b).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom",function(){c.pageX=a(b).width()/2,c.pageY=a(b).height()/2+a(b).scrollTop(),f(e)}),a("#lg-zoom-out").on("click.lg",function(){c.core.$outer.find(".lg-current .lg-image").length&&(e-=c.core.s.scale,g())}),a("#lg-zoom-in").on("click.lg",function(){c.core.$outer.find(".lg-current .lg-image").length&&(e+=c.core.s.scale,g())}),c.core.$el.on("onBeforeSlide.lg.tm",function(){c.resetZoom()}),c.core.isTouch||c.zoomDrag(),c.core.isTouch&&c.zoomSwipe()},f.prototype.resetZoom=function(){this.core.$outer.removeClass("lg-zoomed"),this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y"),this.core.$slide.find(".lg-image").removeAttr("style data-scale"),this.pageX=a(b).width()/2,this.pageY=a(b).height()/2+a(b).scrollTop()},f.prototype.zoomSwipe=function(){var a=this,b={},c={},d=!1,e=!1,f=!1;a.core.$slide.on("touchstart.lg",function(c){if(a.core.$outer.hasClass("lg-zoomed")){var d=a.core.$slide.eq(a.core.index).find(".lg-object");f=d.outerHeight()*d.attr("data-scale")>a.core.$outer.find(".lg").height(),e=d.outerWidth()*d.attr("data-scale")>a.core.$outer.find(".lg").width(),(e||f)&&(c.preventDefault(),b={x:c.originalEvent.targetTouches[0].pageX,y:c.originalEvent.targetTouches[0].pageY})}}),a.core.$slide.on("touchmove.lg",function(g){if(a.core.$outer.hasClass("lg-zoomed")){var h,i,j=a.core.$slide.eq(a.core.index).find(".lg-img-wrap");g.preventDefault(),d=!0,c={x:g.originalEvent.targetTouches[0].pageX,y:g.originalEvent.targetTouches[0].pageY},a.core.$outer.addClass("lg-zoom-dragging"),i=f?-Math.abs(j.attr("data-y"))+(c.y-b.y):-Math.abs(j.attr("data-y")),h=e?-Math.abs(j.attr("data-x"))+(c.x-b.x):-Math.abs(j.attr("data-x")),j.css("transform","translate3d("+h+"px, "+i+"px, 0)")}}),a.core.$slide.on("touchend.lg",function(){a.core.$outer.hasClass("lg-zoomed")&&d&&(d=!1,a.core.$outer.removeClass("lg-zoom-dragging"),a.touchendZoom(b,c,e,f))})},f.prototype.zoomDrag=function(){var c=this,d={},e={},f=!1,g=!1,h=!1,i=!1;c.core.$slide.on("mousedown.lg.zoom",function(b){var e=c.core.$slide.eq(c.core.index).find(".lg-object");i=e.outerHeight()*e.attr("data-scale")>c.core.$outer.find(".lg").height(),h=e.outerWidth()*e.attr("data-scale")>c.core.$outer.find(".lg").width(),c.core.$outer.hasClass("lg-zoomed")&&a(b.target).hasClass("lg-object")&&(h||i)&&(b.preventDefault(),d={x:b.pageX,y:b.pageY},f=!0,c.core.$outer.scrollLeft+=1,c.core.$outer.scrollLeft-=1,c.core.$outer.removeClass("lg-grab").addClass("lg-grabbing"))}),a(b).on("mousemove.lg.zoom",function(a){if(f){var b,j,k=c.core.$slide.eq(c.core.index).find(".lg-img-wrap");g=!0,e={x:a.pageX,y:a.pageY},c.core.$outer.addClass("lg-zoom-dragging"),j=i?-Math.abs(k.attr("data-y"))+(e.y-d.y):-Math.abs(k.attr("data-y")),b=h?-Math.abs(k.attr("data-x"))+(e.x-d.x):-Math.abs(k.attr("data-x")),k.css("transform","translate3d("+b+"px, "+j+"px, 0)")}}),a(b).on("mouseup.lg.zoom",function(a){f&&(f=!1,c.core.$outer.removeClass("lg-zoom-dragging"),!g||d.x===e.x&&d.y===e.y||(e={x:a.pageX,y:a.pageY},c.touchendZoom(d,e,h,i)),g=!1),c.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")})},f.prototype.touchendZoom=function(a,b,c,d){var e=this,f=e.core.$slide.eq(e.core.index).find(".lg-img-wrap"),g=e.core.$slide.eq(e.core.index).find(".lg-object"),h=-Math.abs(f.attr("data-x"))+(b.x-a.x),i=-Math.abs(f.attr("data-y"))+(b.y-a.y),j=(e.core.$outer.find(".lg").height()-g.outerHeight())/2,k=Math.abs(g.outerHeight()*Math.abs(g.attr("data-scale"))-e.core.$outer.find(".lg").height()+j),l=(e.core.$outer.find(".lg").width()-g.outerWidth())/2,m=Math.abs(g.outerWidth()*Math.abs(g.attr("data-scale"))-e.core.$outer.find(".lg").width()+l);d&&(-k>=i?i=-k:i>=-j&&(i=-j)),c&&(-m>=h?h=-m:h>=-l&&(h=-l)),d?f.attr("data-y",Math.abs(i)):i=-Math.abs(f.attr("data-y")),c?f.attr("data-x",Math.abs(h)):h=-Math.abs(f.attr("data-x")),f.css("transform","translate3d("+h+"px, "+i+"px, 0)")},f.prototype.destroy=function(){var c=this;c.core.$el.off(".lg.zoom"),a(b).off(".lg.zoom"),c.core.$slide.off(".lg.zoom"),c.core.$el.off(".lg.tm.zoom"),c.resetZoom(),clearTimeout(c.zoomabletimeout),c.zoomabletimeout=!1},a.fn.lightGallery.modules.zoom=f}(jQuery,window,document),function(a,b,c,d){"use strict";var e={hash:!0},f=function(c){return this.core=a(c).data("lightGallery"),this.core.s=a.extend({},e,this.core.s),this.core.s.hash&&(this.oldHash=b.location.hash,this.init()),this};f.prototype.init=function(){var c,d=this;d.core.$el.on("onAfterSlide.lg.tm",function(a,c,e){b.location.hash="lg="+d.core.s.galleryId+"&slide="+e}),a(b).on("hashchange",function(){c=b.location.hash;var a=parseInt(c.split("&slide=")[1],10);c.indexOf("lg="+d.core.s.galleryId)>-1?d.core.slide(a):d.core.lGalleryOn&&d.core.destroy()})},f.prototype.destroy=function(){this.oldHash&&this.oldHash.indexOf("lg="+this.core.s.galleryId)<0?b.location.hash=this.oldHash:history.pushState?history.pushState("",c.title,b.location.pathname+b.location.search):b.location.hash=""},a.fn.lightGallery.modules.hash=f}(jQuery,window,document);
/*-----------------------------------------------------------------------------------*/
/*	08. OWL CAROUSEL
/*-----------------------------------------------------------------------------------*/
/**
 * Owl carousel
 * @version 2.0.0
 * @author Bartosz Wojciechowski
 * @license The MIT License (MIT)
 * @todo Lazy Load Icon
 * @todo prevent animationend bubling
 * @todo itemsScaleUp
 * @todo Test Zepto
 * @todo stagePadding calculate wrong active classes
 */
!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this.drag=a.extend({},m),this.state=a.extend({},n),this.e=a.extend({},o),this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._invalidated={},this._pipe=[],a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a[0].toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Pipe,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}function f(a){if(a.touches!==d)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(a.touches===d){if(a.pageX!==d)return{x:a.pageX,y:a.pageY};if(a.pageX===d)return{x:a.clientX,y:a.clientY}}}function g(a){var b,d,e=c.createElement("div"),f=a;for(b in f)if(d=f[b],"undefined"!=typeof e.style[d])return e=null,[d,b];return[!1]}function h(){return g(["transition","WebkitTransition","MozTransition","OTransition"])[1]}function i(){return g(["transform","WebkitTransform","MozTransform","OTransform","msTransform"])[0]}function j(){return g(["perspective","webkitPerspective","MozPerspective","OPerspective","MsPerspective"])[0]}function k(){return"ontouchstart"in b||!!navigator.msMaxTouchPoints}function l(){return b.navigator.msPointerEnabled}var m,n,o;m={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null},n={isTouch:!1,isScrolling:!1,isSwiping:!1,direction:!1,inMotion:!1},o={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,_goToLoop:null,_checkVisibile:null},e.Defaults={items:3,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,responsiveClass:!1,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",themeClass:"owl-theme",baseClass:"owl-carousel",itemClass:"owl-item",centerClass:"center",activeClass:"active"},e.Width={Default:"default",Inner:"inner",Outer:"outer"},e.Plugins={},e.Pipe=[{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){var a=this._clones,b=this.$stage.children(".cloned");(b.length!==a.length||!this.settings.loop&&a.length>0)&&(this.$stage.children(".cloned").remove(),this._clones=[])}},{filter:["items","settings"],run:function(){var a,b,c=this._clones,d=this._items,e=this.settings.loop?c.length-Math.max(2*this.settings.items,4):0;for(a=0,b=Math.abs(e/2);b>a;a++)e>0?(this.$stage.children().eq(d.length+c.length-1).remove(),c.pop(),this.$stage.children().eq(0).remove(),c.pop()):(c.push(c.length/2),this.$stage.append(d[c[c.length-1]].clone().addClass("cloned")),c.push(d.length-1-(c.length-1)/2),this.$stage.prepend(d[c[c.length-1]].clone().addClass("cloned")))}},{filter:["width","items","settings"],run:function(){var a,b,c,d=this.settings.rtl?1:-1,e=(this.width()/this.settings.items).toFixed(),f=0;for(this._coordinates=[],b=0,c=this._clones.length+this._items.length;c>b;b++)a=this._mergers[this.relative(b)],a=this.settings.mergeFit&&Math.min(a,this.settings.items)||a,f+=(this.settings.autoWidth?this._items[this.relative(b)].width()+this.settings.margin:e*a)*d,this._coordinates.push(f)}},{filter:["width","items","settings"],run:function(){var b,c,d=(this.width()/this.settings.items).toFixed(),e={width:Math.abs(this._coordinates[this._coordinates.length-1])+2*this.settings.stagePadding,"padding-left":this.settings.stagePadding||"","padding-right":this.settings.stagePadding||""};if(this.$stage.css(e),e={width:this.settings.autoWidth?"auto":d-this.settings.margin},e[this.settings.rtl?"margin-left":"margin-right"]=this.settings.margin,!this.settings.autoWidth&&a.grep(this._mergers,function(a){return a>1}).length>0)for(b=0,c=this._coordinates.length;c>b;b++)e.width=Math.abs(this._coordinates[b])-Math.abs(this._coordinates[b-1]||0)-this.settings.margin,this.$stage.children().eq(b).css(e);else this.$stage.children().css(e)}},{filter:["width","items","settings"],run:function(a){a.current&&this.reset(this.$stage.children().index(a.current))}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;d>c;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,"<=",g)&&this.op(a,">",h)||this.op(b,"<",g)&&this.op(b,">",h))&&i.push(c);this.$stage.children("."+this.settings.activeClass).removeClass(this.settings.activeClass),this.$stage.children(":eq("+i.join("), :eq(")+")").addClass(this.settings.activeClass),this.settings.center&&(this.$stage.children("."+this.settings.centerClass).removeClass(this.settings.centerClass),this.$stage.children().eq(this.current()).addClass(this.settings.centerClass))}}],e.prototype.initialize=function(){if(this.trigger("initialize"),this.$element.addClass(this.settings.baseClass).addClass(this.settings.themeClass).toggleClass("owl-rtl",this.settings.rtl),this.browserSupport(),this.settings.autoWidth&&this.state.imagesLoaded!==!0){var b,c,e;if(b=this.$element.find("img"),c=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,e=this.$element.children(c).width(),b.length&&0>=e)return this.preloadAutoWidthImages(b),!1}this.$element.addClass("owl-loading"),this.$stage=a("<"+this.settings.stageElement+' class="owl-stage"/>').wrap('<div class="owl-stage-outer">'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this._width=this.$element.width(),this.refresh(),this.$element.removeClass("owl-loading").addClass("owl-loaded"),this.eventsCall(),this.internalEvents(),this.addTriggerableEvents(),this.trigger("initialized")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){b>=a&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),delete e.responsive,e.responsiveClass&&this.$element.attr("class",function(a,b){return b.replace(/\b owl-responsive-\S+/g,"")}).addClass("owl-responsive-"+d)):e=a.extend({},this.options),(null===this.settings||this._breakpoint!==d)&&(this.trigger("change",{property:{name:"settings",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}}))},e.prototype.optionsLogic=function(){this.$element.toggleClass("owl-center",this.settings.center),this.settings.loop&&this._items.length<this.settings.items&&(this.settings.loop=!1),this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger("prepare",{content:b});return c.data||(c.data=a("<"+this.settings.itemElement+"/>").addClass(this.settings.itemClass).append(b)),this.trigger("prepared",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};c>b;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={}},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){if(0===this._items.length)return!1;(new Date).getTime();this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$stage.addClass("owl-refresh"),this.update(),this.$stage.removeClass("owl-refresh"),this.state.orientation=b.orientation,this.watchVisibility(),this.trigger("refreshed")},e.prototype.eventsCall=function(){this.e._onDragStart=a.proxy(function(a){this.onDragStart(a)},this),this.e._onDragMove=a.proxy(function(a){this.onDragMove(a)},this),this.e._onDragEnd=a.proxy(function(a){this.onDragEnd(a)},this),this.e._onResize=a.proxy(function(a){this.onResize(a)},this),this.e._transitionEnd=a.proxy(function(a){this.transitionEnd(a)},this),this.e._preventClick=a.proxy(function(a){this.preventClick(a)},this)},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this.e._onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return this._items.length?this._width===this.$element.width()?!1:this.trigger("resize").isDefaultPrevented()?!1:(this._width=this.$element.width(),this.invalidate("width"),this.refresh(),void this.trigger("resized")):!1},e.prototype.eventsRouter=function(a){var b=a.type;"mousedown"===b||"touchstart"===b?this.onDragStart(a):"mousemove"===b||"touchmove"===b?this.onDragMove(a):"mouseup"===b||"touchend"===b?this.onDragEnd(a):"touchcancel"===b&&this.onDragEnd(a)},e.prototype.internalEvents=function(){var c=(k(),l());this.settings.mouseDrag?(this.$stage.on("mousedown",a.proxy(function(a){this.eventsRouter(a)},this)),this.$stage.on("dragstart",function(){return!1}),this.$stage.get(0).onselectstart=function(){return!1}):this.$element.addClass("owl-text-select-on"),this.settings.touchDrag&&!c&&this.$stage.on("touchstart touchcancel",a.proxy(function(a){this.eventsRouter(a)},this)),this.transitionEndVendor&&this.on(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd,!1),this.settings.responsive!==!1&&this.on(b,"resize",a.proxy(this.onThrottledResize,this))},e.prototype.onDragStart=function(d){var e,g,h,i;if(e=d.originalEvent||d||b.event,3===e.which||this.state.isTouch)return!1;if("mousedown"===e.type&&this.$stage.addClass("owl-grab"),this.trigger("drag"),this.drag.startTime=(new Date).getTime(),this.speed(0),this.state.isTouch=!0,this.state.isScrolling=!1,this.state.isSwiping=!1,this.drag.distance=0,g=f(e).x,h=f(e).y,this.drag.offsetX=this.$stage.position().left,this.drag.offsetY=this.$stage.position().top,this.settings.rtl&&(this.drag.offsetX=this.$stage.position().left+this.$stage.width()-this.width()+this.settings.margin),this.state.inMotion&&this.support3d)i=this.getTransformProperty(),this.drag.offsetX=i,this.animate(i),this.state.inMotion=!0;else if(this.state.inMotion&&!this.support3d)return this.state.inMotion=!1,!1;this.drag.startX=g-this.drag.offsetX,this.drag.startY=h-this.drag.offsetY,this.drag.start=g-this.drag.startX,this.drag.targetEl=e.target||e.srcElement,this.drag.updatedX=this.drag.start,("IMG"===this.drag.targetEl.tagName||"A"===this.drag.targetEl.tagName)&&(this.drag.targetEl.draggable=!1),a(c).on("mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents",a.proxy(function(a){this.eventsRouter(a)},this))},e.prototype.onDragMove=function(a){var c,e,g,h,i,j;this.state.isTouch&&(this.state.isScrolling||(c=a.originalEvent||a||b.event,e=f(c).x,g=f(c).y,this.drag.currentX=e-this.drag.startX,this.drag.currentY=g-this.drag.startY,this.drag.distance=this.drag.currentX-this.drag.offsetX,this.drag.distance<0?this.state.direction=this.settings.rtl?"right":"left":this.drag.distance>0&&(this.state.direction=this.settings.rtl?"left":"right"),this.settings.loop?this.op(this.drag.currentX,">",this.coordinates(this.minimum()))&&"right"===this.state.direction?this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length):this.op(this.drag.currentX,"<",this.coordinates(this.maximum()))&&"left"===this.state.direction&&(this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)):(h=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),i=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),j=this.settings.pullDrag?this.drag.distance/5:0,this.drag.currentX=Math.max(Math.min(this.drag.currentX,h+j),i+j)),(this.drag.distance>8||this.drag.distance<-8)&&(c.preventDefault!==d?c.preventDefault():c.returnValue=!1,this.state.isSwiping=!0),this.drag.updatedX=this.drag.currentX,(this.drag.currentY>16||this.drag.currentY<-16)&&this.state.isSwiping===!1&&(this.state.isScrolling=!0,this.drag.updatedX=this.drag.start),this.animate(this.drag.updatedX)))},e.prototype.onDragEnd=function(b){var d,e,f;if(this.state.isTouch){if("mouseup"===b.type&&this.$stage.removeClass("owl-grab"),this.trigger("dragged"),this.drag.targetEl.removeAttribute("draggable"),this.state.isTouch=!1,this.state.isScrolling=!1,this.state.isSwiping=!1,0===this.drag.distance&&this.state.inMotion!==!0)return this.state.inMotion=!1,!1;this.drag.endTime=(new Date).getTime(),d=this.drag.endTime-this.drag.startTime,e=Math.abs(this.drag.distance),(e>3||d>300)&&this.removeClick(this.drag.targetEl),f=this.closest(this.drag.updatedX),this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(f),this.invalidate("position"),this.update(),this.settings.pullDrag||this.drag.updatedX!==this.coordinates(f)||this.transitionEnd(),this.drag.distance=0,a(c).off(".owl.dragEvents")}},e.prototype.removeClick=function(c){this.drag.targetEl=c,a(c).on("click.preventClick",this.e._preventClick),b.setTimeout(function(){a(c).off("click.preventClick")},300)},e.prototype.preventClick=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation&&b.stopPropagation(),a(b.target).off("click.preventClick")},e.prototype.getTransformProperty=function(){var a,c;return a=b.getComputedStyle(this.$stage.get(0),null).getPropertyValue(this.vendorName+"transform"),a=a.replace(/matrix(3d)?\(|\)/g,"").split(","),c=16===a.length,c!==!0?a[4]:a[12]},e.prototype.closest=function(b){var c=-1,d=30,e=this.width(),f=this.coordinates();return this.settings.freeDrag||a.each(f,a.proxy(function(a,g){return b>g-d&&g+d>b?c=a:this.op(b,"<",g)&&this.op(b,">",f[a+1]||g-e)&&(c="left"===this.state.direction?a+1:a),-1===c},this)),this.settings.loop||(this.op(b,">",f[this.minimum()])?c=b=this.minimum():this.op(b,"<",f[this.maximum()])&&(c=b=this.maximum())),c},e.prototype.animate=function(b){this.trigger("translate"),this.state.inMotion=this.speed()>0,this.support3d?this.$stage.css({transform:"translate3d("+b+"px,0px, 0px)",transition:this.speed()/1e3+"s"}):this.state.isTouch?this.$stage.css({left:b+"px"}):this.$stage.animate({left:b},this.speed()/1e3,this.settings.fallbackEasing,a.proxy(function(){this.state.inMotion&&this.transitionEnd()},this))},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.invalidate=function(a){this._invalidated[a]=!0},e.prototype.reset=function(a){a=this.normalize(a),a!==d&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))},e.prototype.normalize=function(b,c){var e=c?this._items.length:this._items.length+this._clones.length;return!a.isNumeric(b)||1>e?d:b=this._clones.length?(b%e+e)%e:Math.max(this.minimum(c),Math.min(this.maximum(c),b))},e.prototype.relative=function(a){return a=this.normalize(a),a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=0,f=this.settings;if(a)return this._items.length-1;if(!f.loop&&f.center)b=this._items.length-1;else if(f.loop||f.center)if(f.loop||f.center)b=this._items.length+f.items;else{if(!f.autoWidth&&!f.merge)throw"Can not detect maximum absolute position.";for(revert=f.rtl?1:-1,c=this.$stage.width()-this.$element.width();(d=this.coordinates(e))&&!(d*revert>=c);)b=++e}else b=this._items.length-f.items;return b},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2===0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c=null;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[b-1]||0))/2*(this.settings.rtl?-1:1)):c=this._coordinates[b-1]||0,c)},e.prototype.duration=function(a,b,c){return Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(c,d){if(this.settings.loop){var e=c-this.relative(this.current()),f=this.current(),g=this.current(),h=this.current()+e,i=0>g-h?!0:!1,j=this._clones.length+this._items.length;h<this.settings.items&&i===!1?(f=g+this._items.length,this.reset(f)):h>=j-this.settings.items&&i===!0&&(f=g-this._items.length,this.reset(f)),b.clearTimeout(this.e._goToLoop),this.e._goToLoop=b.setTimeout(a.proxy(function(){this.speed(this.duration(this.current(),f+e,d)),this.current(f+e),this.update()},this),30)}else this.speed(this.duration(this.current(),c,d)),this.current(c),this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.transitionEnd=function(a){return a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0))?!1:(this.state.inMotion=!1,void this.trigger("translated"))},e.prototype.viewport=function(){var d;if(this.options.responsiveBaseElement!==b)d=a(this.options.responsiveBaseElement).width();else if(b.innerWidth)d=b.innerWidth;else{if(!c.documentElement||!c.documentElement.clientWidth)throw"Can not detect viewport width.";d=c.documentElement.clientWidth}return d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find("."+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)},this)),this.reset(a.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},e.prototype.add=function(a,b){b=b===d?this._items.length:this.normalize(b,!0),this.trigger("add",{content:a,position:b}),0===this._items.length||b===this._items.length?(this.$stage.append(a),this._items.push(a),this._mergers.push(1*a.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)):(this._items[b].before(a),this._items.splice(b,0,a),this._mergers.splice(b,0,1*a.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)),this.invalidate("items"),this.trigger("added",{content:a,position:b})},e.prototype.remove=function(a){a=this.normalize(a,!0),a!==d&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))},e.prototype.addTriggerableEvents=function(){var b=a.proxy(function(b,c){return a.proxy(function(a){a.relatedTarget!==this&&(this.suppress([c]),b.apply(this,[].slice.call(arguments,1)),this.release([c]))},this)},this);a.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.replace,add:this.add,remove:this.remove},a.proxy(function(a,c){this.$element.on(a+".owl.carousel",b(c,a+".owl.carousel"))},this))},e.prototype.watchVisibility=function(){function c(a){return a.offsetWidth>0&&a.offsetHeight>0}function d(){c(this.$element.get(0))&&(this.$element.removeClass("owl-hidden"),this.refresh(),b.clearInterval(this.e._checkVisibile))}c(this.$element.get(0))||(this.$element.addClass("owl-hidden"),b.clearInterval(this.e._checkVisibile),this.e._checkVisibile=b.setInterval(a.proxy(d,this),500))},e.prototype.preloadAutoWidthImages=function(b){var c,d,e,f;c=0,d=this,b.each(function(g,h){e=a(h),f=new Image,f.onload=function(){c++,e.attr("src",f.src),e.css("opacity",1),c>=b.length&&(d.state.imagesLoaded=!0,d.initialize())},f.src=e.attr("src")||e.attr("data-src")||e.attr("data-src-retina")})},e.prototype.destroy=function(){this.$element.hasClass(this.settings.themeClass)&&this.$element.removeClass(this.settings.themeClass),this.settings.responsive!==!1&&a(b).off("resize.owl.carousel"),this.transitionEndVendor&&this.off(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd);for(var d in this._plugins)this._plugins[d].destroy();(this.settings.mouseDrag||this.settings.touchDrag)&&(this.$stage.off("mousedown touchstart touchcancel"),a(c).off(".owl.dragEvents"),this.$stage.get(0).onselectstart=function(){},this.$stage.off("dragstart",function(){return!1})),this.$element.off(".owl"),this.$stage.children(".cloned").remove(),this.e=null,this.$element.removeData("owlCarousel"),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.unwrap()},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?a>c:c>a;case">":return d?c>a:a>c;case">=":return d?c>=a:a>=c;case"<=":return d?a>=c:c>=a}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d){var e={item:{count:this._items.length,index:this.current()}},f=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),g=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},e,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(g)}),this.$element.trigger(g),this.settings&&"function"==typeof this.settings[f]&&this.settings[f].apply(this,g)),g},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.browserSupport=function(){if(this.support3d=j(),this.support3d){this.transformVendor=i();var a=["transitionend","webkitTransitionEnd","transitionend","oTransitionEnd"];this.transitionEndVendor=a[h()],this.vendorName=this.transformVendor.replace(/Transform/i,""),this.vendorName=""!==this.vendorName?"-"+this.vendorName.toLowerCase()+"-":""}this.state.orientation=b.orientation},a.fn.owlCarousel=function(b){return this.each(function(){a(this).data("owlCarousel")||a(this).data("owlCarousel",new e(this,b))})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b){var c=function(b){this._core=b,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&"position"==b.property.name||"initialized"==b.type))for(var c=this._core.settings,d=c.center&&Math.ceil(c.items/2)||c.items,e=c.center&&-1*d||0,f=(b.property&&b.property.value||this._core.current())+e,g=this._core.clones().length,h=a.proxy(function(a,b){this.load(b)},this);e++<d;)this.load(g/2+this._core.relative(f)),g&&a.each(this._core.clones(this._core.relative(f++)),h)},this)},this._core.options=a.extend({},c.Defaults,this._core.options),this._core.$element.on(this._handlers)};c.Defaults={lazyLoad:!1},c.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(".owl-lazy");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr("data-src-retina")||f.attr("data-src");this._core.trigger("load",{element:f,url:g},"lazy"),f.is("img")?f.one("load.owl.lazy",a.proxy(function(){f.css("opacity",1),this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("src",g):(e=new Image,e.onload=a.proxy(function(){f.css({"background-image":"url("+g+")",opacity:"1"}),this._core.trigger("loaded",{element:f,url:g},"lazy")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},c.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=c}(window.Zepto||window.jQuery,window,document),function(a){var b=function(c){this._core=c,this._handlers={"initialized.owl.carousel":a.proxy(function(){this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":a.proxy(function(a){this._core.settings.autoHeight&&"position"==a.property.name&&this.update()},this),"loaded.owl.lazy":a.proxy(function(a){this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass)===this._core.$stage.children().eq(this._core.current())&&this.update()},this)},this._core.options=a.extend({},b.Defaults,this._core.options),this._core.$element.on(this._handlers)};b.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},b.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)},b.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=b}(window.Zepto||window.jQuery,window,document),function(a,b,c){var d=function(b){this._core=b,this._videos={},this._playing=null,this._fullscreen=!1,this._handlers={"resize.owl.carousel":a.proxy(function(a){this._core.settings.video&&!this.isInFullScreen()&&a.preventDefault()},this),"refresh.owl.carousel changed.owl.carousel":a.proxy(function(){this._playing&&this.stop()},this),"prepared.owl.carousel":a.proxy(function(b){var c=a(b.content).find(".owl-video");c.length&&(c.css("display","none"),this.fetch(c,a(b.content)))},this)},this._core.options=a.extend({},d.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.play(a)},this))};d.Defaults={video:!1,videoHeight:!1,videoWidth:!1},d.prototype.fetch=function(a,b){var c=a.attr("data-vimeo-id")?"vimeo":"youtube",d=a.attr("data-vimeo-id")||a.attr("data-youtube-id"),e=a.attr("data-width")||this._core.settings.videoWidth,f=a.attr("data-height")||this._core.settings.videoHeight,g=a.attr("href");if(!g)throw new Error("Missing video URL.");if(d=g.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),d[3].indexOf("youtu")>-1)c="youtube";else{if(!(d[3].indexOf("vimeo")>-1))throw new Error("Video URL not supported.");c="vimeo"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr("data-video",g),this.thumbnail(a,this._videos[g])},d.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?'style="width:'+c.width+"px;height:"+c.height+'px;"':"",h=b.find("img"),i="src",j="",k=this._core.settings,l=function(a){e='<div class="owl-video-play-icon"></div>',d=k.lazyLoad?'<div class="owl-video-tn '+j+'" '+i+'="'+a+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+a+')"></div>',b.after(d),b.after(e)};return b.wrap('<div class="owl-video-wrapper"'+g+"></div>"),this._core.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length?(l(h.attr(i)),h.remove(),!1):void("youtube"===c.type?(f="http://img.youtube.com/vi/"+c.id+"/hqdefault.jpg",l(f)):"vimeo"===c.type&&a.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a[0].thumbnail_large,l(f)}}))},d.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null},d.prototype.play=function(b){this._core.trigger("play",null,"video"),this._playing&&this.stop();var c,d,e=a(b.target||b.srcElement),f=e.closest("."+this._core.settings.itemClass),g=this._videos[f.attr("data-video")],h=g.width||"100%",i=g.height||this._core.$stage.height();"youtube"===g.type?c='<iframe width="'+h+'" height="'+i+'" src="http://www.youtube.com/embed/'+g.id+"?autoplay=1&v="+g.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===g.type&&(c='<iframe src="http://player.vimeo.com/video/'+g.id+'?autoplay=1" width="'+h+'" height="'+i+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),f.addClass("owl-video-playing"),this._playing=f,d=a('<div style="height:'+i+"px; width:"+h+'px" class="owl-video-frame">'+c+"</div>"),e.after(d)},d.prototype.isInFullScreen=function(){var d=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return d&&a(d).parent().hasClass("owl-video-frame")&&(this._core.speed(0),this._fullscreen=!0),d&&this._fullscreen&&this._playing?!1:this._fullscreen?(this._fullscreen=!1,!1):this._playing&&this._core.state.orientation!==b.orientation?(this._core.state.orientation=b.orientation,!1):!0},d.prototype.destroy=function(){var a,b;this._core.$element.off("click.owl.video");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=d}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){this.swapping="translated"==a.type},this),"translate.owl.carousel":a.proxy(function(){this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&this.core.support3d){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",c)),f&&e.addClass("animated owl-animated-in").addClass(f).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",c))}},e.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.transitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c){var d=function(b){this.core=b,this.core.options=a.extend({},d.Defaults,this.core.options),this.handlers={"translated.owl.carousel refreshed.owl.carousel":a.proxy(function(){this.autoplay()
},this),"play.owl.autoplay":a.proxy(function(a,b,c){this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(){this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.autoplay()},this)},this.core.$element.on(this.handlers)};d.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},d.prototype.autoplay=function(){this.core.settings.autoplay&&!this.core.state.videoPlay?(b.clearInterval(this.interval),this.interval=b.setInterval(a.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)):b.clearInterval(this.interval)},d.prototype.play=function(){return c.hidden===!0||this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion?void 0:this.core.settings.autoplay===!1?void b.clearInterval(this.interval):void this.core.next(this.core.settings.autoplaySpeed)},d.prototype.stop=function(){b.clearInterval(this.interval)},d.prototype.pause=function(){b.clearInterval(this.interval)},d.prototype.destroy=function(){var a,c;b.clearInterval(this.interval);for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=d}(window.Zepto||window.jQuery,window,document),function(a){"use strict";var b=function(c){this._core=c,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":a.proxy(function(b){this._core.settings.dotsData&&this._templates.push(a(b.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"add.owl.carousel":a.proxy(function(b){this._core.settings.dotsData&&this._templates.splice(b.position,0,a(b.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"remove.owl.carousel prepared.owl.carousel":a.proxy(function(a){this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"change.owl.carousel":a.proxy(function(a){if("position"==a.property.name&&!this._core.state.revert&&!this._core.settings.loop&&this._core.settings.navRewind){var b=this._core.current(),c=this._core.maximum(),d=this._core.minimum();a.data=a.property.value>c?b>=c?d:c:a.property.value<d?c:a.property.value}},this),"changed.owl.carousel":a.proxy(function(a){"position"==a.property.name&&this.draw()},this),"refreshed.owl.carousel":a.proxy(function(){this._initialized||(this.initialize(),this._initialized=!0),this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation")},this)},this._core.options=a.extend({},b.Defaults,this._core.options),this.$element.on(this._handlers)};b.Defaults={nav:!1,navRewind:!0,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotData:!1,dotsSpeed:!1,dotsContainer:!1,controlsClass:"owl-controls"},b.prototype.initialize=function(){var b,c,d=this._core.settings;d.dotsData||(this._templates=[a("<div>").addClass(d.dotClass).append(a("<span>")).prop("outerHTML")]),d.navContainer&&d.dotsContainer||(this._controls.$container=a("<div>").addClass(d.controlsClass).appendTo(this.$element)),this._controls.$indicators=d.dotsContainer?a(d.dotsContainer):a("<div>").hide().addClass(d.dotsClass).appendTo(this._controls.$container),this._controls.$indicators.on("click","div",a.proxy(function(b){var c=a(b.target).parent().is(this._controls.$indicators)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(c,d.dotsSpeed)},this)),b=d.navContainer?a(d.navContainer):a("<div>").addClass(d.navContainerClass).prependTo(this._controls.$container),this._controls.$next=a("<"+d.navElement+">"),this._controls.$previous=this._controls.$next.clone(),this._controls.$previous.addClass(d.navClass[0]).html(d.navText[0]).hide().prependTo(b).on("click",a.proxy(function(){this.prev(d.navSpeed)},this)),this._controls.$next.addClass(d.navClass[1]).html(d.navText[1]).hide().appendTo(b).on("click",a.proxy(function(){this.next(d.navSpeed)},this));for(c in this._overrides)this._core[c]=a.proxy(this[c],this)},b.prototype.destroy=function(){var a,b,c,d;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},b.prototype.update=function(){var a,b,c,d=this._core.settings,e=this._core.clones().length/2,f=e+this._core.items().length,g=d.center||d.autoWidth||d.dotData?1:d.dotsEach||d.items;if("page"!==d.slideBy&&(d.slideBy=Math.min(d.slideBy,d.items)),d.dots||"page"==d.slideBy)for(this._pages=[],a=e,b=0,c=0;f>a;a++)(b>=g||0===b)&&(this._pages.push({start:a-e,end:a-e+g-1}),b=0,++c),b+=this._core.mergers(this._core.relative(a))},b.prototype.draw=function(){var b,c,d="",e=this._core.settings,f=(this._core.$stage.children(),this._core.relative(this._core.current()));if(!e.nav||e.loop||e.navRewind||(this._controls.$previous.toggleClass("disabled",0>=f),this._controls.$next.toggleClass("disabled",f>=this._core.maximum())),this._controls.$previous.toggle(e.nav),this._controls.$next.toggle(e.nav),e.dots){if(b=this._pages.length-this._controls.$indicators.children().length,e.dotData&&0!==b){for(c=0;c<this._controls.$indicators.children().length;c++)d+=this._templates[this._core.relative(c)];this._controls.$indicators.html(d)}else b>0?(d=new Array(b+1).join(this._templates[0]),this._controls.$indicators.append(d)):0>b&&this._controls.$indicators.children().slice(b).remove();this._controls.$indicators.find(".active").removeClass("active"),this._controls.$indicators.children().eq(a.inArray(this.current(),this._pages)).addClass("active")}this._controls.$indicators.toggle(e.dots)},b.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotData?1:c.dotsEach||c.items)}},b.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,function(a){return a.start<=b&&a.end>=b}).pop()},b.prototype.getPosition=function(b){var c,d,e=this._core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},b.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},b.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},b.prototype.to=function(b,c,d){var e;d?a.proxy(this._overrides.to,this._core)(b,c):(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c))},a.fn.owlCarousel.Constructor.Plugins.Navigation=b}(window.Zepto||window.jQuery,window,document),function(a,b){"use strict";var c=function(d){this._core=d,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":a.proxy(function(){"URLHash"==this._core.settings.startPosition&&a(b).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":a.proxy(function(b){var c=a(b.content).find("[data-hash]").andSelf("[data-hash]").attr("data-hash");this._hashes[c]=b.content},this)},this._core.options=a.extend({},c.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(){var a=b.location.hash.substring(1),c=this._core.$stage.children(),d=this._hashes[a]&&c.index(this._hashes[a])||0;return a?void this._core.to(d,!1,!0):!1},this))};c.Defaults={URLhashListener:!1},c.prototype.destroy=function(){var c,d;a(b).off("hashchange.owl.navigation");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=c}(window.Zepto||window.jQuery,window,document);
/*-----------------------------------------------------------------------------------*/
/*	09. TAB COLLAPSE
/*-----------------------------------------------------------------------------------*/
!function ($) {

    "use strict";

    // TABCOLLAPSE CLASS DEFINITION
    // ======================

    var TabCollapse = function (el, options) {
        this.options   = options;
        this.$tabs  = $(el);

        this._accordionVisible = false; //content is attached to tabs at first
        this._initAccordion();
        this._checkStateOnResize();


        // checkState() has gone to setTimeout for making it possible to attach listeners to
        // shown-accordion.bs.tabcollapse event on page load.
        // See https://github.com/flatlogic/bootstrap-tabcollapse/issues/23
        var that = this;
        setTimeout(function() {
          that.checkState();
        }, 0);
    };

    TabCollapse.DEFAULTS = {
        accordionClass: 'visible-xs',
        tabsClass: 'hidden-xs',
        accordionTemplate: function(heading, groupId, parentId, active) {
            return  '<div class="panel panel-default">' +
                    '   <div class="panel-heading">' +
                    '      <h4 class="panel-title">' +
                    '      </h4>' +
                    '   </div>' +
                    '   <div id="' + groupId + '" class="panel-collapse collapse ' + (active ? 'in' : '') + '">' +
                    '       <div class="panel-body js-tabcollapse-panel-body">' +
                    '       </div>' +
                    '   </div>' +
                    '</div>'

        }
    };

    TabCollapse.prototype.checkState = function(){
        if (this.$tabs.is(':visible') && this._accordionVisible){
            this.showTabs();
            this._accordionVisible = false;
        } else if (this.$accordion.is(':visible') && !this._accordionVisible){
            this.showAccordion();
            this._accordionVisible = true;
        }
    };

    TabCollapse.prototype.showTabs = function(){
        var view = this;
        this.$tabs.trigger($.Event('show-tabs.bs.tabcollapse'));

        var $panelHeadings = this.$accordion.find('.js-tabcollapse-panel-heading').detach();

        $panelHeadings.each(function() {
            var $panelHeading = $(this),
            $parentLi = $panelHeading.data('bs.tabcollapse.parentLi');

            var $oldHeading = view._panelHeadingToTabHeading($panelHeading);

            $parentLi.removeClass('active');
            if ($parentLi.parent().hasClass('dropdown-menu') && !$parentLi.siblings('li').hasClass('active')) {
                $parentLi.parent().parent().removeClass('active');
            }

            if (!$oldHeading.hasClass('collapsed')) {
                $parentLi.addClass('active');
                if ($parentLi.parent().hasClass('dropdown-menu')) {
                    $parentLi.parent().parent().addClass('active');
                }
            } else {
                $oldHeading.removeClass('collapsed');
            }

            $parentLi.append($panelHeading);
        });

        if (!$('li').hasClass('active')) {
            $('li').first().addClass('active')
        }

        var $panelBodies = this.$accordion.find('.js-tabcollapse-panel-body');
        $panelBodies.each(function(){
            var $panelBody = $(this),
                $tabPane = $panelBody.data('bs.tabcollapse.tabpane');
            $tabPane.append($panelBody.contents().detach());
        });
        this.$accordion.html('');

        if(this.options.updateLinks) {
            var $tabContents = this.getTabContentElement();
            $tabContents.find('[data-toggle-was="tab"], [data-toggle-was="pill"]').each(function() {
                var $el = $(this);
                var href = $el.attr('href').replace(/-collapse$/g, '');
                $el.attr({
                    'data-toggle': $el.attr('data-toggle-was'),
                    'data-toggle-was': '',
                    'data-parent': '',
                    href: href
                });
            });
        }

        this.$tabs.trigger($.Event('shown-tabs.bs.tabcollapse'));
    };

    TabCollapse.prototype.getTabContentElement = function(){
        var $tabContents = $(this.options.tabContentSelector);
        if($tabContents.length === 0) {
            $tabContents = this.$tabs.siblings('.tab-content');
        }
        return $tabContents;
    };

    TabCollapse.prototype.showAccordion = function(){
        this.$tabs.trigger($.Event('show-accordion.bs.tabcollapse'));

        var $headings = this.$tabs.find('li:not(.dropdown) [data-toggle="tab"], li:not(.dropdown) [data-toggle="pill"]'),
            view = this;
        $headings.each(function(){
            var $heading = $(this),
                $parentLi = $heading.parent();
            $heading.data('bs.tabcollapse.parentLi', $parentLi);
            view.$accordion.append(view._createAccordionGroup(view.$accordion.attr('id'), $heading.detach()));
        });

        if(this.options.updateLinks) {
            var parentId = this.$accordion.attr('id');
            var $selector = this.$accordion.find('.js-tabcollapse-panel-body');
            $selector.find('[data-toggle="tab"], [data-toggle="pill"]').each(function() {
                var $el = $(this);
                var href = $el.attr('href') + '-collapse';
                $el.attr({
                    'data-toggle-was': $el.attr('data-toggle'),
                    'data-toggle': 'collapse',
                    'data-parent': '#' + parentId,
                    href: href
                });
            });
        }

        this.$tabs.trigger($.Event('shown-accordion.bs.tabcollapse'));
    };

    TabCollapse.prototype._panelHeadingToTabHeading = function($heading) {
        var href = $heading.attr('href').replace(/-collapse$/g, '');
        $heading.attr({
            'data-toggle': 'tab',
            'href': href,
            'data-parent': ''
        });
        return $heading;
    };

    TabCollapse.prototype._tabHeadingToPanelHeading = function($heading, groupId, parentId, active) {
        $heading.addClass('js-tabcollapse-panel-heading ' + (active ? '' : 'collapsed'));
        $heading.attr({
            'data-toggle': 'collapse',
            'data-parent': '#' + parentId,
            'href': '#' + groupId
        });
        return $heading;
    };

    TabCollapse.prototype._checkStateOnResize = function(){
        var view = this;
        $(window).resize(function(){
            clearTimeout(view._resizeTimeout);
            view._resizeTimeout = setTimeout(function(){
                view.checkState();
            }, 100);
        });
    };


    TabCollapse.prototype._initAccordion = function(){
        var randomString = function() {
            var result = "",
                possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            for( var i=0; i < 5; i++ ) {
                result += possible.charAt(Math.floor(Math.random() * possible.length));
            }
            return result;
        };

        var srcId = this.$tabs.attr('id'),
            accordionId = (srcId ? srcId : randomString()) + '-accordion';

        this.$accordion = $('<div class="panel-group ' + this.options.accordionClass + '" id="' + accordionId +'"></div>');
        this.$tabs.after(this.$accordion);
        this.$tabs.addClass(this.options.tabsClass);
        this.getTabContentElement().addClass(this.options.tabsClass);
    };

    TabCollapse.prototype._createAccordionGroup = function(parentId, $heading){
        var tabSelector = $heading.attr('data-target'),
            active = $heading.data('bs.tabcollapse.parentLi').is('.active');

        if (!tabSelector) {
            tabSelector = $heading.attr('href');
            tabSelector = tabSelector && tabSelector.replace(/.*(?=#[^\s]*$)/, ''); //strip for ie7
        }

        var $tabPane = $(tabSelector),
            groupId = $tabPane.attr('id') + '-collapse',
            $panel = $(this.options.accordionTemplate($heading, groupId, parentId, active));
        $panel.find('.panel-heading > .panel-title').append(this._tabHeadingToPanelHeading($heading, groupId, parentId, active));
        $panel.find('.panel-body').append($tabPane.contents().detach())
            .data('bs.tabcollapse.tabpane', $tabPane);

        return $panel;
    };



    // TABCOLLAPSE PLUGIN DEFINITION
    // =======================

    $.fn.tabCollapse = function (option) {
        return this.each(function () {
            var $this   = $(this);
            var data    = $this.data('bs.tabcollapse');
            var options = $.extend({}, TabCollapse.DEFAULTS, $this.data(), typeof option === 'object' && option);

            if (!data) $this.data('bs.tabcollapse', new TabCollapse(this, options));
        });
    };

    $.fn.tabCollapse.Constructor = TabCollapse;


}(window.jQuery);
/*-----------------------------------------------------------------------------------*/
/*	10. PROGRESSBAR
/*-----------------------------------------------------------------------------------*/
(function($) {

	jQuery.fn.progressBar = function( options ) {

		//Default values for progress_bar
		var defaults = {
			height : "30",
			backgroundColor : "#E0E0E0",
			barColor : "#F97352",
			targetBarColor : "#CCC",
			percentage : true,
			shadow : false,
			border : false,
			animation : false,
			animateTarget : false,
		};

		var settings = $.extend( {}, defaults, options );

		return this.each( function() {
			var elem = $( this );
			$.fn.replaceProgressBar( elem, settings );
		});
	};

	$.fn.replaceProgressBar = function( item, settings ) {
		var skill		= item.text();
		var progress	= item.data( 'width' );
		var target		= item.data ( 'target' );
		var bar_classes = ' ';
		var animation_class = '';
		var bar_styles	= 'background-color:' + settings.backgroundColor + ';height:' + settings.height + 'px;';
		if ( settings.shadow ) { bar_classes += 'shadow'; }
		if ( settings.border ) { bar_classes += ' border'; }
		if ( settings.animation ) { animation_class = ' animate'; }

		var overlay = '<div class="sonny_progressbar' + animation_class + '" data-width="' + progress + '">';
		overlay += '<p class="title">' + skill + '</p>';
		overlay += '<div class="bar-container' + bar_classes + '" style="' + bar_styles + '">';

		// Render the progress bar background
		overlay += '<span class="backgroundBar"></span>';

		// Display target bar only if set
		if ( target ) {
			if ( settings.animateTarget ) {
				overlay += '<span class="targetBar loader" style="width:' + target + '%;background-color:' + settings.targetBarColor + ';"></span>';
			}
			else {
				overlay += '<span class="targetBar" style="width:' + target + '%;background-color:' + settings.targetBarColor + ';"></span>';
			}
		}

		// Render the progress bar
		if ( settings.animation ) {
			overlay += '<span class="bar" style="background-color:' + settings.barColor + ';"></span>';
		}
		else {
			overlay += '<span class="bar" style="width:' + progress + '%;background-color:' + settings.barColor + ';"></span>';
		}

		// Render the percentage if enabled
		if ( settings.percentage ) {
			overlay += '<span class="progress-percent" style="line-height:' + settings.height + 'px;">' + progress + '%</span>';
		}

		// End
		overlay += '</div></div>';

		// Render the progress bar on the page
		$( item ).replaceWith( overlay );

	};

	var animate = function() {

		var doc_height = $(window).height();

		$( '.sonny_progressbar.animate' ).each( function() {
			var position = $( this ).offset().top;

			if ( ( $(window).scrollTop() + doc_height - 60 ) > position ) {
				var progress = $( this ).data( 'width' ) + "%";

				$( this ).removeClass( 'animate' );
				$( this ).find( '.bar' ).css('opacity', '1');

				$( this ).find( '.bar' ).animate({
					width : progress,
					opacity : 1
				}, 3000 );
			}

		});

	};

	// Looking for an animation element in the view
	$(window).scroll(function() {

		if ( $( '.sonny_progressbar.animate' ).length < 1 ) {
			return;
		}

		// If there is an animate element visible on the page, trigger the animation
		animate();

	});


})(jQuery);
/*-----------------------------------------------------------------------------------*/
/*	11. WAYPOINTS
/*-----------------------------------------------------------------------------------*/
// Generated by CoffeeScript 1.6.2
/*
jQuery Waypoints - v2.0.3
Copyright (c) 2011-2013 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/
/*-----------------------------------------------------------------------------------*/
/*	12. COUNTER UP
/*-----------------------------------------------------------------------------------*/
/*!
* jquery.counterup.js 1.0
*
* Copyright 2013, Benjamin Intal http://gambit.ph @bfintal
* Released under the GPL v2 License
*
* Date: Nov 26, 2013
*/(function(e){"use strict";e.fn.counterUp=function(t){var n=e.extend({time:400,delay:10},t);return this.each(function(){var t=e(this),r=n,i=function(){var e=[],n=r.time/r.delay,i=t.text(),s=/[0-9]+,[0-9]+/.test(i);i=i.replace(/,/g,"");var o=/^[0-9]+$/.test(i),u=/^[0-9]+\.[0-9]+$/.test(i),a=u?(i.split(".")[1]||[]).length:0;for(var f=n;f>=1;f--){var l=parseInt(i/n*f);u&&(l=parseFloat(i/n*f).toFixed(a));if(s)while(/(\d+)(\d{3})/.test(l.toString()))l=l.toString().replace(/(\d+)(\d{3})/,"$1,$2");e.unshift(l)}t.data("counterup-nums",e);t.text("0");var c=function(){t.text(t.data("counterup-nums").shift());if(t.data("counterup-nums").length)setTimeout(t.data("counterup-func"),r.delay);else{delete t.data("counterup-nums");t.data("counterup-nums",null);t.data("counterup-func",null)}};t.data("counterup-func",c);setTimeout(t.data("counterup-func"),r.delay)};t.waypoint(i,{offset:"100%",triggerOnce:!0})})}})(jQuery);
/*-----------------------------------------------------------------------------------*/
/*	13. CIRCLE PROGRESS BAR
/*-----------------------------------------------------------------------------------*/
// ProgressBar.js 0.8.1
// https://kimmobrunfeldt.github.io/progressbar.js
// License: MIT

!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.ProgressBar=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){!function(b){"undefined"==typeof SHIFTY_DEBUG_NOW&&(SHIFTY_DEBUG_NOW=function(){return+new Date});var e=function(){"use strict";function e(){}function f(a,b){var c;for(c in a)Object.hasOwnProperty.call(a,c)&&b(c)}function g(a,b){return f(b,function(c){a[c]=b[c]}),a}function h(a,b){f(b,function(c){"undefined"==typeof a[c]&&(a[c]=b[c])})}function i(a,b,c,d,e,f,g){var h,i=(a-f)/e;for(h in b)b.hasOwnProperty(h)&&(b[h]=j(c[h],d[h],o[g[h]],i));return b}function j(a,b,c,d){return a+(b-a)*c(d)}function k(a,b){var c=n.prototype.filter,d=a._filterArgs;f(c,function(e){"undefined"!=typeof c[e][b]&&c[e][b].apply(a,d)})}function l(a,b,c,d,e,f,g,h,j){v=b+c,w=Math.min(u(),v),x=w>=v,a.isPlaying()&&!x?(j(a._timeoutHandler,s),k(a,"beforeTween"),i(w,d,e,f,c,b,g),k(a,"afterTween"),h(d)):x&&(h(f),a.stop(!0))}function m(a,b){var c={};return"string"==typeof b?f(a,function(a){c[a]=b}):f(a,function(a){c[a]||(c[a]=b[a]||q)}),c}function n(a,b){this._currentState=a||{},this._configured=!1,this._scheduleFunction=p,"undefined"!=typeof b&&this.setConfig(b)}var o,p,q="linear",r=500,s=1e3/60,t=Date.now?Date.now:function(){return+new Date},u=SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:t;p="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var v,w,x;return n.prototype.tween=function(a){return this._isTweening?this:(void 0===a&&this._configured||this.setConfig(a),this._start(this.get()),this.resume())},n.prototype.setConfig=function(a){a=a||{},this._configured=!0,this._pausedAtTime=null,this._start=a.start||e,this._step=a.step||e,this._finish=a.finish||e,this._duration=a.duration||r,this._currentState=a.from||this.get(),this._originalState=this.get(),this._targetState=a.to||this.get(),this._timestamp=u();var b=this._currentState,c=this._targetState;return h(c,b),this._easing=m(b,a.easing||q),this._filterArgs=[b,this._originalState,c,this._easing],k(this,"tweenCreated"),this},n.prototype.get=function(){return g({},this._currentState)},n.prototype.set=function(a){this._currentState=a},n.prototype.pause=function(){return this._pausedAtTime=u(),this._isPaused=!0,this},n.prototype.resume=function(){this._isPaused&&(this._timestamp+=u()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0;var a=this;return this._timeoutHandler=function(){l(a,a._timestamp,a._duration,a._currentState,a._originalState,a._targetState,a._easing,a._step,a._scheduleFunction)},this._timeoutHandler(),this},n.prototype.stop=function(a){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=e,a&&(g(this._currentState,this._targetState),k(this,"afterTweenEnd"),this._finish.call(this,this._currentState)),this},n.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},n.prototype.setScheduleFunction=function(a){this._scheduleFunction=a},n.prototype.dispose=function(){var a;for(a in this)this.hasOwnProperty(a)&&delete this[a]},n.prototype.filter={},n.prototype.formula={linear:function(a){return a}},o=n.prototype.formula,g(n,{now:u,each:f,tweenProps:i,tweenProp:j,applyFilter:k,shallowCopy:g,defaults:h,composeEasingObject:m}),"function"==typeof SHIFTY_DEBUG_NOW&&(b.timeoutHandler=l),"object"==typeof d?c.exports=n:"function"==typeof a&&a.amd?a(function(){return n}):"undefined"==typeof b.Tweenable&&(b.Tweenable=n),n}();!function(){e.shallowCopy(e.prototype.formula,{easeInQuad:function(a){return Math.pow(a,2)},easeOutQuad:function(a){return-(Math.pow(a-1,2)-1)},easeInOutQuad:function(a){return(a/=.5)<1?.5*Math.pow(a,2):-.5*((a-=2)*a-2)},easeInCubic:function(a){return Math.pow(a,3)},easeOutCubic:function(a){return Math.pow(a-1,3)+1},easeInOutCubic:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)},easeInQuart:function(a){return Math.pow(a,4)},easeOutQuart:function(a){return-(Math.pow(a-1,4)-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*Math.pow(a,4):-.5*((a-=2)*Math.pow(a,3)-2)},easeInQuint:function(a){return Math.pow(a,5)},easeOutQuint:function(a){return Math.pow(a-1,5)+1},easeInOutQuint:function(a){return(a/=.5)<1?.5*Math.pow(a,5):.5*(Math.pow(a-2,5)+2)},easeInSine:function(a){return-Math.cos(a*(Math.PI/2))+1},easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a)-1)},easeInExpo:function(a){return 0===a?0:Math.pow(2,10*(a-1))},easeOutExpo:function(a){return 1===a?1:-Math.pow(2,-10*a)+1},easeInOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return-(Math.sqrt(1-a*a)-1)},easeOutCirc:function(a){return Math.sqrt(1-Math.pow(a-1,2))},easeInOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeOutBounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInBack:function(a){var b=1.70158;return a*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return(a-=1)*a*((b+1)*a+b)+1},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},elastic:function(a){return-1*Math.pow(4,-8*a)*Math.sin(2*(6*a-1)*Math.PI/2)+1},swingFromTo:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},swingFrom:function(a){var b=1.70158;return a*a*((b+1)*a-b)},swingTo:function(a){var b=1.70158;return(a-=1)*a*((b+1)*a+b)+1},bounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bouncePast:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?2-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?2-(7.5625*(a-=2.25/2.75)*a+.9375):2-(7.5625*(a-=2.625/2.75)*a+.984375)},easeFromTo:function(a){return(a/=.5)<1?.5*Math.pow(a,4):-.5*((a-=2)*Math.pow(a,3)-2)},easeFrom:function(a){return Math.pow(a,4)},easeTo:function(a){return Math.pow(a,.25)}})}(),function(){function a(a,b,c,d,e,f){function g(a){return((n*a+o)*a+p)*a}function h(a){return((q*a+r)*a+s)*a}function i(a){return(3*n*a+2*o)*a+p}function j(a){return 1/(200*a)}function k(a,b){return h(m(a,b))}function l(a){return a>=0?a:0-a}function m(a,b){var c,d,e,f,h,j;for(e=a,j=0;8>j;j++){if(f=g(e)-a,l(f)<b)return e;if(h=i(e),l(h)<1e-6)break;e-=f/h}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(f=g(e),l(f-a)<b)return e;a>f?c=e:d=e,e=.5*(d-c)+c}return e}var n=0,o=0,p=0,q=0,r=0,s=0;return p=3*b,o=3*(d-b)-p,n=1-p-o,s=3*c,r=3*(e-c)-s,q=1-s-r,k(a,j(f))}function b(b,c,d,e){return function(f){return a(f,b,c,d,e,1)}}e.setBezierFunction=function(a,c,d,f,g){var h=b(c,d,f,g);return h.x1=c,h.y1=d,h.x2=f,h.y2=g,e.prototype.formula[a]=h},e.unsetBezierFunction=function(a){delete e.prototype.formula[a]}}(),function(){function a(a,b,c,d,f){return e.tweenProps(d,b,a,c,1,0,f)}var b=new e;b._filterArgs=[],e.interpolate=function(c,d,f,g){var h=e.shallowCopy({},c),i=e.composeEasingObject(c,g||"linear");b.set({});var j=b._filterArgs;j.length=0,j[0]=h,j[1]=c,j[2]=d,j[3]=i,e.applyFilter(b,"tweenCreated"),e.applyFilter(b,"beforeTween");var k=a(c,h,d,f,i);return e.applyFilter(b,"afterTween"),k}}(),function(a){function b(a,b){B.length=0;var c,d=a.length;for(c=0;d>c;c++)B.push("_"+b+"_"+c);return B}function c(a){var b=a.match(v);return b?(1===b.length||a[0].match(u))&&b.unshift(""):b=["",""],b.join(A)}function d(b){a.each(b,function(a){var c=b[a];"string"==typeof c&&c.match(z)&&(b[a]=e(c))})}function e(a){return i(z,a,f)}function f(a){var b=g(a);return"rgb("+b[0]+","+b[1]+","+b[2]+")"}function g(a){return a=a.replace(/#/,""),3===a.length&&(a=a.split(""),a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),C[0]=h(a.substr(0,2)),C[1]=h(a.substr(2,2)),C[2]=h(a.substr(4,2)),C}function h(a){return parseInt(a,16)}function i(a,b,c){var d=b.match(a),e=b.replace(a,A);if(d)for(var f,g=d.length,h=0;g>h;h++)f=d.shift(),e=e.replace(A,c(f));return e}function j(a){return i(x,a,k)}function k(a){for(var b=a.match(w),c=b.length,d=a.match(y)[0],e=0;c>e;e++)d+=parseInt(b[e],10)+",";return d=d.slice(0,-1)+")"}function l(d){var e={};return a.each(d,function(a){var f=d[a];if("string"==typeof f){var g=r(f);e[a]={formatString:c(f),chunkNames:b(g,a)}}}),e}function m(b,c){a.each(c,function(a){for(var d=b[a],e=r(d),f=e.length,g=0;f>g;g++)b[c[a].chunkNames[g]]=+e[g];delete b[a]})}function n(b,c){a.each(c,function(a){var d=b[a],e=o(b,c[a].chunkNames),f=p(e,c[a].chunkNames);d=q(c[a].formatString,f),b[a]=j(d)})}function o(a,b){for(var c,d={},e=b.length,f=0;e>f;f++)c=b[f],d[c]=a[c],delete a[c];return d}function p(a,b){D.length=0;for(var c=b.length,d=0;c>d;d++)D.push(a[b[d]]);return D}function q(a,b){for(var c=a,d=b.length,e=0;d>e;e++)c=c.replace(A,+b[e].toFixed(4));return c}function r(a){return a.match(w)}function s(b,c){a.each(c,function(a){for(var d=c[a],e=d.chunkNames,f=e.length,g=b[a].split(" "),h=g[g.length-1],i=0;f>i;i++)b[e[i]]=g[i]||h;delete b[a]})}function t(b,c){a.each(c,function(a){for(var d=c[a],e=d.chunkNames,f=e.length,g="",h=0;f>h;h++)g+=" "+b[e[h]],delete b[e[h]];b[a]=g.substr(1)})}var u=/(\d|\-|\.)/,v=/([^\-0-9\.]+)/g,w=/[0-9.\-]+/g,x=new RegExp("rgb\\("+w.source+/,\s*/.source+w.source+/,\s*/.source+w.source+"\\)","g"),y=/^.*\(/,z=/#([0-9]|[a-f]){3,6}/gi,A="VAL",B=[],C=[],D=[];a.prototype.filter.token={tweenCreated:function(a,b,c){d(a),d(b),d(c),this._tokenData=l(a)},beforeTween:function(a,b,c,d){s(d,this._tokenData),m(a,this._tokenData),m(b,this._tokenData),m(c,this._tokenData)},afterTween:function(a,b,c,d){n(a,this._tokenData),n(b,this._tokenData),n(c,this._tokenData),t(d,this._tokenData)}}}(e)}(this)},{}],2:[function(a,b){var c=a("./shape"),d=a("./utils"),e=function(){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",c.apply(this,arguments)};e.prototype=new c,e.prototype.constructor=e,e.prototype._pathString=function(a){var b=a.strokeWidth;a.trailWidth&&a.trailWidth>a.strokeWidth&&(b=a.trailWidth);var c=50-b/2;return d.render(this._pathTemplate,{radius:c,"2radius":2*c})},e.prototype._trailString=function(a){return this._pathString(a)},b.exports=e},{"./shape":6,"./utils":8}],3:[function(a,b){var c=a("./shape"),d=a("./utils"),e=function(){this._pathTemplate="M 0,{center} L 100,{center}",c.apply(this,arguments)};e.prototype=new c,e.prototype.constructor=e,e.prototype._initializeSvg=function(a,b){a.setAttribute("viewBox","0 0 100 "+b.strokeWidth),a.setAttribute("preserveAspectRatio","none")},e.prototype._pathString=function(a){return d.render(this._pathTemplate,{center:a.strokeWidth/2})},e.prototype._trailString=function(a){return this._pathString(a)},b.exports=e},{"./shape":6,"./utils":8}],4:[function(a,b){var c=a("./line"),d=a("./circle"),e=a("./square"),f=a("./path");b.exports={Line:c,Circle:d,Square:e,Path:f}},{"./circle":2,"./line":3,"./path":5,"./square":7}],5:[function(a,b){var c=a("shifty"),d=a("./utils"),e={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},f=function(a,b){b=d.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},b);var c;c=d.isString(a)?document.querySelector(a):a,this.path=c,this._opts=b,this._tweenable=null;var e=this.path.getTotalLength();this.path.style.strokeDasharray=e+" "+e,this.set(0)};f.prototype.value=function(){var a=this._getComputedDashOffset(),b=this.path.getTotalLength(),c=1-a/b;return parseFloat(c.toFixed(6),10)},f.prototype.set=function(a){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(a);var b=this._opts.step;if(d.isFunction(b)){var c=this._easing(this._opts.easing),e=this._calculateTo(a,c);b(e,this._opts.shape||this,this._opts.attachment)}},f.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},f.prototype.animate=function(a,b,e){b=b||{},d.isFunction(b)&&(e=b,b={});var f=d.extend({},b),g=d.extend({},this._opts);b=d.extend(g,b);var h=this._easing(b.easing),i=this._resolveFromAndTo(a,h,f);this.stop(),this.path.getBoundingClientRect();var j=this._getComputedDashOffset(),k=this._progressToOffset(a),l=this;this._tweenable=new c,this._tweenable.tween({from:d.extend({offset:j},i.from),to:d.extend({offset:k},i.to),duration:b.duration,easing:h,step:function(a){l.path.style.strokeDashoffset=a.offset,b.step(a,b.shape||l,b.attachment)},finish:function(){d.isFunction(e)&&e()}})},f.prototype._getComputedDashOffset=function(){var a=window.getComputedStyle(this.path,null);return parseFloat(a.getPropertyValue("stroke-dashoffset"),10)},f.prototype._progressToOffset=function(a){var b=this.path.getTotalLength();return b-a*b},f.prototype._resolveFromAndTo=function(a,b,c){return c.from&&c.to?{from:c.from,to:c.to}:{from:this._calculateFrom(b),to:this._calculateTo(a,b)}},f.prototype._calculateFrom=function(a){return c.interpolate(this._opts.from,this._opts.to,this.value(),a)},f.prototype._calculateTo=function(a,b){return c.interpolate(this._opts.from,this._opts.to,a,b)},f.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable.dispose(),this._tweenable=null)},f.prototype._easing=function(a){return e.hasOwnProperty(a)?e[a]:a},b.exports=f},{"./utils":8,shifty:1}],6:[function(a,b){var c=a("./path"),d=a("./utils"),e="Object is destroyed",f=function g(a,b){if(!(this instanceof g))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=d.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{autoStyle:!0,color:null,value:"",className:"progressbar-text"}},b,!0);var e,f=this._createSvgView(this._opts);if(e=d.isString(a)?document.querySelector(a):a,!e)throw new Error("Container does not exist: "+a);this._container=e,this._container.appendChild(f.svg),this.text=null,this._opts.text.value&&(this.text=this._createTextElement(this._opts,this._container),this._container.appendChild(this.text)),this.svg=f.svg,this.path=f.path,this.trail=f.trail;var h=d.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new c(f.path,h)}};f.prototype.animate=function(a,b,c){if(null===this._progressPath)throw new Error(e);this._progressPath.animate(a,b,c)},f.prototype.stop=function(){if(null===this._progressPath)throw new Error(e);void 0!==this._progressPath&&this._progressPath.stop()},f.prototype.destroy=function(){if(null===this._progressPath)throw new Error(e);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,null!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},f.prototype.set=function(a){if(null===this._progressPath)throw new Error(e);this._progressPath.set(a)},f.prototype.value=function(){if(null===this._progressPath)throw new Error(e);return void 0===this._progressPath?0:this._progressPath.value()},f.prototype.setText=function(a){if(null===this._progressPath)throw new Error(e);null===this.text&&(this.text=this._createTextElement(this._opts,this._container),this._container.appendChild(this.text)),this.text.removeChild(this.text.firstChild),this.text.appendChild(document.createTextNode(a))},f.prototype._createSvgView=function(a){var b=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(b,a);var c=null;(a.trailColor||a.trailWidth)&&(c=this._createTrail(a),b.appendChild(c));var d=this._createPath(a);return b.appendChild(d),{svg:b,path:d,trail:c}},f.prototype._initializeSvg=function(a){a.setAttribute("viewBox","0 0 100 100")},f.prototype._createPath=function(a){var b=this._pathString(a);return this._createPathElement(b,a)},f.prototype._createTrail=function(a){var b=this._trailString(a),c=d.extend({},a);return c.trailColor||(c.trailColor="#eee"),c.trailWidth||(c.trailWidth=c.strokeWidth),c.color=c.trailColor,c.strokeWidth=c.trailWidth,c.fill=null,this._createPathElement(b,c)},f.prototype._createPathElement=function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttribute("d",a),c.setAttribute("stroke",b.color),c.setAttribute("stroke-width",b.strokeWidth),b.fill?c.setAttribute("fill",b.fill):c.setAttribute("fill-opacity","0"),c},f.prototype._createTextElement=function(a,b){var c=document.createElement("p");return c.appendChild(document.createTextNode(a.text.value)),a.text.autoStyle&&(b.style.position="relative",c.style.position="absolute",c.style.top="50%",c.style.left="50%",c.style.padding=0,c.style.margin=0,d.setStyle(c,"transform","translate(-50%, -50%)"),c.style.color=a.text.color?a.text.color:a.color),c.className=a.text.className,c},f.prototype._pathString=function(){throw new Error("Override this function for each progress bar")},f.prototype._trailString=function(){throw new Error("Override this function for each progress bar")},b.exports=f},{"./path":5,"./utils":8}],7:[function(a,b){var c=a("./shape"),d=a("./utils"),e=function(){this._pathTemplate="M 0,{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{strokeWidth}",this._trailTemplate="M {startMargin},{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{halfOfStrokeWidth}",c.apply(this,arguments)};e.prototype=new c,e.prototype.constructor=e,e.prototype._pathString=function(a){var b=100-a.strokeWidth/2;return d.render(this._pathTemplate,{width:b,strokeWidth:a.strokeWidth,halfOfStrokeWidth:a.strokeWidth/2})},e.prototype._trailString=function(a){var b=100-a.strokeWidth/2;return d.render(this._trailTemplate,{width:b,strokeWidth:a.strokeWidth,halfOfStrokeWidth:a.strokeWidth/2,startMargin:a.strokeWidth/2-a.trailWidth/2})},b.exports=e},{"./shape":6,"./utils":8}],8:[function(a,b){function c(a,b,d){a=a||{},b=b||{},d=d||!1;for(var e in b)if(b.hasOwnProperty(e)){var f=a[e],g=b[e];a[e]=d&&j(f)&&j(g)?c(f,g,d):g}return a}function d(a,b){var c=a;for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],f="\\{"+d+"\\}",g=new RegExp(f,"g");c=c.replace(g,e)}return c}function e(a,b,c){for(var d=0;d<k.length;++d){var e=k[d];a.style[e+f(b)]=c}a.style[b]=c}function f(a){return a.charAt(0).toUpperCase()+a.slice(1)}function g(a){return"string"==typeof a||a instanceof String}function h(a){return"function"==typeof a}function i(a){return"[object Array]"===Object.prototype.toString.call(a)}function j(a){if(i(a))return!1;var b=typeof a;return"object"===b&&!!a}var k="Webkit Moz O ms".split(" ");b.exports={extend:c,render:d,setStyle:e,capitalize:f,isString:g,isFunction:h,isObject:j}},{}]},{},[4])(4)});
/*-----------------------------------------------------------------------------------*/
/*	14. VANILLA
/*-----------------------------------------------------------------------------------*/
/*
 * Vanilla Form v. 2.0.0
 * Author: Michal Szepielak
 *
 * Product info and license terms:
 * http://codecanyon.net/item/vanilla-form-modern-responsive-contact-form/10447733
 */
var VanillaForm=function(a){"use strict";function b(a){var b=[];return a.each(function(a,c){b[a]=new g(c)}),b.length<=1?b[0]:b}function c(){var a="9320087105434084715";return a=a.split(""),a=a.reverse().join("")}function d(a){a.formFocused=!0}function e(a,b){var c,d=document.querySelectorAll("[name="+b.name+"]");for(c=0;c<d.length;c++)d[c].classList.remove("error"),d[c].removeEventListener("focus",h[b.name],!1);delete h[b.name],h.length--,h.length<=0&&(h.length=0,a.setSubmitState("initial"))}function f(b){var c=b.getBoundingClientRect(),d=Math.round(c.top)-5,e=a.innerHeight;return 0>=d?void a.scrollBy(0,d):void(d>=e&&a.scrollBy(0,d-e+30))}function g(c){var d=this;return a.jQuery&&c instanceof a.jQuery?b(c):c?(d.dict={markedAsSpamError:"Your message was marked as spam and was not sent! Fix your message!",markedAsSpamServerError:"Your message was marked as SPAM and was not send.",sendSuccess:"We have received your inquiry. Stay tuned, we’ll get back to you very soon.",sendError:"Mail server has experienced an error. Please try again.",httpRequestError:"[%s] There was a problem with receiving response from mailing server",timeoutError:"Your request was timeout. Please try again.",parseResponseError:"Response from mailing server was unclear. Please contact administrator."},d.responseTimeout=5e3,d.httpRequest=null,d.url=c.action||location.href,d.form=c,d.processing=!1,d.submitButton=c.querySelector('[type="submit"]'),d.submitButton?(d.notificationBox=c.querySelector(".notification-box"),d.notificationBox?(d.notificationBox.addEventListener("click",function(){this.classList.remove("show-error"),this.classList.remove("show-success")},!1),d.formFocused=!1,d.focusBound=null,d.init(),d):(console.warn("Couldn't bind to submit button"),null)):(console.warn("Couldn't bind to submit button"),null)):(console.warn("Couldn't bind to form element"),null)}var h={length:0};return g.prototype.logError=function(a){this.notify(a,"error")},g.prototype.notify=function(a,b){var c=this.notificationBox;return c?(c.innerHTML=a,c.classList.add("show-"+(b||"error")),void f(c)):void console.warn("Notification box not found")},g.prototype.setSubmitState=function(a){var b=this,c=b.submitButton,d=c.getAttribute("data-"+a),e=c.className.replace(/state-[a-z]+/gi,"");b.processing="processing"===a,c.className=e+" state-"+a,c.value=d},g.prototype.validateForm=function(){var b,d,f,g=this,i=g.form,j=i.elements,k=!1,l=!1,m=/^([\w\-]+(?:\.[\w\-]+)*)@((?:[\w\-]+\.)*\w[\w\-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;for(d=j.length-1;d>=0;--d)f=j[d],h[f.name]&&e(g,f);for(d=j.length-1;d>=0;--d)f=j[d],k=!1,""===f.value&&f.required?k=!0:("checkbox"===f.type&&f.required&&!f.checked&&(k=!0),"email"!==f.type||""===f.value||m.test(f.value)||(k=!0),"radio"===f.type&&f.required&&(document.querySelector("[name="+f.name+"]:checked")||(k=!0))),k?(f.classList.add("error"),h[f.name]||(h[f.name]=e.bind(null,g,f),h.length++),f.addEventListener("focus",h[f.name],!1),l=!0):f.classList.remove("error"),l&&g.setSubmitState("error");if(!l){if(g.formFocused!==!0)return g.logError(g.dict.markedAsSpamError),!1;b=i.querySelector('[name="contact_secret"]'),b||(b=document.createElement("input"),b.type="hidden",b.name="contact_secret",i.appendChild(b)),b.value=c()}return setTimeout(function(){a.scrollBy(0,-1)},1),!l},g.prototype.resetForm=function(){var a,b,c=this,d=c.form,e=c.submitButton;for(b=d.length-1;b>=0;--b)a=d[b],a!==e&&(a.classList.remove("success"),a.value="");c.setSubmitState("initial")},g.prototype.successForm=function(){var a=this;a.setSubmitState("success"),a.notify(a.dict.sendSuccess,"success")},g.prototype.processResponse=function(a){var b,c=this,d=c.dict;try{b=JSON.parse(a)}catch(e){console.error(e),b={result:"ParseError"}}switch(b.result){case"OK":c.successForm(d.sendSuccess),setTimeout(c.resetForm.bind(c),4e3);break;case"NO_SPAM":c.logError(d.markedAsSpamServerError);break;case"SEND_ERROR":c.logError(d.sendError),c.setSubmitState("initial");break;case"ParseError":c.logError(d.parseResponseError)}},g.prototype.requestStateChange=function(){var a=this,b=a.httpRequest;4===b.readyState&&(200===b.status?a.processResponse(b.responseText):(a.setSubmitState("initial"),0!==b.status&&a.logError(a.dict.httpRequestError.replace("%s",b.status))))},g.prototype.init=function(){var b,c,e=this,f=e.form,g=e.submitButton,h=f.elements;if(f.addEventListener("submit",e.submitForm.bind(e),!0),a.XMLHttpRequest?e.httpRequest=new XMLHttpRequest:a.ActiveXObject("Microsoft.XMLHTTP")&&(e.httpRequest=new ActiveXObject("Microsoft.XMLHTTP")),e.focusBound=d.bind(null,e),!e.httpRequest)return console.error("Couldn't init XMLHttpRequest"),null;for(e.formFocused=!1,c=h.length-1;c>=0;--c)b=h[c],"submit"!==b.type&&b.addEventListener("focus",e.focusBound,!1);g.value!==g.getAttribute("data-initial")&&(g.setAttribute("data-initial",g.value),e.setSubmitState("initial"))},g.prototype.send=function(a){var b=this,c=b.httpRequest;c.open("POST",b.url,!0),c.timeout=b.responseTimeout,c.ontimeout=function(){b.logError(b.dict.timeoutError),b.setSubmitState("initial")},c.send(a),c.onreadystatechange=b.requestStateChange.bind(b)},g.prototype.submitForm=function(a){var b=this,c="";return a&&(a.preventDefault(),a.stopPropagation()),b.validateForm()&&(b.setSubmitState("processing"),c=new FormData(b.form),b.send(c)),!1},g}(window);
/*-----------------------------------------------------------------------------------*/
/*	15. INSTAFEED
/*-----------------------------------------------------------------------------------*/
// Generated by CoffeeScript 1.3.3 INSTAFEED
(function(){var e,t;e=function(){function e(e,t){var n,r;this.options={target:"instafeed",get:"popular",resolution:"thumbnail",sortBy:"none",links:!0,mock:!1,useHttp:!1};if(typeof e=="object")for(n in e)r=e[n],this.options[n]=r;this.context=t!=null?t:this,this.unique=this._genKey()}return e.prototype.hasNext=function(){return typeof this.context.nextUrl=="string"&&this.context.nextUrl.length>0},e.prototype.next=function(){return this.hasNext()?this.run(this.context.nextUrl):!1},e.prototype.run=function(t){var n,r,i;if(typeof this.options.clientId!="string"&&typeof this.options.accessToken!="string")throw new Error("Missing clientId or accessToken.");if(typeof this.options.accessToken!="string"&&typeof this.options.clientId!="string")throw new Error("Missing clientId or accessToken.");return this.options.before!=null&&typeof this.options.before=="function"&&this.options.before.call(this),typeof document!="undefined"&&document!==null&&(i=document.createElement("script"),i.id="instafeed-fetcher",i.src=t||this._buildUrl(),n=document.getElementsByTagName("head"),n[0].appendChild(i),r="instafeedCache"+this.unique,window[r]=new e(this.options,this),window[r].unique=this.unique),!0},e.prototype.parse=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;if(typeof e!="object"){if(this.options.error!=null&&typeof this.options.error=="function")return this.options.error.call(this,"Invalid JSON data"),!1;throw new Error("Invalid JSON response")}if(e.meta.code!==200){if(this.options.error!=null&&typeof this.options.error=="function")return this.options.error.call(this,e.meta.error_message),!1;throw new Error("Error from Instagram: "+e.meta.error_message)}if(e.data.length===0){if(this.options.error!=null&&typeof this.options.error=="function")return this.options.error.call(this,"No images were returned from Instagram"),!1;throw new Error("No images were returned from Instagram")}this.options.success!=null&&typeof this.options.success=="function"&&this.options.success.call(this,e),this.context.nextUrl="",e.pagination!=null&&(this.context.nextUrl=e.pagination.next_url);if(this.options.sortBy!=="none"){this.options.sortBy==="random"?d=["","random"]:d=this.options.sortBy.split("-"),p=d[0]==="least"?!0:!1;switch(d[1]){case"random":e.data.sort(function(){return.5-Math.random()});break;case"recent":e.data=this._sortBy(e.data,"created_time",p);break;case"liked":e.data=this._sortBy(e.data,"likes.count",p);break;case"commented":e.data=this._sortBy(e.data,"comments.count",p);break;default:throw new Error("Invalid option for sortBy: '"+this.options.sortBy+"'.")}}if(typeof document!="undefined"&&document!==null&&this.options.mock===!1){a=e.data,this.options.limit!=null&&a.length>this.options.limit&&(a=a.slice(0,this.options.limit+1||9e9)),n=document.createDocumentFragment(),this.options.filter!=null&&typeof this.options.filter=="function"&&(a=this._filter(a,this.options.filter));if(this.options.template!=null&&typeof this.options.template=="string"){i="",o="",l="",v=document.createElement("div");for(m=0,b=a.length;m<b;m++)s=a[m],u=s.images[this.options.resolution].url,this.options.useHttp||(u=u.replace("http://","//")),o=this._makeTemplate(this.options.template,{model:s,id:s.id,link:s.link,image:u,caption:this._getObjectProperty(s,"caption.text"),likes:s.likes.count,comments:s.comments.count,location:this._getObjectProperty(s,"location.name")}),i+=o;v.innerHTML=i,S=[].slice.call(v.childNodes);for(g=0,w=S.length;g<w;g++)h=S[g],n.appendChild(h)}else for(y=0,E=a.length;y<E;y++)s=a[y],f=document.createElement("img"),u=s.images[this.options.resolution].url,this.options.useHttp||(u=u.replace("http://","//")),f.src=u,this.options.links===!0?(t=document.createElement("a"),t.href=s.link,t.appendChild(f),n.appendChild(t)):n.appendChild(f);document.getElementById(this.options.target).appendChild(n),r=document.getElementsByTagName("head")[0],r.removeChild(document.getElementById("instafeed-fetcher")),c="instafeedCache"+this.unique,window[c]=void 0;try{delete window[c]}catch(x){}}return this.options.after!=null&&typeof this.options.after=="function"&&this.options.after.call(this),!0},e.prototype._buildUrl=function(){var e,t,n;e="https://api.instagram.com/v1";switch(this.options.get){case"popular":t="media/popular";break;case"tagged":if(typeof this.options.tagName!="string")throw new Error("No tag name specified. Use the 'tagName' option.");t="tags/"+this.options.tagName+"/media/recent";break;case"location":if(typeof this.options.locationId!="number")throw new Error("No location specified. Use the 'locationId' option.");t="locations/"+this.options.locationId+"/media/recent";break;case"user":if(typeof this.options.userId!="number")throw new Error("No user specified. Use the 'userId' option.");if(typeof this.options.accessToken!="string")throw new Error("No access token. Use the 'accessToken' option.");t="users/"+this.options.userId+"/media/recent";break;default:throw new Error("Invalid option for get: '"+this.options.get+"'.")}return n=""+e+"/"+t,this.options.accessToken!=null?n+="?access_token="+this.options.accessToken:n+="?client_id="+this.options.clientId,this.options.limit!=null&&(n+="&count="+this.options.limit),n+="&callback=instafeedCache"+this.unique+".parse",n},e.prototype._genKey=function(){var e;return e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},""+e()+e()+e()+e()},e.prototype._makeTemplate=function(e,t){var n,r,i,s,o;r=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/,n=e;while(r.test(n))i=n.match(r)[1],s=(o=this._getObjectProperty(t,i))!=null?o:"",n=n.replace(r,""+s);return n},e.prototype._getObjectProperty=function(e,t){var n,r;t=t.replace(/\[(\w+)\]/g,".$1"),r=t.split(".");while(r.length){n=r.shift();if(!(e!=null&&n in e))return null;e=e[n]}return e},e.prototype._sortBy=function(e,t,n){var r;return r=function(e,r){var i,s;return i=this._getObjectProperty(e,t),s=this._getObjectProperty(r,t),n?i>s?1:-1:i<s?1:-1},e.sort(r.bind(this)),e},e.prototype._filter=function(e,t){var n,r,i,s,o;n=[],i=function(e){if(t(e))return n.push(e)};for(s=0,o=e.length;s<o;s++)r=e[s],i(r);return n},e}(),t=typeof exports!="undefined"&&exports!==null?exports:window,t.Instafeed=e}).call(this);
/*-----------------------------------------------------------------------------------*/
/*	16. FITVIDS
/*-----------------------------------------------------------------------------------*/
/*global jQuery */
/*jshint browser:true */
/*!
* FitVids 1.1
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
*/

(function( $ ){

  "use strict";

  $.fn.fitVids = function( options ) {
    var settings = {
      customSelector: null
    };

    if(!document.getElementById('fit-vids-style')) {
      // appendStyles: https://github.com/toddmotto/fluidvids/blob/master/dist/fluidvids.js
      var head = document.head || document.getElementsByTagName('head')[0];
      var css = '.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}';
      var div = document.createElement('div');
      div.innerHTML = '<p>x</p><style id="fit-vids-style">' + css + '</style>';
      head.appendChild(div.childNodes[1]);
    }

    if ( options ) {
      $.extend( settings, options );
    }

    return this.each(function(){
      var selectors = [
        "iframe[src*='player.vimeo.com']",
        "iframe[src*='youtube.com']",
        "iframe[src*='youtube-nocookie.com']",
        "iframe[src*='kickstarter.com'][src*='video.html']",
        "object",
        "embed"
      ];

      if (settings.customSelector) {
        selectors.push(settings.customSelector);
      }

      var $allVideos = $(this).find(selectors.join(','));
      $allVideos = $allVideos.not("object object"); // SwfObj conflict patch

      $allVideos.each(function(){
        var $this = $(this);
        if (this.tagName.toLowerCase() === 'embed' && $this.parent('object').length || $this.parent('.fluid-width-video-wrapper').length) { return; }
        var height = ( this.tagName.toLowerCase() === 'object' || ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10))) ) ? parseInt($this.attr('height'), 10) : $this.height(),
            width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10) : $this.width(),
            aspectRatio = height / width;
        if(!$this.attr('id')){
          var videoID = 'fitvid' + Math.floor(Math.random()*999999);
          $this.attr('id', videoID);
        }
        $this.wrap('<div class="fluid-width-video-wrapper"></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+"%");
        $this.removeAttr('height').removeAttr('width');
      });
    });
  };
// Works with either jQuery or Zepto
})( window.jQuery || window.Zepto );
/*-----------------------------------------------------------------------------------*/
/*	GO TO TOP
/*-----------------------------------------------------------------------------------*/
! function (a, b, c) {
    a.fn.scrollUp = function (b) {
        a.data(c.body, "scrollUp") || (a.data(c.body, "scrollUp", !0), a.fn.scrollUp.init(b))
    }, a.fn.scrollUp.init = function (d) {
        var e = a.fn.scrollUp.settings = a.extend({}, a.fn.scrollUp.defaults, d),
        f = e.scrollTitle ? e.scrollTitle : e.scrollText,
        g = a("<a/>", {
            id: e.scrollName,
            href: "#top",
            title: f
        }).appendTo("body");
        e.scrollImg || g.html(e.scrollText), g.css({
            display: "none",
            position: "fixed",
            zIndex: e.zIndex
        }), e.activeOverlay && a("<div/>", {
            id: e.scrollName + "-active"
        }).css({
            position: "absolute",
            top: e.scrollDistance + "px",
            width: "100%",
            borderTop: "1px dotted" + e.activeOverlay,
            zIndex: e.zIndex
        }).appendTo("body"), scrollEvent = a(b).scroll(function () {
            switch (scrollDis = "top" === e.scrollFrom ? e.scrollDistance : a(c).height() - a(b).height() - e.scrollDistance, e.animation) {
            case "fade":
                a(a(b).scrollTop() > scrollDis ? g.fadeIn(e.animationInSpeed) : g.fadeOut(e.animationOutSpeed));
                break;
            case "slide":
                a(a(b).scrollTop() > scrollDis ? g.slideDown(e.animationInSpeed) : g.slideUp(e.animationOutSpeed));
                break;
            default:
                a(a(b).scrollTop() > scrollDis ? g.show(0) : g.hide(0))
            }
        }), g.click(function (b) {
            b.preventDefault(), a("html, body").animate({
                scrollTop: 0
            }, e.topSpeed, e.easingType)
        })
    }, a.fn.scrollUp.defaults = {
        scrollName: "scrollUp",
        scrollDistance: 300,
        scrollFrom: "top",
        scrollSpeed: 300,
        easingType: "linear",
        animation: "fade",
        animationInSpeed: 200,
        animationOutSpeed: 200,
        scrollText: "Scroll to top",
        scrollTitle: !1,
        scrollImg: !1,
        activeOverlay: !1,
        zIndex: 2147483647
    }, a.fn.scrollUp.destroy = function (d) {
        a.removeData(c.body, "scrollUp"), a("#" + a.fn.scrollUp.settings.scrollName).remove(), a("#" + a.fn.scrollUp.settings.scrollName + "-active").remove(), a.fn.jquery.split(".")[1] >= 7 ? a(b).off("scroll", d) : a(b).unbind("scroll", d)
    }, a.scrollUp = a.fn.scrollUp
}(jQuery, window, document);
/*-----------------------------------------------------------------------------------*/
/*	17. LOCALSCROLL & SCROLLTO
/*-----------------------------------------------------------------------------------*/
/**
* jQuery.LocalScroll - Animated scrolling navigation, using anchors.
* Copyright (c) 2007-2009 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
* Dual licensed under MIT and GPL.
* Date: 3/11/2009
* @author Ariel Flesler
* @version 1.2.7
**/
(function($) {
    var l = location.href.replace(/#.*/, '');
    var g = $.localScroll = function(a) {
        $('body').localScroll(a)
    };
    g.defaults = {
        duration: 1e3,
        axis: 'y',
        event: 'click',
        stop: true,
        target: window,
        reset: true
    };
    g.hash = function(a) {
        if (location.hash) {
            a = $.extend({}, g.defaults, a);
            a.hash = false;
            if (a.reset) {
                var e = a.duration;
                delete a.duration;
                $(a.target).scrollTo(0, a);
                a.duration = e
            }
            i(0, location, a)
        }
    };
    $.fn.localScroll = function(b) {
        b = $.extend({}, g.defaults, b);
        return b.lazy ? this.bind(b.event, function(a) {
            var e = $([a.target, a.target.parentNode]).filter(d)[0];
            if (e)
                i(a, e, b)
        }) : this.find('a,area').filter(d).bind(b.event, function(a) {
            i(a, this, b)
        }).end().end();
        function d() {
            return !!this.href&&!!this.hash && this.href.replace(this.hash, '') == l && (!b.filter || $(this).is(b.filter))
        }
    };
    function i(a, e, b) {
        var d = e.hash.slice(1), f = document.getElementById(d) || document.getElementsByName(d)[0];
        if (!f)
            return;
        if (a)
            a.preventDefault();
        var h = $(b.target);
        if (b.lock && h.is(':animated') || b.onBefore && b.onBefore.call(b, a, f, h) === false)
            return;
        if (b.stop)
            h.stop(true);
        if (b.hash) {
            var j = f.id == d ? 'id': 'name', k = $('<a> </a>').attr(j, d).css({
                position: 'absolute',
                top: $(window).scrollTop(),
                left: $(window).scrollLeft()
            });
            f[j] = '';
            $('body').prepend(k);
            location = e.hash;
            k.remove();
            f[j] = d
        }
        h.scrollTo(f, b).trigger('notify.serialScroll', [f])
    }
})(jQuery);
/**
 * Copyright (c) 2007-2012 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * @author Ariel Flesler
 * @version 1.4.5 BETA
 */
;
(function($) {
    var h = $.scrollTo = function(a, b, c) {
        $(window).scrollTo(a, b, c)
    };
    h.defaults = {
        axis: 'xy',
        duration: parseFloat($.fn.jquery) >= 1.3 ? 0: 1,
        limit: true
    };
    h.window = function(a) {
        return $(window)._scrollable()
    };
    $.fn._scrollable = function() {
        return this.map(function() {
            var a = this, isWin=!a.nodeName || $.inArray(a.nodeName.toLowerCase(), ['iframe', '#document', 'html', 'body'])!=-1;
            if (!isWin)
                return a;
            var b = (a.contentWindow || a).document || a.ownerDocument || a;
            return /webkit/i.test(navigator.userAgent) || b.compatMode == 'BackCompat' ? b.body : b.documentElement
        })
    };
    $.fn.scrollTo = function(e, f, g) {
        if (typeof f == 'object') {
            g = f;
            f = 0
        }
        if (typeof g == 'function')
            g = {
                onAfter: g
            };
        if (e == 'max')
            e = 9e9;
        g = $.extend({}, h.defaults, g);
        f = f || g.duration;
        g.queue = g.queue && g.axis.length > 1;
        if (g.queue)
            f/=2;
        g.offset = both(g.offset);
        g.over = both(g.over);
        return this._scrollable().each(function() {
            if (e == null)
                return;
            var d = this, $elem = $(d), targ = e, toff, attr = {}, win = $elem.is('html,body');
            switch (typeof targ) {
            case'number':
            case'string':
                if (/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)) {
                    targ = both(targ);
                    break
                }
                targ = $(targ, this);
                if (!targ.length)
                    return;
            case'object':
                if (targ.is || targ.style)
                    toff = (targ = $(targ)).offset()
            }
            $.each(g.axis.split(''), function(i, a) {
                var b = a == 'x' ? 'Left': 'Top', pos = b.toLowerCase(), key = 'scroll' + b, old = d[key], max = h.max(d, a);
                if (toff) {
                    attr[key] = toff[pos] + (win ? 0 : old - $elem.offset()[pos]);
                    if (g.margin) {
                        attr[key] -= parseInt(targ.css('margin' + b)) || 0;
                        attr[key] -= parseInt(targ.css('border' + b + 'Width')) || 0
                    }
                    attr[key] += g.offset[pos] || 0;
                    if (g.over[pos])
                        attr[key] += targ[a == 'x' ? 'width': 'height']() * g.over[pos]
                } else {
                    var c = targ[pos];
                    attr[key] = c.slice && c.slice( - 1) == '%' ? parseFloat(c) / 100 * max : c
                }
                if (g.limit && /^\d+$/.test(attr[key]))
                    attr[key] = attr[key] <= 0 ? 0 : Math.min(attr[key], max);
                if (!i && g.queue) {
                    if (old != attr[key])
                        animate(g.onAfterFirst);
                    delete attr[key]
                }
            });
            animate(g.onAfter);
            function animate(a) {
                $elem.animate(attr, f, g.easing, a && function() {
                    a.call(this, e, g)
                })
            }
        }).end()
    };
    h.max = function(a, b) {
        var c = b == 'x' ? 'Width': 'Height', scroll = 'scroll' + c;
        if (!$(a).is('html,body'))
            return a[scroll] - $(a)[c.toLowerCase()]();
        var d = 'client' + c, html = a.ownerDocument.documentElement, body = a.ownerDocument.body;
        return Math.max(html[scroll], body[scroll]) - Math.min(html[d], body[d])
    };
    function both(a) {
        return typeof a == 'object' ? a : {
            top: a,
            left: a
        }
    }
})(jQuery);
/*-----------------------------------------------------------------------------------*/
/*	18. PRETTIFY
/*-----------------------------------------------------------------------------------*/
!function(){/*

 Copyright (C) 2006 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
window.PR_SHOULD_USE_CONTINUATION=!0;
(function(){function T(a){function d(e){var b=e.charCodeAt(0);if(92!==b)return b;var a=e.charAt(1);return(b=w[a])?b:"0"<=a&&"7">=a?parseInt(e.substring(1),8):"u"===a||"x"===a?parseInt(e.substring(2),16):e.charCodeAt(1)}function f(e){if(32>e)return(16>e?"\\x0":"\\x")+e.toString(16);e=String.fromCharCode(e);return"\\"===e||"-"===e||"]"===e||"^"===e?"\\"+e:e}function b(e){var b=e.substring(1,e.length-1).match(/\\u[0-9A-Fa-f]{4}|\\x[0-9A-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\s\S]|-|[^-\\]/g);e=
[];var a="^"===b[0],c=["["];a&&c.push("^");for(var a=a?1:0,g=b.length;a<g;++a){var h=b[a];if(/\\[bdsw]/i.test(h))c.push(h);else{var h=d(h),k;a+2<g&&"-"===b[a+1]?(k=d(b[a+2]),a+=2):k=h;e.push([h,k]);65>k||122<h||(65>k||90<h||e.push([Math.max(65,h)|32,Math.min(k,90)|32]),97>k||122<h||e.push([Math.max(97,h)&-33,Math.min(k,122)&-33]))}}e.sort(function(e,a){return e[0]-a[0]||a[1]-e[1]});b=[];g=[];for(a=0;a<e.length;++a)h=e[a],h[0]<=g[1]+1?g[1]=Math.max(g[1],h[1]):b.push(g=h);for(a=0;a<b.length;++a)h=b[a],
c.push(f(h[0])),h[1]>h[0]&&(h[1]+1>h[0]&&c.push("-"),c.push(f(h[1])));c.push("]");return c.join("")}function v(e){for(var a=e.source.match(/(?:\[(?:[^\x5C\x5D]|\\[\s\S])*\]|\\u[A-Fa-f0-9]{4}|\\x[A-Fa-f0-9]{2}|\\[0-9]+|\\[^ux0-9]|\(\?[:!=]|[\(\)\^]|[^\x5B\x5C\(\)\^]+)/g),c=a.length,d=[],g=0,h=0;g<c;++g){var k=a[g];"("===k?++h:"\\"===k.charAt(0)&&(k=+k.substring(1))&&(k<=h?d[k]=-1:a[g]=f(k))}for(g=1;g<d.length;++g)-1===d[g]&&(d[g]=++A);for(h=g=0;g<c;++g)k=a[g],"("===k?(++h,d[h]||(a[g]="(?:")):"\\"===
k.charAt(0)&&(k=+k.substring(1))&&k<=h&&(a[g]="\\"+d[k]);for(g=0;g<c;++g)"^"===a[g]&&"^"!==a[g+1]&&(a[g]="");if(e.ignoreCase&&n)for(g=0;g<c;++g)k=a[g],e=k.charAt(0),2<=k.length&&"["===e?a[g]=b(k):"\\"!==e&&(a[g]=k.replace(/[a-zA-Z]/g,function(a){a=a.charCodeAt(0);return"["+String.fromCharCode(a&-33,a|32)+"]"}));return a.join("")}for(var A=0,n=!1,l=!1,m=0,c=a.length;m<c;++m){var p=a[m];if(p.ignoreCase)l=!0;else if(/[a-z]/i.test(p.source.replace(/\\u[0-9a-f]{4}|\\x[0-9a-f]{2}|\\[^ux]/gi,""))){n=!0;
l=!1;break}}for(var w={b:8,t:9,n:10,v:11,f:12,r:13},r=[],m=0,c=a.length;m<c;++m){p=a[m];if(p.global||p.multiline)throw Error(""+p);r.push("(?:"+v(p)+")")}return new RegExp(r.join("|"),l?"gi":"g")}function U(a,d){function f(a){var c=a.nodeType;if(1==c){if(!b.test(a.className)){for(c=a.firstChild;c;c=c.nextSibling)f(c);c=a.nodeName.toLowerCase();if("br"===c||"li"===c)v[l]="\n",n[l<<1]=A++,n[l++<<1|1]=a}}else if(3==c||4==c)c=a.nodeValue,c.length&&(c=d?c.replace(/\r\n?/g,"\n"):c.replace(/[ \t\r\n]+/g,
" "),v[l]=c,n[l<<1]=A,A+=c.length,n[l++<<1|1]=a)}var b=/(?:^|\s)nocode(?:\s|$)/,v=[],A=0,n=[],l=0;f(a);return{a:v.join("").replace(/\n$/,""),c:n}}function J(a,d,f,b,v){f&&(a={h:a,l:1,j:null,m:null,a:f,c:null,i:d,g:null},b(a),v.push.apply(v,a.g))}function V(a){for(var d=void 0,f=a.firstChild;f;f=f.nextSibling)var b=f.nodeType,d=1===b?d?a:f:3===b?W.test(f.nodeValue)?a:d:d;return d===a?void 0:d}function G(a,d){function f(a){for(var l=a.i,m=a.h,c=[l,"pln"],p=0,w=a.a.match(v)||[],r={},e=0,t=w.length;e<
t;++e){var z=w[e],q=r[z],g=void 0,h;if("string"===typeof q)h=!1;else{var k=b[z.charAt(0)];if(k)g=z.match(k[1]),q=k[0];else{for(h=0;h<A;++h)if(k=d[h],g=z.match(k[1])){q=k[0];break}g||(q="pln")}!(h=5<=q.length&&"lang-"===q.substring(0,5))||g&&"string"===typeof g[1]||(h=!1,q="src");h||(r[z]=q)}k=p;p+=z.length;if(h){h=g[1];var B=z.indexOf(h),D=B+h.length;g[2]&&(D=z.length-g[2].length,B=D-h.length);q=q.substring(5);J(m,l+k,z.substring(0,B),f,c);J(m,l+k+B,h,K(q,h),c);J(m,l+k+D,z.substring(D),f,c)}else c.push(l+
k,q)}a.g=c}var b={},v;(function(){for(var f=a.concat(d),l=[],m={},c=0,p=f.length;c<p;++c){var w=f[c],r=w[3];if(r)for(var e=r.length;0<=--e;)b[r.charAt(e)]=w;w=w[1];r=""+w;m.hasOwnProperty(r)||(l.push(w),m[r]=null)}l.push(/[\0-\uffff]/);v=T(l)})();var A=d.length;return f}function y(a){var d=[],f=[];a.tripleQuotedStrings?d.push(["str",/^(?:\'\'\'(?:[^\'\\]|\\[\s\S]|\'{1,2}(?=[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}(?=[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$))/,
null,"'\""]):a.multiLineStrings?d.push(["str",/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,null,"'\"`"]):d.push(["str",/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,null,"\"'"]);a.verbatimStrings&&f.push(["str",/^@\"(?:[^\"]|\"\")*(?:\"|$)/,null]);var b=a.hashComments;b&&(a.cStyleComments?(1<b?d.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,"#"]):d.push(["com",/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\r\n]*)/,
null,"#"]),f.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,null])):d.push(["com",/^#[^\r\n]*/,null,"#"]));a.cStyleComments&&(f.push(["com",/^\/\/[^\r\n]*/,null]),f.push(["com",/^\/\*[\s\S]*?(?:\*\/|$)/,null]));if(b=a.regexLiterals){var v=(b=1<b?"":"\n\r")?".":"[\\S\\s]";f.push(["lang-regex",RegExp("^(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*("+
("/(?=[^/*"+b+"])(?:[^/\\x5B\\x5C"+b+"]|\\x5C"+v+"|\\x5B(?:[^\\x5C\\x5D"+b+"]|\\x5C"+v+")*(?:\\x5D|$))+/")+")")])}(b=a.types)&&f.push(["typ",b]);b=(""+a.keywords).replace(/^ | $/g,"");b.length&&f.push(["kwd",new RegExp("^(?:"+b.replace(/[\s,]+/g,"|")+")\\b"),null]);d.push(["pln",/^\s+/,null," \r\n\t\u00a0"]);b="^.[^\\s\\w.$@'\"`/\\\\]*";a.regexLiterals&&(b+="(?!s*/)");f.push(["lit",/^@[a-z_$][a-z_$@0-9]*/i,null],["typ",/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\w+_t\b)/,null],["pln",/^[a-z_$][a-z_$@0-9]*/i,
null],["lit",/^(?:0x[a-f0-9]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+\-]?\d+)?)[a-z]*/i,null,"0123456789"],["pln",/^\\[\s\S]?/,null],["pun",new RegExp(b),null]);return G(d,f)}function L(a,d,f){function b(a){var c=a.nodeType;if(1==c&&!A.test(a.className))if("br"===a.nodeName)v(a),a.parentNode&&a.parentNode.removeChild(a);else for(a=a.firstChild;a;a=a.nextSibling)b(a);else if((3==c||4==c)&&f){var d=a.nodeValue,q=d.match(n);q&&(c=d.substring(0,q.index),a.nodeValue=c,(d=d.substring(q.index+q[0].length))&&
a.parentNode.insertBefore(l.createTextNode(d),a.nextSibling),v(a),c||a.parentNode.removeChild(a))}}function v(a){function b(a,c){var d=c?a.cloneNode(!1):a,k=a.parentNode;if(k){var k=b(k,1),e=a.nextSibling;k.appendChild(d);for(var f=e;f;f=e)e=f.nextSibling,k.appendChild(f)}return d}for(;!a.nextSibling;)if(a=a.parentNode,!a)return;a=b(a.nextSibling,0);for(var d;(d=a.parentNode)&&1===d.nodeType;)a=d;c.push(a)}for(var A=/(?:^|\s)nocode(?:\s|$)/,n=/\r\n?|\n/,l=a.ownerDocument,m=l.createElement("li");a.firstChild;)m.appendChild(a.firstChild);
for(var c=[m],p=0;p<c.length;++p)b(c[p]);d===(d|0)&&c[0].setAttribute("value",d);var w=l.createElement("ol");w.className="linenums";d=Math.max(0,d-1|0)||0;for(var p=0,r=c.length;p<r;++p)m=c[p],m.className="L"+(p+d)%10,m.firstChild||m.appendChild(l.createTextNode("\u00a0")),w.appendChild(m);a.appendChild(w)}function t(a,d){for(var f=d.length;0<=--f;){var b=d[f];I.hasOwnProperty(b)?E.console&&console.warn("cannot override language handler %s",b):I[b]=a}}function K(a,d){a&&I.hasOwnProperty(a)||(a=/^\s*</.test(d)?
"default-markup":"default-code");return I[a]}function M(a){var d=a.j;try{var f=U(a.h,a.l),b=f.a;a.a=b;a.c=f.c;a.i=0;K(d,b)(a);var v=/\bMSIE\s(\d+)/.exec(navigator.userAgent),v=v&&8>=+v[1],d=/\n/g,A=a.a,n=A.length,f=0,l=a.c,m=l.length,b=0,c=a.g,p=c.length,w=0;c[p]=n;var r,e;for(e=r=0;e<p;)c[e]!==c[e+2]?(c[r++]=c[e++],c[r++]=c[e++]):e+=2;p=r;for(e=r=0;e<p;){for(var t=c[e],z=c[e+1],q=e+2;q+2<=p&&c[q+1]===z;)q+=2;c[r++]=t;c[r++]=z;e=q}c.length=r;var g=a.h;a="";g&&(a=g.style.display,g.style.display="none");
try{for(;b<m;){var h=l[b+2]||n,k=c[w+2]||n,q=Math.min(h,k),B=l[b+1],D;if(1!==B.nodeType&&(D=A.substring(f,q))){v&&(D=D.replace(d,"\r"));B.nodeValue=D;var N=B.ownerDocument,u=N.createElement("span");u.className=c[w+1];var y=B.parentNode;y.replaceChild(u,B);u.appendChild(B);f<h&&(l[b+1]=B=N.createTextNode(A.substring(q,h)),y.insertBefore(B,u.nextSibling))}f=q;f>=h&&(b+=2);f>=k&&(w+=2)}}finally{g&&(g.style.display=a)}}catch(x){E.console&&console.log(x&&x.stack||x)}}var E=window,C=["break,continue,do,else,for,if,return,while"],
F=[[C,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],H=[F,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],
O=[F,"abstract,assert,boolean,byte,extends,finally,final,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],P=[F,"abstract,as,base,bool,by,byte,checked,decimal,delegate,descending,dynamic,event,finally,fixed,foreach,from,group,implicit,in,interface,internal,into,is,let,lock,null,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],F=[F,"debugger,eval,export,function,get,instanceof,null,set,undefined,var,with,Infinity,NaN"],
Q=[C,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],R=[C,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],C=[C,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],S=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,
W=/\S/,X=y({keywords:[H,P,O,F,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",Q,R,C],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),I={};t(X,["default-code"]);t(G([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\s\S]*?(?:-\->|$)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",
/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),"default-markup htm html mxml xhtml xml xsl".split(" "));t(G([["pln",/^[\s]+/,null," \t\r\n"],["atv",/^(?:\"[^\"]*\"?|\'[^\']*\'?)/,null,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w.:-]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^>\'\"\s]*(?:[^>\'\"\s\/]|\/(?=\s)))/],
["pun",/^[=<>\/]+/],["lang-js",/^on\w+\s*=\s*\"([^\"]+)\"/i],["lang-js",/^on\w+\s*=\s*\'([^\']+)\'/i],["lang-js",/^on\w+\s*=\s*([^\"\'>\s]+)/i],["lang-css",/^style\s*=\s*\"([^\"]+)\"/i],["lang-css",/^style\s*=\s*\'([^\']+)\'/i],["lang-css",/^style\s*=\s*([^\"\'>\s]+)/i]]),["in.tag"]);t(G([],[["atv",/^[\s\S]+/]]),["uq.val"]);t(y({keywords:H,hashComments:!0,cStyleComments:!0,types:S}),"c cc cpp cxx cyc m".split(" "));t(y({keywords:"null,true,false"}),["json"]);t(y({keywords:P,hashComments:!0,cStyleComments:!0,
verbatimStrings:!0,types:S}),["cs"]);t(y({keywords:O,cStyleComments:!0}),["java"]);t(y({keywords:C,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]);t(y({keywords:Q,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]);t(y({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:2}),
["perl","pl","pm"]);t(y({keywords:R,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]);t(y({keywords:F,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]);t(y({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);t(G([],[["str",/^[\s\S]+/]]),["regex"]);
var Y=E.PR={createSimpleLexer:G,registerLangHandler:t,sourceDecorator:y,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ",prettyPrintOne:E.prettyPrintOne=function(a,d,f){f=f||!1;d=d||null;var b=document.createElement("div");b.innerHTML="<pre>"+a+"</pre>";b=b.firstChild;f&&L(b,f,!0);M({j:d,m:f,h:b,l:1,a:null,i:null,c:null,
g:null});return b.innerHTML},prettyPrint:E.prettyPrint=function(a,d){function f(){for(var b=E.PR_SHOULD_USE_CONTINUATION?c.now()+250:Infinity;p<t.length&&c.now()<b;p++){for(var d=t[p],l=g,m=d;m=m.previousSibling;){var n=m.nodeType,u=(7===n||8===n)&&m.nodeValue;if(u?!/^\??prettify\b/.test(u):3!==n||/\S/.test(m.nodeValue))break;if(u){l={};u.replace(/\b(\w+)=([\w:.%+-]+)/g,function(a,b,c){l[b]=c});break}}m=d.className;if((l!==g||r.test(m))&&!e.test(m)){n=!1;for(u=d.parentNode;u;u=u.parentNode)if(q.test(u.tagName)&&
u.className&&r.test(u.className)){n=!0;break}if(!n){d.className+=" prettyprinted";n=l.lang;if(!n){var n=m.match(w),C;!n&&(C=V(d))&&z.test(C.tagName)&&(n=C.className.match(w));n&&(n=n[1])}if(y.test(d.tagName))u=1;else var u=d.currentStyle,x=v.defaultView,u=(u=u?u.whiteSpace:x&&x.getComputedStyle?x.getComputedStyle(d,null).getPropertyValue("white-space"):0)&&"pre"===u.substring(0,3);x=l.linenums;(x="true"===x||+x)||(x=(x=m.match(/\blinenums\b(?::(\d+))?/))?x[1]&&x[1].length?+x[1]:!0:!1);x&&L(d,x,u);
M({j:n,h:d,m:x,l:u,a:null,i:null,c:null,g:null})}}}p<t.length?E.setTimeout(f,250):"function"===typeof a&&a()}for(var b=d||document.body,v=b.ownerDocument||document,b=[b.getElementsByTagName("pre"),b.getElementsByTagName("code"),b.getElementsByTagName("xmp")],t=[],n=0;n<b.length;++n)for(var l=0,m=b[n].length;l<m;++l)t.push(b[n][l]);var b=null,c=Date;c.now||(c={now:function(){return+new Date}});var p=0,w=/\blang(?:uage)?-([\w.]+)(?!\S)/,r=/\bprettyprint\b/,e=/\bprettyprinted\b/,y=/pre|xmp/i,z=/^code$/i,
q=/^(?:pre|code|xmp)$/i,g={};f()}},H=E.define;"function"===typeof H&&H.amd&&H("google-code-prettify",[],function(){return Y})})();}()
/*-----------------------------------------------------------------------------------*/
/*	19. LAZY LOAD GOOGLE MAPS
/*-----------------------------------------------------------------------------------*/
/*
	lazyLoadGoogleMaps v1.0.1, updated 2015-11-07
	By Osvaldas Valutis, www.osvaldas.info
	Available for use under the MIT License
*/

;window.googleMapsScriptLoaded=function(){$(window).trigger("googleMapsScriptLoaded")},function(i,a){"use strict";var e=i(a),n=i("body"),o=e.height(),t=0,r=function(i,a){var e=null;return function(){var n=this,o=arguments;clearTimeout(e),e=setTimeout(function(){a.apply(n,o)},i)}},s=function(i,a){var e,n;return function(){var o=this,t=arguments,r=+new Date;e&&e+i>r?(clearTimeout(n),n=setTimeout(function(){e=r,a.apply(o,t)},i)):(e=r,a.apply(o,t))}},c=!1,l=!1,p=i([]),g=function(){t=e.scrollTop(),p.each(function(){var a=i(this),e=a.data("options");if(a.offset().top-t>1*o)return!0;if(!c&&!l){var r={callback:"googleMapsScriptLoaded",signed_in:e.signed_in};e.api_key&&(r.api_key=e.api_key),e.libraries&&(r.libraries=e.libraries),e.language&&(r.language=e.language),e.region&&(r.region=e.region),n.append('<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&'+i.param(r)+'"></script>'),l=!0}if(!c)return!0;var s=new google.maps.Map(this,{zoom:15});e.callback!==!1&&e.callback(this,s),p=p.not(a)})};e.on("googleMapsScriptLoaded",function(){c=!0,g()}).on("scroll",s(500,g)).on("resize",r(1e3,function(){o=e.height(),g()})),i.fn.lazyLoadGoogleMaps=function(a){return a=i.extend({api_key:!1,libraries:!1,signed_in:!1,language:!1,region:!1,callback:!1},a),this.each(function(){var e=i(this);e.data("options",a),p=p.add(e)}),g(),this.debounce=r,this.throttle=s,this}}(jQuery,window,document);


$(document).ready(function() {
    'use strict';
    /*-----------------------------------------------------------------------------------*/
    /*	SCROLL NAVIGATION HIGHLIGHT
    /*-----------------------------------------------------------------------------------*/
    var headerWrapper = parseInt($('.navbar').height(), 10);
    var header_height = $('.navbar').height();
    var shrinked_header_height = 65;
    var firstStyle = {
        'padding-top': '' + shrinked_header_height + 'px',
        'margin-top': '-' + shrinked_header_height + 'px'
    };
    $('.onepage section').css(firstStyle);
    var secondStyle = {
        'padding-top': '' + header_height + 'px',
        'margin-top': '-' + header_height + 'px'
    };
    $('.onepage section:first-of-type').css(secondStyle);
    var offsetTolerance = -(header_height);
    //Detecting user's scroll
    $(window).scroll(function() {
        //Check scroll position
        var scrollPosition = parseInt($(this).scrollTop(), 10);
        //Move trough each menu and check its position with scroll position then add current class
        $('.onepage .navbar ul.navbar-nav a').each(function() {
            var thisHref = $(this).attr('href');
            var thisTruePosition = parseInt($(thisHref).offset().top, 10);
            var thisPosition = thisTruePosition - headerWrapper - offsetTolerance;
            if (scrollPosition >= thisPosition) {
                $('.current').removeClass('current');
                $('.navbar ul.navbar-nav a[href=' + thisHref + ']').parent('li').addClass('current');
            }
        });
        //If we're at the bottom of the page, move pointer to the last section
        var bottomPage = parseInt($(document).height(), 10) - parseInt($(window).height(), 10);
        if (scrollPosition == bottomPage || scrollPosition >= bottomPage) {
            $('.current').removeClass('current');
            $('.onepage .navbar ul.navbar-nav a:last').parent('li').addClass('current');
        }
    });
    /*-----------------------------------------------------------------------------------*/
    /*	STICKY HEADER
	/*-----------------------------------------------------------------------------------*/
    var menu = $('.navbar'),
        pos = menu.offset();
    $(window).scroll(function() {
        if ($(this).scrollTop() > pos.top + menu.height() && menu.hasClass('default') && $(this).scrollTop() > 300) {
            menu.fadeOut('fast', function() {
                $(this).removeClass('default').addClass('fixed').fadeIn('fast');
            });
        } else if ($(this).scrollTop() <= pos.top + 300 && menu.hasClass('fixed')) {
            menu.fadeOut(0, function() {
                $(this).removeClass('fixed').addClass('default').fadeIn(0);
            });
        }
    });
    $('.offset').css('padding-top', $('.navbar').height() + 'px');
    $(window).resize(function() {
	    $('.offset').css('padding-top', $('.navbar').height() + 'px');
	});
    $('.onepage .navbar .nav li a').on('click', function() {
        $('.navbar .navbar-collapse.in').collapse('hide');
        $('.nav-bars').removeClass('is-active');
    });
    /*-----------------------------------------------------------------------------------*/
    /*	HAMBURGER MENU ICON
	/*-----------------------------------------------------------------------------------*/
    var toggles = document.querySelectorAll(".nav-bars");
    for (var i = toggles.length - 1; i >= 0; i--) {
        var toggle = toggles[i];
        toggleHandler(toggle);
    };
    function toggleHandler(toggle) {
        toggle.addEventListener("click", function(e) {
            e.preventDefault();
            (this.classList.contains("is-active") === true) ? this.classList.remove("is-active"): this.classList.add("is-active");
        });
    };
    /*-----------------------------------------------------------------------------------*/
    /*	LOCALSCROLL
	/*-----------------------------------------------------------------------------------*/
    $('.navbar, .scroll').localScroll({
        hash: true
    });
    /*-----------------------------------------------------------------------------------*/
    /*	ISOTOPE PORTFOLIO GRID
	/*-----------------------------------------------------------------------------------*/

    /*-----------------------------------------------------------------------------------*/
    /*	LIGHTGALLERY
	/*-----------------------------------------------------------------------------------*/
    $('.light-gallery').lightGallery({
        thumbnail: true,
        selector: '.lgitem',
        animateThumb: true,
        showThumbByDefault: false,
        download: false,
        autoplayControls: false,
        thumbWidth: 100,
        thumbContHeight: 80,
        videoMaxWidth: '1000px'
    });
    /*-----------------------------------------------------------------------------------*/
    /*	OWL CAROUSEL
	/*-----------------------------------------------------------------------------------*/
    $('.blog-carousel').owlCarousel({
        loop: false,
        margin: 15,
        nav: true,
        navContainer: '.nav-outside-blog',
        navClass: ['btn btn-square nav-outside-prev', 'btn btn-square nav-outside-next'],
        navText: ['<i class="fa fa-chevron-left"></i>', '<i class="fa fa-chevron-right"></i>'],
        dots: false,
        responsive: {
            0: {
                items: 1
            },
            480: {
                items: 2

            },
            1024: {
                items: 3
            }
        }
    });
    $('.portfolio-carousel').owlCarousel({
        loop: false,
        margin: 15,
        nav: true,
        navContainer: '.nav-outside-portfolio',
        navClass: ['btn btn-square nav-outside-prev', 'btn btn-square nav-outside-next'],
        navText: ['<i class="fa fa-chevron-left"></i>', '<i class="fa fa-chevron-right"></i>'],
        dots: false,
        responsive: {
            0: {
                items: 1
            },
            480: {
                items: 2

            },
            1024: {
                items: 3
            },
            1440: {
                items: 4
            }
        }
    });
    $('.shop').owlCarousel({
        loop: false,
        margin: 30,
        nav: true,
        navContainer: '.nav-outside-shop',
        navClass: ['btn btn-square nav-outside-prev', 'btn btn-square nav-outside-next'],
        navText: ['<i class="fa fa-chevron-left"></i>', '<i class="fa fa-chevron-right"></i>'],
        dots: false,
        responsive: {
            0: {
                items: 1
            },
            480: {
                items: 2

            },
            1024: {
                items: 3
            },
            1440: {
                items: 4
            }
        }
    });
    $('.testimonials.col3').owlCarousel({
        autoplay: true,
        autoplayTimeout: 10000,
        loop: true,
        margin: 30,
        nav: false,
        dots: false,
        responsive: {
            0: {
                items: 1
            },
            768: {
                items: 2

            },
            1024: {
                items: 3
            }
        }
    });
    $('.testimonials.col1').owlCarousel({
        autoplay: true,
        autoplayTimeout: 5000,
        loop: true,
        margin: 0,
        nav: false,
        dots: false,
        items: 1
    });
    $('.team').owlCarousel({
        loop: false,
        margin: 15,
        nav: true,
        navContainer: '.nav-outside-team',
        navClass: ['btn btn-square nav-outside-prev', 'btn btn-square nav-outside-next'],
        navText: ['<i class="icon-left-open"></i>', '<i class="icon-right-open"></i>'],
        dots: false,
        responsive: {
            0: {
                items: 1
            },
            480: {
                items: 2

            },
            1024: {
                items: 3
            },
            1440: {
                items: 4
            }
        }
    });
    $('.number-carousel').owlCarousel({
        loop: false,
        margin: 15,
        nav: false,
        dots: false,
        responsive: {
            0: {
                items: 1
            },
            480: {
                items: 2

            },
            1024: {
                items: 3
            },
            1440: {
                items: 4
            }
        }
    });
    $('.clients').owlCarousel({
        autoplay: true,
        autoplayTimeout: 3000,
        loop: true,
        margin: 0,
        nav: false,
        dots: false,
        responsive: {
            0: {
                items: 2
            },
            480: {
                items: 3
            },
            768: {
                items: 4
            },
            1200: {
                items: 6
            }
        }
    });
    $('.basic-slider').owlCarousel({
        items: 1,
        nav: true,
        navText: ['', ''],
        dots: true,
        autoHeight: false,
        loop: true,
        margin: 0
    });
    /*-----------------------------------------------------------------------------------*/
    /*	REVOLUTION
	/*-----------------------------------------------------------------------------------*/
    $("#slider1").revolution({
        sliderType: "standard",
        sliderLayout: "auto",
        spinner: "spinner",
        delay: 9000,
        shadow: 0,
        gridwidth: 1170,
        gridheight: 700,
        responsiveLevels: [4096, 1024, 778, 480],
        navigation: {
            arrows: {
                enable: true,
                hide_onleave: true
            },
            touch:{
	        	touchenabled:"on",
            },
            bullets: {
                enable: false,
                hide_onleave: false,
                h_align: "center",
                v_align: "bottom",
                space: 5,
                h_offset: 0,
                v_offset: 20
            }
        }
    });
    $("#slider2").revolution({
        sliderType: "standard",
        sliderLayout: "fullscreen",
        fullScreenOffsetContainer: ".navbar",
        spinner: "spinner",
        delay: 9000,
        shadow: 0,
        gridwidth: 1170,
        gridheight: 700,
        responsiveLevels: [4096, 1024, 778, 480],
        navigation: {
            arrows: {
                enable: true,
                hide_onleave: true
            },
            touch:{
	        	touchenabled:"on",
            },
            bullets: {
                enable: false,
                hide_onleave: false,
                h_align: "center",
                v_align: "bottom",
                space: 5,
                h_offset: 0,
                v_offset: 20
            }
        }
    });
    $("#slider3").revolution({
        sliderType: "standard",
        sliderLayout: "auto",
        spinner: "spinner",
        delay: 9000,
        shadow: 0,
        gridwidth: 1170,
        gridheight: 600,
        responsiveLevels: [4096, 1024, 778, 480],
        navigation: {
            arrows: {
                enable: true,
                hide_onleave: true
            },
            touch:{
	        	touchenabled:"on",
            },
            bullets: {
                enable: false,
                hide_onleave: false,
                h_align: "center",
                v_align: "bottom",
                space: 5,
                h_offset: 0,
                v_offset: 20
            }
        }
    });
    $("#flow").revolution({
        sliderType: "carousel",

        sliderLayout: "auto",
        dottedOverlay: "none",
        delay: 9000,
        navigation: {
            arrows: {
                enable: true,
                hide_onleave: true
            },
            touch:{
	        	touchenabled:"on",
            },
            bullets: {
                enable: false,
                hide_onleave: false,
                h_align: "center",
                v_align: "bottom",
                space: 5,
                h_offset: 0,
                v_offset: 20
            }
        },
        carousel: {
            maxRotation: 10,
            vary_rotation: "on",
            minScale: 10,
            vary_scale: "off",
            horizontal_align: "center",
            vertical_align: "center",
            fadeout: "on",
            vary_fade: "on",
            maxVisibleItems: 5,
            infinity: "on",
            space: 10,
            stretch: "off"
        },
        responsiveLevels: [1240, 1024, 778, 480],
        gridwidth: 600,
        gridheight: 400,
        lazyType: "none",
        shadow: 0,
        spinner: "off",
        stopLoop: "on",
        stopAfterLoops: 0,
        stopAtSlide: 1,
        shuffle: "off",
        autoHeight: "off",
        fullScreenAlignForce: "off",
        fullScreenOffsetContainer: "",
        fullScreenOffset: "",
        disableProgressBar: "on",
        hideThumbsOnMobile: "off",
        hideSliderAtLimit: 0,
        hideCaptionAtLimit: 0,
        hideAllCaptionAtLilmit: 0,
        debugMode: false,
        fallbacks: {
            simplifyAll: "off",
            nextSlideOnWindowFocus: "off",
            disableFocusListener: false,
        }

    });
    $("#slider-video").revolution({
        sliderType: "standard",
        jsFileLocation: "../../revolution/js/",
        sliderLayout: "auto",
        dottedOverlay: "none",
        delay: 9000,
        navigation: {
            keyboardNavigation: "off",
            keyboard_direction: "horizontal",
            mouseScrollNavigation: "off",
            onHoverStop: "off",
            arrows: {
                enable: true,
                hide_onleave: true
            },
            touch:{
	        	touchenabled:"on",
            },
            bullets: {
                enable: false,
                hide_onleave: false,
                h_align: "center",
                v_align: "bottom",
                space: 5,
                h_offset: 0,
                v_offset: 20
            },
            thumbnails: {
                style: "erinyen",
                enable: true,
                width: 120,
                height: 68,
                min_width: 90,
                wrapper_padding: 0,
                wrapper_color: "transparent",
                wrapper_opacity: "1",
                tmp: '<span class="tp-thumb-over"></span><span class="tp-thumb-image"></span>',
                visibleAmount: 10,
                hide_onmobile: false,
                hide_onleave: false,
                direction: "horizontal",
                span: true,
                position: "outer-bottom",
                space: 10,
                h_align: "center",
                v_align: "bottom",
                h_offset: 0,
                v_offset: 0
            }
        },
        gridwidth: 1230,
        gridheight: 692,
        lazyType: "none",
        shadow: 0,
        spinner: "spinner2",
        stopLoop: "on",
        stopAfterLoops: 0,
        stopAtSlide: 1,
        shuffle: "off",
        autoHeight: "off",
        disableProgressBar: "on",
        hideThumbsOnMobile: "off",
        hideSliderAtLimit: 0,
        hideCaptionAtLimit: 0,
        hideAllCaptionAtLilmit: 0,
        debugMode: false,
        fallbacks: {
            simplifyAll: "off",
            nextSlideOnWindowFocus: "off",
            disableFocusListener: false,
        }
    });
    /*-----------------------------------------------------------------------------------*/
    /*	PARALLAX MOBILE
	/*-----------------------------------------------------------------------------------*/
    if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i)) {
        $('.parallax').addClass('mobile');
    }
    /*-----------------------------------------------------------------------------------*/
    /*	BACKGROUND VIDEO PARALLAX
	/*-----------------------------------------------------------------------------------*/
    $('#video-work').backgroundVideo({
        $outerWrap: $('.outer-wrap'),
        pauseVideoOnViewLoss: false,
        parallaxOptions: {
            effect: 1.9
        }
    });
    /*-----------------------------------------------------------------------------------*/
    /*	IMAGE ICON HOVER
	/*-----------------------------------------------------------------------------------*/
    $('.overlay.icon .info').prepend('<span class="icon-more"></span>');
    /*-----------------------------------------------------------------------------------*/
    /*	TAB COLLAPSE
	/*-----------------------------------------------------------------------------------*/
    $('#tab1').tabCollapse({
		tabsClass: 'hidden-sm hidden-xs',
		accordionClass: 'visible-sm visible-xs'
	});
	$('#tab1').on('shown-accordion.bs.tabcollapse', function(){
	    $('.panel-group').find('.panel-default:has(".in")').addClass('panel-active');
	    $('.panel-group').on('shown.bs.collapse', function(e) {
	        $(e.target).closest('.panel-default').addClass(' panel-active');
	    }).on('hidden.bs.collapse', function(e) {
	        $(e.target).closest('.panel-default').removeClass(' panel-active');
	    });
	});
    /*-----------------------------------------------------------------------------------*/
    /*	TOGGLE
	/*-----------------------------------------------------------------------------------*/
    $('.panel-group').find('.panel-default:has(".in")').addClass('panel-active');
    $('.panel-group').on('shown.bs.collapse', function(e) {
        $(e.target).closest('.panel-default').addClass(' panel-active');
    }).on('hidden.bs.collapse', function(e) {
        $(e.target).closest('.panel-default').removeClass(' panel-active');
    });
    /*-----------------------------------------------------------------------------------*/
    /*	PROGRESS BAR
	/*-----------------------------------------------------------------------------------*/
    $('.progress-list .progress .bar').progressBar({
        shadow: false,
        percentage: false,
        animation: true,
        height: 15
    });
    /*-----------------------------------------------------------------------------------*/
    /*	DATA REL
	/*-----------------------------------------------------------------------------------*/
    $('a[data-rel]').each(function() {
        $(this).attr('rel', $(this).data('rel'));
    });
    /*-----------------------------------------------------------------------------------*/
    /*	TOOLTIP
    /*-----------------------------------------------------------------------------------*/
    if ($("[rel=tooltip]").length) {
        $("[rel=tooltip]").tooltip();
    }
    /*-----------------------------------------------------------------------------------*/
    /*	PRETTIFY
	/*-----------------------------------------------------------------------------------*/
    window.prettyPrint && prettyPrint()
    /*-----------------------------------------------------------------------------------*/
    /*	COUNTER UP
	/*-----------------------------------------------------------------------------------*/
    $('.counter').counterUp({
        delay: 50,
        time: 1000
    });
    /*-----------------------------------------------------------------------------------*/
    /*	VANILLA
    /*-----------------------------------------------------------------------------------*/
    var myForm;
    myForm = new VanillaForm($("form.vanilla-form"));
    /*-----------------------------------------------------------------------------------*/
    /*	GO TO TOP
    /*-----------------------------------------------------------------------------------*/
    $.scrollUp({
        scrollName: 'scrollUp',
        // Element ID
        scrollDistance: 300,
        // Distance from top/bottom before showing element (px)
        scrollFrom: 'top',
        // 'top' or 'bottom'
        scrollSpeed: 300,
        // Speed back to top (ms)
        easingType: 'linear',
        // Scroll to top easing (see http://easings.net/)
        animation: 'fade',
        // Fade, slide, none
        animationInSpeed: 200,
        // Animation in speed (ms)
        animationOutSpeed: 200,
        // Animation out speed (ms)
        scrollText: '<span class="btn btn-square"><i class="icon-up-open"></i></span>',
        // Text for element, can contain HTML
        scrollTitle: false,
        // Set a custom <a> title if required. Defaults to scrollText
        scrollImg: false,
        // Set true to use image
        activeOverlay: false,
        // Set CSS color to display scrollUp active point, e.g '#00FFFF'
        zIndex: 1001 // Z-Index for the overlay
    });
    /*-----------------------------------------------------------------------------------*/
    /*	INSTAGRAM
    /*-----------------------------------------------------------------------------------*/
    var instagramFeed = new Instafeed({
        target: 'instafeed-widget',
        get: 'user',
        limit: 6,
        userId: 1215763826,
        accessToken: '1215763826.f1627ea.512d3a9b334a4c91ac2e83d4f4d9b291',
        resolution: 'low_resolution',
        template: '<div class="item col-xs-4 col-sm-6 col-md-4"><figure><a href="{{link}}" target="_blank"><div class="overlay icon"><div class="info"></div></div><img src="{{image}}" /></a></figure></div>',
        after: function() {
            $('#instafeed-widget .overlay.icon .info').prepend('<span class="icon-more"></span>');
        }
    });
    $('#instafeed-widget').each(function() {
        instagramFeed.run();
    });
    /*-----------------------------------------------------------------------------------*/
    /*	FITVIDS VIDEO
	/*-----------------------------------------------------------------------------------*/
    $('.player').fitVids();
    /*-----------------------------------------------------------------------------------*/
    /*	CIRCLE PROGRESS
    /*-----------------------------------------------------------------------------------*/
    if ($('.circle-progress-wrapper').length) {
        var circle1 = new ProgressBar.Circle('.circle.first', {
            color: '#32bea6',
            trailColor: 'rgba(0,0,0,0.05)',
            strokeWidth: 4,
            trailWidth: 4,
            duration: 4500,
            easing: 'easeInOut',
            text: {
                value: '0.4'
            },
            step: function(state, bar) {
                bar.setText((bar.value() * 100).toFixed(0));
            }
        });
        circle1.animate(0.4);
        var circle2 = new ProgressBar.Circle('.circle.second', {
            color: '#f2be3e',
            trailColor: 'rgba(0,0,0,0.05)',
            strokeWidth: 4,
            trailWidth: 4,
            duration: 4500,
            easing: 'easeInOut',
            text: {
                value: '0.8'
            },
            step: function(state, bar) {
                bar.setText((bar.value() * 100).toFixed(0));
            }
        });
        circle2.animate(0.8);
        var circle3 = new ProgressBar.Circle('.circle.third', {
            color: '#e04f5f',
            trailColor: 'rgba(0,0,0,0.05)',
            strokeWidth: 4,
            trailWidth: 4,
            duration: 4500,
            easing: 'easeInOut',
            text: {
                value: '0.34'
            },
            step: function(state, bar) {
                bar.setText((bar.value() * 100).toFixed(0));
            }
        });
        circle3.animate(0.34);
        var circle4 = new ProgressBar.Circle('.circle.fourth', {
            color: '#954e9d',
            trailColor: 'rgba(0,0,0,0.05)',
            strokeWidth: 4,
            trailWidth: 4,
            duration: 4500,
            easing: 'easeInOut',
            text: {
                value: '0.45'
            },
            step: function(state, bar) {
                bar.setText((bar.value() * 100).toFixed(0));
            }
        });
        circle4.animate(0.45);
    }
    /*-----------------------------------------------------------------------------------*/
	/*	WOW ANIMATION
	/*-----------------------------------------------------------------------------------*/
	new WOW().init();
	/*-----------------------------------------------------------------------------------*/
	/*	LAZY LOAD GOOGLE MAPS
	/*-----------------------------------------------------------------------------------*/
	;
	(function($, window, document, undefined) {
	    var $window = $(window),
	        mapInstances = [],
	        $pluginInstance = $('.google-map').lazyLoadGoogleMaps({
	            callback: function(container, map) {
	                var $container = $(container),
	                    center = new google.maps.LatLng($container.attr('data-lat'), $container.attr('data-lng'));

	                map.setOptions({
	                    center: center,
	                    zoom: 15,
	                    zoomControl: true,
	                    zoomControlOptions: {
	                        style: google.maps.ZoomControlStyle.DEFAULT,
	                    },
	                    disableDoubleClickZoom: false,
	                    mapTypeControl: true,
	                    mapTypeControlOptions: {
	                        style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
	                    },
	                    scaleControl: true,
	                    scrollwheel: false,
	                    streetViewControl: true,
	                    draggable: true,
	                    overviewMapControl: false,
	                    mapTypeId: google.maps.MapTypeId.ROADMAP,
	                    styles: [{
	                        stylers: [{
	                            saturation: -100
	                        }, {
	                            gamma: 1
	                        }]
	                    }, {
	                        elementType: "labels.text.stroke",
	                        stylers: [{
	                            visibility: "off"
	                        }]
	                    }, {
	                        featureType: "poi.business",
	                        elementType: "labels.text",
	                        stylers: [{
	                            visibility: "off"
	                        }]
	                    }, {
	                        featureType: "poi.business",
	                        elementType: "labels.icon",
	                        stylers: [{
	                            visibility: "off"
	                        }]
	                    }, {
	                        featureType: "poi.place_of_worship",
	                        elementType: "labels.text",
	                        stylers: [{
	                            visibility: "off"
	                        }]
	                    }, {
	                        featureType: "poi.place_of_worship",
	                        elementType: "labels.icon",
	                        stylers: [{
	                            visibility: "off"
	                        }]
	                    }, {
	                        featureType: "road",
	                        elementType: "geometry",
	                        stylers: [{
	                            visibility: "simplified"
	                        }]
	                    }, {
	                        featureType: "water",
	                        stylers: [{
	                            visibility: "on"
	                        }, {
	                            saturation: 50
	                        }, {
	                            gamma: 0
	                        }, {
	                            hue: "#50a5d1"
	                        }]
	                    }, {
	                        featureType: "administrative.neighborhood",
	                        elementType: "labels.text.fill",
	                        stylers: [{
	                            color: "#333333"
	                        }]
	                    }, {
	                        featureType: "road.local",
	                        elementType: "labels.text",
	                        stylers: [{
	                            weight: 0.5
	                        }, {
	                            color: "#333333"
	                        }]
	                    }, {
	                        featureType: "transit.station",
	                        elementType: "labels.icon",
	                        stylers: [{
	                            gamma: 1
	                        }, {
	                            saturation: 50
	                        }]
	                    }]
	                });
	                new google.maps.Marker({
	                    position: center,
	                    map: map
	                });

	                $.data(map, 'center', center);
	                mapInstances.push(map);

	                var updateCenter = function() {
	                    $.data(map, 'center', map.getCenter());
	                };
	                google.maps.event.addListener(map, 'dragend', updateCenter);
	                google.maps.event.addListener(map, 'zoom_changed', updateCenter);
	                google.maps.event.addListenerOnce(map, 'idle', function() {
	                    $container.addClass('is-loaded');
	                });
	            }
	        });

	    $window.on('resize', $pluginInstance.debounce(1000, function() {
	        $.each(mapInstances, function() {
	            this.setCenter($.data(this, 'center'));
	        });
	    }));

	})(jQuery, window, document);
	/*-----------------------------------------------------------------------------------*/
	/*	LOADING
	/*-----------------------------------------------------------------------------------*/
	$(window).load(function() {
	    $(".circle-progress-wrapper strong").css("visibility", "visible");
	});
});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"eventie":2,"wolfy87-eventemitter":3}],2:[function(require,module,exports){
/*!
 * eventie v1.0.6
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 */

/*jshint browser: true, undef: true, unused: true */
/*global define: false, module: false */

( function( window ) {

'use strict';

var docElem = document.documentElement;

var bind = function() {};

function getIEEvent( obj ) {
  var event = window.event;
  // add event.target
  event.target = event.target || event.srcElement || obj;
  return event;
}

if ( docElem.addEventListener ) {
  bind = function( obj, type, fn ) {
    obj.addEventListener( type, fn, false );
  };
} else if ( docElem.attachEvent ) {
  bind = function( obj, type, fn ) {
    obj[ type + fn ] = fn.handleEvent ?
      function() {
        var event = getIEEvent( obj );
        fn.handleEvent.call( fn, event );
      } :
      function() {
        var event = getIEEvent( obj );
        fn.call( obj, event );
      };
    obj.attachEvent( "on" + type, obj[ type + fn ] );
  };
}

var unbind = function() {};

if ( docElem.removeEventListener ) {
  unbind = function( obj, type, fn ) {
    obj.removeEventListener( type, fn, false );
  };
} else if ( docElem.detachEvent ) {
  unbind = function( obj, type, fn ) {
    obj.detachEvent( "on" + type, obj[ type + fn ] );
    try {
      delete obj[ type + fn ];
    } catch ( err ) {
      // can't delete window object properties
      obj[ type + fn ] = undefined;
    }
  };
}

var eventie = {
  bind: bind,
  unbind: unbind
};

// ----- module definition ----- //

if ( typeof define === 'function' && define.amd ) {
  // AMD
  define( eventie );
} else if ( typeof exports === 'object' ) {
  // CommonJS
  module.exports = eventie;
} else {
  // browser global
  window.eventie = eventie;
}

})( window );

},{}],3:[function(require,module,exports){
/*!
 * EventEmitter v5.2.4 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */

;(function (exports) {
    'use strict';

    /**
     * Class for managing events.
     * Can be extended to provide event functionality in other classes.
     *
     * @class EventEmitter Manages event registering and emitting.
     */
    function EventEmitter() {}

    // Shortcuts to improve speed and size
    var proto = EventEmitter.prototype;
    var originalGlobalValue = exports.EventEmitter;

    /**
     * Finds the index of the listener for the event in its storage array.
     *
     * @param {Function[]} listeners Array of listeners to search through.
     * @param {Function} listener Method to look for.
     * @return {Number} Index of the specified listener, -1 if not found
     * @api private
     */
    function indexOfListener(listeners, listener) {
        var i = listeners.length;
        while (i--) {
            if (listeners[i].listener === listener) {
                return i;
            }
        }

        return -1;
    }

    /**
     * Alias a method while keeping the context correct, to allow for overwriting of target method.
     *
     * @param {String} name The name of the target method.
     * @return {Function} The aliased method
     * @api private
     */
    function alias(name) {
        return function aliasClosure() {
            return this[name].apply(this, arguments);
        };
    }

    /**
     * Returns the listener array for the specified event.
     * Will initialise the event object and listener arrays if required.
     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.
     * Each property in the object response is an array of listener functions.
     *
     * @param {String|RegExp} evt Name of the event to return the listeners from.
     * @return {Function[]|Object} All listener functions for the event.
     */
    proto.getListeners = function getListeners(evt) {
        var events = this._getEvents();
        var response;
        var key;

        // Return a concatenated array of all matching events if
        // the selector is a regular expression.
        if (evt instanceof RegExp) {
            response = {};
            for (key in events) {
                if (events.hasOwnProperty(key) && evt.test(key)) {
                    response[key] = events[key];
                }
            }
        }
        else {
            response = events[evt] || (events[evt] = []);
        }

        return response;
    };

    /**
     * Takes a list of listener objects and flattens it into a list of listener functions.
     *
     * @param {Object[]} listeners Raw listener objects.
     * @return {Function[]} Just the listener functions.
     */
    proto.flattenListeners = function flattenListeners(listeners) {
        var flatListeners = [];
        var i;

        for (i = 0; i < listeners.length; i += 1) {
            flatListeners.push(listeners[i].listener);
        }

        return flatListeners;
    };

    /**
     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.
     *
     * @param {String|RegExp} evt Name of the event to return the listeners from.
     * @return {Object} All listener functions for an event in an object.
     */
    proto.getListenersAsObject = function getListenersAsObject(evt) {
        var listeners = this.getListeners(evt);
        var response;

        if (listeners instanceof Array) {
            response = {};
            response[evt] = listeners;
        }

        return response || listeners;
    };

    function isValidListener (listener) {
        if (typeof listener === 'function' || listener instanceof RegExp) {
            return true
        } else if (listener && typeof listener === 'object') {
            return isValidListener(listener.listener)
        } else {
            return false
        }
    }

    /**
     * Adds a listener function to the specified event.
     * The listener will not be added if it is a duplicate.
     * If the listener returns true then it will be removed after it is called.
     * If you pass a regular expression as the event name then the listener will be added to all events that match it.
     *
     * @param {String|RegExp} evt Name of the event to attach the listener to.
     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.addListener = function addListener(evt, listener) {
        if (!isValidListener(listener)) {
            throw new TypeError('listener must be a function');
        }

        var listeners = this.getListenersAsObject(evt);
        var listenerIsWrapped = typeof listener === 'object';
        var key;

        for (key in listeners) {
            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {
                listeners[key].push(listenerIsWrapped ? listener : {
                    listener: listener,
                    once: false
                });
            }
        }

        return this;
    };

    /**
     * Alias of addListener
     */
    proto.on = alias('addListener');

    /**
     * Semi-alias of addListener. It will add a listener that will be
     * automatically removed after its first execution.
     *
     * @param {String|RegExp} evt Name of the event to attach the listener to.
     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.addOnceListener = function addOnceListener(evt, listener) {
        return this.addListener(evt, {
            listener: listener,
            once: true
        });
    };

    /**
     * Alias of addOnceListener.
     */
    proto.once = alias('addOnceListener');

    /**
     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.
     * You need to tell it what event names should be matched by a regex.
     *
     * @param {String} evt Name of the event to create.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.defineEvent = function defineEvent(evt) {
        this.getListeners(evt);
        return this;
    };

    /**
     * Uses defineEvent to define multiple events.
     *
     * @param {String[]} evts An array of event names to define.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.defineEvents = function defineEvents(evts) {
        for (var i = 0; i < evts.length; i += 1) {
            this.defineEvent(evts[i]);
        }
        return this;
    };

    /**
     * Removes a listener function from the specified event.
     * When passed a regular expression as the event name, it will remove the listener from all events that match it.
     *
     * @param {String|RegExp} evt Name of the event to remove the listener from.
     * @param {Function} listener Method to remove from the event.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.removeListener = function removeListener(evt, listener) {
        var listeners = this.getListenersAsObject(evt);
        var index;
        var key;

        for (key in listeners) {
            if (listeners.hasOwnProperty(key)) {
                index = indexOfListener(listeners[key], listener);

                if (index !== -1) {
                    listeners[key].splice(index, 1);
                }
            }
        }

        return this;
    };

    /**
     * Alias of removeListener
     */
    proto.off = alias('removeListener');

    /**
     * Adds listeners in bulk using the manipulateListeners method.
     * If you pass an object as the first argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.
     * You can also pass it a regular expression to add the array of listeners to all events that match it.
     * Yeah, this function does quite a bit. That's probably a bad thing.
     *
     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.
     * @param {Function[]} [listeners] An optional array of listener functions to add.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.addListeners = function addListeners(evt, listeners) {
        // Pass through to manipulateListeners
        return this.manipulateListeners(false, evt, listeners);
    };

    /**
     * Removes listeners in bulk using the manipulateListeners method.
     * If you pass an object as the first argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.
     * You can also pass it an event name and an array of listeners to be removed.
     * You can also pass it a regular expression to remove the listeners from all events that match it.
     *
     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.
     * @param {Function[]} [listeners] An optional array of listener functions to remove.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.removeListeners = function removeListeners(evt, listeners) {
        // Pass through to manipulateListeners
        return this.manipulateListeners(true, evt, listeners);
    };

    /**
     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.
     * The first argument will determine if the listeners are removed (true) or added (false).
     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.
     * You can also pass it an event name and an array of listeners to be added/removed.
     * You can also pass it a regular expression to manipulate the listeners of all events that match it.
     *
     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.
     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.
     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {
        var i;
        var value;
        var single = remove ? this.removeListener : this.addListener;
        var multiple = remove ? this.removeListeners : this.addListeners;

        // If evt is an object then pass each of its properties to this method
        if (typeof evt === 'object' && !(evt instanceof RegExp)) {
            for (i in evt) {
                if (evt.hasOwnProperty(i) && (value = evt[i])) {
                    // Pass the single listener straight through to the singular method
                    if (typeof value === 'function') {
                        single.call(this, i, value);
                    }
                    else {
                        // Otherwise pass back to the multiple function
                        multiple.call(this, i, value);
                    }
                }
            }
        }
        else {
            // So evt must be a string
            // And listeners must be an array of listeners
            // Loop over it and pass each one to the multiple method
            i = listeners.length;
            while (i--) {
                single.call(this, evt, listeners[i]);
            }
        }

        return this;
    };

    /**
     * Removes all listeners from a specified event.
     * If you do not specify an event then all listeners will be removed.
     * That means every event will be emptied.
     * You can also pass a regex to remove all events that match it.
     *
     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.removeEvent = function removeEvent(evt) {
        var type = typeof evt;
        var events = this._getEvents();
        var key;

        // Remove different things depending on the state of evt
        if (type === 'string') {
            // Remove all listeners for the specified event
            delete events[evt];
        }
        else if (evt instanceof RegExp) {
            // Remove all events matching the regex.
            for (key in events) {
                if (events.hasOwnProperty(key) && evt.test(key)) {
                    delete events[key];
                }
            }
        }
        else {
            // Remove all listeners in all events
            delete this._events;
        }

        return this;
    };

    /**
     * Alias of removeEvent.
     *
     * Added to mirror the node API.
     */
    proto.removeAllListeners = alias('removeEvent');

    /**
     * Emits an event of your choice.
     * When emitted, every listener attached to that event will be executed.
     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.
     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.
     * So they will not arrive within the array on the other side, they will be separate.
     * You can also pass a regular expression to emit to all events that match it.
     *
     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.
     * @param {Array} [args] Optional array of arguments to be passed to each listener.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.emitEvent = function emitEvent(evt, args) {
        var listenersMap = this.getListenersAsObject(evt);
        var listeners;
        var listener;
        var i;
        var key;
        var response;

        for (key in listenersMap) {
            if (listenersMap.hasOwnProperty(key)) {
                listeners = listenersMap[key].slice(0);

                for (i = 0; i < listeners.length; i++) {
                    // If the listener returns true then it shall be removed from the event
                    // The function is executed either with a basic call or an apply if there is an args array
                    listener = listeners[i];

                    if (listener.once === true) {
                        this.removeListener(evt, listener.listener);
                    }

                    response = listener.listener.apply(this, args || []);

                    if (response === this._getOnceReturnValue()) {
                        this.removeListener(evt, listener.listener);
                    }
                }
            }
        }

        return this;
    };

    /**
     * Alias of emitEvent
     */
    proto.trigger = alias('emitEvent');

    /**
     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.
     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.
     *
     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.
     * @param {...*} Optional additional arguments to be passed to each listener.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.emit = function emit(evt) {
        var args = Array.prototype.slice.call(arguments, 1);
        return this.emitEvent(evt, args);
    };

    /**
     * Sets the current value to check against when executing listeners. If a
     * listeners return value matches the one set here then it will be removed
     * after execution. This value defaults to true.
     *
     * @param {*} value The new value to check for when executing listeners.
     * @return {Object} Current instance of EventEmitter for chaining.
     */
    proto.setOnceReturnValue = function setOnceReturnValue(value) {
        this._onceReturnValue = value;
        return this;
    };

    /**
     * Fetches the current value to check against when executing listeners. If
     * the listeners return value matches this one then it should be removed
     * automatically. It will return true by default.
     *
     * @return {*|Boolean} The current value to check for or the default, true.
     * @api private
     */
    proto._getOnceReturnValue = function _getOnceReturnValue() {
        if (this.hasOwnProperty('_onceReturnValue')) {
            return this._onceReturnValue;
        }
        else {
            return true;
        }
    };

    /**
     * Fetches the events object and creates one if required.
     *
     * @return {Object} The events storage object.
     * @api private
     */
    proto._getEvents = function _getEvents() {
        return this._events || (this._events = {});
    };

    /**
     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.
     *
     * @return {Function} Non conflicting EventEmitter class.
     */
    EventEmitter.noConflict = function noConflict() {
        exports.EventEmitter = originalGlobalValue;
        return EventEmitter;
    };

    // Expose the class either via AMD, CommonJS or the global object
    if (typeof define === 'function' && define.amd) {
        define(function () {
            return EventEmitter;
        });
    }
    else if (typeof module === 'object' && module.exports){
        module.exports = EventEmitter;
    }
    else {
        exports.EventEmitter = EventEmitter;
    }
}(this || {}));

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9ldmVudGllL2V2ZW50aWUuanMiLCJub2RlX21vZHVsZXMvd29sZnk4Ny1ldmVudGVtaXR0ZXIvRXZlbnRFbWl0dGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2hrRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXG4vKiBqcUJvb3RzdHJhcFZhbGlkYXRpb25cbiAqIEEgcGx1Z2luIGZvciBhdXRvbWF0aW5nIHZhbGlkYXRpb24gb24gVHdpdHRlciBCb290c3RyYXAgZm9ybWF0dGVkIGZvcm1zLlxuICpcbiAqIHYxLjMuNlxuICpcbiAqIExpY2Vuc2U6IE1JVCA8aHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocD4gLSBzZWUgTElDRU5TRSBmaWxlXG4gKlxuICogaHR0cDovL1JlYWN0aXZlUmF2ZW4uZ2l0aHViLmNvbS9qcUJvb3RzdHJhcFZhbGlkYXRpb24vXG4gKi9cblxuKGZ1bmN0aW9uKCAkICl7XG5cblx0dmFyIGNyZWF0ZWRFbGVtZW50cyA9IFtdO1xuXG5cdHZhciBkZWZhdWx0cyA9IHtcblx0XHRvcHRpb25zOiB7XG5cdFx0XHRwcmVwZW5kRXhpc3RpbmdIZWxwQmxvY2s6IGZhbHNlLFxuXHRcdFx0c25pZmZIdG1sOiB0cnVlLCAvLyBzbmlmZiBmb3IgJ3JlcXVpcmVkJywgJ21heGxlbmd0aCcsIGV0Y1xuXHRcdFx0cHJldmVudFN1Ym1pdDogdHJ1ZSwgLy8gc3RvcCB0aGUgZm9ybSBzdWJtaXQgZXZlbnQgZnJvbSBmaXJpbmcgaWYgdmFsaWRhdGlvbiBmYWlsc1xuXHRcdFx0c3VibWl0RXJyb3I6IGZhbHNlLCAvLyBmdW5jdGlvbiBjYWxsZWQgaWYgdGhlcmUgaXMgYW4gZXJyb3Igd2hlbiB0cnlpbmcgdG8gc3VibWl0XG5cdFx0XHRzdWJtaXRTdWNjZXNzOiBmYWxzZSwgLy8gZnVuY3Rpb24gY2FsbGVkIGp1c3QgYmVmb3JlIGEgc3VjY2Vzc2Z1bCBzdWJtaXQgZXZlbnQgaXMgc2VudCB0byB0aGUgc2VydmVyXG4gICAgICAgICAgICBzZW1hbnRpY2FsbHlTdHJpY3Q6IGZhbHNlLCAvLyBzZXQgdG8gdHJ1ZSB0byB0aWR5IHVwIGdlbmVyYXRlZCBIVE1MIG91dHB1dFxuXHRcdFx0YXV0b0FkZDoge1xuXHRcdFx0XHRoZWxwQmxvY2tzOiB0cnVlXG5cdFx0XHR9LFxuICAgICAgICAgICAgZmlsdGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuICQodGhpcykuaXMoXCI6dmlzaWJsZVwiKTsgLy8gb25seSB2YWxpZGF0ZSBlbGVtZW50cyB5b3UgY2FuIHNlZVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyB2YWxpZGF0ZSBldmVyeXRoaW5nXG4gICAgICAgICAgICB9XG5cdFx0fSxcbiAgICBtZXRob2RzOiB7XG4gICAgICBpbml0IDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cbiAgICAgICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQodHJ1ZSwge30sIGRlZmF1bHRzKTtcblxuICAgICAgICBzZXR0aW5ncy5vcHRpb25zID0gJC5leHRlbmQodHJ1ZSwgc2V0dGluZ3Mub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgICAgdmFyICRzaWJsaW5nRWxlbWVudHMgPSB0aGlzO1xuXG4gICAgICAgIHZhciB1bmlxdWVGb3JtcyA9ICQudW5pcXVlKFxuICAgICAgICAgICRzaWJsaW5nRWxlbWVudHMubWFwKCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5wYXJlbnRzKFwiZm9ybVwiKVswXTtcbiAgICAgICAgICB9KS50b0FycmF5KClcbiAgICAgICAgKTtcblxuICAgICAgICAkKHVuaXF1ZUZvcm1zKS5iaW5kKFwic3VibWl0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdmFyICRmb3JtID0gJCh0aGlzKTtcbiAgICAgICAgICB2YXIgd2FybmluZ3NGb3VuZCA9IDA7XG4gICAgICAgICAgdmFyICRpbnB1dHMgPSAkZm9ybS5maW5kKFwiaW5wdXQsdGV4dGFyZWEsc2VsZWN0XCIpLm5vdChcIlt0eXBlPXN1Ym1pdF0sW3R5cGU9aW1hZ2VdXCIpLmZpbHRlcihzZXR0aW5ncy5vcHRpb25zLmZpbHRlcik7XG4gICAgICAgICAgJGlucHV0cy50cmlnZ2VyKFwic3VibWl0LnZhbGlkYXRpb25cIikudHJpZ2dlcihcInZhbGlkYXRpb25Mb3N0Rm9jdXMudmFsaWRhdGlvblwiKTtcblxuICAgICAgICAgICRpbnB1dHMuZWFjaChmdW5jdGlvbiAoaSwgZWwpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQoZWwpLFxuICAgICAgICAgICAgICAkY29udHJvbEdyb3VwID0gJHRoaXMucGFyZW50cyhcIi5jb250cm9sLWdyb3VwXCIpLmZpcnN0KCk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICRjb250cm9sR3JvdXAuaGFzQ2xhc3MoXCJ3YXJuaW5nXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgJGNvbnRyb2xHcm91cC5yZW1vdmVDbGFzcyhcIndhcm5pbmdcIikuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgICAgd2FybmluZ3NGb3VuZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgJGlucHV0cy50cmlnZ2VyKFwidmFsaWRhdGlvbkxvc3RGb2N1cy52YWxpZGF0aW9uXCIpO1xuXG4gICAgICAgICAgaWYgKHdhcm5pbmdzRm91bmQpIHtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5vcHRpb25zLnByZXZlbnRTdWJtaXQpIHtcbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJGZvcm0uYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oc2V0dGluZ3Mub3B0aW9ucy5zdWJtaXRFcnJvcikpIHtcbiAgICAgICAgICAgICAgc2V0dGluZ3Mub3B0aW9ucy5zdWJtaXRFcnJvcigkZm9ybSwgZSwgJGlucHV0cy5qcUJvb3RzdHJhcFZhbGlkYXRpb24oXCJjb2xsZWN0RXJyb3JzXCIsIHRydWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGZvcm0ucmVtb3ZlQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oc2V0dGluZ3Mub3B0aW9ucy5zdWJtaXRTdWNjZXNzKSkge1xuICAgICAgICAgICAgICBzZXR0aW5ncy5vcHRpb25zLnN1Ym1pdFN1Y2Nlc3MoJGZvcm0sIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgLy8gR2V0IHJlZmVyZW5jZXMgdG8gZXZlcnl0aGluZyB3ZSdyZSBpbnRlcmVzdGVkIGluXG4gICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICRjb250cm9sR3JvdXAgPSAkdGhpcy5wYXJlbnRzKFwiLmNvbnRyb2wtZ3JvdXBcIikuZmlyc3QoKSxcbiAgICAgICAgICAgICRoZWxwQmxvY2sgPSAkY29udHJvbEdyb3VwLmZpbmQoXCIuaGVscC1ibG9ja1wiKS5maXJzdCgpLFxuICAgICAgICAgICAgJGZvcm0gPSAkdGhpcy5wYXJlbnRzKFwiZm9ybVwiKS5maXJzdCgpLFxuICAgICAgICAgICAgdmFsaWRhdG9yTmFtZXMgPSBbXTtcblxuICAgICAgICAgIC8vIGNyZWF0ZSBtZXNzYWdlIGNvbnRhaW5lciBpZiBub3QgZXhpc3RzXG4gICAgICAgICAgaWYgKCEkaGVscEJsb2NrLmxlbmd0aCAmJiBzZXR0aW5ncy5vcHRpb25zLmF1dG9BZGQgJiYgc2V0dGluZ3Mub3B0aW9ucy5hdXRvQWRkLmhlbHBCbG9ja3MpIHtcbiAgICAgICAgICAgICAgJGhlbHBCbG9jayA9ICQoJzxkaXYgY2xhc3M9XCJoZWxwLWJsb2NrXCIgLz4nKTtcbiAgICAgICAgICAgICAgJGNvbnRyb2xHcm91cC5maW5kKCcuY29udHJvbHMnKS5hcHBlbmQoJGhlbHBCbG9jayk7XG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRFbGVtZW50cy5wdXNoKCRoZWxwQmxvY2tbMF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTTklGRiBIVE1MIEZPUiBWQUxJREFUT1JTXG4gICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgICAgICAgLy8gKnNub3J0IHNuaWZmIHNudWZmbGUqXG5cbiAgICAgICAgICBpZiAoc2V0dGluZ3Mub3B0aW9ucy5zbmlmZkh0bWwpIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gXCJcIjtcbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQQVRURVJOXG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGlmICgkdGhpcy5hdHRyKFwicGF0dGVyblwiKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIk5vdCBpbiB0aGUgZXhwZWN0ZWQgZm9ybWF0PCEtLSBkYXRhLXZhbGlkYXRpb24tcGF0dGVybi1tZXNzYWdlIHRvIG92ZXJyaWRlIC0tPlwiO1xuICAgICAgICAgICAgICBpZiAoJHRoaXMuZGF0YShcInZhbGlkYXRpb25QYXR0ZXJuTWVzc2FnZVwiKSkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAkdGhpcy5kYXRhKFwidmFsaWRhdGlvblBhdHRlcm5NZXNzYWdlXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uUGF0dGVybk1lc3NhZ2VcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uUGF0dGVyblJlZ2V4XCIsICR0aGlzLmF0dHIoXCJwYXR0ZXJuXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTUFYXG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGlmICgkdGhpcy5hdHRyKFwibWF4XCIpICE9PSB1bmRlZmluZWQgfHwgJHRoaXMuYXR0cihcImFyaWEtdmFsdWVtYXhcIikgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICB2YXIgbWF4ID0gKCR0aGlzLmF0dHIoXCJtYXhcIikgIT09IHVuZGVmaW5lZCA/ICR0aGlzLmF0dHIoXCJtYXhcIikgOiAkdGhpcy5hdHRyKFwiYXJpYS12YWx1ZW1heFwiKSk7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIlRvbyBoaWdoOiBNYXhpbXVtIG9mICdcIiArIG1heCArIFwiJzwhLS0gZGF0YS12YWxpZGF0aW9uLW1heC1tZXNzYWdlIHRvIG92ZXJyaWRlIC0tPlwiO1xuICAgICAgICAgICAgICBpZiAoJHRoaXMuZGF0YShcInZhbGlkYXRpb25NYXhNZXNzYWdlXCIpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9ICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTWF4TWVzc2FnZVwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAkdGhpcy5kYXRhKFwidmFsaWRhdGlvbk1heE1lc3NhZ2VcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTWF4TWF4XCIsIG1heCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1JTlxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBpZiAoJHRoaXMuYXR0cihcIm1pblwiKSAhPT0gdW5kZWZpbmVkIHx8ICR0aGlzLmF0dHIoXCJhcmlhLXZhbHVlbWluXCIpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdmFyIG1pbiA9ICgkdGhpcy5hdHRyKFwibWluXCIpICE9PSB1bmRlZmluZWQgPyAkdGhpcy5hdHRyKFwibWluXCIpIDogJHRoaXMuYXR0cihcImFyaWEtdmFsdWVtaW5cIikpO1xuICAgICAgICAgICAgICBtZXNzYWdlID0gXCJUb28gbG93OiBNaW5pbXVtIG9mICdcIiArIG1pbiArIFwiJzwhLS0gZGF0YS12YWxpZGF0aW9uLW1pbi1tZXNzYWdlIHRvIG92ZXJyaWRlIC0tPlwiO1xuICAgICAgICAgICAgICBpZiAoJHRoaXMuZGF0YShcInZhbGlkYXRpb25NaW5NZXNzYWdlXCIpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9ICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTWluTWVzc2FnZVwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAkdGhpcy5kYXRhKFwidmFsaWRhdGlvbk1pbk1lc3NhZ2VcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTWluTWluXCIsIG1pbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1BWExFTkdUSFxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBpZiAoJHRoaXMuYXR0cihcIm1heGxlbmd0aFwiKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIlRvbyBsb25nOiBNYXhpbXVtIG9mICdcIiArICR0aGlzLmF0dHIoXCJtYXhsZW5ndGhcIikgKyBcIicgY2hhcmFjdGVyczwhLS0gZGF0YS12YWxpZGF0aW9uLW1heGxlbmd0aC1tZXNzYWdlIHRvIG92ZXJyaWRlIC0tPlwiO1xuICAgICAgICAgICAgICBpZiAoJHRoaXMuZGF0YShcInZhbGlkYXRpb25NYXhsZW5ndGhNZXNzYWdlXCIpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9ICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTWF4bGVuZ3RoTWVzc2FnZVwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAkdGhpcy5kYXRhKFwidmFsaWRhdGlvbk1heGxlbmd0aE1lc3NhZ2VcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTWF4bGVuZ3RoTWF4bGVuZ3RoXCIsICR0aGlzLmF0dHIoXCJtYXhsZW5ndGhcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNSU5MRU5HVEhcbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgaWYgKCR0aGlzLmF0dHIoXCJtaW5sZW5ndGhcIikgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBtZXNzYWdlID0gXCJUb28gc2hvcnQ6IE1pbmltdW0gb2YgJ1wiICsgJHRoaXMuYXR0cihcIm1pbmxlbmd0aFwiKSArIFwiJyBjaGFyYWN0ZXJzPCEtLSBkYXRhLXZhbGlkYXRpb24tbWlubGVuZ3RoLW1lc3NhZ2UgdG8gb3ZlcnJpZGUgLS0+XCI7XG4gICAgICAgICAgICAgIGlmICgkdGhpcy5kYXRhKFwidmFsaWRhdGlvbk1pbmxlbmd0aE1lc3NhZ2VcIikpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gJHRoaXMuZGF0YShcInZhbGlkYXRpb25NaW5sZW5ndGhNZXNzYWdlXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTWlubGVuZ3RoTWVzc2FnZVwiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgJHRoaXMuZGF0YShcInZhbGlkYXRpb25NaW5sZW5ndGhNaW5sZW5ndGhcIiwgJHRoaXMuYXR0cihcIm1pbmxlbmd0aFwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRVFVSVJFRFxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBpZiAoJHRoaXMuYXR0cihcInJlcXVpcmVkXCIpICE9PSB1bmRlZmluZWQgfHwgJHRoaXMuYXR0cihcImFyaWEtcmVxdWlyZWRcIikgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBtZXNzYWdlID0gc2V0dGluZ3MuYnVpbHRJblZhbGlkYXRvcnMucmVxdWlyZWQubWVzc2FnZTtcbiAgICAgICAgICAgICAgaWYgKCR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uUmVxdWlyZWRNZXNzYWdlXCIpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9ICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uUmVxdWlyZWRNZXNzYWdlXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uUmVxdWlyZWRNZXNzYWdlXCIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOVU1CRVJcbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgaWYgKCR0aGlzLmF0dHIoXCJ0eXBlXCIpICE9PSB1bmRlZmluZWQgJiYgJHRoaXMuYXR0cihcInR5cGVcIikudG9Mb3dlckNhc2UoKSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICBtZXNzYWdlID0gc2V0dGluZ3MuYnVpbHRJblZhbGlkYXRvcnMubnVtYmVyLm1lc3NhZ2U7XG4gICAgICAgICAgICAgIGlmICgkdGhpcy5kYXRhKFwidmFsaWRhdGlvbk51bWJlck1lc3NhZ2VcIikpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gJHRoaXMuZGF0YShcInZhbGlkYXRpb25OdW1iZXJNZXNzYWdlXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTnVtYmVyTWVzc2FnZVwiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVNQUlMXG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGlmICgkdGhpcy5hdHRyKFwidHlwZVwiKSAhPT0gdW5kZWZpbmVkICYmICR0aGlzLmF0dHIoXCJ0eXBlXCIpLnRvTG93ZXJDYXNlKCkgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICBtZXNzYWdlID0gXCJOb3QgYSB2YWxpZCBlbWFpbCBhZGRyZXNzPCEtLSBkYXRhLXZhbGlkYXRvci12YWxpZGVtYWlsLW1lc3NhZ2UgdG8gb3ZlcnJpZGUgLS0+XCI7XG4gICAgICAgICAgICAgIGlmICgkdGhpcy5kYXRhKFwidmFsaWRhdGlvblZhbGlkZW1haWxNZXNzYWdlXCIpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9ICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uVmFsaWRlbWFpbE1lc3NhZ2VcIik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHRoaXMuZGF0YShcInZhbGlkYXRpb25FbWFpbE1lc3NhZ2VcIikpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gJHRoaXMuZGF0YShcInZhbGlkYXRpb25FbWFpbE1lc3NhZ2VcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgJHRoaXMuZGF0YShcInZhbGlkYXRpb25WYWxpZGVtYWlsTWVzc2FnZVwiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNSU5DSEVDS0VEXG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGlmICgkdGhpcy5hdHRyKFwibWluY2hlY2tlZFwiKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIk5vdCBlbm91Z2ggb3B0aW9ucyBjaGVja2VkOyBNaW5pbXVtIG9mICdcIiArICR0aGlzLmF0dHIoXCJtaW5jaGVja2VkXCIpICsgXCInIHJlcXVpcmVkPCEtLSBkYXRhLXZhbGlkYXRpb24tbWluY2hlY2tlZC1tZXNzYWdlIHRvIG92ZXJyaWRlIC0tPlwiO1xuICAgICAgICAgICAgICBpZiAoJHRoaXMuZGF0YShcInZhbGlkYXRpb25NaW5jaGVja2VkTWVzc2FnZVwiKSkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAkdGhpcy5kYXRhKFwidmFsaWRhdGlvbk1pbmNoZWNrZWRNZXNzYWdlXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTWluY2hlY2tlZE1lc3NhZ2VcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTWluY2hlY2tlZE1pbmNoZWNrZWRcIiwgJHRoaXMuYXR0cihcIm1pbmNoZWNrZWRcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1BWENIRUNLRURcbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgaWYgKCR0aGlzLmF0dHIoXCJtYXhjaGVja2VkXCIpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiVG9vIG1hbnkgb3B0aW9ucyBjaGVja2VkOyBNYXhpbXVtIG9mICdcIiArICR0aGlzLmF0dHIoXCJtYXhjaGVja2VkXCIpICsgXCInIHJlcXVpcmVkPCEtLSBkYXRhLXZhbGlkYXRpb24tbWF4Y2hlY2tlZC1tZXNzYWdlIHRvIG92ZXJyaWRlIC0tPlwiO1xuICAgICAgICAgICAgICBpZiAoJHRoaXMuZGF0YShcInZhbGlkYXRpb25NYXhjaGVja2VkTWVzc2FnZVwiKSkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAkdGhpcy5kYXRhKFwidmFsaWRhdGlvbk1heGNoZWNrZWRNZXNzYWdlXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTWF4Y2hlY2tlZE1lc3NhZ2VcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uTWF4Y2hlY2tlZE1heGNoZWNrZWRcIiwgJHRoaXMuYXR0cihcIm1heGNoZWNrZWRcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPTExFQ1QgVkFMSURBVE9SIE5BTUVTXG4gICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgICAgICAgLy8gR2V0IG5hbWVkIHZhbGlkYXRvcnNcbiAgICAgICAgICBpZiAoJHRoaXMuZGF0YShcInZhbGlkYXRpb25cIikgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFsaWRhdG9yTmFtZXMgPSAkdGhpcy5kYXRhKFwidmFsaWRhdGlvblwiKS5zcGxpdChcIixcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gR2V0IGV4dHJhIG9uZXMgZGVmaW5lZCBvbiB0aGUgZWxlbWVudCdzIGRhdGEgYXR0cmlidXRlc1xuICAgICAgICAgICQuZWFjaCgkdGhpcy5kYXRhKCksIGZ1bmN0aW9uIChpLCBlbCkge1xuICAgICAgICAgICAgdmFyIHBhcnRzID0gaS5yZXBsYWNlKC8oW0EtWl0pL2csIFwiLCQxXCIpLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgICAgIGlmIChwYXJ0c1swXSA9PT0gXCJ2YWxpZGF0aW9uXCIgJiYgcGFydHNbMV0pIHtcbiAgICAgICAgICAgICAgdmFsaWRhdG9yTmFtZXMucHVzaChwYXJ0c1sxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTk9STUFMSVNFIFZBTElEQVRPUiBOQU1FU1xuICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgICAgICAgIHZhciB2YWxpZGF0b3JOYW1lc1RvSW5zcGVjdCA9IHZhbGlkYXRvck5hbWVzO1xuICAgICAgICAgIHZhciBuZXdWYWxpZGF0b3JOYW1lc1RvSW5zcGVjdCA9IFtdO1xuXG4gICAgICAgICAgZG8gLy8gcmVwZWF0ZWRseSBleHBhbmQgJ3Nob3J0Y3V0JyB2YWxpZGF0b3JzIGludG8gdGhlaXIgcmVhbCB2YWxpZGF0b3JzXG4gICAgICAgICAge1xuICAgICAgICAgICAgLy8gVXBwZXJjYXNlIG9ubHkgdGhlIGZpcnN0IGxldHRlciBvZiBlYWNoIG5hbWVcbiAgICAgICAgICAgICQuZWFjaCh2YWxpZGF0b3JOYW1lcywgZnVuY3Rpb24gKGksIGVsKSB7XG4gICAgICAgICAgICAgIHZhbGlkYXRvck5hbWVzW2ldID0gZm9ybWF0VmFsaWRhdG9yTmFtZShlbCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZSB2YWxpZGF0b3IgbmFtZXNcbiAgICAgICAgICAgIHZhbGlkYXRvck5hbWVzID0gJC51bmlxdWUodmFsaWRhdG9yTmFtZXMpO1xuXG4gICAgICAgICAgICAvLyBQdWxsIG91dCB0aGUgbmV3IHZhbGlkYXRvciBuYW1lcyBmcm9tIGVhY2ggc2hvcnRjdXRcbiAgICAgICAgICAgIG5ld1ZhbGlkYXRvck5hbWVzVG9JbnNwZWN0ID0gW107XG4gICAgICAgICAgICAkLmVhY2godmFsaWRhdG9yTmFtZXNUb0luc3BlY3QsIGZ1bmN0aW9uKGksIGVsKSB7XG4gICAgICAgICAgICAgIGlmICgkdGhpcy5kYXRhKFwidmFsaWRhdGlvblwiICsgZWwgKyBcIlNob3J0Y3V0XCIpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBBcmUgdGhlc2UgY3VzdG9tIHZhbGlkYXRvcnM/XG4gICAgICAgICAgICAgICAgLy8gUHVsbCB0aGVtIG91dCFcbiAgICAgICAgICAgICAgICAkLmVhY2goJHRoaXMuZGF0YShcInZhbGlkYXRpb25cIiArIGVsICsgXCJTaG9ydGN1dFwiKS5zcGxpdChcIixcIiksIGZ1bmN0aW9uKGkyLCBlbDIpIHtcbiAgICAgICAgICAgICAgICAgIG5ld1ZhbGlkYXRvck5hbWVzVG9JbnNwZWN0LnB1c2goZWwyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZXR0aW5ncy5idWlsdEluVmFsaWRhdG9yc1tlbC50b0xvd2VyQ2FzZSgpXSkge1xuICAgICAgICAgICAgICAgIC8vIElzIHRoaXMgYSByZWNvZ25pc2VkIGJ1aWx0LWluP1xuICAgICAgICAgICAgICAgIC8vIFB1bGwgaXQgb3V0IVxuICAgICAgICAgICAgICAgIHZhciB2YWxpZGF0b3IgPSBzZXR0aW5ncy5idWlsdEluVmFsaWRhdG9yc1tlbC50b0xvd2VyQ2FzZSgpXTtcbiAgICAgICAgICAgICAgICBpZiAodmFsaWRhdG9yLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJzaG9ydGN1dFwiKSB7XG4gICAgICAgICAgICAgICAgICAkLmVhY2godmFsaWRhdG9yLnNob3J0Y3V0LnNwbGl0KFwiLFwiKSwgZnVuY3Rpb24gKGksIGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsID0gZm9ybWF0VmFsaWRhdG9yTmFtZShlbCk7XG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbGlkYXRvck5hbWVzVG9JbnNwZWN0LnB1c2goZWwpO1xuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3JOYW1lcy5wdXNoKGVsKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhbGlkYXRvck5hbWVzVG9JbnNwZWN0ID0gbmV3VmFsaWRhdG9yTmFtZXNUb0luc3BlY3Q7XG5cbiAgICAgICAgICB9IHdoaWxlICh2YWxpZGF0b3JOYW1lc1RvSW5zcGVjdC5sZW5ndGggPiAwKVxuXG4gICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0VUIFVQIFZBTElEQVRPUiBBUlJBWVNcbiAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAgICAgICB2YXIgdmFsaWRhdG9ycyA9IHt9O1xuXG4gICAgICAgICAgJC5lYWNoKHZhbGlkYXRvck5hbWVzLCBmdW5jdGlvbiAoaSwgZWwpIHtcbiAgICAgICAgICAgIC8vIFNldCB1cCB0aGUgJ292ZXJyaWRlJyBtZXNzYWdlXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uXCIgKyBlbCArIFwiTWVzc2FnZVwiKTtcbiAgICAgICAgICAgIHZhciBoYXNPdmVycmlkZU1lc3NhZ2UgPSAobWVzc2FnZSAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHZhciBmb3VuZFZhbGlkYXRvciA9IGZhbHNlO1xuICAgICAgICAgICAgbWVzc2FnZSA9XG4gICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICA/IG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgIDogXCInXCIgKyBlbCArIFwiJyB2YWxpZGF0aW9uIGZhaWxlZCA8IS0tIEFkZCBhdHRyaWJ1dGUgJ2RhdGEtdmFsaWRhdGlvbi1cIiArIGVsLnRvTG93ZXJDYXNlKCkgKyBcIi1tZXNzYWdlJyB0byBpbnB1dCB0byBjaGFuZ2UgdGhpcyBtZXNzYWdlIC0tPlwiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDtcblxuICAgICAgICAgICAgJC5lYWNoKFxuICAgICAgICAgICAgICBzZXR0aW5ncy52YWxpZGF0b3JUeXBlcyxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gKHZhbGlkYXRvclR5cGUsIHZhbGlkYXRvclRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRvcnNbdmFsaWRhdG9yVHlwZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yc1t2YWxpZGF0b3JUeXBlXSA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kVmFsaWRhdG9yICYmICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uXCIgKyBlbCArIGZvcm1hdFZhbGlkYXRvck5hbWUodmFsaWRhdG9yVGVtcGxhdGUubmFtZSkpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcnNbdmFsaWRhdG9yVHlwZV0ucHVzaChcbiAgICAgICAgICAgICAgICAgICAgJC5leHRlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmb3JtYXRWYWxpZGF0b3JOYW1lKHZhbGlkYXRvclRlbXBsYXRlLm5hbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yVGVtcGxhdGUuaW5pdCgkdGhpcywgZWwpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBmb3VuZFZhbGlkYXRvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoIWZvdW5kVmFsaWRhdG9yICYmIHNldHRpbmdzLmJ1aWx0SW5WYWxpZGF0b3JzW2VsLnRvTG93ZXJDYXNlKCldKSB7XG5cbiAgICAgICAgICAgICAgdmFyIHZhbGlkYXRvciA9ICQuZXh0ZW5kKHRydWUsIHt9LCBzZXR0aW5ncy5idWlsdEluVmFsaWRhdG9yc1tlbC50b0xvd2VyQ2FzZSgpXSk7XG4gICAgICAgICAgICAgIGlmIChoYXNPdmVycmlkZU1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0b3IubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFyIHZhbGlkYXRvclR5cGUgPSB2YWxpZGF0b3IudHlwZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgIGlmICh2YWxpZGF0b3JUeXBlID09PSBcInNob3J0Y3V0XCIpIHtcbiAgICAgICAgICAgICAgICBmb3VuZFZhbGlkYXRvciA9IHRydWU7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJC5lYWNoKFxuICAgICAgICAgICAgICAgICAgc2V0dGluZ3MudmFsaWRhdG9yVHlwZXMsXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodmFsaWRhdG9yVGVtcGxhdGVUeXBlLCB2YWxpZGF0b3JUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdG9yc1t2YWxpZGF0b3JUZW1wbGF0ZVR5cGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3JzW3ZhbGlkYXRvclRlbXBsYXRlVHlwZV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kVmFsaWRhdG9yICYmIHZhbGlkYXRvclR5cGUgPT09IHZhbGlkYXRvclRlbXBsYXRlVHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZGF0YShcInZhbGlkYXRpb25cIiArIGVsICsgZm9ybWF0VmFsaWRhdG9yTmFtZSh2YWxpZGF0b3JUZW1wbGF0ZS5uYW1lKSwgdmFsaWRhdG9yW3ZhbGlkYXRvclRlbXBsYXRlLm5hbWUudG9Mb3dlckNhc2UoKV0pO1xuICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcnNbdmFsaWRhdG9yVHlwZV0ucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZXh0ZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvclRlbXBsYXRlLmluaXQoJHRoaXMsIGVsKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgZm91bmRWYWxpZGF0b3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoISBmb3VuZFZhbGlkYXRvcikge1xuICAgICAgICAgICAgICAkLmVycm9yKFwiQ2Fubm90IGZpbmQgdmFsaWRhdGlvbiBpbmZvIGZvciAnXCIgKyBlbCArIFwiJ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU1RPUkUgRkFMTEJBQ0sgVkFMVUVTXG4gICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgICAgICAgJGhlbHBCbG9jay5kYXRhKFxuICAgICAgICAgICAgXCJvcmlnaW5hbC1jb250ZW50c1wiLFxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAkaGVscEJsb2NrLmRhdGEoXCJvcmlnaW5hbC1jb250ZW50c1wiKVxuICAgICAgICAgICAgICAgID8gJGhlbHBCbG9jay5kYXRhKFwib3JpZ2luYWwtY29udGVudHNcIilcbiAgICAgICAgICAgICAgICA6ICRoZWxwQmxvY2suaHRtbCgpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcblxuICAgICAgICAgICRoZWxwQmxvY2suZGF0YShcbiAgICAgICAgICAgIFwib3JpZ2luYWwtcm9sZVwiLFxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAkaGVscEJsb2NrLmRhdGEoXCJvcmlnaW5hbC1yb2xlXCIpXG4gICAgICAgICAgICAgICAgPyAkaGVscEJsb2NrLmRhdGEoXCJvcmlnaW5hbC1yb2xlXCIpXG4gICAgICAgICAgICAgICAgOiAkaGVscEJsb2NrLmF0dHIoXCJyb2xlXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcblxuICAgICAgICAgICRjb250cm9sR3JvdXAuZGF0YShcbiAgICAgICAgICAgIFwib3JpZ2luYWwtY2xhc3Nlc1wiLFxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAkY29udHJvbEdyb3VwLmRhdGEoXCJvcmlnaW5hbC1jbGFzZXNcIilcbiAgICAgICAgICAgICAgICA/ICRjb250cm9sR3JvdXAuZGF0YShcIm9yaWdpbmFsLWNsYXNzZXNcIilcbiAgICAgICAgICAgICAgICA6ICRjb250cm9sR3JvdXAuYXR0cihcImNsYXNzXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcblxuICAgICAgICAgICR0aGlzLmRhdGEoXG4gICAgICAgICAgICBcIm9yaWdpbmFsLWFyaWEtaW52YWxpZFwiLFxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAkdGhpcy5kYXRhKFwib3JpZ2luYWwtYXJpYS1pbnZhbGlkXCIpXG4gICAgICAgICAgICAgICAgPyAkdGhpcy5kYXRhKFwib3JpZ2luYWwtYXJpYS1pbnZhbGlkXCIpXG4gICAgICAgICAgICAgICAgOiAkdGhpcy5hdHRyKFwiYXJpYS1pbnZhbGlkXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWQUxJREFUSU9OXG4gICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgICAgICAgJHRoaXMuYmluZChcbiAgICAgICAgICAgIFwidmFsaWRhdGlvbi52YWxpZGF0aW9uXCIsXG4gICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQsIHBhcmFtcykge1xuXG4gICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGdldFZhbHVlKCR0aGlzKTtcblxuICAgICAgICAgICAgICAvLyBHZXQgYSBsaXN0IG9mIHRoZSBlcnJvcnMgdG8gYXBwbHlcbiAgICAgICAgICAgICAgdmFyIGVycm9yc0ZvdW5kID0gW107XG5cbiAgICAgICAgICAgICAgJC5lYWNoKHZhbGlkYXRvcnMsIGZ1bmN0aW9uICh2YWxpZGF0b3JUeXBlLCB2YWxpZGF0b3JUeXBlQXJyYXkpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgfHwgdmFsdWUubGVuZ3RoIHx8IChwYXJhbXMgJiYgcGFyYW1zLmluY2x1ZGVFbXB0eSkgfHwgKCEhc2V0dGluZ3MudmFsaWRhdG9yVHlwZXNbdmFsaWRhdG9yVHlwZV0uYmxvY2tTdWJtaXQgJiYgcGFyYW1zICYmICEhcGFyYW1zLnN1Ym1pdHRpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAkLmVhY2godmFsaWRhdG9yVHlwZUFycmF5LCBmdW5jdGlvbiAoaSwgdmFsaWRhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy52YWxpZGF0b3JUeXBlc1t2YWxpZGF0b3JUeXBlXS52YWxpZGF0ZSgkdGhpcywgdmFsdWUsIHZhbGlkYXRvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICBlcnJvcnNGb3VuZC5wdXNoKHZhbGlkYXRvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICByZXR1cm4gZXJyb3JzRm91bmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcblxuICAgICAgICAgICR0aGlzLmJpbmQoXG4gICAgICAgICAgICBcImdldFZhbGlkYXRvcnMudmFsaWRhdGlvblwiLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdmFsaWRhdG9ycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV0FUQ0ggRk9SIENIQU5HRVNcbiAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgICAgJHRoaXMuYmluZChcbiAgICAgICAgICAgIFwic3VibWl0LnZhbGlkYXRpb25cIixcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICR0aGlzLnRyaWdnZXJIYW5kbGVyKFwiY2hhbmdlLnZhbGlkYXRpb25cIiwge3N1Ym1pdHRpbmc6IHRydWV9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICAgICR0aGlzLmJpbmQoXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIFwia2V5dXBcIixcbiAgICAgICAgICAgICAgXCJmb2N1c1wiLFxuICAgICAgICAgICAgICBcImJsdXJcIixcbiAgICAgICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgICAgICBcImtleWRvd25cIixcbiAgICAgICAgICAgICAgXCJrZXlwcmVzc1wiLFxuICAgICAgICAgICAgICBcImNoYW5nZVwiXG4gICAgICAgICAgICBdLmpvaW4oXCIudmFsaWRhdGlvbiBcIikgKyBcIi52YWxpZGF0aW9uXCIsXG4gICAgICAgICAgICBmdW5jdGlvbiAoZSwgcGFyYW1zKSB7XG5cbiAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoJHRoaXMpO1xuXG4gICAgICAgICAgICAgIHZhciBlcnJvcnNGb3VuZCA9IFtdO1xuXG4gICAgICAgICAgICAgICRjb250cm9sR3JvdXAuZmluZChcImlucHV0LHRleHRhcmVhLHNlbGVjdFwiKS5lYWNoKGZ1bmN0aW9uIChpLCBlbCkge1xuICAgICAgICAgICAgICAgIHZhciBvbGRDb3VudCA9IGVycm9yc0ZvdW5kLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAkLmVhY2goJChlbCkudHJpZ2dlckhhbmRsZXIoXCJ2YWxpZGF0aW9uLnZhbGlkYXRpb25cIiwgcGFyYW1zKSwgZnVuY3Rpb24gKGosIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgIGVycm9yc0ZvdW5kLnB1c2gobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yc0ZvdW5kLmxlbmd0aCA+IG9sZENvdW50KSB7XG4gICAgICAgICAgICAgICAgICAkKGVsKS5hdHRyKFwiYXJpYS1pbnZhbGlkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsID0gJHRoaXMuZGF0YShcIm9yaWdpbmFsLWFyaWEtaW52YWxpZFwiKTtcbiAgICAgICAgICAgICAgICAgICQoZWwpLmF0dHIoXCJhcmlhLWludmFsaWRcIiwgKG9yaWdpbmFsICE9PSB1bmRlZmluZWQgPyBvcmlnaW5hbCA6IGZhbHNlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAkZm9ybS5maW5kKFwiaW5wdXQsc2VsZWN0LHRleHRhcmVhXCIpLm5vdCgkdGhpcykubm90KFwiW25hbWU9XFxcIlwiICsgJHRoaXMuYXR0cihcIm5hbWVcIikgKyBcIlxcXCJdXCIpLnRyaWdnZXIoXCJ2YWxpZGF0aW9uTG9zdEZvY3VzLnZhbGlkYXRpb25cIik7XG5cbiAgICAgICAgICAgICAgZXJyb3JzRm91bmQgPSAkLnVuaXF1ZShlcnJvcnNGb3VuZC5zb3J0KCkpO1xuXG4gICAgICAgICAgICAgIC8vIFdlcmUgdGhlcmUgYW55IGVycm9ycz9cbiAgICAgICAgICAgICAgaWYgKGVycm9yc0ZvdW5kLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vIEJldHRlciBmbGFnIGl0IHVwIGFzIGEgd2FybmluZy5cbiAgICAgICAgICAgICAgICAkY29udHJvbEdyb3VwLnJlbW92ZUNsYXNzKFwic3VjY2VzcyBlcnJvclwiKS5hZGRDbGFzcyhcIndhcm5pbmdcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBIb3cgbWFueSBlcnJvcnMgZGlkIHdlIGZpbmQ/XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLm9wdGlvbnMuc2VtYW50aWNhbGx5U3RyaWN0ICYmIGVycm9yc0ZvdW5kLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgLy8gT25seSBvbmU/IEJlaW5nIHN0cmljdD8gSnVzdCBvdXRwdXQgaXQuXG4gICAgICAgICAgICAgICAgICAkaGVscEJsb2NrLmh0bWwoZXJyb3JzRm91bmRbMF0gK1xuICAgICAgICAgICAgICAgICAgICAoIHNldHRpbmdzLm9wdGlvbnMucHJlcGVuZEV4aXN0aW5nSGVscEJsb2NrID8gJGhlbHBCbG9jay5kYXRhKFwib3JpZ2luYWwtY29udGVudHNcIikgOiBcIlwiICkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBNdWx0aXBsZT8gQmVpbmcgc2xvcHB5PyBHbHVlIHRoZW0gdG9nZXRoZXIgaW50byBhbiBVTC5cbiAgICAgICAgICAgICAgICAgICRoZWxwQmxvY2suaHRtbChcIjx1bCByb2xlPVxcXCJhbGVydFxcXCI+PGxpPlwiICsgZXJyb3JzRm91bmQuam9pbihcIjwvbGk+PGxpPlwiKSArIFwiPC9saT48L3VsPlwiICtcbiAgICAgICAgICAgICAgICAgICAgKCBzZXR0aW5ncy5vcHRpb25zLnByZXBlbmRFeGlzdGluZ0hlbHBCbG9jayA/ICRoZWxwQmxvY2suZGF0YShcIm9yaWdpbmFsLWNvbnRlbnRzXCIpIDogXCJcIiApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJGNvbnRyb2xHcm91cC5yZW1vdmVDbGFzcyhcIndhcm5pbmcgZXJyb3Igc3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgJGNvbnRyb2xHcm91cC5hZGRDbGFzcyhcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRoZWxwQmxvY2suaHRtbCgkaGVscEJsb2NrLmRhdGEoXCJvcmlnaW5hbC1jb250ZW50c1wiKSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZS50eXBlID09PSBcImJsdXJcIikge1xuICAgICAgICAgICAgICAgICRjb250cm9sR3JvdXAucmVtb3ZlQ2xhc3MoXCJzdWNjZXNzXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICAkdGhpcy5iaW5kKFwidmFsaWRhdGlvbkxvc3RGb2N1cy52YWxpZGF0aW9uXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRjb250cm9sR3JvdXAucmVtb3ZlQ2xhc3MoXCJzdWNjZXNzXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBkZXN0cm95IDogZnVuY3Rpb24oICkge1xuXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goXG4gICAgICAgICAgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgICAgICRjb250cm9sR3JvdXAgPSAkdGhpcy5wYXJlbnRzKFwiLmNvbnRyb2wtZ3JvdXBcIikuZmlyc3QoKSxcbiAgICAgICAgICAgICAgJGhlbHBCbG9jayA9ICRjb250cm9sR3JvdXAuZmluZChcIi5oZWxwLWJsb2NrXCIpLmZpcnN0KCk7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBvdXIgZXZlbnRzXG4gICAgICAgICAgICAkdGhpcy51bmJpbmQoJy52YWxpZGF0aW9uJyk7IC8vIGV2ZW50cyBhcmUgbmFtZXNwYWNlZC5cbiAgICAgICAgICAgIC8vIHJlc2V0IGhlbHAgdGV4dFxuICAgICAgICAgICAgJGhlbHBCbG9jay5odG1sKCRoZWxwQmxvY2suZGF0YShcIm9yaWdpbmFsLWNvbnRlbnRzXCIpKTtcbiAgICAgICAgICAgIC8vIHJlc2V0IGNsYXNzZXNcbiAgICAgICAgICAgICRjb250cm9sR3JvdXAuYXR0cihcImNsYXNzXCIsICRjb250cm9sR3JvdXAuZGF0YShcIm9yaWdpbmFsLWNsYXNzZXNcIikpO1xuICAgICAgICAgICAgLy8gcmVzZXQgYXJpYVxuICAgICAgICAgICAgJHRoaXMuYXR0cihcImFyaWEtaW52YWxpZFwiLCAkdGhpcy5kYXRhKFwib3JpZ2luYWwtYXJpYS1pbnZhbGlkXCIpKTtcbiAgICAgICAgICAgIC8vIHJlc2V0IHJvbGVcbiAgICAgICAgICAgICRoZWxwQmxvY2suYXR0cihcInJvbGVcIiwgJHRoaXMuZGF0YShcIm9yaWdpbmFsLXJvbGVcIikpO1xuXHRcdFx0XHRcdFx0Ly8gcmVtb3ZlIGFsbCBlbGVtZW50cyB3ZSBjcmVhdGVkXG5cdFx0XHRcdFx0XHRpZiAoY3JlYXRlZEVsZW1lbnRzLmluZGV4T2YoJGhlbHBCbG9ja1swXSkgPiAtMSkge1xuXHRcdFx0XHRcdFx0XHQkaGVscEJsb2NrLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0fVxuXG4gICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICB9LFxuICAgICAgY29sbGVjdEVycm9ycyA6IGZ1bmN0aW9uKGluY2x1ZGVFbXB0eSkge1xuXG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2VzID0ge307XG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoaSwgZWwpIHtcbiAgICAgICAgICB2YXIgJGVsID0gJChlbCk7XG4gICAgICAgICAgdmFyIG5hbWUgPSAkZWwuYXR0cihcIm5hbWVcIik7XG4gICAgICAgICAgdmFyIGVycm9ycyA9ICRlbC50cmlnZ2VySGFuZGxlcihcInZhbGlkYXRpb24udmFsaWRhdGlvblwiLCB7aW5jbHVkZUVtcHR5OiB0cnVlfSk7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlc1tuYW1lXSA9ICQuZXh0ZW5kKHRydWUsIGVycm9ycywgZXJyb3JNZXNzYWdlc1tuYW1lXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQuZWFjaChlcnJvck1lc3NhZ2VzLCBmdW5jdGlvbiAoaSwgZWwpIHtcbiAgICAgICAgICBpZiAoZWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBkZWxldGUgZXJyb3JNZXNzYWdlc1tpXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBlcnJvck1lc3NhZ2VzO1xuXG4gICAgICB9LFxuICAgICAgaGFzRXJyb3JzOiBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoaSwgZWwpIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2VzID0gZXJyb3JNZXNzYWdlcy5jb25jYXQoXG4gICAgICAgICAgICAkKGVsKS50cmlnZ2VySGFuZGxlcihcImdldFZhbGlkYXRvcnMudmFsaWRhdGlvblwiKSA/ICQoZWwpLnRyaWdnZXJIYW5kbGVyKFwidmFsaWRhdGlvbi52YWxpZGF0aW9uXCIsIHtzdWJtaXR0aW5nOiB0cnVlfSkgOiBbXVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiAoZXJyb3JNZXNzYWdlcy5sZW5ndGggPiAwKTtcbiAgICAgIH0sXG4gICAgICBvdmVycmlkZSA6IGZ1bmN0aW9uIChuZXdEZWZhdWx0cykge1xuICAgICAgICBkZWZhdWx0cyA9ICQuZXh0ZW5kKHRydWUsIGRlZmF1bHRzLCBuZXdEZWZhdWx0cyk7XG4gICAgICB9XG4gICAgfSxcblx0XHR2YWxpZGF0b3JUeXBlczoge1xuICAgICAgY2FsbGJhY2s6IHtcbiAgICAgICAgbmFtZTogXCJjYWxsYmFja1wiLFxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoJHRoaXMsIG5hbWUpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsaWRhdG9yTmFtZTogbmFtZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAkdGhpcy5kYXRhKFwidmFsaWRhdGlvblwiICsgbmFtZSArIFwiQ2FsbGJhY2tcIiksXG4gICAgICAgICAgICBsYXN0VmFsdWU6ICR0aGlzLnZhbCgpLFxuICAgICAgICAgICAgbGFzdFZhbGlkOiB0cnVlLFxuICAgICAgICAgICAgbGFzdEZpbmlzaGVkOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgdmFsaWRhdGU6IGZ1bmN0aW9uICgkdGhpcywgdmFsdWUsIHZhbGlkYXRvcikge1xuICAgICAgICAgIGlmICh2YWxpZGF0b3IubGFzdFZhbHVlID09PSB2YWx1ZSAmJiB2YWxpZGF0b3IubGFzdEZpbmlzaGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gIXZhbGlkYXRvci5sYXN0VmFsaWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHZhbGlkYXRvci5sYXN0RmluaXNoZWQgPT09IHRydWUpXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsaWRhdG9yLmxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdmFsaWRhdG9yLmxhc3RWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICB2YWxpZGF0b3IubGFzdEZpbmlzaGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHZhciBycmpxYnZWYWxpZGF0b3IgPSB2YWxpZGF0b3I7XG4gICAgICAgICAgICB2YXIgcnJqcWJ2VGhpcyA9ICR0aGlzO1xuICAgICAgICAgICAgZXhlY3V0ZUZ1bmN0aW9uQnlOYW1lKFxuICAgICAgICAgICAgICB2YWxpZGF0b3IuY2FsbGJhY2ssXG4gICAgICAgICAgICAgIHdpbmRvdyxcbiAgICAgICAgICAgICAgJHRoaXMsXG4gICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChycmpxYnZWYWxpZGF0b3IubGFzdFZhbHVlID09PSBkYXRhLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICBycmpxYnZWYWxpZGF0b3IubGFzdFZhbGlkID0gZGF0YS52YWxpZDtcbiAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcnJqcWJ2VmFsaWRhdG9yLm1lc3NhZ2UgPSBkYXRhLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBycmpxYnZWYWxpZGF0b3IubGFzdEZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHJyanFidlRoaXMuZGF0YShcInZhbGlkYXRpb25cIiArIHJyanFidlZhbGlkYXRvci52YWxpZGF0b3JOYW1lICsgXCJNZXNzYWdlXCIsIHJyanFidlZhbGlkYXRvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgIC8vIFRpbWVvdXQgaXMgc2V0IHRvIGF2b2lkIHByb2JsZW1zIHdpdGggdGhlIGV2ZW50cyBiZWluZyBjb25zaWRlcmVkICdhbHJlYWR5IGZpcmVkJ1xuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJyanFidlRoaXMudHJpZ2dlcihcImNoYW5nZS52YWxpZGF0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgfSwgMSk7IC8vIGRvZXNuJ3QgbmVlZCBhIGxvbmcgdGltZW91dCwganVzdCBsb25nIGVub3VnaCBmb3IgdGhlIGV2ZW50IGJ1YmJsZSB0byBidXJzdFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFqYXg6IHtcbiAgICAgICAgbmFtZTogXCJhamF4XCIsXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgkdGhpcywgbmFtZSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWxpZGF0b3JOYW1lOiBuYW1lLFxuICAgICAgICAgICAgdXJsOiAkdGhpcy5kYXRhKFwidmFsaWRhdGlvblwiICsgbmFtZSArIFwiQWpheFwiKSxcbiAgICAgICAgICAgIGxhc3RWYWx1ZTogJHRoaXMudmFsKCksXG4gICAgICAgICAgICBsYXN0VmFsaWQ6IHRydWUsXG4gICAgICAgICAgICBsYXN0RmluaXNoZWQ6IHRydWVcbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICB2YWxpZGF0ZTogZnVuY3Rpb24gKCR0aGlzLCB2YWx1ZSwgdmFsaWRhdG9yKSB7XG4gICAgICAgICAgaWYgKFwiXCIrdmFsaWRhdG9yLmxhc3RWYWx1ZSA9PT0gXCJcIit2YWx1ZSAmJiB2YWxpZGF0b3IubGFzdEZpbmlzaGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdG9yLmxhc3RWYWxpZCA9PT0gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHZhbGlkYXRvci5sYXN0RmluaXNoZWQgPT09IHRydWUpXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsaWRhdG9yLmxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdmFsaWRhdG9yLmxhc3RWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICB2YWxpZGF0b3IubGFzdEZpbmlzaGVkID0gZmFsc2U7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICB1cmw6IHZhbGlkYXRvci51cmwsXG4gICAgICAgICAgICAgIGRhdGE6IFwidmFsdWU9XCIgKyB2YWx1ZSArIFwiJmZpZWxkPVwiICsgJHRoaXMuYXR0cihcIm5hbWVcIiksXG4gICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJcIit2YWxpZGF0b3IubGFzdFZhbHVlID09PSBcIlwiK2RhdGEudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRvci5sYXN0VmFsaWQgPSAhIShkYXRhLnZhbGlkKTtcbiAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yLm1lc3NhZ2UgPSBkYXRhLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB2YWxpZGF0b3IubGFzdEZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uXCIgKyB2YWxpZGF0b3IudmFsaWRhdG9yTmFtZSArIFwiTWVzc2FnZVwiLCB2YWxpZGF0b3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAvLyBUaW1lb3V0IGlzIHNldCB0byBhdm9pZCBwcm9ibGVtcyB3aXRoIHRoZSBldmVudHMgYmVpbmcgY29uc2lkZXJlZCAnYWxyZWFkeSBmaXJlZCdcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmlnZ2VyKFwiY2hhbmdlLnZhbGlkYXRpb25cIik7XG4gICAgICAgICAgICAgICAgICB9LCAxKTsgLy8gZG9lc24ndCBuZWVkIGEgbG9uZyB0aW1lb3V0LCBqdXN0IGxvbmcgZW5vdWdoIGZvciB0aGUgZXZlbnQgYnViYmxlIHRvIGJ1cnN0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdG9yLmxhc3RWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFsaWRhdG9yLm1lc3NhZ2UgPSBcImFqYXggY2FsbCBmYWlsZWRcIjtcbiAgICAgICAgICAgICAgICB2YWxpZGF0b3IubGFzdEZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkdGhpcy5kYXRhKFwidmFsaWRhdGlvblwiICsgdmFsaWRhdG9yLnZhbGlkYXRvck5hbWUgKyBcIk1lc3NhZ2VcIiwgdmFsaWRhdG9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIC8vIFRpbWVvdXQgaXMgc2V0IHRvIGF2b2lkIHByb2JsZW1zIHdpdGggdGhlIGV2ZW50cyBiZWluZyBjb25zaWRlcmVkICdhbHJlYWR5IGZpcmVkJ1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgJHRoaXMudHJpZ2dlcihcImNoYW5nZS52YWxpZGF0aW9uXCIpO1xuICAgICAgICAgICAgICAgIH0sIDEpOyAvLyBkb2Vzbid0IG5lZWQgYSBsb25nIHRpbWVvdXQsIGp1c3QgbG9uZyBlbm91Z2ggZm9yIHRoZSBldmVudCBidWJibGUgdG8gYnVyc3RcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIH1cbiAgICAgIH0sXG5cdFx0XHRyZWdleDoge1xuXHRcdFx0XHRuYW1lOiBcInJlZ2V4XCIsXG5cdFx0XHRcdGluaXQ6IGZ1bmN0aW9uICgkdGhpcywgbmFtZSkge1xuXHRcdFx0XHRcdHJldHVybiB7cmVnZXg6IHJlZ2V4RnJvbVN0cmluZygkdGhpcy5kYXRhKFwidmFsaWRhdGlvblwiICsgbmFtZSArIFwiUmVnZXhcIikpfTtcblx0XHRcdFx0fSxcblx0XHRcdFx0dmFsaWRhdGU6IGZ1bmN0aW9uICgkdGhpcywgdmFsdWUsIHZhbGlkYXRvcikge1xuXHRcdFx0XHRcdHJldHVybiAoIXZhbGlkYXRvci5yZWdleC50ZXN0KHZhbHVlKSAmJiAhIHZhbGlkYXRvci5uZWdhdGl2ZSlcblx0XHRcdFx0XHRcdHx8ICh2YWxpZGF0b3IucmVnZXgudGVzdCh2YWx1ZSkgJiYgdmFsaWRhdG9yLm5lZ2F0aXZlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHJlcXVpcmVkOiB7XG5cdFx0XHRcdG5hbWU6IFwicmVxdWlyZWRcIixcblx0XHRcdFx0aW5pdDogZnVuY3Rpb24gKCR0aGlzLCBuYW1lKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHt9O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR2YWxpZGF0ZTogZnVuY3Rpb24gKCR0aGlzLCB2YWx1ZSwgdmFsaWRhdG9yKSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhKHZhbHVlLmxlbmd0aCA9PT0gMCAgJiYgISB2YWxpZGF0b3IubmVnYXRpdmUpXG5cdFx0XHRcdFx0XHR8fCAhISh2YWx1ZS5sZW5ndGggPiAwICYmIHZhbGlkYXRvci5uZWdhdGl2ZSk7XG5cdFx0XHRcdH0sXG4gICAgICAgIGJsb2NrU3VibWl0OiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0bWF0Y2g6IHtcblx0XHRcdFx0bmFtZTogXCJtYXRjaFwiLFxuXHRcdFx0XHRpbml0OiBmdW5jdGlvbiAoJHRoaXMsIG5hbWUpIHtcblx0XHRcdFx0XHR2YXIgZWxlbWVudCA9ICR0aGlzLnBhcmVudHMoXCJmb3JtXCIpLmZpcnN0KCkuZmluZChcIltuYW1lPVxcXCJcIiArICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uXCIgKyBuYW1lICsgXCJNYXRjaFwiKSArIFwiXFxcIl1cIikuZmlyc3QoKTtcblx0XHRcdFx0XHRlbGVtZW50LmJpbmQoXCJ2YWxpZGF0aW9uLnZhbGlkYXRpb25cIiwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0JHRoaXMudHJpZ2dlcihcImNoYW5nZS52YWxpZGF0aW9uXCIsIHtzdWJtaXR0aW5nOiB0cnVlfSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIHtcImVsZW1lbnRcIjogZWxlbWVudH07XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZhbGlkYXRlOiBmdW5jdGlvbiAoJHRoaXMsIHZhbHVlLCB2YWxpZGF0b3IpIHtcblx0XHRcdFx0XHRyZXR1cm4gKHZhbHVlICE9PSB2YWxpZGF0b3IuZWxlbWVudC52YWwoKSAmJiAhIHZhbGlkYXRvci5uZWdhdGl2ZSlcblx0XHRcdFx0XHRcdHx8ICh2YWx1ZSA9PT0gdmFsaWRhdG9yLmVsZW1lbnQudmFsKCkgJiYgdmFsaWRhdG9yLm5lZ2F0aXZlKTtcblx0XHRcdFx0fSxcbiAgICAgICAgYmxvY2tTdWJtaXQ6IHRydWVcblx0XHRcdH0sXG5cdFx0XHRtYXg6IHtcblx0XHRcdFx0bmFtZTogXCJtYXhcIixcblx0XHRcdFx0aW5pdDogZnVuY3Rpb24gKCR0aGlzLCBuYW1lKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHttYXg6ICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uXCIgKyBuYW1lICsgXCJNYXhcIil9O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR2YWxpZGF0ZTogZnVuY3Rpb24gKCR0aGlzLCB2YWx1ZSwgdmFsaWRhdG9yKSB7XG5cdFx0XHRcdFx0cmV0dXJuIChwYXJzZUZsb2F0KHZhbHVlLCAxMCkgPiBwYXJzZUZsb2F0KHZhbGlkYXRvci5tYXgsIDEwKSAmJiAhIHZhbGlkYXRvci5uZWdhdGl2ZSlcblx0XHRcdFx0XHRcdHx8IChwYXJzZUZsb2F0KHZhbHVlLCAxMCkgPD0gcGFyc2VGbG9hdCh2YWxpZGF0b3IubWF4LCAxMCkgJiYgdmFsaWRhdG9yLm5lZ2F0aXZlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdG1pbjoge1xuXHRcdFx0XHRuYW1lOiBcIm1pblwiLFxuXHRcdFx0XHRpbml0OiBmdW5jdGlvbiAoJHRoaXMsIG5hbWUpIHtcblx0XHRcdFx0XHRyZXR1cm4ge21pbjogJHRoaXMuZGF0YShcInZhbGlkYXRpb25cIiArIG5hbWUgKyBcIk1pblwiKX07XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZhbGlkYXRlOiBmdW5jdGlvbiAoJHRoaXMsIHZhbHVlLCB2YWxpZGF0b3IpIHtcblx0XHRcdFx0XHRyZXR1cm4gKHBhcnNlRmxvYXQodmFsdWUpIDwgcGFyc2VGbG9hdCh2YWxpZGF0b3IubWluKSAmJiAhIHZhbGlkYXRvci5uZWdhdGl2ZSlcblx0XHRcdFx0XHRcdHx8IChwYXJzZUZsb2F0KHZhbHVlKSA+PSBwYXJzZUZsb2F0KHZhbGlkYXRvci5taW4pICYmIHZhbGlkYXRvci5uZWdhdGl2ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRtYXhsZW5ndGg6IHtcblx0XHRcdFx0bmFtZTogXCJtYXhsZW5ndGhcIixcblx0XHRcdFx0aW5pdDogZnVuY3Rpb24gKCR0aGlzLCBuYW1lKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHttYXhsZW5ndGg6ICR0aGlzLmRhdGEoXCJ2YWxpZGF0aW9uXCIgKyBuYW1lICsgXCJNYXhsZW5ndGhcIil9O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR2YWxpZGF0ZTogZnVuY3Rpb24gKCR0aGlzLCB2YWx1ZSwgdmFsaWRhdG9yKSB7XG5cdFx0XHRcdFx0cmV0dXJuICgodmFsdWUubGVuZ3RoID4gdmFsaWRhdG9yLm1heGxlbmd0aCkgJiYgISB2YWxpZGF0b3IubmVnYXRpdmUpXG5cdFx0XHRcdFx0XHR8fCAoKHZhbHVlLmxlbmd0aCA8PSB2YWxpZGF0b3IubWF4bGVuZ3RoKSAmJiB2YWxpZGF0b3IubmVnYXRpdmUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0bWlubGVuZ3RoOiB7XG5cdFx0XHRcdG5hbWU6IFwibWlubGVuZ3RoXCIsXG5cdFx0XHRcdGluaXQ6IGZ1bmN0aW9uICgkdGhpcywgbmFtZSkge1xuXHRcdFx0XHRcdHJldHVybiB7bWlubGVuZ3RoOiAkdGhpcy5kYXRhKFwidmFsaWRhdGlvblwiICsgbmFtZSArIFwiTWlubGVuZ3RoXCIpfTtcblx0XHRcdFx0fSxcblx0XHRcdFx0dmFsaWRhdGU6IGZ1bmN0aW9uICgkdGhpcywgdmFsdWUsIHZhbGlkYXRvcikge1xuXHRcdFx0XHRcdHJldHVybiAoKHZhbHVlLmxlbmd0aCA8IHZhbGlkYXRvci5taW5sZW5ndGgpICYmICEgdmFsaWRhdG9yLm5lZ2F0aXZlKVxuXHRcdFx0XHRcdFx0fHwgKCh2YWx1ZS5sZW5ndGggPj0gdmFsaWRhdG9yLm1pbmxlbmd0aCkgJiYgdmFsaWRhdG9yLm5lZ2F0aXZlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdG1heGNoZWNrZWQ6IHtcblx0XHRcdFx0bmFtZTogXCJtYXhjaGVja2VkXCIsXG5cdFx0XHRcdGluaXQ6IGZ1bmN0aW9uICgkdGhpcywgbmFtZSkge1xuXHRcdFx0XHRcdHZhciBlbGVtZW50cyA9ICR0aGlzLnBhcmVudHMoXCJmb3JtXCIpLmZpcnN0KCkuZmluZChcIltuYW1lPVxcXCJcIiArICR0aGlzLmF0dHIoXCJuYW1lXCIpICsgXCJcXFwiXVwiKTtcblx0XHRcdFx0XHRlbGVtZW50cy5iaW5kKFwiY2xpY2sudmFsaWRhdGlvblwiLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQkdGhpcy50cmlnZ2VyKFwiY2hhbmdlLnZhbGlkYXRpb25cIiwge2luY2x1ZGVFbXB0eTogdHJ1ZX0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJldHVybiB7bWF4Y2hlY2tlZDogJHRoaXMuZGF0YShcInZhbGlkYXRpb25cIiArIG5hbWUgKyBcIk1heGNoZWNrZWRcIiksIGVsZW1lbnRzOiBlbGVtZW50c307XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZhbGlkYXRlOiBmdW5jdGlvbiAoJHRoaXMsIHZhbHVlLCB2YWxpZGF0b3IpIHtcblx0XHRcdFx0XHRyZXR1cm4gKHZhbGlkYXRvci5lbGVtZW50cy5maWx0ZXIoXCI6Y2hlY2tlZFwiKS5sZW5ndGggPiB2YWxpZGF0b3IubWF4Y2hlY2tlZCAmJiAhIHZhbGlkYXRvci5uZWdhdGl2ZSlcblx0XHRcdFx0XHRcdHx8ICh2YWxpZGF0b3IuZWxlbWVudHMuZmlsdGVyKFwiOmNoZWNrZWRcIikubGVuZ3RoIDw9IHZhbGlkYXRvci5tYXhjaGVja2VkICYmIHZhbGlkYXRvci5uZWdhdGl2ZSk7XG5cdFx0XHRcdH0sXG4gICAgICAgIGJsb2NrU3VibWl0OiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0bWluY2hlY2tlZDoge1xuXHRcdFx0XHRuYW1lOiBcIm1pbmNoZWNrZWRcIixcblx0XHRcdFx0aW5pdDogZnVuY3Rpb24gKCR0aGlzLCBuYW1lKSB7XG5cdFx0XHRcdFx0dmFyIGVsZW1lbnRzID0gJHRoaXMucGFyZW50cyhcImZvcm1cIikuZmlyc3QoKS5maW5kKFwiW25hbWU9XFxcIlwiICsgJHRoaXMuYXR0cihcIm5hbWVcIikgKyBcIlxcXCJdXCIpO1xuXHRcdFx0XHRcdGVsZW1lbnRzLmJpbmQoXCJjbGljay52YWxpZGF0aW9uXCIsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdCR0aGlzLnRyaWdnZXIoXCJjaGFuZ2UudmFsaWRhdGlvblwiLCB7aW5jbHVkZUVtcHR5OiB0cnVlfSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIHttaW5jaGVja2VkOiAkdGhpcy5kYXRhKFwidmFsaWRhdGlvblwiICsgbmFtZSArIFwiTWluY2hlY2tlZFwiKSwgZWxlbWVudHM6IGVsZW1lbnRzfTtcblx0XHRcdFx0fSxcblx0XHRcdFx0dmFsaWRhdGU6IGZ1bmN0aW9uICgkdGhpcywgdmFsdWUsIHZhbGlkYXRvcikge1xuXHRcdFx0XHRcdHJldHVybiAodmFsaWRhdG9yLmVsZW1lbnRzLmZpbHRlcihcIjpjaGVja2VkXCIpLmxlbmd0aCA8IHZhbGlkYXRvci5taW5jaGVja2VkICYmICEgdmFsaWRhdG9yLm5lZ2F0aXZlKVxuXHRcdFx0XHRcdFx0fHwgKHZhbGlkYXRvci5lbGVtZW50cy5maWx0ZXIoXCI6Y2hlY2tlZFwiKS5sZW5ndGggPj0gdmFsaWRhdG9yLm1pbmNoZWNrZWQgJiYgdmFsaWRhdG9yLm5lZ2F0aXZlKTtcblx0XHRcdFx0fSxcbiAgICAgICAgYmxvY2tTdWJtaXQ6IHRydWVcblx0XHRcdH1cblx0XHR9LFxuXHRcdGJ1aWx0SW5WYWxpZGF0b3JzOiB7XG5cdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRuYW1lOiBcIkVtYWlsXCIsXG5cdFx0XHRcdHR5cGU6IFwic2hvcnRjdXRcIixcblx0XHRcdFx0c2hvcnRjdXQ6IFwidmFsaWRlbWFpbFwiXG5cdFx0XHR9LFxuXHRcdFx0dmFsaWRlbWFpbDoge1xuXHRcdFx0XHRuYW1lOiBcIlZhbGlkZW1haWxcIixcblx0XHRcdFx0dHlwZTogXCJyZWdleFwiLFxuXHRcdFx0XHRyZWdleDogXCJbQS1aYS16MC05Ll8lKy1dK0BbQS1aYS16MC05Li1dK1xcXFxcXC5bQS1aYS16XXsyLDR9XCIsXG5cdFx0XHRcdG1lc3NhZ2U6IFwiTm90IGEgdmFsaWQgZW1haWwgYWRkcmVzczwhLS0gZGF0YS12YWxpZGF0b3ItdmFsaWRlbWFpbC1tZXNzYWdlIHRvIG92ZXJyaWRlIC0tPlwiXG5cdFx0XHR9LFxuXHRcdFx0cGFzc3dvcmRhZ2Fpbjoge1xuXHRcdFx0XHRuYW1lOiBcIlBhc3N3b3JkYWdhaW5cIixcblx0XHRcdFx0dHlwZTogXCJtYXRjaFwiLFxuXHRcdFx0XHRtYXRjaDogXCJwYXNzd29yZFwiLFxuXHRcdFx0XHRtZXNzYWdlOiBcIkRvZXMgbm90IG1hdGNoIHRoZSBnaXZlbiBwYXNzd29yZDwhLS0gZGF0YS12YWxpZGF0b3ItcGFzd29yZGFnYWluLW1lc3NhZ2UgdG8gb3ZlcnJpZGUgLS0+XCJcblx0XHRcdH0sXG5cdFx0XHRwb3NpdGl2ZToge1xuXHRcdFx0XHRuYW1lOiBcIlBvc2l0aXZlXCIsXG5cdFx0XHRcdHR5cGU6IFwic2hvcnRjdXRcIixcblx0XHRcdFx0c2hvcnRjdXQ6IFwibnVtYmVyLHBvc2l0aXZlbnVtYmVyXCJcblx0XHRcdH0sXG5cdFx0XHRuZWdhdGl2ZToge1xuXHRcdFx0XHRuYW1lOiBcIk5lZ2F0aXZlXCIsXG5cdFx0XHRcdHR5cGU6IFwic2hvcnRjdXRcIixcblx0XHRcdFx0c2hvcnRjdXQ6IFwibnVtYmVyLG5lZ2F0aXZlbnVtYmVyXCJcblx0XHRcdH0sXG5cdFx0XHRudW1iZXI6IHtcblx0XHRcdFx0bmFtZTogXCJOdW1iZXJcIixcblx0XHRcdFx0dHlwZTogXCJyZWdleFwiLFxuXHRcdFx0XHRyZWdleDogXCIoWystXT9cXFxcXFxkKyhcXFxcXFwuXFxcXFxcZCopPyhbZUVdWystXT9bMC05XSspPyk/XCIsXG5cdFx0XHRcdG1lc3NhZ2U6IFwiTXVzdCBiZSBhIG51bWJlcjwhLS0gZGF0YS12YWxpZGF0b3ItbnVtYmVyLW1lc3NhZ2UgdG8gb3ZlcnJpZGUgLS0+XCJcblx0XHRcdH0sXG5cdFx0XHRpbnRlZ2VyOiB7XG5cdFx0XHRcdG5hbWU6IFwiSW50ZWdlclwiLFxuXHRcdFx0XHR0eXBlOiBcInJlZ2V4XCIsXG5cdFx0XHRcdHJlZ2V4OiBcIlsrLV0/XFxcXFxcZCtcIixcblx0XHRcdFx0bWVzc2FnZTogXCJObyBkZWNpbWFsIHBsYWNlcyBhbGxvd2VkPCEtLSBkYXRhLXZhbGlkYXRvci1pbnRlZ2VyLW1lc3NhZ2UgdG8gb3ZlcnJpZGUgLS0+XCJcblx0XHRcdH0sXG5cdFx0XHRwb3NpdGl2ZW51bWJlcjoge1xuXHRcdFx0XHRuYW1lOiBcIlBvc2l0aXZlbnVtYmVyXCIsXG5cdFx0XHRcdHR5cGU6IFwibWluXCIsXG5cdFx0XHRcdG1pbjogMCxcblx0XHRcdFx0bWVzc2FnZTogXCJNdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyPCEtLSBkYXRhLXZhbGlkYXRvci1wb3NpdGl2ZW51bWJlci1tZXNzYWdlIHRvIG92ZXJyaWRlIC0tPlwiXG5cdFx0XHR9LFxuXHRcdFx0bmVnYXRpdmVudW1iZXI6IHtcblx0XHRcdFx0bmFtZTogXCJOZWdhdGl2ZW51bWJlclwiLFxuXHRcdFx0XHR0eXBlOiBcIm1heFwiLFxuXHRcdFx0XHRtYXg6IDAsXG5cdFx0XHRcdG1lc3NhZ2U6IFwiTXVzdCBiZSBhIG5lZ2F0aXZlIG51bWJlcjwhLS0gZGF0YS12YWxpZGF0b3ItbmVnYXRpdmVudW1iZXItbWVzc2FnZSB0byBvdmVycmlkZSAtLT5cIlxuXHRcdFx0fSxcblx0XHRcdHJlcXVpcmVkOiB7XG5cdFx0XHRcdG5hbWU6IFwiUmVxdWlyZWRcIixcblx0XHRcdFx0dHlwZTogXCJyZXF1aXJlZFwiLFxuXHRcdFx0XHRtZXNzYWdlOiBcIlRoaXMgaXMgcmVxdWlyZWQ8IS0tIGRhdGEtdmFsaWRhdG9yLXJlcXVpcmVkLW1lc3NhZ2UgdG8gb3ZlcnJpZGUgLS0+XCJcblx0XHRcdH0sXG5cdFx0XHRjaGVja29uZToge1xuXHRcdFx0XHRuYW1lOiBcIkNoZWNrb25lXCIsXG5cdFx0XHRcdHR5cGU6IFwibWluY2hlY2tlZFwiLFxuXHRcdFx0XHRtaW5jaGVja2VkOiAxLFxuXHRcdFx0XHRtZXNzYWdlOiBcIkNoZWNrIGF0IGxlYXN0IG9uZSBvcHRpb248IS0tIGRhdGEtdmFsaWRhdGlvbi1jaGVja29uZS1tZXNzYWdlIHRvIG92ZXJyaWRlIC0tPlwiXG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBmb3JtYXRWYWxpZGF0b3JOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0XHRyZXR1cm4gbmFtZVxuXHRcdFx0LnRvTG93ZXJDYXNlKClcblx0XHRcdC5yZXBsYWNlKFxuXHRcdFx0XHQvKF58XFxzKShbYS16XSkvZyAsXG5cdFx0XHRcdGZ1bmN0aW9uKG0scDEscDIpIHtcblx0XHRcdFx0XHRyZXR1cm4gcDErcDIudG9VcHBlckNhc2UoKTtcblx0XHRcdFx0fVxuXHRcdFx0KVxuXHRcdDtcblx0fTtcblxuXHR2YXIgZ2V0VmFsdWUgPSBmdW5jdGlvbiAoJHRoaXMpIHtcblx0XHQvLyBFeHRyYWN0IHRoZSB2YWx1ZSB3ZSdyZSB0YWxraW5nIGFib3V0XG5cdFx0dmFyIHZhbHVlID0gJHRoaXMudmFsKCk7XG5cdFx0dmFyIHR5cGUgPSAkdGhpcy5hdHRyKFwidHlwZVwiKTtcblx0XHRpZiAodHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG5cdFx0XHR2YWx1ZSA9ICgkdGhpcy5pcyhcIjpjaGVja2VkXCIpID8gdmFsdWUgOiBcIlwiKTtcblx0XHR9XG5cdFx0aWYgKHR5cGUgPT09IFwicmFkaW9cIikge1xuXHRcdFx0dmFsdWUgPSAoJCgnaW5wdXRbbmFtZT1cIicgKyAkdGhpcy5hdHRyKFwibmFtZVwiKSArICdcIl06Y2hlY2tlZCcpLmxlbmd0aCA+IDAgPyB2YWx1ZSA6IFwiXCIpO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH07XG5cbiAgZnVuY3Rpb24gcmVnZXhGcm9tU3RyaW5nKGlucHV0c3RyaW5nKSB7XG5cdFx0cmV0dXJuIG5ldyBSZWdFeHAoXCJeXCIgKyBpbnB1dHN0cmluZyArIFwiJFwiKTtcblx0fVxuXG4gIC8qKlxuICAgKiBUaGFua3MgdG8gSmFzb24gQnVudGluZyB2aWEgU3RhY2tPdmVyZmxvdy5jb21cbiAgICpcbiAgICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNTk3ODgvaG93LXRvLWV4ZWN1dGUtYS1qYXZhc2NyaXB0LWZ1bmN0aW9uLXdoZW4taS1oYXZlLWl0cy1uYW1lLWFzLWEtc3RyaW5nI2Fuc3dlci0zNTk5MTBcbiAgICogU2hvcnQgbGluazogaHR0cDovL3Rpbnl1cmwuY29tL2V4ZWN1dGVGdW5jdGlvbkJ5TmFtZVxuICAqKi9cbiAgZnVuY3Rpb24gZXhlY3V0ZUZ1bmN0aW9uQnlOYW1lKGZ1bmN0aW9uTmFtZSwgY29udGV4dCAvKiwgYXJncyovKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLnNwbGljZSgyKTtcbiAgICB2YXIgbmFtZXNwYWNlcyA9IGZ1bmN0aW9uTmFtZS5zcGxpdChcIi5cIik7XG4gICAgdmFyIGZ1bmMgPSBuYW1lc3BhY2VzLnBvcCgpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuYW1lc3BhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb250ZXh0ID0gY29udGV4dFtuYW1lc3BhY2VzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRleHRbZnVuY10uYXBwbHkodGhpcywgYXJncyk7XG4gIH1cblxuXHQkLmZuLmpxQm9vdHN0cmFwVmFsaWRhdGlvbiA9IGZ1bmN0aW9uKCBtZXRob2QgKSB7XG5cblx0XHRpZiAoIGRlZmF1bHRzLm1ldGhvZHNbbWV0aG9kXSApIHtcblx0XHRcdHJldHVybiBkZWZhdWx0cy5tZXRob2RzW21ldGhvZF0uYXBwbHkoIHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKSk7XG5cdFx0fSBlbHNlIGlmICggdHlwZW9mIG1ldGhvZCA9PT0gJ29iamVjdCcgfHwgISBtZXRob2QgKSB7XG5cdFx0XHRyZXR1cm4gZGVmYXVsdHMubWV0aG9kcy5pbml0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9IGVsc2Uge1xuXHRcdCQuZXJyb3IoICdNZXRob2QgJyArICBtZXRob2QgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5qcUJvb3RzdHJhcFZhbGlkYXRpb24nICk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0fTtcblxuICAkLmpxQm9vdHN0cmFwVmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgJChcIjppbnB1dFwiKS5ub3QoXCJbdHlwZT1pbWFnZV0sW3R5cGU9c3VibWl0XVwiKS5qcUJvb3RzdHJhcFZhbGlkYXRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuICB9O1xuXG59KSggalF1ZXJ5ICk7XG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbltUQUJMRSBPRiBDT05URU5UU11cblxuXHQwMS4gU01BUlRNRU5VU1xuXHQwMi4gUElDVFVSRUZJTEwgUkVUSU5BIElNQUdFXG5cdDAzLiBXT1dcblx0MDQuIElTT1RPUEVcblx0MDUuIElNQUdFU0xPQURFRFxuXHQwNi4gQkFDS0dST1VORCBWSURFTyBQQVJBTExBWFxuXHQwNy4gTElHSFRHQUxMRVJZXG5cdDA4LiBPV0wgQ0FST1VTRUxcblx0MDkuIFRBQiBDT0xMQVBTRVxuXHQxMC4gUFJPR1JFU1NCQVJcblx0MTEuIFdBWVBPSU5UU1xuXHQxMi4gQ09VTlRFUiBVUFxuXHQxMy4gQ0lSQ0xFIFBST0dSRVNTIEJBUlxuXHQxNC4gVkFOSUxMQVxuXHQxNS4gSU5TVEFGRUVEXG5cdDE2LiBGSVRWSURTXG5cdDE3LiBMT0NBTFNDUk9MTCAmIFNDUk9MTFRPXG5cdDE4LiBQUkVUVElGWVxuXHQxOS4gTEFaWSBMT0FEIEdPT0dMRSBNQVBTXG5cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKlx0MDEuIFNNQVJUTUVOVVNcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLyohIFNtYXJ0TWVudXMgalF1ZXJ5IFBsdWdpbiAtIHYxLjAuMC1iZXRhMSAtIEp1bmUgMSwgMjAxNVxuICogaHR0cDovL3d3dy5zbWFydG1lbnVzLm9yZy9cbiAqIENvcHlyaWdodCAyMDE1IFZhc2lsIERpbmtvdiwgVmFkaWtvbSBXZWIgTHRkLiBodHRwOi8vdmFkaWtvbS5jb207IExpY2Vuc2VkIE1JVCAqLyhmdW5jdGlvbih0KXtmdW5jdGlvbiBpKGkpe3ZhciByPVwiLnNtYXJ0bWVudXNfbW91c2VcIjtpZihofHxpKWgmJmkmJih0KGRvY3VtZW50KS51bmJpbmQociksaD0hMSk7ZWxzZXt2YXIgdT0hMCxsPW51bGw7dChkb2N1bWVudCkuYmluZChvKFtbXCJtb3VzZW1vdmVcIixmdW5jdGlvbihpKXt2YXIgZT17eDppLnBhZ2VYLHk6aS5wYWdlWSx0aW1lU3RhbXA6KG5ldyBEYXRlKS5nZXRUaW1lKCl9O2lmKGwpe3ZhciBzPU1hdGguYWJzKGwueC1lLngpLG89TWF0aC5hYnMobC55LWUueSk7aWYoKHM+MHx8bz4wKSYmMj49cyYmMj49byYmMzAwPj1lLnRpbWVTdGFtcC1sLnRpbWVTdGFtcCYmKG49ITAsdSkpe3ZhciByPXQoaS50YXJnZXQpLmNsb3Nlc3QoXCJhXCIpO3IuaXMoXCJhXCIpJiZ0LmVhY2goYSxmdW5jdGlvbigpe3JldHVybiB0LmNvbnRhaW5zKHRoaXMuJHJvb3RbMF0sclswXSk/KHRoaXMuaXRlbUVudGVyKHtjdXJyZW50VGFyZ2V0OnJbMF19KSwhMSk6dm9pZCAwfSksdT0hMX19bD1lfV0sW3MoKT9cInRvdWNoc3RhcnRcIjpcInBvaW50ZXJvdmVyIHBvaW50ZXJtb3ZlIHBvaW50ZXJvdXQgTVNQb2ludGVyT3ZlciBNU1BvaW50ZXJNb3ZlIE1TUG9pbnRlck91dFwiLGZ1bmN0aW9uKHQpe2UodC5vcmlnaW5hbEV2ZW50KSYmKG49ITEpfV1dLHIpKSxoPSEwfX1mdW5jdGlvbiBlKHQpe3JldHVybiEvXig0fG1vdXNlKSQvLnRlc3QodC5wb2ludGVyVHlwZSl9ZnVuY3Rpb24gcygpe3JldHVyblwib250b3VjaHN0YXJ0XCJpbiB3aW5kb3d9ZnVuY3Rpb24gbyhpLGUpe2V8fChlPVwiXCIpO3ZhciBzPXt9O3JldHVybiB0LmVhY2goaSxmdW5jdGlvbih0LGkpe3NbaVswXS5zcGxpdChcIiBcIikuam9pbihlK1wiIFwiKStlXT1pWzFdfSksc312YXIgYT1bXSxyPSEhd2luZG93LmNyZWF0ZVBvcHVwLG49ITEsaD0hMTt0LlNtYXJ0TWVudXM9ZnVuY3Rpb24oaSxlKXt0aGlzLiRyb290PXQoaSksdGhpcy5vcHRzPWUsdGhpcy5yb290SWQ9XCJcIix0aGlzLmFjY2Vzc0lkUHJlZml4PVwiXCIsdGhpcy4kc3ViQXJyb3c9bnVsbCx0aGlzLmFjdGl2YXRlZEl0ZW1zPVtdLHRoaXMudmlzaWJsZVN1Yk1lbnVzPVtdLHRoaXMuc2hvd1RpbWVvdXQ9MCx0aGlzLmhpZGVUaW1lb3V0PTAsdGhpcy5zY3JvbGxUaW1lb3V0PTAsdGhpcy5jbGlja0FjdGl2YXRlZD0hMSx0aGlzLmZvY3VzQWN0aXZhdGVkPSExLHRoaXMuekluZGV4SW5jPTAsdGhpcy5pZEluYz0wLHRoaXMuJGZpcnN0TGluaz1udWxsLHRoaXMuJGZpcnN0U3ViPW51bGwsdGhpcy5kaXNhYmxlZD0hMSx0aGlzLiRkaXNhYmxlT3ZlcmxheT1udWxsLHRoaXMuaXNUb3VjaFNjcm9sbGluZz0hMSx0aGlzLndhc0NvbGxhcHNpYmxlPSExLHRoaXMuaW5pdCgpfSx0LmV4dGVuZCh0LlNtYXJ0TWVudXMse2hpZGVBbGw6ZnVuY3Rpb24oKXt0LmVhY2goYSxmdW5jdGlvbigpe3RoaXMubWVudUhpZGVBbGwoKX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zm9yKDthLmxlbmd0aDspYVswXS5kZXN0cm95KCk7aSghMCl9LHByb3RvdHlwZTp7aW5pdDpmdW5jdGlvbihlKXt2YXIgcz10aGlzO2lmKCFlKXthLnB1c2godGhpcyksdGhpcy5yb290SWQ9KChuZXcgRGF0ZSkuZ2V0VGltZSgpK01hdGgucmFuZG9tKCkrXCJcIikucmVwbGFjZSgvXFxEL2csXCJcIiksdGhpcy5hY2Nlc3NJZFByZWZpeD1cInNtLVwiK3RoaXMucm9vdElkK1wiLVwiLHRoaXMuJHJvb3QuaGFzQ2xhc3MoXCJzbS1ydGxcIikmJih0aGlzLm9wdHMucmlnaHRUb0xlZnRTdWJNZW51cz0hMCk7dmFyIHI9XCIuc21hcnRtZW51c1wiO3RoaXMuJHJvb3QuZGF0YShcInNtYXJ0bWVudXNcIix0aGlzKS5hdHRyKFwiZGF0YS1zbWFydG1lbnVzLWlkXCIsdGhpcy5yb290SWQpLmRhdGFTTShcImxldmVsXCIsMSkuYmluZChvKFtbXCJtb3VzZW92ZXIgZm9jdXNpblwiLHQucHJveHkodGhpcy5yb290T3Zlcix0aGlzKV0sW1wibW91c2VvdXQgZm9jdXNvdXRcIix0LnByb3h5KHRoaXMucm9vdE91dCx0aGlzKV0sW1wia2V5ZG93blwiLHQucHJveHkodGhpcy5yb290S2V5RG93bix0aGlzKV1dLHIpKS5kZWxlZ2F0ZShcImFcIixvKFtbXCJtb3VzZWVudGVyXCIsdC5wcm94eSh0aGlzLml0ZW1FbnRlcix0aGlzKV0sW1wibW91c2VsZWF2ZVwiLHQucHJveHkodGhpcy5pdGVtTGVhdmUsdGhpcyldLFtcIm1vdXNlZG93blwiLHQucHJveHkodGhpcy5pdGVtRG93bix0aGlzKV0sW1wiZm9jdXNcIix0LnByb3h5KHRoaXMuaXRlbUZvY3VzLHRoaXMpXSxbXCJibHVyXCIsdC5wcm94eSh0aGlzLml0ZW1CbHVyLHRoaXMpXSxbXCJjbGlja1wiLHQucHJveHkodGhpcy5pdGVtQ2xpY2ssdGhpcyldLFtcInRvdWNoZW5kXCIsdC5wcm94eSh0aGlzLml0ZW1Ub3VjaEVuZCx0aGlzKV1dLHIpKSxyKz10aGlzLnJvb3RJZCx0aGlzLm9wdHMuaGlkZU9uQ2xpY2smJnQoZG9jdW1lbnQpLmJpbmQobyhbW1widG91Y2hzdGFydFwiLHQucHJveHkodGhpcy5kb2NUb3VjaFN0YXJ0LHRoaXMpXSxbXCJ0b3VjaG1vdmVcIix0LnByb3h5KHRoaXMuZG9jVG91Y2hNb3ZlLHRoaXMpXSxbXCJ0b3VjaGVuZFwiLHQucHJveHkodGhpcy5kb2NUb3VjaEVuZCx0aGlzKV0sW1wiY2xpY2tcIix0LnByb3h5KHRoaXMuZG9jQ2xpY2ssdGhpcyldXSxyKSksdCh3aW5kb3cpLmJpbmQobyhbW1wicmVzaXplIG9yaWVudGF0aW9uY2hhbmdlXCIsdC5wcm94eSh0aGlzLndpblJlc2l6ZSx0aGlzKV1dLHIpKSx0aGlzLm9wdHMuc3ViSW5kaWNhdG9ycyYmKHRoaXMuJHN1YkFycm93PXQoXCI8c3Bhbi8+XCIpLmFkZENsYXNzKFwic3ViLWFycm93XCIpLHRoaXMub3B0cy5zdWJJbmRpY2F0b3JzVGV4dCYmdGhpcy4kc3ViQXJyb3cuaHRtbCh0aGlzLm9wdHMuc3ViSW5kaWNhdG9yc1RleHQpKSxpKCl9aWYodGhpcy4kZmlyc3RTdWI9dGhpcy4kcm9vdC5maW5kKFwidWxcIikuZWFjaChmdW5jdGlvbigpe3MubWVudUluaXQodCh0aGlzKSl9KS5lcSgwKSx0aGlzLiRmaXJzdExpbms9dGhpcy4kcm9vdC5maW5kKFwiYVwiKS5lcSgwKSx0aGlzLm9wdHMubWFya0N1cnJlbnRJdGVtKXt2YXIgbj0vKGluZGV4fGRlZmF1bHQpXFwuW14jXFw/XFwvXSovaSxoPS8jLiovLHU9d2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZShuLFwiXCIpLGw9dS5yZXBsYWNlKGgsXCJcIik7dGhpcy4kcm9vdC5maW5kKFwiYVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5ocmVmLnJlcGxhY2UobixcIlwiKSxlPXQodGhpcyk7KGk9PXV8fGk9PWwpJiYoZS5hZGRDbGFzcyhcImN1cnJlbnRcIikscy5vcHRzLm1hcmtDdXJyZW50VHJlZSYmZS5wYXJlbnRzVW50aWwoXCJbZGF0YS1zbWFydG1lbnVzLWlkXVwiLFwidWxcIikuZWFjaChmdW5jdGlvbigpe3QodGhpcykuZGF0YVNNKFwicGFyZW50LWFcIikuYWRkQ2xhc3MoXCJjdXJyZW50XCIpfSkpfSl9dGhpcy53YXNDb2xsYXBzaWJsZT10aGlzLmlzQ29sbGFwc2libGUoKX0sZGVzdHJveTpmdW5jdGlvbihpKXtpZighaSl7dmFyIGU9XCIuc21hcnRtZW51c1wiO3RoaXMuJHJvb3QucmVtb3ZlRGF0YShcInNtYXJ0bWVudXNcIikucmVtb3ZlQXR0cihcImRhdGEtc21hcnRtZW51cy1pZFwiKS5yZW1vdmVEYXRhU00oXCJsZXZlbFwiKS51bmJpbmQoZSkudW5kZWxlZ2F0ZShlKSxlKz10aGlzLnJvb3RJZCx0KGRvY3VtZW50KS51bmJpbmQoZSksdCh3aW5kb3cpLnVuYmluZChlKSx0aGlzLm9wdHMuc3ViSW5kaWNhdG9ycyYmKHRoaXMuJHN1YkFycm93PW51bGwpfXRoaXMubWVudUhpZGVBbGwoKTt2YXIgcz10aGlzO3RoaXMuJHJvb3QuZmluZChcInVsXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgaT10KHRoaXMpO2kuZGF0YVNNKFwic2Nyb2xsLWFycm93c1wiKSYmaS5kYXRhU00oXCJzY3JvbGwtYXJyb3dzXCIpLnJlbW92ZSgpLGkuZGF0YVNNKFwic2hvd24tYmVmb3JlXCIpJiYoKHMub3B0cy5zdWJNZW51c01pbldpZHRofHxzLm9wdHMuc3ViTWVudXNNYXhXaWR0aCkmJmkuY3NzKHt3aWR0aDpcIlwiLG1pbldpZHRoOlwiXCIsbWF4V2lkdGg6XCJcIn0pLnJlbW92ZUNsYXNzKFwic20tbm93cmFwXCIpLGkuZGF0YVNNKFwic2Nyb2xsLWFycm93c1wiKSYmaS5kYXRhU00oXCJzY3JvbGwtYXJyb3dzXCIpLnJlbW92ZSgpLGkuY3NzKHt6SW5kZXg6XCJcIix0b3A6XCJcIixsZWZ0OlwiXCIsbWFyZ2luTGVmdDpcIlwiLG1hcmdpblRvcDpcIlwiLGRpc3BsYXk6XCJcIn0pKSwwPT1pLmF0dHIoXCJpZFwiKS5pbmRleE9mKHMuYWNjZXNzSWRQcmVmaXgpJiZpLnJlbW92ZUF0dHIoXCJpZFwiKX0pLnJlbW92ZURhdGFTTShcImluLW1lZ2FcIikucmVtb3ZlRGF0YVNNKFwic2hvd24tYmVmb3JlXCIpLnJlbW92ZURhdGFTTShcImllLXNoaW1cIikucmVtb3ZlRGF0YVNNKFwic2Nyb2xsLWFycm93c1wiKS5yZW1vdmVEYXRhU00oXCJwYXJlbnQtYVwiKS5yZW1vdmVEYXRhU00oXCJsZXZlbFwiKS5yZW1vdmVEYXRhU00oXCJiZWZvcmVmaXJzdHNob3dmaXJlZFwiKS5yZW1vdmVBdHRyKFwicm9sZVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1oaWRkZW5cIikucmVtb3ZlQXR0cihcImFyaWEtbGFiZWxsZWRieVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1leHBhbmRlZFwiKSx0aGlzLiRyb290LmZpbmQoXCJhLmhhcy1zdWJtZW51XCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgaT10KHRoaXMpOzA9PWkuYXR0cihcImlkXCIpLmluZGV4T2Yocy5hY2Nlc3NJZFByZWZpeCkmJmkucmVtb3ZlQXR0cihcImlkXCIpfSkucmVtb3ZlQ2xhc3MoXCJoYXMtc3VibWVudVwiKS5yZW1vdmVEYXRhU00oXCJzdWJcIikucmVtb3ZlQXR0cihcImFyaWEtaGFzcG9wdXBcIikucmVtb3ZlQXR0cihcImFyaWEtY29udHJvbHNcIikucmVtb3ZlQXR0cihcImFyaWEtZXhwYW5kZWRcIikuY2xvc2VzdChcImxpXCIpLnJlbW92ZURhdGFTTShcInN1YlwiKSx0aGlzLm9wdHMuc3ViSW5kaWNhdG9ycyYmdGhpcy4kcm9vdC5maW5kKFwic3Bhbi5zdWItYXJyb3dcIikucmVtb3ZlKCksdGhpcy5vcHRzLm1hcmtDdXJyZW50SXRlbSYmdGhpcy4kcm9vdC5maW5kKFwiYS5jdXJyZW50XCIpLnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKSxpfHwodGhpcy4kcm9vdD1udWxsLHRoaXMuJGZpcnN0TGluaz1udWxsLHRoaXMuJGZpcnN0U3ViPW51bGwsdGhpcy4kZGlzYWJsZU92ZXJsYXkmJih0aGlzLiRkaXNhYmxlT3ZlcmxheS5yZW1vdmUoKSx0aGlzLiRkaXNhYmxlT3ZlcmxheT1udWxsKSxhLnNwbGljZSh0LmluQXJyYXkodGhpcyxhKSwxKSl9LGRpc2FibGU6ZnVuY3Rpb24oaSl7aWYoIXRoaXMuZGlzYWJsZWQpe2lmKHRoaXMubWVudUhpZGVBbGwoKSwhaSYmIXRoaXMub3B0cy5pc1BvcHVwJiZ0aGlzLiRyb290LmlzKFwiOnZpc2libGVcIikpe3ZhciBlPXRoaXMuJHJvb3Qub2Zmc2V0KCk7dGhpcy4kZGlzYWJsZU92ZXJsYXk9dCgnPGRpdiBjbGFzcz1cInNtLWpxdWVyeS1kaXNhYmxlLW92ZXJsYXlcIi8+JykuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOmUudG9wLGxlZnQ6ZS5sZWZ0LHdpZHRoOnRoaXMuJHJvb3Qub3V0ZXJXaWR0aCgpLGhlaWdodDp0aGlzLiRyb290Lm91dGVySGVpZ2h0KCksekluZGV4OnRoaXMuZ2V0U3RhcnRaSW5kZXgoITApLG9wYWNpdHk6MH0pLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpfXRoaXMuZGlzYWJsZWQ9ITB9fSxkb2NDbGljazpmdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5pc1RvdWNoU2Nyb2xsaW5nPyh0aGlzLmlzVG91Y2hTY3JvbGxpbmc9ITEsdm9pZCAwKTooKHRoaXMudmlzaWJsZVN1Yk1lbnVzLmxlbmd0aCYmIXQuY29udGFpbnModGhpcy4kcm9vdFswXSxpLnRhcmdldCl8fHQoaS50YXJnZXQpLmlzKFwiYVwiKSkmJnRoaXMubWVudUhpZGVBbGwoKSx2b2lkIDApfSxkb2NUb3VjaEVuZDpmdW5jdGlvbigpe2lmKHRoaXMubGFzdFRvdWNoKXtpZighKCF0aGlzLnZpc2libGVTdWJNZW51cy5sZW5ndGh8fHZvaWQgMCE9PXRoaXMubGFzdFRvdWNoLngyJiZ0aGlzLmxhc3RUb3VjaC54MSE9dGhpcy5sYXN0VG91Y2gueDJ8fHZvaWQgMCE9PXRoaXMubGFzdFRvdWNoLnkyJiZ0aGlzLmxhc3RUb3VjaC55MSE9dGhpcy5sYXN0VG91Y2gueTJ8fHRoaXMubGFzdFRvdWNoLnRhcmdldCYmdC5jb250YWlucyh0aGlzLiRyb290WzBdLHRoaXMubGFzdFRvdWNoLnRhcmdldCkpKXt0aGlzLmhpZGVUaW1lb3V0JiYoY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpLHRoaXMuaGlkZVRpbWVvdXQ9MCk7dmFyIGk9dGhpczt0aGlzLmhpZGVUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLm1lbnVIaWRlQWxsKCl9LDM1MCl9dGhpcy5sYXN0VG91Y2g9bnVsbH19LGRvY1RvdWNoTW92ZTpmdW5jdGlvbih0KXtpZih0aGlzLmxhc3RUb3VjaCl7dmFyIGk9dC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF07dGhpcy5sYXN0VG91Y2gueDI9aS5wYWdlWCx0aGlzLmxhc3RUb3VjaC55Mj1pLnBhZ2VZfX0sZG9jVG91Y2hTdGFydDpmdW5jdGlvbih0KXt2YXIgaT10Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXTt0aGlzLmxhc3RUb3VjaD17eDE6aS5wYWdlWCx5MTppLnBhZ2VZLHRhcmdldDppLnRhcmdldH19LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQmJih0aGlzLiRkaXNhYmxlT3ZlcmxheSYmKHRoaXMuJGRpc2FibGVPdmVybGF5LnJlbW92ZSgpLHRoaXMuJGRpc2FibGVPdmVybGF5PW51bGwpLHRoaXMuZGlzYWJsZWQ9ITEpfSxnZXRDbG9zZXN0TWVudTpmdW5jdGlvbihpKXtmb3IodmFyIGU9dChpKS5jbG9zZXN0KFwidWxcIik7ZS5kYXRhU00oXCJpbi1tZWdhXCIpOyllPWUucGFyZW50KCkuY2xvc2VzdChcInVsXCIpO3JldHVybiBlWzBdfHxudWxsfSxnZXRIZWlnaHQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0T2Zmc2V0KHQsITApfSxnZXRPZmZzZXQ6ZnVuY3Rpb24odCxpKXt2YXIgZTtcIm5vbmVcIj09dC5jc3MoXCJkaXNwbGF5XCIpJiYoZT17cG9zaXRpb246dFswXS5zdHlsZS5wb3NpdGlvbix2aXNpYmlsaXR5OnRbMF0uc3R5bGUudmlzaWJpbGl0eX0sdC5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCJ9KS5zaG93KCkpO3ZhciBzPXRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0JiZ0WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89cyYmKGk/cy5oZWlnaHR8fHMuYm90dG9tLXMudG9wOnMud2lkdGh8fHMucmlnaHQtcy5sZWZ0KTtyZXR1cm4gb3x8MD09PW98fChvPWk/dFswXS5vZmZzZXRIZWlnaHQ6dFswXS5vZmZzZXRXaWR0aCksZSYmdC5oaWRlKCkuY3NzKGUpLG99LGdldFN0YXJ0WkluZGV4OmZ1bmN0aW9uKHQpe3ZhciBpPXBhcnNlSW50KHRoaXNbdD9cIiRyb290XCI6XCIkZmlyc3RTdWJcIl0uY3NzKFwiei1pbmRleFwiKSk7cmV0dXJuIXQmJmlzTmFOKGkpJiYoaT1wYXJzZUludCh0aGlzLiRyb290LmNzcyhcInotaW5kZXhcIikpKSxpc05hTihpKT8xOml9LGdldFRvdWNoUG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQudG91Y2hlcyYmdC50b3VjaGVzWzBdfHx0LmNoYW5nZWRUb3VjaGVzJiZ0LmNoYW5nZWRUb3VjaGVzWzBdfHx0fSxnZXRWaWV3cG9ydDpmdW5jdGlvbih0KXt2YXIgaT10P1wiSGVpZ2h0XCI6XCJXaWR0aFwiLGU9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIraV0scz13aW5kb3dbXCJpbm5lclwiK2ldO3JldHVybiBzJiYoZT1NYXRoLm1pbihlLHMpKSxlfSxnZXRWaWV3cG9ydEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFZpZXdwb3J0KCEwKX0sZ2V0Vmlld3BvcnRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFZpZXdwb3J0KCl9LGdldFdpZHRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldE9mZnNldCh0KX0saGFuZGxlRXZlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuZGlzYWJsZWQmJnRoaXMuaXNDU1NPbigpfSxoYW5kbGVJdGVtRXZlbnRzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhbmRsZUV2ZW50cygpJiYhdGhpcy5pc0xpbmtJbk1lZ2FNZW51KHQpfSxpc0NvbGxhcHNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuXCJzdGF0aWNcIj09dGhpcy4kZmlyc3RTdWIuY3NzKFwicG9zaXRpb25cIil9LGlzQ1NTT246ZnVuY3Rpb24oKXtyZXR1cm5cImJsb2NrXCI9PXRoaXMuJGZpcnN0TGluay5jc3MoXCJkaXNwbGF5XCIpfSxpc0ZpeGVkOmZ1bmN0aW9uKCl7dmFyIGk9XCJmaXhlZFwiPT10aGlzLiRyb290LmNzcyhcInBvc2l0aW9uXCIpO3JldHVybiBpfHx0aGlzLiRyb290LnBhcmVudHNVbnRpbChcImJvZHlcIikuZWFjaChmdW5jdGlvbigpe3JldHVyblwiZml4ZWRcIj09dCh0aGlzKS5jc3MoXCJwb3NpdGlvblwiKT8oaT0hMCwhMSk6dm9pZCAwfSksaX0saXNMaW5rSW5NZWdhTWVudTpmdW5jdGlvbihpKXtyZXR1cm4gdCh0aGlzLmdldENsb3Nlc3RNZW51KGlbMF0pKS5oYXNDbGFzcyhcIm1lZ2EtbWVudVwiKX0saXNUb3VjaE1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4hbnx8dGhpcy5pc0NvbGxhcHNpYmxlKCl9LGl0ZW1BY3RpdmF0ZTpmdW5jdGlvbihpLGUpe3ZhciBzPWkuY2xvc2VzdChcInVsXCIpLG89cy5kYXRhU00oXCJsZXZlbFwiKTtpZihvPjEmJighdGhpcy5hY3RpdmF0ZWRJdGVtc1tvLTJdfHx0aGlzLmFjdGl2YXRlZEl0ZW1zW28tMl1bMF0hPXMuZGF0YVNNKFwicGFyZW50LWFcIilbMF0pKXt2YXIgYT10aGlzO3Qocy5wYXJlbnRzVW50aWwoXCJbZGF0YS1zbWFydG1lbnVzLWlkXVwiLFwidWxcIikuZ2V0KCkucmV2ZXJzZSgpKS5hZGQocykuZWFjaChmdW5jdGlvbigpe2EuaXRlbUFjdGl2YXRlKHQodGhpcykuZGF0YVNNKFwicGFyZW50LWFcIikpfSl9aWYoKCF0aGlzLmlzQ29sbGFwc2libGUoKXx8ZSkmJnRoaXMubWVudUhpZGVTdWJNZW51cyh0aGlzLmFjdGl2YXRlZEl0ZW1zW28tMV0mJnRoaXMuYWN0aXZhdGVkSXRlbXNbby0xXVswXT09aVswXT9vOm8tMSksdGhpcy5hY3RpdmF0ZWRJdGVtc1tvLTFdPWksdGhpcy4kcm9vdC50cmlnZ2VySGFuZGxlcihcImFjdGl2YXRlLnNtYXBpXCIsaVswXSkhPT0hMSl7dmFyIHI9aS5kYXRhU00oXCJzdWJcIik7ciYmKHRoaXMuaXNUb3VjaE1vZGUoKXx8IXRoaXMub3B0cy5zaG93T25DbGlja3x8dGhpcy5jbGlja0FjdGl2YXRlZCkmJnRoaXMubWVudVNob3cocil9fSxpdGVtQmx1cjpmdW5jdGlvbihpKXt2YXIgZT10KGkuY3VycmVudFRhcmdldCk7dGhpcy5oYW5kbGVJdGVtRXZlbnRzKGUpJiZ0aGlzLiRyb290LnRyaWdnZXJIYW5kbGVyKFwiYmx1ci5zbWFwaVwiLGVbMF0pfSxpdGVtQ2xpY2s6ZnVuY3Rpb24oaSl7aWYodGhpcy5pc1RvdWNoU2Nyb2xsaW5nKXJldHVybiB0aGlzLmlzVG91Y2hTY3JvbGxpbmc9ITEsaS5zdG9wUHJvcGFnYXRpb24oKSwhMTt2YXIgZT10KGkuY3VycmVudFRhcmdldCk7aWYodGhpcy5oYW5kbGVJdGVtRXZlbnRzKGUpKXtpZih0aGlzLiRyb290LnRyaWdnZXJIYW5kbGVyKFwiY2xpY2suc21hcGlcIixlWzBdKT09PSExKXJldHVybiExO2UuZGF0YVNNKFwiaHJlZlwiKSYmZS5hdHRyKFwiaHJlZlwiLGUuZGF0YVNNKFwiaHJlZlwiKSkucmVtb3ZlRGF0YVNNKFwiaHJlZlwiKTt2YXIgcz10KGkudGFyZ2V0KS5pcyhcInNwYW4uc3ViLWFycm93XCIpLG89ZS5kYXRhU00oXCJzdWJcIik7aWYobyYmIW8uaXMoXCI6dmlzaWJsZVwiKSl7aWYodGhpcy5pdGVtQWN0aXZhdGUoZSksby5pcyhcIjp2aXNpYmxlXCIpKXJldHVybiB0aGlzLmZvY3VzQWN0aXZhdGVkPSEwLCExfWVsc2UgaWYodGhpcy5pc0NvbGxhcHNpYmxlKCkmJnMpcmV0dXJuIHRoaXMuaXRlbUFjdGl2YXRlKGUpLHRoaXMubWVudUhpZGUobyksITE7cmV0dXJuIHRoaXMub3B0cy5zaG93T25DbGljayYmbyYmMj09by5kYXRhU00oXCJsZXZlbFwiKT8odGhpcy5jbGlja0FjdGl2YXRlZD0hMCx0aGlzLm1lbnVTaG93KG8pLCExKTplLmhhc0NsYXNzKFwiZGlzYWJsZWRcIik/ITE6dGhpcy4kcm9vdC50cmlnZ2VySGFuZGxlcihcInNlbGVjdC5zbWFwaVwiLGVbMF0pPT09ITE/ITE6dm9pZCAwfX0saXRlbURvd246ZnVuY3Rpb24oaSl7dmFyIGU9dChpLmN1cnJlbnRUYXJnZXQpO3RoaXMuaGFuZGxlSXRlbUV2ZW50cyhlKSYmZS5kYXRhU00oXCJtb3VzZWRvd25cIiwhMCl9LGl0ZW1FbnRlcjpmdW5jdGlvbihpKXt2YXIgZT10KGkuY3VycmVudFRhcmdldCk7aWYodGhpcy5oYW5kbGVJdGVtRXZlbnRzKGUpKXtpZighdGhpcy5pc1RvdWNoTW9kZSgpKXt0aGlzLnNob3dUaW1lb3V0JiYoY2xlYXJUaW1lb3V0KHRoaXMuc2hvd1RpbWVvdXQpLHRoaXMuc2hvd1RpbWVvdXQ9MCk7dmFyIHM9dGhpczt0aGlzLnNob3dUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLml0ZW1BY3RpdmF0ZShlKX0sdGhpcy5vcHRzLnNob3dPbkNsaWNrJiYxPT1lLmNsb3Nlc3QoXCJ1bFwiKS5kYXRhU00oXCJsZXZlbFwiKT8xOnRoaXMub3B0cy5zaG93VGltZW91dCl9dGhpcy4kcm9vdC50cmlnZ2VySGFuZGxlcihcIm1vdXNlZW50ZXIuc21hcGlcIixlWzBdKX19LGl0ZW1Gb2N1czpmdW5jdGlvbihpKXt2YXIgZT10KGkuY3VycmVudFRhcmdldCk7dGhpcy5oYW5kbGVJdGVtRXZlbnRzKGUpJiYoIXRoaXMuZm9jdXNBY3RpdmF0ZWR8fHRoaXMuaXNUb3VjaE1vZGUoKSYmZS5kYXRhU00oXCJtb3VzZWRvd25cIil8fHRoaXMuYWN0aXZhdGVkSXRlbXMubGVuZ3RoJiZ0aGlzLmFjdGl2YXRlZEl0ZW1zW3RoaXMuYWN0aXZhdGVkSXRlbXMubGVuZ3RoLTFdWzBdPT1lWzBdfHx0aGlzLml0ZW1BY3RpdmF0ZShlLCEwKSx0aGlzLiRyb290LnRyaWdnZXJIYW5kbGVyKFwiZm9jdXMuc21hcGlcIixlWzBdKSl9LGl0ZW1MZWF2ZTpmdW5jdGlvbihpKXt2YXIgZT10KGkuY3VycmVudFRhcmdldCk7dGhpcy5oYW5kbGVJdGVtRXZlbnRzKGUpJiYodGhpcy5pc1RvdWNoTW9kZSgpfHx0aGlzLnNob3dUaW1lb3V0JiYoY2xlYXJUaW1lb3V0KHRoaXMuc2hvd1RpbWVvdXQpLHRoaXMuc2hvd1RpbWVvdXQ9MCksZS5yZW1vdmVEYXRhU00oXCJtb3VzZWRvd25cIiksdGhpcy4kcm9vdC50cmlnZ2VySGFuZGxlcihcIm1vdXNlbGVhdmUuc21hcGlcIixlWzBdKSl9LGl0ZW1Ub3VjaEVuZDpmdW5jdGlvbihpKXt2YXIgZT10KGkuY3VycmVudFRhcmdldCk7aWYodGhpcy5oYW5kbGVJdGVtRXZlbnRzKGUpKXt2YXIgcz1lLmRhdGFTTShcInN1YlwiKTtcIiNcIiE9PWUuYXR0cihcImhyZWZcIikuY2hhckF0KDApJiZzJiYhcy5pcyhcIjp2aXNpYmxlXCIpJiZlLmRhdGFTTShcImhyZWZcIixlLmF0dHIoXCJocmVmXCIpKS5hdHRyKFwiaHJlZlwiLFwiI1wiKX19LG1lbnVIaWRlOmZ1bmN0aW9uKGkpe2lmKHRoaXMuJHJvb3QudHJpZ2dlckhhbmRsZXIoXCJiZWZvcmVoaWRlLnNtYXBpXCIsaVswXSkhPT0hMSYmKGkuc3RvcCghMCwhMCksXCJub25lXCIhPWkuY3NzKFwiZGlzcGxheVwiKSkpe3ZhciBlPWZ1bmN0aW9uKCl7aS5jc3MoXCJ6LWluZGV4XCIsXCJcIil9O3RoaXMuaXNDb2xsYXBzaWJsZSgpP3RoaXMub3B0cy5jb2xsYXBzaWJsZUhpZGVGdW5jdGlvbj90aGlzLm9wdHMuY29sbGFwc2libGVIaWRlRnVuY3Rpb24uY2FsbCh0aGlzLGksZSk6aS5oaWRlKHRoaXMub3B0cy5jb2xsYXBzaWJsZUhpZGVEdXJhdGlvbixlKTp0aGlzLm9wdHMuaGlkZUZ1bmN0aW9uP3RoaXMub3B0cy5oaWRlRnVuY3Rpb24uY2FsbCh0aGlzLGksZSk6aS5oaWRlKHRoaXMub3B0cy5oaWRlRHVyYXRpb24sZSksaS5kYXRhU00oXCJpZS1zaGltXCIpJiZpLmRhdGFTTShcImllLXNoaW1cIikucmVtb3ZlKCksaS5kYXRhU00oXCJzY3JvbGxcIikmJih0aGlzLm1lbnVTY3JvbGxTdG9wKGkpLGkuY3NzKHtcInRvdWNoLWFjdGlvblwiOlwiXCIsXCItbXMtdG91Y2gtYWN0aW9uXCI6XCJcIn0pLnVuYmluZChcIi5zbWFydG1lbnVzX3Njcm9sbFwiKS5yZW1vdmVEYXRhU00oXCJzY3JvbGxcIikuZGF0YVNNKFwic2Nyb2xsLWFycm93c1wiKS5oaWRlKCkpLGkuZGF0YVNNKFwicGFyZW50LWFcIikucmVtb3ZlQ2xhc3MoXCJoaWdobGlnaHRlZFwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLFwiZmFsc2VcIiksaS5hdHRyKHtcImFyaWEtZXhwYW5kZWRcIjpcImZhbHNlXCIsXCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwifSk7dmFyIHM9aS5kYXRhU00oXCJsZXZlbFwiKTt0aGlzLmFjdGl2YXRlZEl0ZW1zLnNwbGljZShzLTEsMSksdGhpcy52aXNpYmxlU3ViTWVudXMuc3BsaWNlKHQuaW5BcnJheShpLHRoaXMudmlzaWJsZVN1Yk1lbnVzKSwxKSx0aGlzLiRyb290LnRyaWdnZXJIYW5kbGVyKFwiaGlkZS5zbWFwaVwiLGlbMF0pfX0sbWVudUhpZGVBbGw6ZnVuY3Rpb24oKXt0aGlzLnNob3dUaW1lb3V0JiYoY2xlYXJUaW1lb3V0KHRoaXMuc2hvd1RpbWVvdXQpLHRoaXMuc2hvd1RpbWVvdXQ9MCk7Zm9yKHZhciB0PXRoaXMub3B0cy5pc1BvcHVwPzE6MCxpPXRoaXMudmlzaWJsZVN1Yk1lbnVzLmxlbmd0aC0xO2k+PXQ7aS0tKXRoaXMubWVudUhpZGUodGhpcy52aXNpYmxlU3ViTWVudXNbaV0pO3RoaXMub3B0cy5pc1BvcHVwJiYodGhpcy4kcm9vdC5zdG9wKCEwLCEwKSx0aGlzLiRyb290LmlzKFwiOnZpc2libGVcIikmJih0aGlzLm9wdHMuaGlkZUZ1bmN0aW9uP3RoaXMub3B0cy5oaWRlRnVuY3Rpb24uY2FsbCh0aGlzLHRoaXMuJHJvb3QpOnRoaXMuJHJvb3QuaGlkZSh0aGlzLm9wdHMuaGlkZUR1cmF0aW9uKSx0aGlzLiRyb290LmRhdGFTTShcImllLXNoaW1cIikmJnRoaXMuJHJvb3QuZGF0YVNNKFwiaWUtc2hpbVwiKS5yZW1vdmUoKSkpLHRoaXMuYWN0aXZhdGVkSXRlbXM9W10sdGhpcy52aXNpYmxlU3ViTWVudXM9W10sdGhpcy5jbGlja0FjdGl2YXRlZD0hMSx0aGlzLmZvY3VzQWN0aXZhdGVkPSExLHRoaXMuekluZGV4SW5jPTB9LG1lbnVIaWRlU3ViTWVudXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBpPXRoaXMuYWN0aXZhdGVkSXRlbXMubGVuZ3RoLTE7aT49dDtpLS0pe3ZhciBlPXRoaXMuYWN0aXZhdGVkSXRlbXNbaV0uZGF0YVNNKFwic3ViXCIpO2UmJnRoaXMubWVudUhpZGUoZSl9fSxtZW51SWZyYW1lU2hpbTpmdW5jdGlvbihpKXtyJiZ0aGlzLm9wdHMub3ZlcmxhcENvbnRyb2xzSW5JRSYmIWkuZGF0YVNNKFwiaWUtc2hpbVwiKSYmaS5kYXRhU00oXCJpZS1zaGltXCIsdChcIjxpZnJhbWUvPlwiKS5hdHRyKHtzcmM6XCJqYXZhc2NyaXB0OjBcIix0YWJpbmRleDotOX0pLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpcImF1dG9cIixsZWZ0OlwiMFwiLG9wYWNpdHk6MCxib3JkZXI6XCIwXCJ9KSl9LG1lbnVJbml0OmZ1bmN0aW9uKHQpe2lmKCF0LmRhdGFTTShcImluLW1lZ2FcIikpe3QuaGFzQ2xhc3MoXCJtZWdhLW1lbnVcIikmJnQuZmluZChcInVsXCIpLmRhdGFTTShcImluLW1lZ2FcIiwhMCk7Zm9yKHZhciBpPTIsZT10WzBdOyhlPWUucGFyZW50Tm9kZS5wYXJlbnROb2RlKSE9dGhpcy4kcm9vdFswXTspaSsrO3ZhciBzPXQucHJldkFsbChcImFcIikuZXEoLTEpO3MubGVuZ3RofHwocz10LnByZXZBbGwoKS5maW5kKFwiYVwiKS5lcSgtMSkpLHMuYWRkQ2xhc3MoXCJoYXMtc3VibWVudVwiKS5kYXRhU00oXCJzdWJcIix0KSx0LmRhdGFTTShcInBhcmVudC1hXCIscykuZGF0YVNNKFwibGV2ZWxcIixpKS5wYXJlbnQoKS5kYXRhU00oXCJzdWJcIix0KTt2YXIgbz1zLmF0dHIoXCJpZFwiKXx8dGhpcy5hY2Nlc3NJZFByZWZpeCsgKyt0aGlzLmlkSW5jLGE9dC5hdHRyKFwiaWRcIil8fHRoaXMuYWNjZXNzSWRQcmVmaXgrICsrdGhpcy5pZEluYztzLmF0dHIoe2lkOm8sXCJhcmlhLWhhc3BvcHVwXCI6XCJ0cnVlXCIsXCJhcmlhLWNvbnRyb2xzXCI6YSxcImFyaWEtZXhwYW5kZWRcIjpcImZhbHNlXCJ9KSx0LmF0dHIoe2lkOmEscm9sZTpcImdyb3VwXCIsXCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwiLFwiYXJpYS1sYWJlbGxlZGJ5XCI6byxcImFyaWEtZXhwYW5kZWRcIjpcImZhbHNlXCJ9KSx0aGlzLm9wdHMuc3ViSW5kaWNhdG9ycyYmc1t0aGlzLm9wdHMuc3ViSW5kaWNhdG9yc1Bvc10odGhpcy4kc3ViQXJyb3cuY2xvbmUoKSl9fSxtZW51UG9zaXRpb246ZnVuY3Rpb24oaSl7dmFyIGUsYSxyPWkuZGF0YVNNKFwicGFyZW50LWFcIiksbj1yLmNsb3Nlc3QoXCJsaVwiKSxoPW4ucGFyZW50KCksdT1pLmRhdGFTTShcImxldmVsXCIpLGw9dGhpcy5nZXRXaWR0aChpKSxjPXRoaXMuZ2V0SGVpZ2h0KGkpLGQ9ci5vZmZzZXQoKSxtPWQubGVmdCxwPWQudG9wLGY9dGhpcy5nZXRXaWR0aChyKSx2PXRoaXMuZ2V0SGVpZ2h0KHIpLGI9dCh3aW5kb3cpLFM9Yi5zY3JvbGxMZWZ0KCksZz1iLnNjcm9sbFRvcCgpLE09dGhpcy5nZXRWaWV3cG9ydFdpZHRoKCksdz10aGlzLmdldFZpZXdwb3J0SGVpZ2h0KCksVD1oLmhhc0NsYXNzKFwic21cIikmJiFoLmhhc0NsYXNzKFwic20tdmVydGljYWxcIiksST10aGlzLm9wdHMucmlnaHRUb0xlZnRTdWJNZW51cyYmIW4uaXMoXCJbZGF0YS1zbS1yZXZlcnNlXVwiKXx8IXRoaXMub3B0cy5yaWdodFRvTGVmdFN1Yk1lbnVzJiZuLmlzKFwiW2RhdGEtc20tcmV2ZXJzZV1cIiksJD0yPT11P3RoaXMub3B0cy5tYWluTWVudVN1Yk9mZnNldFg6dGhpcy5vcHRzLnN1Yk1lbnVzU3ViT2Zmc2V0WCx4PTI9PXU/dGhpcy5vcHRzLm1haW5NZW51U3ViT2Zmc2V0WTp0aGlzLm9wdHMuc3ViTWVudXNTdWJPZmZzZXRZO2lmKFQ/KGU9ST9mLWwtJDokLGE9dGhpcy5vcHRzLmJvdHRvbVRvVG9wU3ViTWVudXM/LWMteDp2K3gpOihlPUk/JC1sOmYtJCxhPXRoaXMub3B0cy5ib3R0b21Ub1RvcFN1Yk1lbnVzP3YteC1jOngpLHRoaXMub3B0cy5rZWVwSW5WaWV3cG9ydCl7dmFyIHk9bStlLEM9cCthO2lmKEkmJlM+eT9lPVQ/Uy15K2U6Zi0kOiFJJiZ5K2w+UytNJiYoZT1UP1MrTS1sLXkrZTokLWwpLFR8fCh3PmMmJkMrYz5nK3c/YSs9Zyt3LWMtQzooYz49d3x8Zz5DKSYmKGErPWctQykpLFQmJihDK2M+Zyt3Ky40OXx8Zz5DKXx8IVQmJmM+dysuNDkpe3ZhciBIPXRoaXM7aS5kYXRhU00oXCJzY3JvbGwtYXJyb3dzXCIpfHxpLmRhdGFTTShcInNjcm9sbC1hcnJvd3NcIix0KFt0KCc8c3BhbiBjbGFzcz1cInNjcm9sbC11cFwiPjxzcGFuIGNsYXNzPVwic2Nyb2xsLXVwLWFycm93XCI+PC9zcGFuPjwvc3Bhbj4nKVswXSx0KCc8c3BhbiBjbGFzcz1cInNjcm9sbC1kb3duXCI+PHNwYW4gY2xhc3M9XCJzY3JvbGwtZG93bi1hcnJvd1wiPjwvc3Bhbj48L3NwYW4+JylbMF1dKS5iaW5kKHttb3VzZWVudGVyOmZ1bmN0aW9uKCl7aS5kYXRhU00oXCJzY3JvbGxcIikudXA9dCh0aGlzKS5oYXNDbGFzcyhcInNjcm9sbC11cFwiKSxILm1lbnVTY3JvbGwoaSl9LG1vdXNlbGVhdmU6ZnVuY3Rpb24odCl7SC5tZW51U2Nyb2xsU3RvcChpKSxILm1lbnVTY3JvbGxPdXQoaSx0KX0sXCJtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsXCI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpfX0pLmluc2VydEFmdGVyKGkpKTt2YXIgQT1cIi5zbWFydG1lbnVzX3Njcm9sbFwiO2kuZGF0YVNNKFwic2Nyb2xsXCIse3N0ZXA6MSxpdGVtSDp2LHN1Ykg6YyxhcnJvd0Rvd25IOnRoaXMuZ2V0SGVpZ2h0KGkuZGF0YVNNKFwic2Nyb2xsLWFycm93c1wiKS5lcSgxKSl9KS5iaW5kKG8oW1tcIm1vdXNlb3ZlclwiLGZ1bmN0aW9uKHQpe0gubWVudVNjcm9sbE92ZXIoaSx0KX1dLFtcIm1vdXNlb3V0XCIsZnVuY3Rpb24odCl7SC5tZW51U2Nyb2xsT3V0KGksdCl9XSxbXCJtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsXCIsZnVuY3Rpb24odCl7SC5tZW51U2Nyb2xsTW91c2V3aGVlbChpLHQpfV1dLEEpKS5kYXRhU00oXCJzY3JvbGwtYXJyb3dzXCIpLmNzcyh7dG9wOlwiYXV0b1wiLGxlZnQ6XCIwXCIsbWFyZ2luTGVmdDplKyhwYXJzZUludChpLmNzcyhcImJvcmRlci1sZWZ0LXdpZHRoXCIpKXx8MCksd2lkdGg6bC0ocGFyc2VJbnQoaS5jc3MoXCJib3JkZXItbGVmdC13aWR0aFwiKSl8fDApLShwYXJzZUludChpLmNzcyhcImJvcmRlci1yaWdodC13aWR0aFwiKSl8fDApLHpJbmRleDppLmNzcyhcInotaW5kZXhcIil9KS5lcShUJiZ0aGlzLm9wdHMuYm90dG9tVG9Ub3BTdWJNZW51cz8wOjEpLnNob3coKSx0aGlzLmlzRml4ZWQoKSYmaS5jc3Moe1widG91Y2gtYWN0aW9uXCI6XCJub25lXCIsXCItbXMtdG91Y2gtYWN0aW9uXCI6XCJub25lXCJ9KS5iaW5kKG8oW1tzKCk/XCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZFwiOlwicG9pbnRlcmRvd24gcG9pbnRlcm1vdmUgcG9pbnRlcnVwIE1TUG9pbnRlckRvd24gTVNQb2ludGVyTW92ZSBNU1BvaW50ZXJVcFwiLGZ1bmN0aW9uKHQpe0gubWVudVNjcm9sbFRvdWNoKGksdCl9XV0sQSkpfX1pLmNzcyh7dG9wOlwiYXV0b1wiLGxlZnQ6XCIwXCIsbWFyZ2luTGVmdDplLG1hcmdpblRvcDphLXZ9KSx0aGlzLm1lbnVJZnJhbWVTaGltKGkpLGkuZGF0YVNNKFwiaWUtc2hpbVwiKSYmaS5kYXRhU00oXCJpZS1zaGltXCIpLmNzcyh7ekluZGV4OmkuY3NzKFwiei1pbmRleFwiKSx3aWR0aDpsLGhlaWdodDpjLG1hcmdpbkxlZnQ6ZSxtYXJnaW5Ub3A6YS12fSl9LG1lbnVTY3JvbGw6ZnVuY3Rpb24odCxpLGUpe3ZhciBzLG89dC5kYXRhU00oXCJzY3JvbGxcIiksYT10LmRhdGFTTShcInNjcm9sbC1hcnJvd3NcIikscj1wYXJzZUZsb2F0KHQuY3NzKFwibWFyZ2luLXRvcFwiKSksaD1vLnVwP28udXBFbmQ6by5kb3duRW5kO2lmKCFpJiZvLnZlbG9jaXR5KXtpZihvLnZlbG9jaXR5Kj0uOSxzPW8udmVsb2NpdHksLjU+cylyZXR1cm4gdGhpcy5tZW51U2Nyb2xsU3RvcCh0KSx2b2lkIDB9ZWxzZSBzPWV8fChpfHwhdGhpcy5vcHRzLnNjcm9sbEFjY2VsZXJhdGU/dGhpcy5vcHRzLnNjcm9sbFN0ZXA6TWF0aC5mbG9vcihvLnN0ZXApKTt2YXIgdT10LmRhdGFTTShcImxldmVsXCIpO3RoaXMuYWN0aXZhdGVkSXRlbXNbdS0xXSYmdGhpcy5hY3RpdmF0ZWRJdGVtc1t1LTFdLmRhdGFTTShcInN1YlwiKSYmdGhpcy5hY3RpdmF0ZWRJdGVtc1t1LTFdLmRhdGFTTShcInN1YlwiKS5pcyhcIjp2aXNpYmxlXCIpJiZ0aGlzLm1lbnVIaWRlU3ViTWVudXModS0xKTt2YXIgbD1vLnVwJiZyPj1ofHwhby51cCYmaD49cj9yOk1hdGguYWJzKGgtcik+cz9yKyhvLnVwP3M6LXMpOmg7aWYodC5hZGQodC5kYXRhU00oXCJpZS1zaGltXCIpKS5jc3MoXCJtYXJnaW4tdG9wXCIsbCksbiYmKG8udXAmJmw+by5kb3duRW5kfHwhby51cCYmby51cEVuZD5sKSYmYS5lcShvLnVwPzE6MCkuc2hvdygpLGw9PWgpbiYmYS5lcShvLnVwPzA6MSkuaGlkZSgpLHRoaXMubWVudVNjcm9sbFN0b3AodCk7ZWxzZSBpZighaSl7dGhpcy5vcHRzLnNjcm9sbEFjY2VsZXJhdGUmJm8uc3RlcDx0aGlzLm9wdHMuc2Nyb2xsU3RlcCYmKG8uc3RlcCs9LjUpO3ZhciBjPXRoaXM7dGhpcy5zY3JvbGxUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLm1lbnVTY3JvbGwodCl9LHRoaXMub3B0cy5zY3JvbGxJbnRlcnZhbCl9fSxtZW51U2Nyb2xsTW91c2V3aGVlbDpmdW5jdGlvbih0LGkpe2lmKHRoaXMuZ2V0Q2xvc2VzdE1lbnUoaS50YXJnZXQpPT10WzBdKXtpPWkub3JpZ2luYWxFdmVudDt2YXIgZT0oaS53aGVlbERlbHRhfHwtaS5kZXRhaWwpPjA7dC5kYXRhU00oXCJzY3JvbGwtYXJyb3dzXCIpLmVxKGU/MDoxKS5pcyhcIjp2aXNpYmxlXCIpJiYodC5kYXRhU00oXCJzY3JvbGxcIikudXA9ZSx0aGlzLm1lbnVTY3JvbGwodCwhMCkpfWkucHJldmVudERlZmF1bHQoKX0sbWVudVNjcm9sbE91dDpmdW5jdGlvbihpLGUpe24mJigvXnNjcm9sbC0odXB8ZG93bikvLnRlc3QoKGUucmVsYXRlZFRhcmdldHx8XCJcIikuY2xhc3NOYW1lKXx8KGlbMF09PWUucmVsYXRlZFRhcmdldHx8dC5jb250YWlucyhpWzBdLGUucmVsYXRlZFRhcmdldCkpJiZ0aGlzLmdldENsb3Nlc3RNZW51KGUucmVsYXRlZFRhcmdldCk9PWlbMF18fGkuZGF0YVNNKFwic2Nyb2xsLWFycm93c1wiKS5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIikpfSxtZW51U2Nyb2xsT3ZlcjpmdW5jdGlvbih0LGkpe2lmKG4mJiEvXnNjcm9sbC0odXB8ZG93bikvLnRlc3QoaS50YXJnZXQuY2xhc3NOYW1lKSYmdGhpcy5nZXRDbG9zZXN0TWVudShpLnRhcmdldCk9PXRbMF0pe3RoaXMubWVudVNjcm9sbFJlZnJlc2hEYXRhKHQpO3ZhciBlPXQuZGF0YVNNKFwic2Nyb2xsXCIpO3QuZGF0YVNNKFwic2Nyb2xsLWFycm93c1wiKS5lcSgwKS5jc3MoXCJtYXJnaW4tdG9wXCIsZS51cEVuZCkuZW5kKCkuZXEoMSkuY3NzKFwibWFyZ2luLXRvcFwiLGUuZG93bkVuZCtlLnN1YkgtZS5hcnJvd0Rvd25IKS5lbmQoKS5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJ2aXNpYmxlXCIpfX0sbWVudVNjcm9sbFJlZnJlc2hEYXRhOmZ1bmN0aW9uKGkpe3ZhciBlPWkuZGF0YVNNKFwic2Nyb2xsXCIpLHM9dCh3aW5kb3cpLG89cy5zY3JvbGxUb3AoKS1pLmRhdGFTTShcInBhcmVudC1hXCIpLm9mZnNldCgpLnRvcC1lLml0ZW1IO3QuZXh0ZW5kKGUse3VwRW5kOm8sZG93bkVuZDpvK3RoaXMuZ2V0Vmlld3BvcnRIZWlnaHQoKS1lLnN1Ykh9KX0sbWVudVNjcm9sbFN0b3A6ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuc2Nyb2xsVGltZW91dD8oY2xlYXJUaW1lb3V0KHRoaXMuc2Nyb2xsVGltZW91dCksdGhpcy5zY3JvbGxUaW1lb3V0PTAsdC5leHRlbmQoaS5kYXRhU00oXCJzY3JvbGxcIikse3N0ZXA6MSx2ZWxvY2l0eTowfSksITApOnZvaWQgMH0sbWVudVNjcm9sbFRvdWNoOmZ1bmN0aW9uKGkscyl7aWYocz1zLm9yaWdpbmFsRXZlbnQsZShzKSl7dmFyIG89dGhpcy5nZXRUb3VjaFBvaW50KHMpO2lmKHRoaXMuZ2V0Q2xvc2VzdE1lbnUoby50YXJnZXQpPT1pWzBdKXt2YXIgYT1pLmRhdGFTTShcInNjcm9sbFwiKTtpZigvKHN0YXJ0fGRvd24pJC9pLnRlc3Qocy50eXBlKSl0aGlzLm1lbnVTY3JvbGxTdG9wKGkpPyhzLnByZXZlbnREZWZhdWx0KCksdGhpcy5pc1RvdWNoU2Nyb2xsaW5nPSEwKTp0aGlzLmlzVG91Y2hTY3JvbGxpbmc9ITEsdGhpcy5tZW51U2Nyb2xsUmVmcmVzaERhdGEoaSksdC5leHRlbmQoYSx7dG91Y2hZOm8ucGFnZVksdG91Y2hUaW1lc3RhbXA6cy50aW1lU3RhbXAsdmVsb2NpdHk6MH0pO2Vsc2UgaWYoL21vdmUkL2kudGVzdChzLnR5cGUpKXt2YXIgcj1hLnRvdWNoWTt2b2lkIDAhPT1yJiZyIT1vLnBhZ2VZJiYodGhpcy5pc1RvdWNoU2Nyb2xsaW5nPSEwLHQuZXh0ZW5kKGEse3VwOm8ucGFnZVk+cix0b3VjaFk6by5wYWdlWSx0b3VjaFRpbWVzdGFtcDpzLnRpbWVTdGFtcCx2ZWxvY2l0eTphLnZlbG9jaXR5Ky41Kk1hdGguYWJzKG8ucGFnZVktcil9KSx0aGlzLm1lbnVTY3JvbGwoaSwhMCxNYXRoLmFicyhhLnRvdWNoWS1yKSkpLHMucHJldmVudERlZmF1bHQoKX1lbHNlIHZvaWQgMCE9PWEudG91Y2hZJiYoMTIwPnMudGltZVN0YW1wLWEudG91Y2hUaW1lc3RhbXAmJmEudmVsb2NpdHk+MCYmKGEudmVsb2NpdHkqPS41LHRoaXMubWVudVNjcm9sbFN0b3AoaSksdGhpcy5tZW51U2Nyb2xsKGkpLHMucHJldmVudERlZmF1bHQoKSksZGVsZXRlIGEudG91Y2hZKX19fSxtZW51U2hvdzpmdW5jdGlvbih0KXtpZigodC5kYXRhU00oXCJiZWZvcmVmaXJzdHNob3dmaXJlZFwiKXx8KHQuZGF0YVNNKFwiYmVmb3JlZmlyc3RzaG93ZmlyZWRcIiwhMCksdGhpcy4kcm9vdC50cmlnZ2VySGFuZGxlcihcImJlZm9yZWZpcnN0c2hvdy5zbWFwaVwiLHRbMF0pIT09ITEpKSYmdGhpcy4kcm9vdC50cmlnZ2VySGFuZGxlcihcImJlZm9yZXNob3cuc21hcGlcIix0WzBdKSE9PSExJiYodC5kYXRhU00oXCJzaG93bi1iZWZvcmVcIiwhMCkuc3RvcCghMCwhMCksIXQuaXMoXCI6dmlzaWJsZVwiKSkpe3ZhciBpPXQuZGF0YVNNKFwicGFyZW50LWFcIik7aWYoKHRoaXMub3B0cy5rZWVwSGlnaGxpZ2h0ZWR8fHRoaXMuaXNDb2xsYXBzaWJsZSgpKSYmaS5hZGRDbGFzcyhcImhpZ2hsaWdodGVkXCIpLHRoaXMuaXNDb2xsYXBzaWJsZSgpKXQucmVtb3ZlQ2xhc3MoXCJzbS1ub3dyYXBcIikuY3NzKHt6SW5kZXg6XCJcIix3aWR0aDpcImF1dG9cIixtaW5XaWR0aDpcIlwiLG1heFdpZHRoOlwiXCIsdG9wOlwiXCIsbGVmdDpcIlwiLG1hcmdpbkxlZnQ6XCJcIixtYXJnaW5Ub3A6XCJcIn0pO2Vsc2V7aWYodC5jc3MoXCJ6LWluZGV4XCIsdGhpcy56SW5kZXhJbmM9KHRoaXMuekluZGV4SW5jfHx0aGlzLmdldFN0YXJ0WkluZGV4KCkpKzEpLCh0aGlzLm9wdHMuc3ViTWVudXNNaW5XaWR0aHx8dGhpcy5vcHRzLnN1Yk1lbnVzTWF4V2lkdGgpJiYodC5jc3Moe3dpZHRoOlwiYXV0b1wiLG1pbldpZHRoOlwiXCIsbWF4V2lkdGg6XCJcIn0pLmFkZENsYXNzKFwic20tbm93cmFwXCIpLHRoaXMub3B0cy5zdWJNZW51c01pbldpZHRoJiZ0LmNzcyhcIm1pbi13aWR0aFwiLHRoaXMub3B0cy5zdWJNZW51c01pbldpZHRoKSx0aGlzLm9wdHMuc3ViTWVudXNNYXhXaWR0aCkpe3ZhciBlPXRoaXMuZ2V0V2lkdGgodCk7dC5jc3MoXCJtYXgtd2lkdGhcIix0aGlzLm9wdHMuc3ViTWVudXNNYXhXaWR0aCksZT50aGlzLmdldFdpZHRoKHQpJiZ0LnJlbW92ZUNsYXNzKFwic20tbm93cmFwXCIpLmNzcyhcIndpZHRoXCIsdGhpcy5vcHRzLnN1Yk1lbnVzTWF4V2lkdGgpfXRoaXMubWVudVBvc2l0aW9uKHQpLHQuZGF0YVNNKFwiaWUtc2hpbVwiKSYmdC5kYXRhU00oXCJpZS1zaGltXCIpLmluc2VydEJlZm9yZSh0KX12YXIgcz1mdW5jdGlvbigpe3QuY3NzKFwib3ZlcmZsb3dcIixcIlwiKX07dGhpcy5pc0NvbGxhcHNpYmxlKCk/dGhpcy5vcHRzLmNvbGxhcHNpYmxlU2hvd0Z1bmN0aW9uP3RoaXMub3B0cy5jb2xsYXBzaWJsZVNob3dGdW5jdGlvbi5jYWxsKHRoaXMsdCxzKTp0LnNob3codGhpcy5vcHRzLmNvbGxhcHNpYmxlU2hvd0R1cmF0aW9uLHMpOnRoaXMub3B0cy5zaG93RnVuY3Rpb24/dGhpcy5vcHRzLnNob3dGdW5jdGlvbi5jYWxsKHRoaXMsdCxzKTp0LnNob3codGhpcy5vcHRzLnNob3dEdXJhdGlvbixzKSxpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsXCJ0cnVlXCIpLHQuYXR0cih7XCJhcmlhLWV4cGFuZGVkXCI6XCJ0cnVlXCIsXCJhcmlhLWhpZGRlblwiOlwiZmFsc2VcIn0pLHRoaXMudmlzaWJsZVN1Yk1lbnVzLnB1c2godCksdGhpcy4kcm9vdC50cmlnZ2VySGFuZGxlcihcInNob3cuc21hcGlcIix0WzBdKX19LHBvcHVwSGlkZTpmdW5jdGlvbih0KXt0aGlzLmhpZGVUaW1lb3V0JiYoY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpLHRoaXMuaGlkZVRpbWVvdXQ9MCk7dmFyIGk9dGhpczt0aGlzLmhpZGVUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLm1lbnVIaWRlQWxsKCl9LHQ/MTp0aGlzLm9wdHMuaGlkZVRpbWVvdXQpfSxwb3B1cFNob3c6ZnVuY3Rpb24odCxpKXtpZighdGhpcy5vcHRzLmlzUG9wdXApcmV0dXJuIGFsZXJ0KCdTbWFydE1lbnVzIGpRdWVyeSBFcnJvcjpcXG5cXG5JZiB5b3Ugd2FudCB0byBzaG93IHRoaXMgbWVudSB2aWEgdGhlIFwicG9wdXBTaG93XCIgbWV0aG9kLCBzZXQgdGhlIGlzUG9wdXA6dHJ1ZSBvcHRpb24uJyksdm9pZCAwO2lmKHRoaXMuaGlkZVRpbWVvdXQmJihjbGVhclRpbWVvdXQodGhpcy5oaWRlVGltZW91dCksdGhpcy5oaWRlVGltZW91dD0wKSx0aGlzLiRyb290LmRhdGFTTShcInNob3duLWJlZm9yZVwiLCEwKS5zdG9wKCEwLCEwKSwhdGhpcy4kcm9vdC5pcyhcIjp2aXNpYmxlXCIpKXt0aGlzLiRyb290LmNzcyh7bGVmdDp0LHRvcDppfSksdGhpcy5tZW51SWZyYW1lU2hpbSh0aGlzLiRyb290KSx0aGlzLiRyb290LmRhdGFTTShcImllLXNoaW1cIikmJnRoaXMuJHJvb3QuZGF0YVNNKFwiaWUtc2hpbVwiKS5jc3Moe3pJbmRleDp0aGlzLiRyb290LmNzcyhcInotaW5kZXhcIiksd2lkdGg6dGhpcy5nZXRXaWR0aCh0aGlzLiRyb290KSxoZWlnaHQ6dGhpcy5nZXRIZWlnaHQodGhpcy4kcm9vdCksbGVmdDp0LHRvcDppfSkuaW5zZXJ0QmVmb3JlKHRoaXMuJHJvb3QpO3ZhciBlPXRoaXMscz1mdW5jdGlvbigpe2UuJHJvb3QuY3NzKFwib3ZlcmZsb3dcIixcIlwiKX07dGhpcy5vcHRzLnNob3dGdW5jdGlvbj90aGlzLm9wdHMuc2hvd0Z1bmN0aW9uLmNhbGwodGhpcyx0aGlzLiRyb290LHMpOnRoaXMuJHJvb3Quc2hvdyh0aGlzLm9wdHMuc2hvd0R1cmF0aW9uLHMpLHRoaXMudmlzaWJsZVN1Yk1lbnVzWzBdPXRoaXMuJHJvb3R9fSxyZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95KCEwKSx0aGlzLmluaXQoITApfSxyb290S2V5RG93bjpmdW5jdGlvbihpKXtpZih0aGlzLmhhbmRsZUV2ZW50cygpKXN3aXRjaChpLmtleUNvZGUpe2Nhc2UgMjc6dmFyIGU9dGhpcy5hY3RpdmF0ZWRJdGVtc1swXTtpZihlKXt0aGlzLm1lbnVIaWRlQWxsKCksZVswXS5mb2N1cygpO3ZhciBzPWUuZGF0YVNNKFwic3ViXCIpO3MmJnRoaXMubWVudUhpZGUocyl9YnJlYWs7Y2FzZSAzMjp2YXIgbz10KGkudGFyZ2V0KTtpZihvLmlzKFwiYVwiKSYmdGhpcy5oYW5kbGVJdGVtRXZlbnRzKG8pKXt2YXIgcz1vLmRhdGFTTShcInN1YlwiKTtzJiYhcy5pcyhcIjp2aXNpYmxlXCIpJiYodGhpcy5pdGVtQ2xpY2soe2N1cnJlbnRUYXJnZXQ6aS50YXJnZXR9KSxpLnByZXZlbnREZWZhdWx0KCkpfX19LHJvb3RPdXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5oYW5kbGVFdmVudHMoKSYmIXRoaXMuaXNUb3VjaE1vZGUoKSYmdC50YXJnZXQhPXRoaXMuJHJvb3RbMF0mJih0aGlzLmhpZGVUaW1lb3V0JiYoY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpLHRoaXMuaGlkZVRpbWVvdXQ9MCksIXRoaXMub3B0cy5zaG93T25DbGlja3x8IXRoaXMub3B0cy5oaWRlT25DbGljaykpe3ZhciBpPXRoaXM7dGhpcy5oaWRlVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5tZW51SGlkZUFsbCgpfSx0aGlzLm9wdHMuaGlkZVRpbWVvdXQpfX0scm9vdE92ZXI6ZnVuY3Rpb24odCl7dGhpcy5oYW5kbGVFdmVudHMoKSYmIXRoaXMuaXNUb3VjaE1vZGUoKSYmdC50YXJnZXQhPXRoaXMuJHJvb3RbMF0mJnRoaXMuaGlkZVRpbWVvdXQmJihjbGVhclRpbWVvdXQodGhpcy5oaWRlVGltZW91dCksdGhpcy5oaWRlVGltZW91dD0wKX0sd2luUmVzaXplOmZ1bmN0aW9uKHQpe2lmKHRoaXMuaGFuZGxlRXZlbnRzKCkpe2lmKCEoXCJvbm9yaWVudGF0aW9uY2hhbmdlXCJpbiB3aW5kb3cpfHxcIm9yaWVudGF0aW9uY2hhbmdlXCI9PXQudHlwZSl7dmFyIGk9dGhpcy5pc0NvbGxhcHNpYmxlKCk7dGhpcy53YXNDb2xsYXBzaWJsZSYmaXx8KHRoaXMuYWN0aXZhdGVkSXRlbXMubGVuZ3RoJiZ0aGlzLmFjdGl2YXRlZEl0ZW1zW3RoaXMuYWN0aXZhdGVkSXRlbXMubGVuZ3RoLTFdWzBdLmJsdXIoKSx0aGlzLm1lbnVIaWRlQWxsKCkpLHRoaXMud2FzQ29sbGFwc2libGU9aX19ZWxzZSBpZih0aGlzLiRkaXNhYmxlT3ZlcmxheSl7dmFyIGU9dGhpcy4kcm9vdC5vZmZzZXQoKTt0aGlzLiRkaXNhYmxlT3ZlcmxheS5jc3Moe3RvcDplLnRvcCxsZWZ0OmUubGVmdCx3aWR0aDp0aGlzLiRyb290Lm91dGVyV2lkdGgoKSxoZWlnaHQ6dGhpcy4kcm9vdC5vdXRlckhlaWdodCgpfSl9fX19KSx0LmZuLmRhdGFTTT1mdW5jdGlvbih0LGkpe3JldHVybiBpP3RoaXMuZGF0YSh0K1wiX3NtYXJ0bWVudXNcIixpKTp0aGlzLmRhdGEodCtcIl9zbWFydG1lbnVzXCIpfSx0LmZuLnJlbW92ZURhdGFTTT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZW1vdmVEYXRhKHQrXCJfc21hcnRtZW51c1wiKX0sdC5mbi5zbWFydG1lbnVzPWZ1bmN0aW9uKGkpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBpKXt2YXIgZT1hcmd1bWVudHMscz1pO3JldHVybiBBcnJheS5wcm90b3R5cGUuc2hpZnQuY2FsbChlKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaT10KHRoaXMpLmRhdGEoXCJzbWFydG1lbnVzXCIpO2kmJmlbc10mJmlbc10uYXBwbHkoaSxlKX0pfXZhciBvPXQuZXh0ZW5kKHt9LHQuZm4uc21hcnRtZW51cy5kZWZhdWx0cyxpKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bmV3IHQuU21hcnRNZW51cyh0aGlzLG8pfSl9LHQuZm4uc21hcnRtZW51cy5kZWZhdWx0cz17aXNQb3B1cDohMSxtYWluTWVudVN1Yk9mZnNldFg6MCxtYWluTWVudVN1Yk9mZnNldFk6MCxzdWJNZW51c1N1Yk9mZnNldFg6MCxzdWJNZW51c1N1Yk9mZnNldFk6MCxzdWJNZW51c01pbldpZHRoOlwiMTBlbVwiLHN1Yk1lbnVzTWF4V2lkdGg6XCIyMGVtXCIsc3ViSW5kaWNhdG9yczohMCxzdWJJbmRpY2F0b3JzUG9zOlwicHJlcGVuZFwiLHN1YkluZGljYXRvcnNUZXh0OlwiK1wiLHNjcm9sbFN0ZXA6MzAsc2Nyb2xsSW50ZXJ2YWw6MzAsc2Nyb2xsQWNjZWxlcmF0ZTohMCxzaG93VGltZW91dDoyNTAsaGlkZVRpbWVvdXQ6NTAwLHNob3dEdXJhdGlvbjowLHNob3dGdW5jdGlvbjpudWxsLGhpZGVEdXJhdGlvbjowLGhpZGVGdW5jdGlvbjpmdW5jdGlvbih0LGkpe3QuZmFkZU91dCgyMDAsaSl9LGNvbGxhcHNpYmxlU2hvd0R1cmF0aW9uOjAsY29sbGFwc2libGVTaG93RnVuY3Rpb246ZnVuY3Rpb24odCxpKXt0LnNsaWRlRG93bigyMDAsaSl9LGNvbGxhcHNpYmxlSGlkZUR1cmF0aW9uOjAsY29sbGFwc2libGVIaWRlRnVuY3Rpb246ZnVuY3Rpb24odCxpKXt0LnNsaWRlVXAoMjAwLGkpfSxzaG93T25DbGljazohMSxoaWRlT25DbGljazohMCxrZWVwSW5WaWV3cG9ydDohMCxrZWVwSGlnaGxpZ2h0ZWQ6ITAsbWFya0N1cnJlbnRJdGVtOiExLG1hcmtDdXJyZW50VHJlZTohMCxyaWdodFRvTGVmdFN1Yk1lbnVzOiExLGJvdHRvbVRvVG9wU3ViTWVudXM6ITEsb3ZlcmxhcENvbnRyb2xzSW5JRTohMH19KShqUXVlcnkpO1xuLyohIFNtYXJ0TWVudXMgalF1ZXJ5IFBsdWdpbiBCb290c3RyYXAgQWRkb24gLSB2MC4yLjAgLSBKdW5lIDEsIDIwMTVcbiAqIGh0dHA6Ly93d3cuc21hcnRtZW51cy5vcmcvXG4gKiBDb3B5cmlnaHQgMjAxNSBWYXNpbCBEaW5rb3YsIFZhZGlrb20gV2ViIEx0ZC4gaHR0cDovL3ZhZGlrb20uY29tOyBMaWNlbnNlZCBNSVQgKi8oZnVuY3Rpb24odCl7dChmdW5jdGlvbigpe3ZhciBzPXQoXCJ1bC5uYXZiYXItbmF2Om5vdChbZGF0YS1zbS1za2lwXSlcIik7cy5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcygpe3ZhciB0PWkuZ2V0Vmlld3BvcnRXaWR0aCgpO3QhPWEmJihpLmlzQ29sbGFwc2libGUoKT8oZS5hZGRDbGFzcyhcInNtLWNvbGxhcHNpYmxlXCIpLGUuaXMoXCJbZGF0YS1zbS1za2lwLWNvbGxhcHNpYmxlLWJlaGF2aW9yXVwiKXx8by5hZGRDbGFzcyhcIm5hdmJhci10b2dnbGUgc3ViLWFycm93XCIpKTooZS5yZW1vdmVDbGFzcyhcInNtLWNvbGxhcHNpYmxlXCIpLGUuaXMoXCJbZGF0YS1zbS1za2lwLWNvbGxhcHNpYmxlLWJlaGF2aW9yXVwiKXx8by5yZW1vdmVDbGFzcyhcIm5hdmJhci10b2dnbGUgc3ViLWFycm93XCIpKSxhPXQpfXZhciBlPXQodGhpcyk7ZS5hZGRDbGFzcyhcInNtXCIpLnNtYXJ0bWVudXMoe3N1Yk1lbnVzU3ViT2Zmc2V0WDoyLHN1Yk1lbnVzU3ViT2Zmc2V0WTotNixzdWJJbmRpY2F0b3JzOiExLGNvbGxhcHNpYmxlU2hvd0Z1bmN0aW9uOm51bGwsY29sbGFwc2libGVIaWRlRnVuY3Rpb246bnVsbCxyaWdodFRvTGVmdFN1Yk1lbnVzOmUuaGFzQ2xhc3MoXCJuYXZiYXItcmlnaHRcIiksYm90dG9tVG9Ub3BTdWJNZW51czplLmNsb3Nlc3QoXCIubmF2YmFyXCIpLmhhc0NsYXNzKFwibmF2YmFyLWZpeGVkLWJvdHRvbVwiKX0pLmJpbmQoe1wic2hvdy5zbWFwaVwiOmZ1bmN0aW9uKHMsZSl7dmFyIGk9dChlKSxhPWkuZGF0YVNNKFwic2Nyb2xsLWFycm93c1wiKTthJiZhLmNzcyhcImJhY2tncm91bmQtY29sb3JcIix0KGRvY3VtZW50LmJvZHkpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIikpLGkucGFyZW50KCkuYWRkQ2xhc3MoXCJvcGVuXCIpfSxcImhpZGUuc21hcGlcIjpmdW5jdGlvbihzLGUpe3QoZSkucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpfX0pLmZpbmQoXCJhLmN1cnJlbnRcIikucGFyZW50KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7dmFyIGk9ZS5kYXRhKFwic21hcnRtZW51c1wiKTtlLmlzKFwiW2RhdGEtc20tc2tpcC1jb2xsYXBzaWJsZS1iZWhhdmlvcl1cIikmJmUuYmluZCh7XCJjbGljay5zbWFwaVwiOmZ1bmN0aW9uKHMsZSl7aWYoaS5pc0NvbGxhcHNpYmxlKCkpe3ZhciBhPXQoZSksbz1hLnBhcmVudCgpLmRhdGFTTShcInN1YlwiKTtpZihvJiZvLmRhdGFTTShcInNob3duLWJlZm9yZVwiKSYmby5pcyhcIjp2aXNpYmxlXCIpKXJldHVybiBpLml0ZW1BY3RpdmF0ZShhKSxpLm1lbnVIaWRlKG8pLCExfX19KTt2YXIgYSxvPWUuZmluZChcIi5jYXJldFwiKTtzKCksdCh3aW5kb3cpLmJpbmQoXCJyZXNpemUuc21hcnRtZW51c1wiK2kucm9vdElkLHMpfSl9KSx0LlNtYXJ0TWVudXMucHJvdG90eXBlLmlzQ29sbGFwc2libGU9ZnVuY3Rpb24oKXtyZXR1cm5cImxlZnRcIiE9dGhpcy4kZmlyc3RMaW5rLnBhcmVudCgpLmNzcyhcImZsb2F0XCIpfX0pKGpRdWVyeSk7XG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qXHQwMi4gUElDVFVSRUZJTEwgUkVUSU5BIElNQUdFXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qISBQaWN0dXJlZmlsbCAtIHYyLjMuMSAtIDIwMTUtMDQtMDlcbiogaHR0cDovL3Njb3R0amVobC5naXRodWIuaW8vcGljdHVyZWZpbGxcbiogQ29weXJpZ2h0IChjKSAyMDE1IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvYmxvYi9tYXN0ZXIvQXV0aG9ycy50eHQ7IExpY2Vuc2VkIE1JVCAqL1xud2luZG93Lm1hdGNoTWVkaWF8fCh3aW5kb3cubWF0Y2hNZWRpYT1mdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBhPXdpbmRvdy5zdHlsZU1lZGlhfHx3aW5kb3cubWVkaWE7aWYoIWEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSxjPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpWzBdLGQ9bnVsbDtiLnR5cGU9XCJ0ZXh0L2Nzc1wiLGIuaWQ9XCJtYXRjaG1lZGlhanMtdGVzdFwiLGMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixjKSxkPVwiZ2V0Q29tcHV0ZWRTdHlsZVwiaW4gd2luZG93JiZ3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpfHxiLmN1cnJlbnRTdHlsZSxhPXttYXRjaE1lZGl1bTpmdW5jdGlvbihhKXt2YXIgYz1cIkBtZWRpYSBcIithK1wieyAjbWF0Y2htZWRpYWpzLXRlc3QgeyB3aWR0aDogMXB4OyB9IH1cIjtyZXR1cm4gYi5zdHlsZVNoZWV0P2Iuc3R5bGVTaGVldC5jc3NUZXh0PWM6Yi50ZXh0Q29udGVudD1jLFwiMXB4XCI9PT1kLndpZHRofX19cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybnttYXRjaGVzOmEubWF0Y2hNZWRpdW0oYnx8XCJhbGxcIiksbWVkaWE6Ynx8XCJhbGxcIn19fSgpKSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChiKXtcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YjpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShcInBpY3R1cmVmaWxsXCIsZnVuY3Rpb24oKXtyZXR1cm4gYn0pLFwib2JqZWN0XCI9PXR5cGVvZiBhJiYoYS5waWN0dXJlZmlsbD1iKX1mdW5jdGlvbiBlKGEpe3ZhciBiLGMsZCxlLGYsaT1hfHx7fTtiPWkuZWxlbWVudHN8fGcuZ2V0QWxsRWxlbWVudHMoKTtmb3IodmFyIGo9MCxrPWIubGVuZ3RoO2s+ajtqKyspaWYoYz1iW2pdLGQ9Yy5wYXJlbnROb2RlLGU9dm9pZCAwLGY9dm9pZCAwLFwiSU1HXCI9PT1jLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkmJihjW2cubnNdfHwoY1tnLm5zXT17fSksaS5yZWV2YWx1YXRlfHwhY1tnLm5zXS5ldmFsdWF0ZWQpKXtpZihkJiZcIlBJQ1RVUkVcIj09PWQubm9kZU5hbWUudG9VcHBlckNhc2UoKSl7aWYoZy5yZW1vdmVWaWRlb1NoaW0oZCksZT1nLmdldE1hdGNoKGMsZCksZT09PSExKWNvbnRpbnVlfWVsc2UgZT12b2lkIDA7KGQmJlwiUElDVFVSRVwiPT09ZC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpfHwhZy5zaXplc1N1cHBvcnRlZCYmYy5zcmNzZXQmJmgudGVzdChjLnNyY3NldCkpJiZnLmRvZGdlU3Jjc2V0KGMpLGU/KGY9Zy5wcm9jZXNzU291cmNlU2V0KGUpLGcuYXBwbHlCZXN0Q2FuZGlkYXRlKGYsYykpOihmPWcucHJvY2Vzc1NvdXJjZVNldChjKSwodm9pZCAwPT09Yy5zcmNzZXR8fGNbZy5uc10uc3Jjc2V0KSYmZy5hcHBseUJlc3RDYW5kaWRhdGUoZixjKSksY1tnLm5zXS5ldmFsdWF0ZWQ9ITB9fWZ1bmN0aW9uIGYoKXtmdW5jdGlvbiBjKCl7Y2xlYXJUaW1lb3V0KGQpLGQ9c2V0VGltZW91dChoLDYwKX1nLmluaXRUeXBlRGV0ZWN0cygpLGUoKTt2YXIgZCxmPXNldEludGVydmFsKGZ1bmN0aW9uKCl7cmV0dXJuIGUoKSwvXmxvYWRlZHxeaXxeYy8udGVzdChiLnJlYWR5U3RhdGUpP3ZvaWQgY2xlYXJJbnRlcnZhbChmKTp2b2lkIDB9LDI1MCksaD1mdW5jdGlvbigpe2Uoe3JlZXZhbHVhdGU6ITB9KX07YS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLGMsITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoXCJvbnJlc2l6ZVwiLGMpfWlmKGEuSFRNTFBpY3R1cmVFbGVtZW50KXJldHVybiB2b2lkIGQoZnVuY3Rpb24oKXt9KTtiLmNyZWF0ZUVsZW1lbnQoXCJwaWN0dXJlXCIpO3ZhciBnPWEucGljdHVyZWZpbGx8fHt9LGg9L1xccytcXCs/XFxkKyhlXFxkKyk/dy87Zy5ucz1cInBpY3R1cmVmaWxsXCIsZnVuY3Rpb24oKXtnLnNyY3NldFN1cHBvcnRlZD1cInNyY3NldFwiaW4gYyxnLnNpemVzU3VwcG9ydGVkPVwic2l6ZXNcImluIGMsZy5jdXJTcmNTdXBwb3J0ZWQ9XCJjdXJyZW50U3JjXCJpbiBjfSgpLGcudHJpbT1mdW5jdGlvbihhKXtyZXR1cm4gYS50cmltP2EudHJpbSgpOmEucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX0sZy5tYWtlVXJsPWZ1bmN0aW9uKCl7dmFyIGE9Yi5jcmVhdGVFbGVtZW50KFwiYVwiKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuaHJlZj1iLGEuaHJlZn19KCksZy5yZXN0cmljdHNNaXhlZENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm5cImh0dHBzOlwiPT09YS5sb2NhdGlvbi5wcm90b2NvbH0sZy5tYXRjaGVzTWVkaWE9ZnVuY3Rpb24oYil7cmV0dXJuIGEubWF0Y2hNZWRpYSYmYS5tYXRjaE1lZGlhKGIpLm1hdGNoZXN9LGcuZ2V0RHByPWZ1bmN0aW9uKCl7cmV0dXJuIGEuZGV2aWNlUGl4ZWxSYXRpb3x8MX0sZy5nZXRXaWR0aEZyb21MZW5ndGg9ZnVuY3Rpb24oYSl7dmFyIGM7aWYoIWF8fGEuaW5kZXhPZihcIiVcIik+LTEhPSExfHwhKHBhcnNlRmxvYXQoYSk+MHx8YS5pbmRleE9mKFwiY2FsYyhcIik+LTEpKXJldHVybiExO2E9YS5yZXBsYWNlKFwidndcIixcIiVcIiksZy5sZW5ndGhFbHx8KGcubGVuZ3RoRWw9Yi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGcubGVuZ3RoRWwuc3R5bGUuY3NzVGV4dD1cImJvcmRlcjowO2Rpc3BsYXk6YmxvY2s7Zm9udC1zaXplOjFlbTtsZWZ0OjA7bWFyZ2luOjA7cGFkZGluZzowO3Bvc2l0aW9uOmFic29sdXRlO3Zpc2liaWxpdHk6aGlkZGVuXCIsZy5sZW5ndGhFbC5jbGFzc05hbWU9XCJoZWxwZXItZnJvbS1waWN0dXJlZmlsbC1qc1wiKSxnLmxlbmd0aEVsLnN0eWxlLndpZHRoPVwiMHB4XCI7dHJ5e2cubGVuZ3RoRWwuc3R5bGUud2lkdGg9YX1jYXRjaChkKXt9cmV0dXJuIGIuYm9keS5hcHBlbmRDaGlsZChnLmxlbmd0aEVsKSxjPWcubGVuZ3RoRWwub2Zmc2V0V2lkdGgsMD49YyYmKGM9ITEpLGIuYm9keS5yZW1vdmVDaGlsZChnLmxlbmd0aEVsKSxjfSxnLmRldGVjdFR5cGVTdXBwb3J0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9bmV3IGEuSW1hZ2U7cmV0dXJuIGQub25lcnJvcj1mdW5jdGlvbigpe2cudHlwZXNbYl09ITEsZSgpfSxkLm9ubG9hZD1mdW5jdGlvbigpe2cudHlwZXNbYl09MT09PWQud2lkdGgsZSgpfSxkLnNyYz1jLFwicGVuZGluZ1wifSxnLnR5cGVzPWcudHlwZXN8fHt9LGcuaW5pdFR5cGVEZXRlY3RzPWZ1bmN0aW9uKCl7Zy50eXBlc1tcImltYWdlL2pwZWdcIl09ITAsZy50eXBlc1tcImltYWdlL2dpZlwiXT0hMCxnLnR5cGVzW1wiaW1hZ2UvcG5nXCJdPSEwLGcudHlwZXNbXCJpbWFnZS9zdmcreG1sXCJdPWIuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjSW1hZ2VcIixcIjEuMVwiKSxnLnR5cGVzW1wiaW1hZ2Uvd2VicFwiXT1nLmRldGVjdFR5cGVTdXBwb3J0KFwiaW1hZ2Uvd2VicFwiLFwiZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxVa2xHUmg0QUFBQlhSVUpRVmxBNFRCRUFBQUF2QUFBQUFBZlEvLzczdi8rQmlPaC9BQUE9XCIpfSxnLnZlcmlmeVR5cGVTdXBwb3J0PWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKTtpZihudWxsPT09Ynx8XCJcIj09PWIpcmV0dXJuITA7dmFyIGM9Zy50eXBlc1tiXTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYyYmXCJwZW5kaW5nXCIhPT1jPyhnLnR5cGVzW2JdPWcuZGV0ZWN0VHlwZVN1cHBvcnQoYixjKSxcInBlbmRpbmdcIik6XCJmdW5jdGlvblwiPT10eXBlb2YgYz8oYygpLFwicGVuZGluZ1wiKTpjfSxnLnBhcnNlU2l6ZT1mdW5jdGlvbihhKXt2YXIgYj0vKFxcKFteKV0rXFwpKT9cXHMqKC4rKS9nLmV4ZWMoYSk7cmV0dXJue21lZGlhOmImJmJbMV0sbGVuZ3RoOmImJmJbMl19fSxnLmZpbmRXaWR0aEZyb21Tb3VyY2VTaXplPWZ1bmN0aW9uKGMpe2Zvcih2YXIgZCxlPWcudHJpbShjKS5zcGxpdCgvXFxzKixcXHMqLyksZj0wLGg9ZS5sZW5ndGg7aD5mO2YrKyl7dmFyIGk9ZVtmXSxqPWcucGFyc2VTaXplKGkpLGs9ai5sZW5ndGgsbD1qLm1lZGlhO2lmKGsmJighbHx8Zy5tYXRjaGVzTWVkaWEobCkpJiYoZD1nLmdldFdpZHRoRnJvbUxlbmd0aChrKSkpYnJlYWt9cmV0dXJuIGR8fE1hdGgubWF4KGEuaW5uZXJXaWR0aHx8MCxiLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCl9LGcucGFyc2VTcmNzZXQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdO1wiXCIhPT1hOyl7YT1hLnJlcGxhY2UoL15cXHMrL2csXCJcIik7dmFyIGMsZD1hLnNlYXJjaCgvXFxzL2cpLGU9bnVsbDtpZigtMSE9PWQpe2M9YS5zbGljZSgwLGQpO3ZhciBmPWMuc2xpY2UoLTEpO2lmKChcIixcIj09PWZ8fFwiXCI9PT1jKSYmKGM9Yy5yZXBsYWNlKC8sKyQvLFwiXCIpLGU9XCJcIiksYT1hLnNsaWNlKGQrMSksbnVsbD09PWUpe3ZhciBnPWEuaW5kZXhPZihcIixcIik7LTEhPT1nPyhlPWEuc2xpY2UoMCxnKSxhPWEuc2xpY2UoZysxKSk6KGU9YSxhPVwiXCIpfX1lbHNlIGM9YSxhPVwiXCI7KGN8fGUpJiZiLnB1c2goe3VybDpjLGRlc2NyaXB0b3I6ZX0pfXJldHVybiBifSxnLnBhcnNlRGVzY3JpcHRvcj1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9Ynx8XCIxMDB2d1wiLGU9YSYmYS5yZXBsYWNlKC8oXlxccyt8XFxzKyQpL2csXCJcIiksZj1nLmZpbmRXaWR0aEZyb21Tb3VyY2VTaXplKGQpO2lmKGUpZm9yKHZhciBoPWUuc3BsaXQoXCIgXCIpLGk9aC5sZW5ndGgtMTtpPj0wO2ktLSl7dmFyIGo9aFtpXSxrPWomJmouc2xpY2Uoai5sZW5ndGgtMSk7aWYoXCJoXCIhPT1rJiZcIndcIiE9PWt8fGcuc2l6ZXNTdXBwb3J0ZWQpe2lmKFwieFwiPT09ayl7dmFyIGw9aiYmcGFyc2VGbG9hdChqLDEwKTtjPWwmJiFpc05hTihsKT9sOjF9fWVsc2UgYz1wYXJzZUZsb2F0KHBhcnNlSW50KGosMTApL2YpfXJldHVybiBjfHwxfSxnLmdldENhbmRpZGF0ZXNGcm9tU291cmNlU2V0PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWcucGFyc2VTcmNzZXQoYSksZD1bXSxlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKXt2YXIgaD1jW2VdO2QucHVzaCh7dXJsOmgudXJsLHJlc29sdXRpb246Zy5wYXJzZURlc2NyaXB0b3IoaC5kZXNjcmlwdG9yLGIpfSl9cmV0dXJuIGR9LGcuZG9kZ2VTcmNzZXQ9ZnVuY3Rpb24oYSl7YS5zcmNzZXQmJihhW2cubnNdLnNyY3NldD1hLnNyY3NldCxhLnNyY3NldD1cIlwiLGEuc2V0QXR0cmlidXRlKFwiZGF0YS1wZnNyY3NldFwiLGFbZy5uc10uc3Jjc2V0KSl9LGcucHJvY2Vzc1NvdXJjZVNldD1mdW5jdGlvbihhKXt2YXIgYj1hLmdldEF0dHJpYnV0ZShcInNyY3NldFwiKSxjPWEuZ2V0QXR0cmlidXRlKFwic2l6ZXNcIiksZD1bXTtyZXR1cm5cIklNR1wiPT09YS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpJiZhW2cubnNdJiZhW2cubnNdLnNyY3NldCYmKGI9YVtnLm5zXS5zcmNzZXQpLGImJihkPWcuZ2V0Q2FuZGlkYXRlc0Zyb21Tb3VyY2VTZXQoYixjKSksZH0sZy5iYWNrZmFjZVZpc2liaWxpdHlGaXg9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdHlsZXx8e30sYz1cIndlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eVwiaW4gYixkPWIuem9vbTtjJiYoYi56b29tPVwiLjk5OVwiLGM9YS5vZmZzZXRXaWR0aCxiLnpvb209ZCl9LGcuc2V0SW50cmluc2ljU2l6ZT1mdW5jdGlvbigpe3ZhciBjPXt9LGQ9ZnVuY3Rpb24oYSxiLGMpe2ImJmEuc2V0QXR0cmlidXRlKFwid2lkdGhcIixwYXJzZUludChiL2MsMTApKX07cmV0dXJuIGZ1bmN0aW9uKGUsZil7dmFyIGg7ZVtnLm5zXSYmIWEucGZTdG9wSW50cmluc2ljU2l6ZSYmKHZvaWQgMD09PWVbZy5uc10uZGltcyYmKGVbZy5uc10uZGltcz1lLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpfHxlLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSksZVtnLm5zXS5kaW1zfHwoZi51cmwgaW4gYz9kKGUsY1tmLnVybF0sZi5yZXNvbHV0aW9uKTooaD1iLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiksaC5vbmxvYWQ9ZnVuY3Rpb24oKXtpZihjW2YudXJsXT1oLndpZHRoLCFjW2YudXJsXSl0cnl7Yi5ib2R5LmFwcGVuZENoaWxkKGgpLGNbZi51cmxdPWgud2lkdGh8fGgub2Zmc2V0V2lkdGgsYi5ib2R5LnJlbW92ZUNoaWxkKGgpfWNhdGNoKGEpe31lLnNyYz09PWYudXJsJiZkKGUsY1tmLnVybF0sZi5yZXNvbHV0aW9uKSxlPW51bGwsaC5vbmxvYWQ9bnVsbCxoPW51bGx9LGguc3JjPWYudXJsKSkpfX0oKSxnLmFwcGx5QmVzdENhbmRpZGF0ZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZTthLnNvcnQoZy5hc2NlbmRpbmdTb3J0KSxkPWEubGVuZ3RoLGU9YVtkLTFdO2Zvcih2YXIgZj0wO2Q+ZjtmKyspaWYoYz1hW2ZdLGMucmVzb2x1dGlvbj49Zy5nZXREcHIoKSl7ZT1jO2JyZWFrfWUmJihlLnVybD1nLm1ha2VVcmwoZS51cmwpLGIuc3JjIT09ZS51cmwmJihnLnJlc3RyaWN0c01peGVkQ29udGVudCgpJiZcImh0dHA6XCI9PT1lLnVybC5zdWJzdHIoMCxcImh0dHA6XCIubGVuZ3RoKS50b0xvd2VyQ2FzZSgpP3ZvaWQgMCE9PXdpbmRvdy5jb25zb2xlJiZjb25zb2xlLndhcm4oXCJCbG9ja2VkIG1peGVkIGNvbnRlbnQgaW1hZ2UgXCIrZS51cmwpOihiLnNyYz1lLnVybCxnLmN1clNyY1N1cHBvcnRlZHx8KGIuY3VycmVudFNyYz1iLnNyYyksZy5iYWNrZmFjZVZpc2liaWxpdHlGaXgoYikpKSxnLnNldEludHJpbnNpY1NpemUoYixlKSl9LGcuYXNjZW5kaW5nU29ydD1mdW5jdGlvbihhLGIpe3JldHVybiBhLnJlc29sdXRpb24tYi5yZXNvbHV0aW9ufSxnLnJlbW92ZVZpZGVvU2hpbT1mdW5jdGlvbihhKXt2YXIgYj1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidmlkZW9cIik7aWYoYi5sZW5ndGgpe2Zvcih2YXIgYz1iWzBdLGQ9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNvdXJjZVwiKTtkLmxlbmd0aDspYS5pbnNlcnRCZWZvcmUoZFswXSxjKTtjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyl9fSxnLmdldEFsbEVsZW1lbnRzPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGM9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImltZ1wiKSxkPTAsZT1jLmxlbmd0aDtlPmQ7ZCsrKXt2YXIgZj1jW2RdOyhcIlBJQ1RVUkVcIj09PWYucGFyZW50Tm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpfHxudWxsIT09Zi5nZXRBdHRyaWJ1dGUoXCJzcmNzZXRcIil8fGZbZy5uc10mJm51bGwhPT1mW2cubnNdLnNyY3NldCkmJmEucHVzaChmKX1yZXR1cm4gYX0sZy5nZXRNYXRjaD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPWIuY2hpbGROb2RlcyxlPTAsZj1kLmxlbmd0aDtmPmU7ZSsrKXt2YXIgaD1kW2VdO2lmKDE9PT1oLm5vZGVUeXBlKXtpZihoPT09YSlyZXR1cm4gYztpZihcIlNPVVJDRVwiPT09aC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKXtudWxsIT09aC5nZXRBdHRyaWJ1dGUoXCJzcmNcIikmJnZvaWQgMCE9PXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLndhcm4oXCJUaGUgYHNyY2AgYXR0cmlidXRlIGlzIGludmFsaWQgb24gYHBpY3R1cmVgIGBzb3VyY2VgIGVsZW1lbnQ7IGluc3RlYWQsIHVzZSBgc3Jjc2V0YC5cIik7dmFyIGk9aC5nZXRBdHRyaWJ1dGUoXCJtZWRpYVwiKTtpZihoLmdldEF0dHJpYnV0ZShcInNyY3NldFwiKSYmKCFpfHxnLm1hdGNoZXNNZWRpYShpKSkpe3ZhciBqPWcudmVyaWZ5VHlwZVN1cHBvcnQoaCk7aWYoaj09PSEwKXtjPWg7YnJlYWt9aWYoXCJwZW5kaW5nXCI9PT1qKXJldHVybiExfX19fXJldHVybiBjfSxmKCksZS5fPWcsZChlKX0od2luZG93LHdpbmRvdy5kb2N1bWVudCxuZXcgd2luZG93LkltYWdlKTtcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcdDAzLiBXT1dcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLyogQ29weXJpZ2h0IChjKSAyMDE1IE1hdHRoaWV1IEF1c3NhZ3VlbDsgTGljZW5zZWQgTUlUICovKGZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX0sZz1bXS5pbmRleE9mfHxmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMubGVuZ3RoO2M+YjtiKyspaWYoYiBpbiB0aGlzJiZ0aGlzW2JdPT09YSlyZXR1cm4gYjtyZXR1cm4tMX07Yj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9cmV0dXJuIGEucHJvdG90eXBlLmV4dGVuZD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7Zm9yKGMgaW4gYilkPWJbY10sbnVsbD09YVtjXSYmKGFbY109ZCk7cmV0dXJuIGF9LGEucHJvdG90eXBlLmlzTW9iaWxlPWZ1bmN0aW9uKGEpe3JldHVybi9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChhKX0sYS5wcm90b3R5cGUuYWRkRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsIT1hLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKGIsYywhMSk6bnVsbCE9YS5hdHRhY2hFdmVudD9hLmF0dGFjaEV2ZW50KFwib25cIitiLGMpOmFbYl09Y30sYS5wcm90b3R5cGUucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsIT1hLnJlbW92ZUV2ZW50TGlzdGVuZXI/YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSk6bnVsbCE9YS5kZXRhY2hFdmVudD9hLmRldGFjaEV2ZW50KFwib25cIitiLGMpOmRlbGV0ZSBhW2JdfSxhLnByb3RvdHlwZS5pbm5lckhlaWdodD1mdW5jdGlvbigpe3JldHVyblwiaW5uZXJIZWlnaHRcImluIHdpbmRvdz93aW5kb3cuaW5uZXJIZWlnaHQ6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodH0sYX0oKSxjPXRoaXMuV2Vha01hcHx8dGhpcy5Nb3pXZWFrTWFwfHwoYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119cmV0dXJuIGEucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmO2ZvcihmPXRoaXMua2V5cyxiPWQ9MCxlPWYubGVuZ3RoO2U+ZDtiPSsrZClpZihjPWZbYl0sYz09PWEpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSxhLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihnPXRoaXMua2V5cyxjPWU9MCxmPWcubGVuZ3RoO2Y+ZTtjPSsrZSlpZihkPWdbY10sZD09PWEpcmV0dXJuIHZvaWQodGhpcy52YWx1ZXNbY109Yik7cmV0dXJuIHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYil9LGF9KCkpLGE9dGhpcy5NdXRhdGlvbk9ic2VydmVyfHx0aGlzLldlYmtpdE11dGF0aW9uT2JzZXJ2ZXJ8fHRoaXMuTW96TXV0YXRpb25PYnNlcnZlcnx8KGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJm51bGwhPT1jb25zb2xlJiZjb25zb2xlLndhcm4oXCJNdXRhdGlvbk9ic2VydmVyIGlzIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBicm93c2VyLlwiKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgY29uc29sZSYmbnVsbCE9PWNvbnNvbGUmJmNvbnNvbGUud2FybihcIldPVy5qcyBjYW5ub3QgZGV0ZWN0IGRvbSBtdXRhdGlvbnMsIHBsZWFzZSBjYWxsIC5zeW5jKCkgYWZ0ZXIgbG9hZGluZyBuZXcgY29udGVudC5cIil9cmV0dXJuIGEubm90U3VwcG9ydGVkPSEwLGEucHJvdG90eXBlLm9ic2VydmU9ZnVuY3Rpb24oKXt9LGF9KCkpLGQ9dGhpcy5nZXRDb21wdXRlZFN0eWxlfHxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlPWZ1bmN0aW9uKGIpe3ZhciBjO3JldHVyblwiZmxvYXRcIj09PWImJihiPVwic3R5bGVGbG9hdFwiKSxlLnRlc3QoYikmJmIucmVwbGFjZShlLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX0pLChudWxsIT0oYz1hLmN1cnJlbnRTdHlsZSk/Y1tiXTp2b2lkIDApfHxudWxsfSx0aGlzfSxlPS8oXFwtKFthLXpdKXsxfSkvZyx0aGlzLldPVz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoYSl7bnVsbD09YSYmKGE9e30pLHRoaXMuc2Nyb2xsQ2FsbGJhY2s9Zih0aGlzLnNjcm9sbENhbGxiYWNrLHRoaXMpLHRoaXMuc2Nyb2xsSGFuZGxlcj1mKHRoaXMuc2Nyb2xsSGFuZGxlcix0aGlzKSx0aGlzLnN0YXJ0PWYodGhpcy5zdGFydCx0aGlzKSx0aGlzLnNjcm9sbGVkPSEwLHRoaXMuY29uZmlnPXRoaXMudXRpbCgpLmV4dGVuZChhLHRoaXMuZGVmYXVsdHMpLHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlPW5ldyBjfXJldHVybiBlLnByb3RvdHlwZS5kZWZhdWx0cz17Ym94Q2xhc3M6XCJ3b3dcIixhbmltYXRlQ2xhc3M6XCJhbmltYXRlZFwiLG9mZnNldDowLG1vYmlsZTohMCxsaXZlOiEwLGNhbGxiYWNrOm51bGx9LGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gdGhpcy5lbGVtZW50PXdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXCJpbnRlcmFjdGl2ZVwiPT09KGE9ZG9jdW1lbnQucmVhZHlTdGF0ZSl8fFwiY29tcGxldGVcIj09PWE/dGhpcy5zdGFydCgpOnRoaXMudXRpbCgpLmFkZEV2ZW50KGRvY3VtZW50LFwiRE9NQ29udGVudExvYWRlZFwiLHRoaXMuc3RhcnQpLHRoaXMuZmluaXNoZWQ9W119LGUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dmFyIGIsYyxkLGU7aWYodGhpcy5zdG9wcGVkPSExLHRoaXMuYm94ZXM9ZnVuY3Rpb24oKXt2YXIgYSxjLGQsZTtmb3IoZD10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5cIit0aGlzLmNvbmZpZy5ib3hDbGFzcyksZT1bXSxhPTAsYz1kLmxlbmd0aDtjPmE7YSsrKWI9ZFthXSxlLnB1c2goYik7cmV0dXJuIGV9LmNhbGwodGhpcyksdGhpcy5hbGw9ZnVuY3Rpb24oKXt2YXIgYSxjLGQsZTtmb3IoZD10aGlzLmJveGVzLGU9W10sYT0wLGM9ZC5sZW5ndGg7Yz5hO2ErKyliPWRbYV0sZS5wdXNoKGIpO3JldHVybiBlfS5jYWxsKHRoaXMpLHRoaXMuYm94ZXMubGVuZ3RoKWlmKHRoaXMuZGlzYWJsZWQoKSl0aGlzLnJlc2V0U3R5bGUoKTtlbHNlIGZvcihlPXRoaXMuYm94ZXMsYz0wLGQ9ZS5sZW5ndGg7ZD5jO2MrKyliPWVbY10sdGhpcy5hcHBseVN0eWxlKGIsITApO3JldHVybiB0aGlzLmRpc2FibGVkKCl8fCh0aGlzLnV0aWwoKS5hZGRFdmVudCh3aW5kb3csXCJzY3JvbGxcIix0aGlzLnNjcm9sbEhhbmRsZXIpLHRoaXMudXRpbCgpLmFkZEV2ZW50KHdpbmRvdyxcInJlc2l6ZVwiLHRoaXMuc2Nyb2xsSGFuZGxlciksdGhpcy5pbnRlcnZhbD1zZXRJbnRlcnZhbCh0aGlzLnNjcm9sbENhbGxiYWNrLDUwKSksdGhpcy5jb25maWcubGl2ZT9uZXcgYShmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGMsZCxlLGYsZztmb3IoZz1bXSxlPTAsZj1iLmxlbmd0aDtmPmU7ZSsrKWQ9YltlXSxnLnB1c2goZnVuY3Rpb24oKXt2YXIgYSxiLGUsZjtmb3IoZT1kLmFkZGVkTm9kZXN8fFtdLGY9W10sYT0wLGI9ZS5sZW5ndGg7Yj5hO2ErKyljPWVbYV0sZi5wdXNoKHRoaXMuZG9TeW5jKGMpKTtyZXR1cm4gZn0uY2FsbChhKSk7cmV0dXJuIGd9fSh0aGlzKSkub2JzZXJ2ZShkb2N1bWVudC5ib2R5LHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pOnZvaWQgMH0sZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3BwZWQ9ITAsdGhpcy51dGlsKCkucmVtb3ZlRXZlbnQod2luZG93LFwic2Nyb2xsXCIsdGhpcy5zY3JvbGxIYW5kbGVyKSx0aGlzLnV0aWwoKS5yZW1vdmVFdmVudCh3aW5kb3csXCJyZXNpemVcIix0aGlzLnNjcm9sbEhhbmRsZXIpLG51bGwhPXRoaXMuaW50ZXJ2YWw/Y2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTp2b2lkIDB9LGUucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gYS5ub3RTdXBwb3J0ZWQ/dGhpcy5kb1N5bmModGhpcy5lbGVtZW50KTp2b2lkIDB9LGUucHJvdG90eXBlLmRvU3luYz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmO2lmKG51bGw9PWEmJihhPXRoaXMuZWxlbWVudCksMT09PWEubm9kZVR5cGUpe2ZvcihhPWEucGFyZW50Tm9kZXx8YSxlPWEucXVlcnlTZWxlY3RvckFsbChcIi5cIit0aGlzLmNvbmZpZy5ib3hDbGFzcyksZj1bXSxjPTAsZD1lLmxlbmd0aDtkPmM7YysrKWI9ZVtjXSxnLmNhbGwodGhpcy5hbGwsYik8MD8odGhpcy5ib3hlcy5wdXNoKGIpLHRoaXMuYWxsLnB1c2goYiksdGhpcy5zdG9wcGVkfHx0aGlzLmRpc2FibGVkKCk/dGhpcy5yZXNldFN0eWxlKCk6dGhpcy5hcHBseVN0eWxlKGIsITApLGYucHVzaCh0aGlzLnNjcm9sbGVkPSEwKSk6Zi5wdXNoKHZvaWQgMCk7cmV0dXJuIGZ9fSxlLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFwcGx5U3R5bGUoYSksYS5jbGFzc05hbWU9XCJcIithLmNsYXNzTmFtZStcIiBcIit0aGlzLmNvbmZpZy5hbmltYXRlQ2xhc3MsbnVsbCE9dGhpcy5jb25maWcuY2FsbGJhY2s/dGhpcy5jb25maWcuY2FsbGJhY2soYSk6dm9pZCAwfSxlLnByb3RvdHlwZS5hcHBseVN0eWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlO3JldHVybiBkPWEuZ2V0QXR0cmlidXRlKFwiZGF0YS13b3ctZHVyYXRpb25cIiksYz1hLmdldEF0dHJpYnV0ZShcImRhdGEtd293LWRlbGF5XCIpLGU9YS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdvdy1pdGVyYXRpb25cIiksdGhpcy5hbmltYXRlKGZ1bmN0aW9uKGYpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBmLmN1c3RvbVN0eWxlKGEsYixkLGMsZSl9fSh0aGlzKSl9LGUucHJvdG90eXBlLmFuaW1hdGU9ZnVuY3Rpb24oKXtyZXR1cm5cInJlcXVlc3RBbmltYXRpb25GcmFtZVwiaW4gd2luZG93P2Z1bmN0aW9uKGEpe3JldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGEpfTpmdW5jdGlvbihhKXtyZXR1cm4gYSgpfX0oKSxlLnByb3RvdHlwZS5yZXNldFN0eWxlPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZTtmb3IoZD10aGlzLmJveGVzLGU9W10sYj0wLGM9ZC5sZW5ndGg7Yz5iO2IrKylhPWRbYl0sZS5wdXNoKGEuc3R5bGUudmlzaWJpbGl0eT1cInZpc2libGVcIik7cmV0dXJuIGV9LGUucHJvdG90eXBlLmN1c3RvbVN0eWxlPWZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGImJnRoaXMuY2FjaGVBbmltYXRpb25OYW1lKGEpLGEuc3R5bGUudmlzaWJpbGl0eT1iP1wiaGlkZGVuXCI6XCJ2aXNpYmxlXCIsYyYmdGhpcy52ZW5kb3JTZXQoYS5zdHlsZSx7YW5pbWF0aW9uRHVyYXRpb246Y30pLGQmJnRoaXMudmVuZG9yU2V0KGEuc3R5bGUse2FuaW1hdGlvbkRlbGF5OmR9KSxlJiZ0aGlzLnZlbmRvclNldChhLnN0eWxlLHthbmltYXRpb25JdGVyYXRpb25Db3VudDplfSksdGhpcy52ZW5kb3JTZXQoYS5zdHlsZSx7YW5pbWF0aW9uTmFtZTpiP1wibm9uZVwiOnRoaXMuY2FjaGVkQW5pbWF0aW9uTmFtZShhKX0pLGF9LGUucHJvdG90eXBlLnZlbmRvcnM9W1wibW96XCIsXCJ3ZWJraXRcIl0sZS5wcm90b3R5cGUudmVuZG9yU2V0PWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY7Zj1bXTtmb3IoYyBpbiBiKWQ9YltjXSxhW1wiXCIrY109ZCxmLnB1c2goZnVuY3Rpb24oKXt2YXIgYixmLGcsaDtmb3IoZz10aGlzLnZlbmRvcnMsaD1bXSxiPTAsZj1nLmxlbmd0aDtmPmI7YisrKWU9Z1tiXSxoLnB1c2goYVtcIlwiK2UrYy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStjLnN1YnN0cigxKV09ZCk7cmV0dXJuIGh9LmNhbGwodGhpcykpO3JldHVybiBmfSxlLnByb3RvdHlwZS52ZW5kb3JDU1M9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxoLGk7Zm9yKGU9ZChhKSxjPWUuZ2V0UHJvcGVydHlDU1NWYWx1ZShiKSxpPXRoaXMudmVuZG9ycyxnPTAsaD1pLmxlbmd0aDtoPmc7ZysrKWY9aVtnXSxjPWN8fGUuZ2V0UHJvcGVydHlDU1NWYWx1ZShcIi1cIitmK1wiLVwiK2IpO3JldHVybiBjfSxlLnByb3RvdHlwZS5hbmltYXRpb25OYW1lPWZ1bmN0aW9uKGEpe3ZhciBiO3RyeXtiPXRoaXMudmVuZG9yQ1NTKGEsXCJhbmltYXRpb24tbmFtZVwiKS5jc3NUZXh0fWNhdGNoKGMpe2I9ZChhKS5nZXRQcm9wZXJ0eVZhbHVlKFwiYW5pbWF0aW9uLW5hbWVcIil9cmV0dXJuXCJub25lXCI9PT1iP1wiXCI6Yn0sZS5wcm90b3R5cGUuY2FjaGVBbmltYXRpb25OYW1lPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZS5zZXQoYSx0aGlzLmFuaW1hdGlvbk5hbWUoYSkpfSxlLnByb3RvdHlwZS5jYWNoZWRBbmltYXRpb25OYW1lPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZS5nZXQoYSl9LGUucHJvdG90eXBlLnNjcm9sbEhhbmRsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY3JvbGxlZD0hMH0sZS5wcm90b3R5cGUuc2Nyb2xsQ2FsbGJhY2s9ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4hdGhpcy5zY3JvbGxlZHx8KHRoaXMuc2Nyb2xsZWQ9ITEsdGhpcy5ib3hlcz1mdW5jdGlvbigpe3ZhciBiLGMsZCxlO2ZvcihkPXRoaXMuYm94ZXMsZT1bXSxiPTAsYz1kLmxlbmd0aDtjPmI7YisrKWE9ZFtiXSxhJiYodGhpcy5pc1Zpc2libGUoYSk/dGhpcy5zaG93KGEpOmUucHVzaChhKSk7cmV0dXJuIGV9LmNhbGwodGhpcyksdGhpcy5ib3hlcy5sZW5ndGh8fHRoaXMuY29uZmlnLmxpdmUpP3ZvaWQgMDp0aGlzLnN0b3AoKX0sZS5wcm90b3R5cGUub2Zmc2V0VG9wPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYjt2b2lkIDA9PT1hLm9mZnNldFRvcDspYT1hLnBhcmVudE5vZGU7Zm9yKGI9YS5vZmZzZXRUb3A7YT1hLm9mZnNldFBhcmVudDspYis9YS5vZmZzZXRUb3A7cmV0dXJuIGJ9LGUucHJvdG90eXBlLmlzVmlzaWJsZT1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmO3JldHVybiBjPWEuZ2V0QXR0cmlidXRlKFwiZGF0YS13b3ctb2Zmc2V0XCIpfHx0aGlzLmNvbmZpZy5vZmZzZXQsZj13aW5kb3cucGFnZVlPZmZzZXQsZT1mK01hdGgubWluKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQsdGhpcy51dGlsKCkuaW5uZXJIZWlnaHQoKSktYyxkPXRoaXMub2Zmc2V0VG9wKGEpLGI9ZCthLmNsaWVudEhlaWdodCxlPj1kJiZiPj1mfSxlLnByb3RvdHlwZS51dGlsPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXRoaXMuX3V0aWw/dGhpcy5fdXRpbDp0aGlzLl91dGlsPW5ldyBifSxlLnByb3RvdHlwZS5kaXNhYmxlZD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmNvbmZpZy5tb2JpbGUmJnRoaXMudXRpbCgpLmlzTW9iaWxlKG5hdmlnYXRvci51c2VyQWdlbnQpfSxlfSgpfSkuY2FsbCh0aGlzKTtcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcdDA0LiBJU09UT1BFXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qIVxuICogSXNvdG9wZSBQQUNLQUdFRCB2Mi4wLjBcbiAqIEZpbHRlciAmIHNvcnQgbWFnaWNhbCBsYXlvdXRzXG4gKiBodHRwOi8vaXNvdG9wZS5tZXRhZml6enkuY29cbiAqL1xuXG5cbi8qXHQwNS4gSU1BR0VTTE9BREVEXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qIVxuICogaW1hZ2VzTG9hZGVkIFBBQ0tBR0VEIHYzLjEuOFxuICogSmF2YVNjcmlwdCBpcyBhbGwgbGlrZSBcIllvdSBpbWFnZXMgYXJlIGRvbmUgeWV0IG9yIHdoYXQ/XCJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31mdW5jdGlvbiB0KGUsdCl7Zm9yKHZhciBuPWUubGVuZ3RoO24tLTspaWYoZVtuXS5saXN0ZW5lcj09PXQpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tlXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fXZhciBpPWUucHJvdG90eXBlLHI9dGhpcyxvPXIuRXZlbnRFbWl0dGVyO2kuZ2V0TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLl9nZXRFdmVudHMoKTtpZihcIm9iamVjdFwiPT10eXBlb2YgZSl7dD17fTtmb3IobiBpbiBpKWkuaGFzT3duUHJvcGVydHkobikmJmUudGVzdChuKSYmKHRbbl09aVtuXSl9ZWxzZSB0PWlbZV18fChpW2VdPVtdKTtyZXR1cm4gdH0saS5mbGF0dGVuTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LG49W107Zm9yKHQ9MDtlLmxlbmd0aD50O3QrPTEpbi5wdXNoKGVbdF0ubGlzdGVuZXIpO3JldHVybiBufSxpLmdldExpc3RlbmVyc0FzT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5nZXRMaXN0ZW5lcnMoZSk7cmV0dXJuIG4gaW5zdGFuY2VvZiBBcnJheSYmKHQ9e30sdFtlXT1uKSx0fHxufSxpLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGUsbil7dmFyIGkscj10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGUpLG89XCJvYmplY3RcIj09dHlwZW9mIG47Zm9yKGkgaW4gcilyLmhhc093blByb3BlcnR5KGkpJiYtMT09PXQocltpXSxuKSYmcltpXS5wdXNoKG8/bjp7bGlzdGVuZXI6bixvbmNlOiExfSk7cmV0dXJuIHRoaXN9LGkub249bihcImFkZExpc3RlbmVyXCIpLGkuYWRkT25jZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuYWRkTGlzdGVuZXIoZSx7bGlzdGVuZXI6dCxvbmNlOiEwfSl9LGkub25jZT1uKFwiYWRkT25jZUxpc3RlbmVyXCIpLGkuZGVmaW5lRXZlbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0TGlzdGVuZXJzKGUpLHRoaXN9LGkuZGVmaW5lRXZlbnRzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO2UubGVuZ3RoPnQ7dCs9MSl0aGlzLmRlZmluZUV2ZW50KGVbdF0pO3JldHVybiB0aGlzfSxpLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsbil7dmFyIGkscixvPXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoZSk7Zm9yKHIgaW4gbylvLmhhc093blByb3BlcnR5KHIpJiYoaT10KG9bcl0sbiksLTEhPT1pJiZvW3JdLnNwbGljZShpLDEpKTtyZXR1cm4gdGhpc30saS5vZmY9bihcInJlbW92ZUxpc3RlbmVyXCIpLGkuYWRkTGlzdGVuZXJzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyghMSxlLHQpfSxpLnJlbW92ZUxpc3RlbmVycz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITAsZSx0KX0saS5tYW5pcHVsYXRlTGlzdGVuZXJzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89ZT90aGlzLnJlbW92ZUxpc3RlbmVyOnRoaXMuYWRkTGlzdGVuZXIscz1lP3RoaXMucmVtb3ZlTGlzdGVuZXJzOnRoaXMuYWRkTGlzdGVuZXJzO2lmKFwib2JqZWN0XCIhPXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgUmVnRXhwKWZvcihpPW4ubGVuZ3RoO2ktLTspby5jYWxsKHRoaXMsdCxuW2ldKTtlbHNlIGZvcihpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKHI9dFtpXSkmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiByP28uY2FsbCh0aGlzLGkscik6cy5jYWxsKHRoaXMsaSxyKSk7cmV0dXJuIHRoaXN9LGkucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj10eXBlb2YgZSxpPXRoaXMuX2dldEV2ZW50cygpO2lmKFwic3RyaW5nXCI9PT1uKWRlbGV0ZSBpW2VdO2Vsc2UgaWYoXCJvYmplY3RcIj09PW4pZm9yKHQgaW4gaSlpLmhhc093blByb3BlcnR5KHQpJiZlLnRlc3QodCkmJmRlbGV0ZSBpW3RdO2Vsc2UgZGVsZXRlIHRoaXMuX2V2ZW50cztyZXR1cm4gdGhpc30saS5yZW1vdmVBbGxMaXN0ZW5lcnM9bihcInJlbW92ZUV2ZW50XCIpLGkuZW1pdEV2ZW50PWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8scz10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGUpO2ZvcihyIGluIHMpaWYocy5oYXNPd25Qcm9wZXJ0eShyKSlmb3IoaT1zW3JdLmxlbmd0aDtpLS07KW49c1tyXVtpXSxuLm9uY2U9PT0hMCYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLG4ubGlzdGVuZXIpLG89bi5saXN0ZW5lci5hcHBseSh0aGlzLHR8fFtdKSxvPT09dGhpcy5fZ2V0T25jZVJldHVyblZhbHVlKCkmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxuLmxpc3RlbmVyKTtyZXR1cm4gdGhpc30saS50cmlnZ2VyPW4oXCJlbWl0RXZlbnRcIiksaS5lbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gdGhpcy5lbWl0RXZlbnQoZSx0KX0saS5zZXRPbmNlUmV0dXJuVmFsdWU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29uY2VSZXR1cm5WYWx1ZT1lLHRoaXN9LGkuX2dldE9uY2VSZXR1cm5WYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc093blByb3BlcnR5KFwiX29uY2VSZXR1cm5WYWx1ZVwiKT90aGlzLl9vbmNlUmV0dXJuVmFsdWU6ITB9LGkuX2dldEV2ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pfSxlLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gci5FdmVudEVtaXR0ZXI9byxlfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlclwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGV9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lOnRoaXMuRXZlbnRFbWl0dGVyPWV9KS5jYWxsKHRoaXMpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIG49ZS5ldmVudDtyZXR1cm4gbi50YXJnZXQ9bi50YXJnZXR8fG4uc3JjRWxlbWVudHx8dCxufXZhciBuPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxpPWZ1bmN0aW9uKCl7fTtuLmFkZEV2ZW50TGlzdGVuZXI/aT1mdW5jdGlvbihlLHQsbil7ZS5hZGRFdmVudExpc3RlbmVyKHQsbiwhMSl9Om4uYXR0YWNoRXZlbnQmJihpPWZ1bmN0aW9uKGUsbixpKXtlW24raV09aS5oYW5kbGVFdmVudD9mdW5jdGlvbigpe3ZhciBuPXQoZSk7aS5oYW5kbGVFdmVudC5jYWxsKGksbil9OmZ1bmN0aW9uKCl7dmFyIG49dChlKTtpLmNhbGwoZSxuKX0sZS5hdHRhY2hFdmVudChcIm9uXCIrbixlW24raV0pfSk7dmFyIHI9ZnVuY3Rpb24oKXt9O24ucmVtb3ZlRXZlbnRMaXN0ZW5lcj9yPWZ1bmN0aW9uKGUsdCxuKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuLCExKX06bi5kZXRhY2hFdmVudCYmKHI9ZnVuY3Rpb24oZSx0LG4pe2UuZGV0YWNoRXZlbnQoXCJvblwiK3QsZVt0K25dKTt0cnl7ZGVsZXRlIGVbdCtuXX1jYXRjaChpKXtlW3Qrbl09dm9pZCAwfX0pO3ZhciBvPXtiaW5kOmksdW5iaW5kOnJ9O1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJldmVudGllL2V2ZW50aWVcIixvKTplLmV2ZW50aWU9b30odGhpcyksZnVuY3Rpb24oZSx0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXJcIixcImV2ZW50aWUvZXZlbnRpZVwiXSxmdW5jdGlvbihuLGkpe3JldHVybiB0KGUsbixpKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPXQoZSxyZXF1aXJlKFwid29sZnk4Ny1ldmVudGVtaXR0ZXJcIikscmVxdWlyZShcImV2ZW50aWVcIikpOmUuaW1hZ2VzTG9hZGVkPXQoZSxlLkV2ZW50RW1pdHRlcixlLmV2ZW50aWUpfSh3aW5kb3csZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoZSx0KXtmb3IodmFyIG4gaW4gdCllW25dPXRbbl07cmV0dXJuIGV9ZnVuY3Rpb24gcihlKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1kLmNhbGwoZSl9ZnVuY3Rpb24gbyhlKXt2YXIgdD1bXTtpZihyKGUpKXQ9ZTtlbHNlIGlmKFwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aClmb3IodmFyIG49MCxpPWUubGVuZ3RoO2k+bjtuKyspdC5wdXNoKGVbbl0pO2Vsc2UgdC5wdXNoKGUpO3JldHVybiB0fWZ1bmN0aW9uIHMoZSx0LG4pe2lmKCEodGhpcyBpbnN0YW5jZW9mIHMpKXJldHVybiBuZXcgcyhlLHQpO1wic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGUpKSx0aGlzLmVsZW1lbnRzPW8oZSksdGhpcy5vcHRpb25zPWkoe30sdGhpcy5vcHRpb25zKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P249dDppKHRoaXMub3B0aW9ucyx0KSxuJiZ0aGlzLm9uKFwiYWx3YXlzXCIsbiksdGhpcy5nZXRJbWFnZXMoKSxhJiYodGhpcy5qcURlZmVycmVkPW5ldyBhLkRlZmVycmVkKTt2YXIgcj10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmNoZWNrKCl9KX1mdW5jdGlvbiBmKGUpe3RoaXMuaW1nPWV9ZnVuY3Rpb24gYyhlKXt0aGlzLnNyYz1lLHZbZV09dGhpc312YXIgYT1lLmpRdWVyeSx1PWUuY29uc29sZSxoPXUhPT12b2lkIDAsZD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO3MucHJvdG90eXBlPW5ldyB0LHMucHJvdG90eXBlLm9wdGlvbnM9e30scy5wcm90b3R5cGUuZ2V0SW1hZ2VzPWZ1bmN0aW9uKCl7dGhpcy5pbWFnZXM9W107Zm9yKHZhciBlPTAsdD10aGlzLmVsZW1lbnRzLmxlbmd0aDt0PmU7ZSsrKXt2YXIgbj10aGlzLmVsZW1lbnRzW2VdO1wiSU1HXCI9PT1uLm5vZGVOYW1lJiZ0aGlzLmFkZEltYWdlKG4pO3ZhciBpPW4ubm9kZVR5cGU7aWYoaSYmKDE9PT1pfHw5PT09aXx8MTE9PT1pKSlmb3IodmFyIHI9bi5xdWVyeVNlbGVjdG9yQWxsKFwiaW1nXCIpLG89MCxzPXIubGVuZ3RoO3M+bztvKyspe3ZhciBmPXJbb107dGhpcy5hZGRJbWFnZShmKX19fSxzLnByb3RvdHlwZS5hZGRJbWFnZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgZihlKTt0aGlzLmltYWdlcy5wdXNoKHQpfSxzLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXtyZXR1cm4gdC5vcHRpb25zLmRlYnVnJiZoJiZ1LmxvZyhcImNvbmZpcm1cIixlLHIpLHQucHJvZ3Jlc3MoZSksbisrLG49PT1pJiZ0LmNvbXBsZXRlKCksITB9dmFyIHQ9dGhpcyxuPTAsaT10aGlzLmltYWdlcy5sZW5ndGg7aWYodGhpcy5oYXNBbnlCcm9rZW49ITEsIWkpcmV0dXJuIHRoaXMuY29tcGxldGUoKSx2b2lkIDA7Zm9yKHZhciByPTA7aT5yO3IrKyl7dmFyIG89dGhpcy5pbWFnZXNbcl07by5vbihcImNvbmZpcm1cIixlKSxvLmNoZWNrKCl9fSxzLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbihlKXt0aGlzLmhhc0FueUJyb2tlbj10aGlzLmhhc0FueUJyb2tlbnx8IWUuaXNMb2FkZWQ7dmFyIHQ9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5lbWl0KFwicHJvZ3Jlc3NcIix0LGUpLHQuanFEZWZlcnJlZCYmdC5qcURlZmVycmVkLm5vdGlmeSYmdC5qcURlZmVycmVkLm5vdGlmeSh0LGUpfSl9LHMucHJvdG90eXBlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5oYXNBbnlCcm9rZW4/XCJmYWlsXCI6XCJkb25lXCI7dGhpcy5pc0NvbXBsZXRlPSEwO3ZhciB0PXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKHQuZW1pdChlLHQpLHQuZW1pdChcImFsd2F5c1wiLHQpLHQuanFEZWZlcnJlZCl7dmFyIG49dC5oYXNBbnlCcm9rZW4/XCJyZWplY3RcIjpcInJlc29sdmVcIjt0LmpxRGVmZXJyZWRbbl0odCl9fSl9LGEmJihhLmZuLmltYWdlc0xvYWRlZD1mdW5jdGlvbihlLHQpe3ZhciBuPW5ldyBzKHRoaXMsZSx0KTtyZXR1cm4gbi5qcURlZmVycmVkLnByb21pc2UoYSh0aGlzKSl9KSxmLnByb3RvdHlwZT1uZXcgdCxmLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe3ZhciBlPXZbdGhpcy5pbWcuc3JjXXx8bmV3IGModGhpcy5pbWcuc3JjKTtpZihlLmlzQ29uZmlybWVkKXJldHVybiB0aGlzLmNvbmZpcm0oZS5pc0xvYWRlZCxcImNhY2hlZCB3YXMgY29uZmlybWVkXCIpLHZvaWQgMDtpZih0aGlzLmltZy5jb21wbGV0ZSYmdm9pZCAwIT09dGhpcy5pbWcubmF0dXJhbFdpZHRoKXJldHVybiB0aGlzLmNvbmZpcm0oMCE9PXRoaXMuaW1nLm5hdHVyYWxXaWR0aCxcIm5hdHVyYWxXaWR0aFwiKSx2b2lkIDA7dmFyIHQ9dGhpcztlLm9uKFwiY29uZmlybVwiLGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuY29uZmlybShlLmlzTG9hZGVkLG4pLCEwfSksZS5jaGVjaygpfSxmLnByb3RvdHlwZS5jb25maXJtPWZ1bmN0aW9uKGUsdCl7dGhpcy5pc0xvYWRlZD1lLHRoaXMuZW1pdChcImNvbmZpcm1cIix0aGlzLHQpfTt2YXIgdj17fTtyZXR1cm4gYy5wcm90b3R5cGU9bmV3IHQsYy5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0NoZWNrZWQpe3ZhciBlPW5ldyBJbWFnZTtuLmJpbmQoZSxcImxvYWRcIix0aGlzKSxuLmJpbmQoZSxcImVycm9yXCIsdGhpcyksZS5zcmM9dGhpcy5zcmMsdGhpcy5pc0NoZWNrZWQ9ITB9fSxjLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbihlKXt2YXIgdD1cIm9uXCIrZS50eXBlO3RoaXNbdF0mJnRoaXNbdF0oZSl9LGMucHJvdG90eXBlLm9ubG9hZD1mdW5jdGlvbihlKXt0aGlzLmNvbmZpcm0oITAsXCJvbmxvYWRcIiksdGhpcy51bmJpbmRQcm94eUV2ZW50cyhlKX0sYy5wcm90b3R5cGUub25lcnJvcj1mdW5jdGlvbihlKXt0aGlzLmNvbmZpcm0oITEsXCJvbmVycm9yXCIpLHRoaXMudW5iaW5kUHJveHlFdmVudHMoZSl9LGMucHJvdG90eXBlLmNvbmZpcm09ZnVuY3Rpb24oZSx0KXt0aGlzLmlzQ29uZmlybWVkPSEwLHRoaXMuaXNMb2FkZWQ9ZSx0aGlzLmVtaXQoXCJjb25maXJtXCIsdGhpcyx0KX0sYy5wcm90b3R5cGUudW5iaW5kUHJveHlFdmVudHM9ZnVuY3Rpb24oZSl7bi51bmJpbmQoZS50YXJnZXQsXCJsb2FkXCIsdGhpcyksbi51bmJpbmQoZS50YXJnZXQsXCJlcnJvclwiLHRoaXMpfSxzfSk7XG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qXHQwNi4gQkFDS0dST1VORCBWSURFTyBQQVJBTExBWFxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4hZnVuY3Rpb24oaSx0LG8scyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSh0LG8pe2Z1bmN0aW9uIHMoKXtlLm9wdGlvbnMub3JpZ2luYWxWaWRlb1c9ZS5vcHRpb25zLiR2aWRlb1swXS52aWRlb1dpZHRoLGUub3B0aW9ucy5vcmlnaW5hbFZpZGVvSD1lLm9wdGlvbnMuJHZpZGVvWzBdLnZpZGVvSGVpZ2h0LGUuaW5pdGlhbGlzZWR8fGUuaW5pdCgpfXZhciBlPXRoaXM7dGhpcy5lbGVtZW50PXQsdGhpcy5vcHRpb25zPWkuZXh0ZW5kKHt9LHIsbyksdGhpcy5fZGVmYXVsdHM9cix0aGlzLl9uYW1lPW4sdGhpcy5vcHRpb25zLiR2aWRlbz1pKHQpLHRoaXMuZGV0ZWN0QnJvd3NlcigpLHRoaXMuc2hpbVJlcXVlc3RBbmltYXRpb25GcmFtZSgpLHRoaXMub3B0aW9ucy5oYXMzZD10aGlzLmRldGVjdDNkKCksdGhpcy5vcHRpb25zLiR2aWRlb1dyYXAuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCIsb3ZlcmZsb3c6XCJoaWRkZW5cIixcInotaW5kZXhcIjpcIjEwXCJ9KSx0aGlzLm9wdGlvbnMuJHZpZGVvLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLFwiei1pbmRleFwiOlwiMVwifSksdGhpcy5vcHRpb25zLiR2aWRlby5vbihcImNhbnBsYXkgY2FucGxheXRocm91Z2hcIixzKSx0aGlzLm9wdGlvbnMuJHZpZGVvWzBdLnJlYWR5U3RhdGU+MyYmcygpfXZhciBuPVwiYmFja2dyb3VuZFZpZGVvXCIscj17JHZpZGVvV3JhcDppKFwiI3ZpZGVvLXdyYXBcIiksJG91dGVyV3JhcDppKHQpLCR3aW5kb3c6aSh0KSxtaW5pbXVtVmlkZW9XaWR0aDo0MDAscHJldmVudENvbnRleHRNZW51OiExLHBhcmFsbGF4OiEwLHBhcmFsbGF4T3B0aW9uczp7ZWZmZWN0OjEuNX0scGF1c2VWaWRlb09uVmlld0xvc3M6ITF9O2UucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKCl7dmFyIGk9dGhpczt0aGlzLmluaXRpYWxpc2VkPSEwLHRoaXMubGFzdFBvc2l0aW9uPS0xLHRoaXMudGlja2luZz0hMSx0aGlzLm9wdGlvbnMuJHdpbmRvdy5yZXNpemUoZnVuY3Rpb24oKXtpLnBvc2l0aW9uT2JqZWN0KCl9KSx0aGlzLm9wdGlvbnMucGFyYWxsYXgmJnRoaXMub3B0aW9ucy4kd2luZG93Lm9uKFwic2Nyb2xsXCIsZnVuY3Rpb24oKXtpLnVwZGF0ZSgpfSksdGhpcy5vcHRpb25zLnBhdXNlVmlkZW9PblZpZXdMb3NzJiZ0aGlzLnBsYXlQYXVzZVZpZGVvKCksdGhpcy5vcHRpb25zLnByZXZlbnRDb250ZXh0TWVudSYmdGhpcy5vcHRpb25zLiR2aWRlby5vbihcImNvbnRleHRtZW51XCIsZnVuY3Rpb24oKXtyZXR1cm4hMX0pLHRoaXMub3B0aW9ucy4kd2luZG93LnRyaWdnZXIoXCJyZXNpemVcIil9LHJlcXVlc3RUaWNrOmZ1bmN0aW9uKCl7dmFyIGk9dGhpczt0aGlzLnRpY2tpbmd8fCh0LnJlcXVlc3RBbmltYXRpb25GcmFtZShpLnBvc2l0aW9uT2JqZWN0LmJpbmQoaSkpLHRoaXMudGlja2luZz0hMCl9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMubGFzdFBvc2l0aW9uPXQucGFnZVlPZmZzZXQsdGhpcy5yZXF1ZXN0VGljaygpfSxkZXRlY3QzZDpmdW5jdGlvbigpe3ZhciBpLGUsbj1vLmNyZWF0ZUVsZW1lbnQoXCJwXCIpLHI9e1dlYmtpdFRyYW5zZm9ybTpcIi13ZWJraXQtdHJhbnNmb3JtXCIsT1RyYW5zZm9ybTpcIi1vLXRyYW5zZm9ybVwiLE1TVHJhbnNmb3JtOlwiLW1zLXRyYW5zZm9ybVwiLE1velRyYW5zZm9ybTpcIi1tb3otdHJhbnNmb3JtXCIsdHJhbnNmb3JtOlwidHJhbnNmb3JtXCJ9O28uYm9keS5pbnNlcnRCZWZvcmUobixvLmJvZHkubGFzdENoaWxkKTtmb3IoaSBpbiByKW4uc3R5bGVbaV0hPT1zJiYobi5zdHlsZVtpXT1cIm1hdHJpeDNkKDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEpXCIsZT10LmdldENvbXB1dGVkU3R5bGUobikuZ2V0UHJvcGVydHlWYWx1ZShyW2ldKSk7cmV0dXJuIG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSxlIT09cz9cIm5vbmVcIiE9PWU6ITF9LGRldGVjdEJyb3dzZXI6ZnVuY3Rpb24oKXt2YXIgaT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7aS5pbmRleE9mKFwiY2hyb21lXCIpPi0xfHxpLmluZGV4T2YoXCJzYWZhcmlcIik+LTE/KHRoaXMub3B0aW9ucy5icm93c2VyPVwid2Via2l0XCIsdGhpcy5vcHRpb25zLmJyb3dzZXJQcmV4aXg9XCItd2Via2l0LVwiKTppLmluZGV4T2YoXCJmaXJlZm94XCIpPi0xPyh0aGlzLm9wdGlvbnMuYnJvd3Nlcj1cImZpcmVmb3hcIix0aGlzLm9wdGlvbnMuYnJvd3NlclByZXhpeD1cIi1tb3otXCIpOi0xIT09aS5pbmRleE9mKFwiTVNJRVwiKXx8aS5pbmRleE9mKFwiVHJpZGVudC9cIik+MD8odGhpcy5vcHRpb25zLmJyb3dzZXI9XCJpZVwiLHRoaXMub3B0aW9ucy5icm93c2VyUHJleGl4PVwiLW1zLVwiKTppLmluZGV4T2YoXCJPcGVyYVwiKT4tMSYmKHRoaXMub3B0aW9ucy5icm93c2VyPVwib3BlcmFcIix0aGlzLm9wdGlvbnMuYnJvd3NlclByZXhpeD1cIi1vLVwiKX0sc2NhbGVPYmplY3Q6ZnVuY3Rpb24oKXt2YXIgaSx0LG87cmV0dXJuIHRoaXMub3B0aW9ucy4kdmlkZW9XcmFwLndpZHRoKHRoaXMub3B0aW9ucy4kb3V0ZXJXcmFwLndpZHRoKCkpLHRoaXMub3B0aW9ucy4kdmlkZW9XcmFwLmhlaWdodCh0aGlzLm9wdGlvbnMuJG91dGVyV3JhcC5oZWlnaHQoKSksaT10aGlzLm9wdGlvbnMuJHdpbmRvdy53aWR0aCgpL3RoaXMub3B0aW9ucy5vcmlnaW5hbFZpZGVvVyx0PXRoaXMub3B0aW9ucy4kd2luZG93LmhlaWdodCgpL3RoaXMub3B0aW9ucy5vcmlnaW5hbFZpZGVvSCxvPWk+dD9pOnQsbyp0aGlzLm9wdGlvbnMub3JpZ2luYWxWaWRlb1c8dGhpcy5vcHRpb25zLm1pbmltdW1WaWRlb1dpZHRoJiYobz10aGlzLm9wdGlvbnMubWluaW11bVZpZGVvV2lkdGgvdGhpcy5vcHRpb25zLm9yaWdpbmFsVmlkZW9XKSx0aGlzLm9wdGlvbnMuJHZpZGVvLndpZHRoKG8qdGhpcy5vcHRpb25zLm9yaWdpbmFsVmlkZW9XKSx0aGlzLm9wdGlvbnMuJHZpZGVvLmhlaWdodChvKnRoaXMub3B0aW9ucy5vcmlnaW5hbFZpZGVvSCkse3hQb3M6LShwYXJzZUludCh0aGlzLm9wdGlvbnMuJHZpZGVvLndpZHRoKCktdGhpcy5vcHRpb25zLiR3aW5kb3cud2lkdGgoKSkvMikseVBvczpwYXJzZUludCh0aGlzLm9wdGlvbnMuJHZpZGVvLmhlaWdodCgpLXRoaXMub3B0aW9ucy4kd2luZG93LmhlaWdodCgpKS8yfX0scG9zaXRpb25PYmplY3Q6ZnVuY3Rpb24oKXt2YXIgaT10aGlzLG89dC5wYWdlWU9mZnNldCxzPXRoaXMuc2NhbGVPYmplY3QodGhpcy5vcHRpb25zLiR2aWRlbyxpLm9wdGlvbnMuJHZpZGVvV3JhcCksZT1zLnhQb3Msbj1zLnlQb3M7bj10aGlzLm9wdGlvbnMucGFyYWxsYXg/bz49MD90aGlzLmNhbGN1bGF0ZVlQb3MobixvKTp0aGlzLmNhbGN1bGF0ZVlQb3MobiwwKTotbixpLm9wdGlvbnMuaGFzM2Q/KHRoaXMub3B0aW9ucy4kdmlkZW8uY3NzKGkub3B0aW9ucy5icm93c2VyUHJleGl4K1widHJhbnNmb3JtM2RcIixcInRyYW5zbGF0ZTNkKC1cIitlK1wicHgsIFwiK24rXCJweCwgMClcIiksdGhpcy5vcHRpb25zLiR2aWRlby5jc3MoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZTNkKFwiK2UrXCJweCwgXCIrbitcInB4LCAwKVwiKSk6KHRoaXMub3B0aW9ucy4kdmlkZW8uY3NzKGkub3B0aW9ucy5icm93c2VyUHJleGl4K1widHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoLVwiK2UrXCJweCwgXCIrbitcInB4KVwiKSx0aGlzLm9wdGlvbnMuJHZpZGVvLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKFwiK2UrXCJweCwgXCIrbitcInB4KVwiKSksdGhpcy50aWNraW5nPSExfSxjYWxjdWxhdGVZUG9zOmZ1bmN0aW9uKGksdCl7dmFyIG8scztyZXR1cm4gbz1wYXJzZUludCh0aGlzLm9wdGlvbnMuJHZpZGVvV3JhcC5vZmZzZXQoKS50b3ApLHM9by10LGk9LShzL3RoaXMub3B0aW9ucy5wYXJhbGxheE9wdGlvbnMuZWZmZWN0K2kpfSxkaXNhYmxlUGFyYWxsYXg6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuJHdpbmRvdy51bmJpbmQoXCIuYmFja2dyb3VuZFZpZGVvUGFyYWxsYXhcIil9LHBsYXlQYXVzZVZpZGVvOmZ1bmN0aW9uKCl7dmFyIGk9dGhpczt0aGlzLm9wdGlvbnMuJHdpbmRvdy5vbihcInNjcm9sbC5iYWNrZ3JvdW5kVmlkZW9QbGF5UGF1c2VcIixmdW5jdGlvbigpe2kub3B0aW9ucy4kd2luZG93LnNjcm9sbFRvcCgpPGkub3B0aW9ucy4kdmlkZW9XcmFwLmhlaWdodCgpP2kub3B0aW9ucy4kdmlkZW8uZ2V0KDApLnBsYXkoKTppLm9wdGlvbnMuJHZpZGVvLmdldCgwKS5wYXVzZSgpfSl9LHNoaW1SZXF1ZXN0QW5pbWF0aW9uRnJhbWU6ZnVuY3Rpb24oKXtmb3IodmFyIGk9MCxvPVtcIm1zXCIsXCJtb3pcIixcIndlYmtpdFwiLFwib1wiXSxzPTA7czxvLmxlbmd0aCYmIXQucmVxdWVzdEFuaW1hdGlvbkZyYW1lOysrcyl0LnJlcXVlc3RBbmltYXRpb25GcmFtZT10W29bc10rXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl0sdC5jYW5jZWxBbmltYXRpb25GcmFtZT10W29bc10rXCJDYW5jZWxBbmltYXRpb25GcmFtZVwiXXx8dFtvW3NdK1wiQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwodC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24obyl7dmFyIHM9KG5ldyBEYXRlKS5nZXRUaW1lKCksZT1NYXRoLm1heCgwLDE2LShzLWkpKSxuPXQuc2V0VGltZW91dChmdW5jdGlvbigpe28ocytlKX0sZSk7cmV0dXJuIGk9cytlLG59KSx0LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwodC5jYW5jZWxBbmltYXRpb25GcmFtZT1mdW5jdGlvbihpKXtjbGVhclRpbWVvdXQoaSl9KX19LGkuZm5bbl09ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2kuZGF0YSh0aGlzLFwicGx1Z2luX1wiK24pfHxpLmRhdGEodGhpcyxcInBsdWdpbl9cIituLG5ldyBlKHRoaXMsdCkpfSl9fShqUXVlcnksd2luZG93LGRvY3VtZW50KTtcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcdDA3LiBMSUdIVEdBTExFUllcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLyohIGxpZ2h0Z2FsbGVyeSAtIHYxLjIuOCAtIDIwMTUtMTItMTNcbiogaHR0cDovL3NhY2hpbmNob29sdXIuZ2l0aHViLmlvL2xpZ2h0R2FsbGVyeS9cbiogQ29weXJpZ2h0IChjKSAyMDE1IFNhY2hpbiBOOyBMaWNlbnNlZCBBcGFjaGUgMi4wICovXG4hZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShiLGQpe2lmKHRoaXMuZWw9Yix0aGlzLiRlbD1hKGIpLHRoaXMucz1hLmV4dGVuZCh7fSxmLGQpLHRoaXMucy5keW5hbWljJiZcInVuZGVmaW5lZFwiIT09dGhpcy5zLmR5bmFtaWNFbCYmdGhpcy5zLmR5bmFtaWNFbC5jb25zdHJ1Y3Rvcj09PUFycmF5JiYhdGhpcy5zLmR5bmFtaWNFbC5sZW5ndGgpdGhyb3dcIldoZW4gdXNpbmcgZHluYW1pYyBtb2RlLCB5b3UgbXVzdCBhbHNvIGRlZmluZSBkeW5hbWljRWwgYXMgYW4gQXJyYXkuXCI7cmV0dXJuIHRoaXMubW9kdWxlcz17fSx0aGlzLmxHYWxsZXJ5T249ITEsdGhpcy5sZ0J1c3k9ITEsdGhpcy5oaWRlQmFydGltZW91dD0hMSx0aGlzLmlzVG91Y2g9XCJvbnRvdWNoc3RhcnRcImluIGMuZG9jdW1lbnRFbGVtZW50LHRoaXMucy5zbGlkZUVuZEFuaW1hdG9pbiYmKHRoaXMucy5oaWRlQ29udHJvbE9uRW5kPSExKSx0aGlzLnMuZHluYW1pYz90aGlzLiRpdGVtcz10aGlzLnMuZHluYW1pY0VsOlwidGhpc1wiPT09dGhpcy5zLnNlbGVjdG9yP3RoaXMuJGl0ZW1zPXRoaXMuJGVsOlwiXCIhPT10aGlzLnMuc2VsZWN0b3I/dGhpcy5zLnNlbGVjdFdpdGhpbj90aGlzLiRpdGVtcz1hKHRoaXMucy5zZWxlY3RXaXRoaW4pLmZpbmQodGhpcy5zLnNlbGVjdG9yKTp0aGlzLiRpdGVtcz10aGlzLiRlbC5maW5kKGEodGhpcy5zLnNlbGVjdG9yKSk6dGhpcy4kaXRlbXM9dGhpcy4kZWwuY2hpbGRyZW4oKSx0aGlzLiRzbGlkZT1cIlwiLHRoaXMuJG91dGVyPVwiXCIsdGhpcy5pbml0KCksdGhpc312YXIgZj17bW9kZTpcImxnLXNsaWRlXCIsY3NzRWFzaW5nOlwiY3ViaWMtYmV6aWVyKDAuMjUsIDAsIDAuMjUsIDEpXCIsZWFzaW5nOlwibGluZWFyXCIsc3BlZWQ6NjAwLGhlaWdodDpcIjEwMCVcIix3aWR0aDpcIjEwMCVcIixhZGRDbGFzczpcIlwiLHN0YXJ0Q2xhc3M6XCJsZy1zdGFydC16b29tXCIsYmFja2Ryb3BEdXJhdGlvbjoxNTAsaGlkZUJhcnNEZWxheTo2ZTMsdXNlTGVmdDohMSxjbG9zYWJsZTohMCxsb29wOiEwLGVzY0tleTohMCxrZXlQcmVzczohMCxjb250cm9sczohMCxzbGlkZUVuZEFuaW1hdG9pbjohMCxoaWRlQ29udHJvbE9uRW5kOiExLG1vdXNld2hlZWw6ITAsYXBwZW5kU3ViSHRtbFRvOlwiLmxnLXN1Yi1odG1sXCIscHJlbG9hZDoxLHNob3dBZnRlckxvYWQ6ITAsc2VsZWN0b3I6XCJcIixzZWxlY3RXaXRoaW46XCJcIixuZXh0SHRtbDpcIlwiLHByZXZIdG1sOlwiXCIsaW5kZXg6ITEsaWZyYW1lTWF4V2lkdGg6XCIxMDAlXCIsZG93bmxvYWQ6ITAsY291bnRlcjohMCxhcHBlbmRDb3VudGVyVG86XCIubGctdG9vbGJhclwiLHN3aXBlVGhyZXNob2xkOjUwLGVuYWJsZVN3aXBlOiEwLGVuYWJsZURyYWc6ITAsZHluYW1pYzohMSxkeW5hbWljRWw6W10sZ2FsbGVyeUlkOjF9O2UucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYz10aGlzO2Mucy5wcmVsb2FkPmMuJGl0ZW1zLmxlbmd0aCYmKGMucy5wcmVsb2FkPWMuJGl0ZW1zLmxlbmd0aCk7dmFyIGQ9Yi5sb2NhdGlvbi5oYXNoO2QuaW5kZXhPZihcImxnPVwiK3RoaXMucy5nYWxsZXJ5SWQpPjAmJihjLmluZGV4PXBhcnNlSW50KGQuc3BsaXQoXCImc2xpZGU9XCIpWzFdLDEwKSxhKFwiYm9keVwiKS5hZGRDbGFzcyhcImxnLWZyb20taGFzaFwiKSxhKFwiYm9keVwiKS5oYXNDbGFzcyhcImxnLW9uXCIpfHxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5idWlsZChjLmluZGV4KSxhKFwiYm9keVwiKS5hZGRDbGFzcyhcImxnLW9uXCIpfSkpLGMucy5keW5hbWljPyhjLiRlbC50cmlnZ2VyKFwib25CZWZvcmVPcGVuLmxnXCIpLGMuaW5kZXg9Yy5zLmluZGV4fHwwLGEoXCJib2R5XCIpLmhhc0NsYXNzKFwibGctb25cIil8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmJ1aWxkKGMuaW5kZXgpLGEoXCJib2R5XCIpLmFkZENsYXNzKFwibGctb25cIil9KSk6Yy4kaXRlbXMub24oXCJjbGljay5sZ2N1c3RvbVwiLGZ1bmN0aW9uKGIpe3RyeXtiLnByZXZlbnREZWZhdWx0KCksYi5wcmV2ZW50RGVmYXVsdCgpfWNhdGNoKGQpe2IucmV0dXJuVmFsdWU9ITF9Yy4kZWwudHJpZ2dlcihcIm9uQmVmb3JlT3Blbi5sZ1wiKSxjLmluZGV4PWMucy5pbmRleHx8Yy4kaXRlbXMuaW5kZXgodGhpcyksYShcImJvZHlcIikuaGFzQ2xhc3MoXCJsZy1vblwiKXx8KGMuYnVpbGQoYy5pbmRleCksYShcImJvZHlcIikuYWRkQ2xhc3MoXCJsZy1vblwiKSl9KX0sZS5wcm90b3R5cGUuYnVpbGQ9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcztjLnN0cnVjdHVyZSgpLGEuZWFjaChhLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzLGZ1bmN0aW9uKGIpe2MubW9kdWxlc1tiXT1uZXcgYS5mbi5saWdodEdhbGxlcnkubW9kdWxlc1tiXShjLmVsKX0pLGMuc2xpZGUoYiwhMSwhMSksYy5zLmtleVByZXNzJiZjLmtleVByZXNzKCksYy4kaXRlbXMubGVuZ3RoPjEmJihjLmFycm93KCksc2V0VGltZW91dChmdW5jdGlvbigpe2MuZW5hYmxlRHJhZygpLGMuZW5hYmxlU3dpcGUoKX0sNTApLGMucy5tb3VzZXdoZWVsJiZjLm1vdXNld2hlZWwoKSksYy5jb3VudGVyKCksYy5jbG9zZUdhbGxlcnkoKSxjLiRlbC50cmlnZ2VyKFwib25BZnRlck9wZW4ubGdcIiksYy4kb3V0ZXIub24oXCJtb3VzZW1vdmUubGcgY2xpY2subGcgdG91Y2hzdGFydC5sZ1wiLGZ1bmN0aW9uKCl7Yy4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1oaWRlLWl0ZW1zXCIpLGNsZWFyVGltZW91dChjLmhpZGVCYXJ0aW1lb3V0KSxjLmhpZGVCYXJ0aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLiRvdXRlci5hZGRDbGFzcyhcImxnLWhpZGUtaXRlbXNcIil9LGMucy5oaWRlQmFyc0RlbGF5KX0pfSxlLnByb3RvdHlwZS5zdHJ1Y3R1cmU9ZnVuY3Rpb24oKXt2YXIgYyxkPVwiXCIsZT1cIlwiLGY9MCxnPVwiXCIsaD10aGlzO2ZvcihhKFwiYm9keVwiKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJsZy1iYWNrZHJvcFwiPjwvZGl2PicpLGEoXCIubGctYmFja2Ryb3BcIikuY3NzKFwidHJhbnNpdGlvbi1kdXJhdGlvblwiLHRoaXMucy5iYWNrZHJvcER1cmF0aW9uK1wibXNcIiksZj0wO2Y8dGhpcy4kaXRlbXMubGVuZ3RoO2YrKylkKz0nPGRpdiBjbGFzcz1cImxnLWl0ZW1cIj48L2Rpdj4nO2lmKHRoaXMucy5jb250cm9scyYmdGhpcy4kaXRlbXMubGVuZ3RoPjEmJihlPSc8ZGl2IGNsYXNzPVwibGctYWN0aW9uc1wiPjxkaXYgY2xhc3M9XCJsZy1wcmV2IGxnLWljb25cIj4nK3RoaXMucy5wcmV2SHRtbCsnPC9kaXY+PGRpdiBjbGFzcz1cImxnLW5leHQgbGctaWNvblwiPicrdGhpcy5zLm5leHRIdG1sK1wiPC9kaXY+PC9kaXY+XCIpLFwiLmxnLXN1Yi1odG1sXCI9PT10aGlzLnMuYXBwZW5kU3ViSHRtbFRvJiYoZz0nPGRpdiBjbGFzcz1cImxnLXN1Yi1odG1sXCI+PC9kaXY+JyksYz0nPGRpdiBjbGFzcz1cImxnLW91dGVyICcrdGhpcy5zLmFkZENsYXNzK1wiIFwiK3RoaXMucy5zdGFydENsYXNzKydcIj48ZGl2IGNsYXNzPVwibGdcIiBzdHlsZT1cIndpZHRoOicrdGhpcy5zLndpZHRoK1wiOyBoZWlnaHQ6XCIrdGhpcy5zLmhlaWdodCsnXCI+PGRpdiBjbGFzcz1cImxnLWlubmVyXCI+JytkKyc8L2Rpdj48ZGl2IGNsYXNzPVwibGctdG9vbGJhciBncm91cFwiPjxzcGFuIGNsYXNzPVwibGctY2xvc2UgbGctaWNvblwiPjwvc3Bhbj48L2Rpdj4nK2UrZytcIjwvZGl2PjwvZGl2PlwiLGEoXCJib2R5XCIpLmFwcGVuZChjKSx0aGlzLiRvdXRlcj1hKFwiLmxnLW91dGVyXCIpLHRoaXMuJHNsaWRlPXRoaXMuJG91dGVyLmZpbmQoXCIubGctaXRlbVwiKSx0aGlzLnMudXNlTGVmdD8odGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy11c2UtbGVmdFwiKSx0aGlzLnMubW9kZT1cImxnLXNsaWRlXCIpOnRoaXMuJG91dGVyLmFkZENsYXNzKFwibGctdXNlLWNzczNcIiksaC5zZXRUb3AoKSxhKGIpLm9uKFwicmVzaXplLmxnIG9yaWVudGF0aW9uY2hhbmdlLmxnXCIsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aC5zZXRUb3AoKX0sMTAwKX0pLHRoaXMuJHNsaWRlLmVxKHRoaXMuaW5kZXgpLmFkZENsYXNzKFwibGctY3VycmVudFwiKSx0aGlzLmRvQ3NzKCk/dGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1jc3MzXCIpOih0aGlzLiRvdXRlci5hZGRDbGFzcyhcImxnLWNzc1wiKSx0aGlzLnMuc3BlZWQ9MCksdGhpcy4kb3V0ZXIuYWRkQ2xhc3ModGhpcy5zLm1vZGUpLHRoaXMucy5lbmFibGVEcmFnJiZ0aGlzLiRpdGVtcy5sZW5ndGg+MSYmdGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1ncmFiXCIpLHRoaXMucy5zaG93QWZ0ZXJMb2FkJiZ0aGlzLiRvdXRlci5hZGRDbGFzcyhcImxnLXNob3ctYWZ0ZXItbG9hZFwiKSx0aGlzLmRvQ3NzKCkpe3ZhciBpPXRoaXMuJG91dGVyLmZpbmQoXCIubGctaW5uZXJcIik7aS5jc3MoXCJ0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvblwiLHRoaXMucy5jc3NFYXNpbmcpLGkuY3NzKFwidHJhbnNpdGlvbi1kdXJhdGlvblwiLHRoaXMucy5zcGVlZCtcIm1zXCIpfWEoXCIubGctYmFja2Ryb3BcIikuYWRkQ2xhc3MoXCJpblwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aC4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy12aXNpYmxlXCIpfSx0aGlzLnMuYmFja2Ryb3BEdXJhdGlvbiksdGhpcy5zLmRvd25sb2FkJiZ0aGlzLiRvdXRlci5maW5kKFwiLmxnLXRvb2xiYXJcIikuYXBwZW5kKCc8YSBpZD1cImxnLWRvd25sb2FkXCIgdGFyZ2V0PVwiX2JsYW5rXCIgZG93bmxvYWQgY2xhc3M9XCJsZy1kb3dubG9hZCBsZy1pY29uXCI+PC9hPicpLHRoaXMucHJldlNjcm9sbFRvcD1hKGIpLnNjcm9sbFRvcCgpfSxlLnByb3RvdHlwZS5zZXRUb3A9ZnVuY3Rpb24oKXtpZihcIjEwMCVcIiE9PXRoaXMucy5oZWlnaHQpe3ZhciBjPWEoYikuaGVpZ2h0KCksZD0oYy1wYXJzZUludCh0aGlzLnMuaGVpZ2h0LDEwKSkvMixlPXRoaXMuJG91dGVyLmZpbmQoXCIubGdcIik7Yz49cGFyc2VJbnQodGhpcy5zLmhlaWdodCwxMCk/ZS5jc3MoXCJ0b3BcIixkK1wicHhcIik6ZS5jc3MoXCJ0b3BcIixcIjBweFwiKX19LGUucHJvdG90eXBlLmRvQ3NzPWZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXt2YXIgYT1bXCJ0cmFuc2l0aW9uXCIsXCJNb3pUcmFuc2l0aW9uXCIsXCJXZWJraXRUcmFuc2l0aW9uXCIsXCJPVHJhbnNpdGlvblwiLFwibXNUcmFuc2l0aW9uXCIsXCJLaHRtbFRyYW5zaXRpb25cIl0sYj1jLmRvY3VtZW50RWxlbWVudCxkPTA7Zm9yKGQ9MDtkPGEubGVuZ3RoO2QrKylpZihhW2RdaW4gYi5zdHlsZSlyZXR1cm4hMH07cmV0dXJuIGEoKT8hMDohMX0sZS5wcm90b3R5cGUuaXNWaWRlbz1mdW5jdGlvbihhLGIpe3ZhciBjO2lmKGM9dGhpcy5zLmR5bmFtaWM/dGhpcy5zLmR5bmFtaWNFbFtiXS5odG1sOnRoaXMuJGl0ZW1zLmVxKGIpLmF0dHIoXCJkYXRhLWh0bWxcIiksIWEmJmMpcmV0dXJue2h0bWw1OiEwfTt2YXIgZD1hLm1hdGNoKC9cXC9cXC8oPzp3d3dcXC4pP3lvdXR1KD86XFwuYmV8YmVcXC5jb20pXFwvKD86d2F0Y2hcXD92PXxlbWJlZFxcLyk/KFthLXowLTlcXC1cXF9cXCVdKykvaSksZT1hLm1hdGNoKC9cXC9cXC8oPzp3d3dcXC4pP3ZpbWVvLmNvbVxcLyhbMC05YS16XFwtX10rKS9pKSxmPWEubWF0Y2goL1xcL1xcLyg/Ond3d1xcLik/ZGFpLmx5XFwvKFswLTlhLXpcXC1fXSspL2kpO3JldHVybiBkP3t5b3V0dWJlOmR9OmU/e3ZpbWVvOmV9OmY/e2RhaWx5bW90aW9uOmZ9OnZvaWQgMH0sZS5wcm90b3R5cGUuY291bnRlcj1mdW5jdGlvbigpe3RoaXMucy5jb3VudGVyJiZhKHRoaXMucy5hcHBlbmRDb3VudGVyVG8pLmFwcGVuZCgnPGRpdiBpZD1cImxnLWNvdW50ZXJcIj48c3BhbiBpZD1cImxnLWNvdW50ZXItY3VycmVudFwiPicrKHBhcnNlSW50KHRoaXMuaW5kZXgsMTApKzEpKyc8L3NwYW4+IC8gPHNwYW4gaWQ9XCJsZy1jb3VudGVyLWFsbFwiPicrdGhpcy4kaXRlbXMubGVuZ3RoK1wiPC9zcGFuPjwvZGl2PlwiKX0sZS5wcm90b3R5cGUuYWRkSHRtbD1mdW5jdGlvbihiKXt2YXIgYyxkPW51bGw7aWYodGhpcy5zLmR5bmFtaWM/dGhpcy5zLmR5bmFtaWNFbFtiXS5zdWJIdG1sVXJsP2M9dGhpcy5zLmR5bmFtaWNFbFtiXS5zdWJIdG1sVXJsOmQ9dGhpcy5zLmR5bmFtaWNFbFtiXS5zdWJIdG1sOnRoaXMuJGl0ZW1zLmVxKGIpLmF0dHIoXCJkYXRhLXN1Yi1odG1sLXVybFwiKT9jPXRoaXMuJGl0ZW1zLmVxKGIpLmF0dHIoXCJkYXRhLXN1Yi1odG1sLXVybFwiKTpkPXRoaXMuJGl0ZW1zLmVxKGIpLmF0dHIoXCJkYXRhLXN1Yi1odG1sXCIpLCFjKWlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBkJiZudWxsIT09ZCl7dmFyIGU9ZC5zdWJzdHJpbmcoMCwxKTtkPVwiLlwiPT09ZXx8XCIjXCI9PT1lP2EoZCkuaHRtbCgpOmR9ZWxzZSBkPVwiXCI7XCIubGctc3ViLWh0bWxcIj09PXRoaXMucy5hcHBlbmRTdWJIdG1sVG8/Yz90aGlzLiRvdXRlci5maW5kKHRoaXMucy5hcHBlbmRTdWJIdG1sVG8pLmxvYWQoYyk6dGhpcy4kb3V0ZXIuZmluZCh0aGlzLnMuYXBwZW5kU3ViSHRtbFRvKS5odG1sKGQpOmM/dGhpcy4kc2xpZGUuZXEoYikubG9hZChjKTp0aGlzLiRzbGlkZS5lcShiKS5hcHBlbmQoZCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGQmJm51bGwhPT1kJiYoXCJcIj09PWQ/dGhpcy4kb3V0ZXIuZmluZCh0aGlzLnMuYXBwZW5kU3ViSHRtbFRvKS5hZGRDbGFzcyhcImxnLWVtcHR5LWh0bWxcIik6dGhpcy4kb3V0ZXIuZmluZCh0aGlzLnMuYXBwZW5kU3ViSHRtbFRvKS5yZW1vdmVDbGFzcyhcImxnLWVtcHR5LWh0bWxcIikpLHRoaXMuJGVsLnRyaWdnZXIoXCJvbkFmdGVyQXBwZW5kU3ViSHRtbC5sZ1wiLFtiXSl9LGUucHJvdG90eXBlLnByZWxvYWQ9ZnVuY3Rpb24oYSl7dmFyIGI9MSxjPTE7Zm9yKGI9MTtiPD10aGlzLnMucHJlbG9hZCYmIShiPj10aGlzLiRpdGVtcy5sZW5ndGgtYSk7YisrKXRoaXMubG9hZENvbnRlbnQoYStiLCExLDApO2ZvcihjPTE7Yzw9dGhpcy5zLnByZWxvYWQmJiEoMD5hLWMpO2MrKyl0aGlzLmxvYWRDb250ZW50KGEtYywhMSwwKX0sZS5wcm90b3R5cGUubG9hZENvbnRlbnQ9ZnVuY3Rpb24oYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsPXRoaXMsbT0hMSxuPWZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bXSxlPVtdLGY9MDtmPGMubGVuZ3RoO2YrKyl7dmFyIGg9Y1tmXS5zcGxpdChcIiBcIik7XCJcIj09PWhbMF0mJmguc3BsaWNlKDAsMSksZS5wdXNoKGhbMF0pLGQucHVzaChoWzFdKX1mb3IodmFyIGk9YShiKS53aWR0aCgpLGo9MDtqPGQubGVuZ3RoO2orKylpZihwYXJzZUludChkW2pdLDEwKT5pKXtnPWVbal07YnJlYWt9fTtpZihsLnMuZHluYW1pYyl7aWYobC5zLmR5bmFtaWNFbFtjXS5wb3N0ZXImJihtPSEwLGg9bC5zLmR5bmFtaWNFbFtjXS5wb3N0ZXIpLGs9bC5zLmR5bmFtaWNFbFtjXS5odG1sLGc9bC5zLmR5bmFtaWNFbFtjXS5zcmMsbC5zLmR5bmFtaWNFbFtjXS5yZXNwb25zaXZlKXt2YXIgbz1sLnMuZHluYW1pY0VsW2NdLnJlc3BvbnNpdmUuc3BsaXQoXCIsXCIpO24obyl9aT1sLnMuZHluYW1pY0VsW2NdLnNyY3NldCxqPWwucy5keW5hbWljRWxbY10uc2l6ZXN9ZWxzZXtpZihsLiRpdGVtcy5lcShjKS5hdHRyKFwiZGF0YS1wb3N0ZXJcIikmJihtPSEwLGg9bC4kaXRlbXMuZXEoYykuYXR0cihcImRhdGEtcG9zdGVyXCIpKSxrPWwuJGl0ZW1zLmVxKGMpLmF0dHIoXCJkYXRhLWh0bWxcIiksZz1sLiRpdGVtcy5lcShjKS5hdHRyKFwiaHJlZlwiKXx8bC4kaXRlbXMuZXEoYykuYXR0cihcImRhdGEtc3JjXCIpLGwuJGl0ZW1zLmVxKGMpLmF0dHIoXCJkYXRhLXJlc3BvbnNpdmVcIikpe3ZhciBwPWwuJGl0ZW1zLmVxKGMpLmF0dHIoXCJkYXRhLXJlc3BvbnNpdmVcIikuc3BsaXQoXCIsXCIpO24ocCl9aT1sLiRpdGVtcy5lcShjKS5hdHRyKFwiZGF0YS1zcmNzZXRcIiksaj1sLiRpdGVtcy5lcShjKS5hdHRyKFwiZGF0YS1zaXplc1wiKX12YXIgcT0hMTtsLnMuZHluYW1pYz9sLnMuZHluYW1pY0VsW2NdLmlmcmFtZSYmKHE9ITApOlwidHJ1ZVwiPT09bC4kaXRlbXMuZXEoYykuYXR0cihcImRhdGEtaWZyYW1lXCIpJiYocT0hMCk7dmFyIHI9bC5pc1ZpZGVvKGcsYyk7aWYoIWwuJHNsaWRlLmVxKGMpLmhhc0NsYXNzKFwibGctbG9hZGVkXCIpKXtpZihxKWwuJHNsaWRlLmVxKGMpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJsZy12aWRlby1jb250XCIgc3R5bGU9XCJtYXgtd2lkdGg6JytsLnMuaWZyYW1lTWF4V2lkdGgrJ1wiPjxkaXYgY2xhc3M9XCJsZy12aWRlb1wiPjxpZnJhbWUgY2xhc3M9XCJsZy1vYmplY3RcIiBmcmFtZWJvcmRlcj1cIjBcIiBzcmM9XCInK2crJ1wiICBhbGxvd2Z1bGxzY3JlZW49XCJ0cnVlXCI+PC9pZnJhbWU+PC9kaXY+PC9kaXY+Jyk7ZWxzZSBpZihtKXt2YXIgcz1cIlwiO3M9ciYmci55b3V0dWJlP1wibGctaGFzLXlvdXR1YmVcIjpyJiZyLnZpbWVvP1wibGctaGFzLXZpbWVvXCI6XCJsZy1oYXMtaHRtbDVcIixsLiRzbGlkZS5lcShjKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwibGctdmlkZW8tY29udCAnK3MrJyBcIj48ZGl2IGNsYXNzPVwibGctdmlkZW9cIj48c3BhbiBjbGFzcz1cImxnLXZpZGVvLXBsYXlcIj48L3NwYW4+PGltZyBjbGFzcz1cImxnLW9iamVjdCBsZy1oYXMtcG9zdGVyXCIgc3JjPVwiJytoKydcIiAvPjwvZGl2PjwvZGl2PicpfWVsc2Ugcj8obC4kc2xpZGUuZXEoYykucHJlcGVuZCgnPGRpdiBjbGFzcz1cImxnLXZpZGVvLWNvbnQgXCI+PGRpdiBjbGFzcz1cImxnLXZpZGVvXCI+PC9kaXY+PC9kaXY+JyksbC4kZWwudHJpZ2dlcihcImhhc1ZpZGVvLmxnXCIsW2MsZyxrXSkpOmwuJHNsaWRlLmVxKGMpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJsZy1pbWctd3JhcFwiPjxpbWcgY2xhc3M9XCJsZy1vYmplY3QgbGctaW1hZ2VcIiBzcmM9XCInK2crJ1wiIC8+PC9kaXY+Jyk7aWYobC4kZWwudHJpZ2dlcihcIm9uQWZlckFwcGVuZFNsaWRlLmxnXCIsW2NdKSxmPWwuJHNsaWRlLmVxKGMpLmZpbmQoXCIubGctb2JqZWN0XCIpLGomJmYuYXR0cihcInNpemVzXCIsaiksaSl7Zi5hdHRyKFwic3Jjc2V0XCIsaSk7dHJ5e3BpY3R1cmVmaWxsKHtlbGVtZW50czpbZlswXV19KX1jYXRjaCh0KXtjb25zb2xlLmVycm9yKFwiTWFrZSBzdXJlIHlvdSBoYXZlIGluY2x1ZGVkIFBpY3R1cmVmaWxsIHZlcnNpb24gMlwiKX19XCIubGctc3ViLWh0bWxcIiE9PXRoaXMucy5hcHBlbmRTdWJIdG1sVG8mJmwuYWRkSHRtbChjKSxsLiRzbGlkZS5lcShjKS5hZGRDbGFzcyhcImxnLWxvYWRlZFwiKX1sLiRzbGlkZS5lcShjKS5maW5kKFwiLmxnLW9iamVjdFwiKS5vbihcImxvYWQubGcgZXJyb3IubGdcIixmdW5jdGlvbigpe3ZhciBiPTA7ZSYmIWEoXCJib2R5XCIpLmhhc0NsYXNzKFwibGctZnJvbS1oYXNoXCIpJiYoYj1lKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bC4kc2xpZGUuZXEoYykuYWRkQ2xhc3MoXCJsZy1jb21wbGV0ZVwiKSxsLiRlbC50cmlnZ2VyKFwib25TbGlkZUl0ZW1Mb2FkLmxnXCIsW2MsZXx8MF0pfSxiKX0pLHImJnIuaHRtbDUmJiFtJiZsLiRzbGlkZS5lcShjKS5hZGRDbGFzcyhcImxnLWNvbXBsZXRlXCIpLGQ9PT0hMCYmKGwuJHNsaWRlLmVxKGMpLmhhc0NsYXNzKFwibGctY29tcGxldGVcIik/bC5wcmVsb2FkKGMpOmwuJHNsaWRlLmVxKGMpLmZpbmQoXCIubGctb2JqZWN0XCIpLm9uKFwibG9hZC5sZyBlcnJvci5sZ1wiLGZ1bmN0aW9uKCl7bC5wcmVsb2FkKGMpfSkpfSxlLnByb3RvdHlwZS5zbGlkZT1mdW5jdGlvbihiLGMsZCl7dmFyIGU9dGhpcy4kb3V0ZXIuZmluZChcIi5sZy1jdXJyZW50XCIpLmluZGV4KCksZj10aGlzO2lmKCFmLmxHYWxsZXJ5T258fGUhPT1iKXt2YXIgZz10aGlzLiRzbGlkZS5sZW5ndGgsaD1mLmxHYWxsZXJ5T24/dGhpcy5zLnNwZWVkOjAsaT0hMSxqPSExO2lmKCFmLmxnQnVzeSl7aWYodGhpcy4kZWwudHJpZ2dlcihcIm9uQmVmb3JlU2xpZGUubGdcIixbZSxiLGMsZF0pLGYubGdCdXN5PSEwLGNsZWFyVGltZW91dChmLmhpZGVCYXJ0aW1lb3V0KSxcIi5sZy1zdWItaHRtbFwiPT09dGhpcy5zLmFwcGVuZFN1Ykh0bWxUbyYmc2V0VGltZW91dChmdW5jdGlvbigpe2YuYWRkSHRtbChiKX0saCksdGhpcy5hcnJvd0Rpc2FibGUoYiksYyl7dmFyIGs9Yi0xLGw9YisxOzA9PT1iJiZlPT09Zy0xPyhsPTAsaz1nLTEpOmI9PT1nLTEmJjA9PT1lJiYobD0wLGs9Zy0xKSx0aGlzLiRzbGlkZS5yZW1vdmVDbGFzcyhcImxnLXByZXYtc2xpZGUgbGctY3VycmVudCBsZy1uZXh0LXNsaWRlXCIpLGYuJHNsaWRlLmVxKGspLmFkZENsYXNzKFwibGctcHJldi1zbGlkZVwiKSxmLiRzbGlkZS5lcShsKS5hZGRDbGFzcyhcImxnLW5leHQtc2xpZGVcIiksZi4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1jdXJyZW50XCIpfWVsc2UgZi4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1uby10cmFuc1wiKSx0aGlzLiRzbGlkZS5yZW1vdmVDbGFzcyhcImxnLXByZXYtc2xpZGUgbGctbmV4dC1zbGlkZVwiKSxlPmI/KGo9ITAsMCE9PWJ8fGUhPT1nLTF8fGR8fChqPSExLGk9ITApKTpiPmUmJihpPSEwLGIhPT1nLTF8fDAhPT1lfHxkfHwoaj0hMCxpPSExKSksaj8odGhpcy4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1wcmV2LXNsaWRlXCIpLHRoaXMuJHNsaWRlLmVxKGUpLmFkZENsYXNzKFwibGctbmV4dC1zbGlkZVwiKSk6aSYmKHRoaXMuJHNsaWRlLmVxKGIpLmFkZENsYXNzKFwibGctbmV4dC1zbGlkZVwiKSx0aGlzLiRzbGlkZS5lcShlKS5hZGRDbGFzcyhcImxnLXByZXYtc2xpZGVcIikpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLiRzbGlkZS5yZW1vdmVDbGFzcyhcImxnLWN1cnJlbnRcIiksZi4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1jdXJyZW50XCIpLGYuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctbm8tdHJhbnNcIil9LDUwKTtpZihmLmxHYWxsZXJ5T24/KHNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLmxvYWRDb250ZW50KGIsITAsMCl9LHRoaXMucy5zcGVlZCs1MCksc2V0VGltZW91dChmdW5jdGlvbigpe2YubGdCdXN5PSExLGYuJGVsLnRyaWdnZXIoXCJvbkFmdGVyU2xpZGUubGdcIixbZSxiLGMsZF0pfSx0aGlzLnMuc3BlZWQpKTooZi5sb2FkQ29udGVudChiLCEwLGYucy5iYWNrZHJvcER1cmF0aW9uKSxmLmxnQnVzeT0hMSxmLiRlbC50cmlnZ2VyKFwib25BZnRlclNsaWRlLmxnXCIsW2UsYixjLGRdKSksdGhpcy5zLmRvd25sb2FkKXt2YXIgbTttPWYucy5keW5hbWljP2Yucy5keW5hbWljRWxbYl0uZG93bmxvYWRVcmx8fGYucy5keW5hbWljRWxbYl0uc3JjOmYuJGl0ZW1zLmVxKGIpLmF0dHIoXCJkYXRhLWRvd25sb2FkLXVybFwiKXx8Zi4kaXRlbXMuZXEoYikuYXR0cihcImhyZWZcIil8fGYuJGl0ZW1zLmVxKGIpLmF0dHIoXCJkYXRhLXNyY1wiKSxhKFwiI2xnLWRvd25sb2FkXCIpLmF0dHIoXCJocmVmXCIsbSl9Zi5sR2FsbGVyeU9uPSEwLHRoaXMucy5jb3VudGVyJiZhKFwiI2xnLWNvdW50ZXItY3VycmVudFwiKS50ZXh0KGIrMSl9fX0sZS5wcm90b3R5cGUuZ29Ub05leHRTbGlkZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2IubGdCdXN5fHwoYi5pbmRleCsxPGIuJHNsaWRlLmxlbmd0aD8oYi5pbmRleCsrLGIuJGVsLnRyaWdnZXIoXCJvbkJlZm9yZU5leHRTbGlkZS5sZ1wiLFtiLmluZGV4XSksYi5zbGlkZShiLmluZGV4LGEsITEpKTpiLnMubG9vcD8oYi5pbmRleD0wLGIuJGVsLnRyaWdnZXIoXCJvbkJlZm9yZU5leHRTbGlkZS5sZ1wiLFtiLmluZGV4XSksYi5zbGlkZShiLmluZGV4LGEsITEpKTpiLnMuc2xpZGVFbmRBbmltYXRvaW4mJihiLiRvdXRlci5hZGRDbGFzcyhcImxnLXJpZ2h0LWVuZFwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1yaWdodC1lbmRcIil9LDQwMCkpKX0sZS5wcm90b3R5cGUuZ29Ub1ByZXZTbGlkZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2IubGdCdXN5fHwoYi5pbmRleD4wPyhiLmluZGV4LS0sYi4kZWwudHJpZ2dlcihcIm9uQmVmb3JlUHJldlNsaWRlLmxnXCIsW2IuaW5kZXgsYV0pLGIuc2xpZGUoYi5pbmRleCxhLCExKSk6Yi5zLmxvb3A/KGIuaW5kZXg9Yi4kaXRlbXMubGVuZ3RoLTEsYi4kZWwudHJpZ2dlcihcIm9uQmVmb3JlUHJldlNsaWRlLmxnXCIsW2IuaW5kZXgsYV0pLGIuc2xpZGUoYi5pbmRleCxhLCExKSk6Yi5zLnNsaWRlRW5kQW5pbWF0b2luJiYoYi4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1sZWZ0LWVuZFwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1sZWZ0LWVuZFwiKX0sNDAwKSkpfSxlLnByb3RvdHlwZS5rZXlQcmVzcz1mdW5jdGlvbigpe3ZhciBjPXRoaXM7dGhpcy4kaXRlbXMubGVuZ3RoPjEmJmEoYikub24oXCJrZXl1cC5sZ1wiLGZ1bmN0aW9uKGEpe2MuJGl0ZW1zLmxlbmd0aD4xJiYoMzc9PT1hLmtleUNvZGUmJihhLnByZXZlbnREZWZhdWx0KCksYy5nb1RvUHJldlNsaWRlKCkpLDM5PT09YS5rZXlDb2RlJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGMuZ29Ub05leHRTbGlkZSgpKSl9KSxhKGIpLm9uKFwia2V5ZG93bi5sZ1wiLGZ1bmN0aW9uKGEpe2Mucy5lc2NLZXk9PT0hMCYmMjc9PT1hLmtleUNvZGUmJihhLnByZXZlbnREZWZhdWx0KCksYy4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy10aHVtYi1vcGVuXCIpP2MuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctdGh1bWItb3BlblwiKTpjLmRlc3Ryb3koKSl9KX0sZS5wcm90b3R5cGUuYXJyb3c9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuJG91dGVyLmZpbmQoXCIubGctcHJldlwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXthLmdvVG9QcmV2U2xpZGUoKX0pLHRoaXMuJG91dGVyLmZpbmQoXCIubGctbmV4dFwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXthLmdvVG9OZXh0U2xpZGUoKX0pfSxlLnByb3RvdHlwZS5hcnJvd0Rpc2FibGU9ZnVuY3Rpb24oYSl7IXRoaXMucy5sb29wJiZ0aGlzLnMuaGlkZUNvbnRyb2xPbkVuZCYmKGErMTx0aGlzLiRzbGlkZS5sZW5ndGg/dGhpcy4kb3V0ZXIuZmluZChcIi5sZy1uZXh0XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpOnRoaXMuJG91dGVyLmZpbmQoXCIubGctbmV4dFwiKS5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLmFkZENsYXNzKFwiZGlzYWJsZWRcIiksYT4wP3RoaXMuJG91dGVyLmZpbmQoXCIubGctcHJldlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTp0aGlzLiRvdXRlci5maW5kKFwiLmxnLXByZXZcIikuYXR0cihcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpKX0sZS5wcm90b3R5cGUuc2V0VHJhbnNsYXRlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnMudXNlTGVmdD9hLmNzcyhcImxlZnRcIixiKTphLmNzcyh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrYitcInB4LCBcIitjK1wicHgsIDBweClcIn0pfSxlLnByb3RvdHlwZS50b3VjaE1vdmU9ZnVuY3Rpb24oYixjKXt2YXIgZD1jLWI7dGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1kcmFnZ2luZ1wiKSx0aGlzLnNldFRyYW5zbGF0ZSh0aGlzLiRzbGlkZS5lcSh0aGlzLmluZGV4KSxkLDApLHRoaXMuc2V0VHJhbnNsYXRlKGEoXCIubGctcHJldi1zbGlkZVwiKSwtdGhpcy4kc2xpZGUuZXEodGhpcy5pbmRleCkud2lkdGgoKStkLDApLHRoaXMuc2V0VHJhbnNsYXRlKGEoXCIubGctbmV4dC1zbGlkZVwiKSx0aGlzLiRzbGlkZS5lcSh0aGlzLmluZGV4KS53aWR0aCgpK2QsMCl9LGUucHJvdG90eXBlLnRvdWNoRW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7XCJsZy1zbGlkZVwiIT09Yi5zLm1vZGUmJmIuJG91dGVyLmFkZENsYXNzKFwibGctc2xpZGVcIiksdGhpcy4kc2xpZGUubm90KFwiLmxnLWN1cnJlbnQsIC5sZy1wcmV2LXNsaWRlLCAubGctbmV4dC1zbGlkZVwiKS5jc3MoXCJvcGFjaXR5XCIsXCIwXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLWRyYWdnaW5nXCIpLDA+YSYmTWF0aC5hYnMoYSk+Yi5zLnN3aXBlVGhyZXNob2xkP2IuZ29Ub05leHRTbGlkZSghMCk6YT4wJiZNYXRoLmFicyhhKT5iLnMuc3dpcGVUaHJlc2hvbGQ/Yi5nb1RvUHJldlNsaWRlKCEwKTpNYXRoLmFicyhhKTw1JiZiLiRlbC50cmlnZ2VyKFwib25TbGlkZUNsaWNrLmxnXCIpLGIuJHNsaWRlLnJlbW92ZUF0dHIoXCJzdHlsZVwiKX0pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLiRvdXRlci5oYXNDbGFzcyhcImxnLWRyYWdnaW5nXCIpfHxcImxnLXNsaWRlXCI9PT1iLnMubW9kZXx8Yi4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1zbGlkZVwiKX0sYi5zLnNwZWVkKzEwMCl9LGUucHJvdG90eXBlLmVuYWJsZVN3aXBlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPTAsYz0wLGQ9ITE7YS5zLmVuYWJsZVN3aXBlJiZhLmlzVG91Y2gmJmEuZG9Dc3MoKSYmKGEuJHNsaWRlLm9uKFwidG91Y2hzdGFydC5sZ1wiLGZ1bmN0aW9uKGMpe2EuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpfHxhLmxnQnVzeXx8KGMucHJldmVudERlZmF1bHQoKSxhLm1hbmFnZVN3aXBlQ2xhc3MoKSxiPWMub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYKX0pLGEuJHNsaWRlLm9uKFwidG91Y2htb3ZlLmxnXCIsZnVuY3Rpb24oZSl7YS4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy16b29tZWRcIil8fChlLnByZXZlbnREZWZhdWx0KCksYz1lLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCxhLnRvdWNoTW92ZShiLGMpLGQ9ITApfSksYS4kc2xpZGUub24oXCJ0b3VjaGVuZC5sZ1wiLGZ1bmN0aW9uKCl7YS4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy16b29tZWRcIil8fChkPyhkPSExLGEudG91Y2hFbmQoYy1iKSk6YS4kZWwudHJpZ2dlcihcIm9uU2xpZGVDbGljay5sZ1wiKSl9KSl9LGUucHJvdG90eXBlLmVuYWJsZURyYWc9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGQ9MCxlPTAsZj0hMSxnPSExO2Mucy5lbmFibGVEcmFnJiYhYy5pc1RvdWNoJiZjLmRvQ3NzKCkmJihjLiRzbGlkZS5vbihcIm1vdXNlZG93bi5sZ1wiLGZ1bmN0aW9uKGIpe2MuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpfHwoYShiLnRhcmdldCkuaGFzQ2xhc3MoXCJsZy1vYmplY3RcIil8fGEoYi50YXJnZXQpLmhhc0NsYXNzKFwibGctdmlkZW8tcGxheVwiKSkmJihiLnByZXZlbnREZWZhdWx0KCksYy5sZ0J1c3l8fChjLm1hbmFnZVN3aXBlQ2xhc3MoKSxkPWIucGFnZVgsZj0hMCxjLiRvdXRlci5zY3JvbGxMZWZ0Kz0xLGMuJG91dGVyLnNjcm9sbExlZnQtPTEsYy4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1ncmFiXCIpLmFkZENsYXNzKFwibGctZ3JhYmJpbmdcIiksYy4kZWwudHJpZ2dlcihcIm9uRHJhZ3N0YXJ0LmxnXCIpKSl9KSxhKGIpLm9uKFwibW91c2Vtb3ZlLmxnXCIsZnVuY3Rpb24oYSl7ZiYmKGc9ITAsZT1hLnBhZ2VYLGMudG91Y2hNb3ZlKGQsZSksYy4kZWwudHJpZ2dlcihcIm9uRHJhZ21vdmUubGdcIikpfSksYShiKS5vbihcIm1vdXNldXAubGdcIixmdW5jdGlvbihiKXtnPyhnPSExLGMudG91Y2hFbmQoZS1kKSxjLiRlbC50cmlnZ2VyKFwib25EcmFnZW5kLmxnXCIpKTooYShiLnRhcmdldCkuaGFzQ2xhc3MoXCJsZy1vYmplY3RcIil8fGEoYi50YXJnZXQpLmhhc0NsYXNzKFwibGctdmlkZW8tcGxheVwiKSkmJmMuJGVsLnRyaWdnZXIoXCJvblNsaWRlQ2xpY2subGdcIiksZiYmKGY9ITEsYy4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1ncmFiYmluZ1wiKS5hZGRDbGFzcyhcImxnLWdyYWJcIikpfSkpfSxlLnByb3RvdHlwZS5tYW5hZ2VTd2lwZUNsYXNzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbmRleCsxLGI9dGhpcy5pbmRleC0xLGM9dGhpcy4kc2xpZGUubGVuZ3RoO3RoaXMucy5sb29wJiYoMD09PXRoaXMuaW5kZXg/Yj1jLTE6dGhpcy5pbmRleD09PWMtMSYmKGE9MCkpLHRoaXMuJHNsaWRlLnJlbW92ZUNsYXNzKFwibGctbmV4dC1zbGlkZSBsZy1wcmV2LXNsaWRlXCIpLGI+LTEmJnRoaXMuJHNsaWRlLmVxKGIpLmFkZENsYXNzKFwibGctcHJldi1zbGlkZVwiKSx0aGlzLiRzbGlkZS5lcShhKS5hZGRDbGFzcyhcImxnLW5leHQtc2xpZGVcIil9LGUucHJvdG90eXBlLm1vdXNld2hlZWw9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuJG91dGVyLm9uKFwibW91c2V3aGVlbC5sZ1wiLGZ1bmN0aW9uKGIpe2IuZGVsdGFZJiYoYi5kZWx0YVk+MD9hLmdvVG9QcmV2U2xpZGUoKTphLmdvVG9OZXh0U2xpZGUoKSxiLnByZXZlbnREZWZhdWx0KCkpfSl9LGUucHJvdG90eXBlLmNsb3NlR2FsbGVyeT1mdW5jdGlvbigpe3ZhciBiPXRoaXMsYz0hMTt0aGlzLiRvdXRlci5maW5kKFwiLmxnLWNsb3NlXCIpLm9uKFwiY2xpY2subGdcIixmdW5jdGlvbigpe2IuZGVzdHJveSgpfSksYi5zLmNsb3NhYmxlJiYoYi4kb3V0ZXIub24oXCJtb3VzZWRvd24ubGdcIixmdW5jdGlvbihiKXtjPWEoYi50YXJnZXQpLmlzKFwiLmxnLW91dGVyXCIpfHxhKGIudGFyZ2V0KS5pcyhcIi5sZy1pdGVtIFwiKXx8YShiLnRhcmdldCkuaXMoXCIubGctaW1nLXdyYXBcIik/ITA6ITF9KSxiLiRvdXRlci5vbihcIm1vdXNldXAubGdcIixmdW5jdGlvbihkKXsoYShkLnRhcmdldCkuaXMoXCIubGctb3V0ZXJcIil8fGEoZC50YXJnZXQpLmlzKFwiLmxnLWl0ZW0gXCIpfHxhKGQudGFyZ2V0KS5pcyhcIi5sZy1pbWctd3JhcFwiKSYmYykmJihiLiRvdXRlci5oYXNDbGFzcyhcImxnLWRyYWdnaW5nXCIpfHxiLmRlc3Ryb3koKSl9KSl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcztjfHxkLiRlbC50cmlnZ2VyKFwib25CZWZvcmVDbG9zZS5sZ1wiKSxhKGIpLnNjcm9sbFRvcChkLnByZXZTY3JvbGxUb3ApLGMmJihkLnMuZHluYW1pY3x8dGhpcy4kaXRlbXMub2ZmKFwiY2xpY2subGcgY2xpY2subGdjdXN0b21cIiksYS5yZW1vdmVEYXRhKGQuZWwsXCJsaWdodEdhbGxlcnlcIikpLHRoaXMuJGVsLm9mZihcIi5sZy50bVwiKSxhLmVhY2goYS5mbi5saWdodEdhbGxlcnkubW9kdWxlcyxmdW5jdGlvbihhKXtkLm1vZHVsZXNbYV0mJmQubW9kdWxlc1thXS5kZXN0cm95KCl9KSx0aGlzLmxHYWxsZXJ5T249ITEsY2xlYXJUaW1lb3V0KGQuaGlkZUJhcnRpbWVvdXQpLHRoaXMuaGlkZUJhcnRpbWVvdXQ9ITEsYShiKS5vZmYoXCIubGdcIiksYShcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJsZy1vbiBsZy1mcm9tLWhhc2hcIiksZC4kb3V0ZXImJmQuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctdmlzaWJsZVwiKSxhKFwiLmxnLWJhY2tkcm9wXCIpLnJlbW92ZUNsYXNzKFwiaW5cIiksc2V0VGltZW91dChmdW5jdGlvbigpe2QuJG91dGVyJiZkLiRvdXRlci5yZW1vdmUoKSxhKFwiLmxnLWJhY2tkcm9wXCIpLnJlbW92ZSgpLGN8fGQuJGVsLnRyaWdnZXIoXCJvbkNsb3NlQWZ0ZXIubGdcIil9LGQucy5iYWNrZHJvcER1cmF0aW9uKzUwKX0sYS5mbi5saWdodEdhbGxlcnk9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGEuZGF0YSh0aGlzLFwibGlnaHRHYWxsZXJ5XCIpKXRyeXthKHRoaXMpLmRhdGEoXCJsaWdodEdhbGxlcnlcIikuaW5pdCgpfWNhdGNoKGMpe2NvbnNvbGUuZXJyb3IoXCJsaWdodEdhbGxlcnkgaGFzIG5vdCBpbml0aWF0ZWQgcHJvcGVybHlcIil9ZWxzZSBhLmRhdGEodGhpcyxcImxpZ2h0R2FsbGVyeVwiLG5ldyBlKHRoaXMsYikpfSl9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXM9e319KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO3ZhciBlPXthdXRvcGxheTohMSxwYXVzZTo1ZTMscHJvZ3Jlc3NCYXI6ITAsZm91cmNlQXV0b3BsYXk6ITEsYXV0b3BsYXlDb250cm9sczohMCxhcHBlbmRBdXRvcGxheUNvbnRyb2xzVG86XCIubGctdG9vbGJhclwifSxmPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmNvcmU9YShiKS5kYXRhKFwibGlnaHRHYWxsZXJ5XCIpLHRoaXMuJGVsPWEoYiksdGhpcy5jb3JlLiRpdGVtcy5sZW5ndGg8Mj8hMToodGhpcy5jb3JlLnM9YS5leHRlbmQoe30sZSx0aGlzLmNvcmUucyksdGhpcy5pbnRlcnZhbD0hMSx0aGlzLmZyb21BdXRvPSEwLHRoaXMuY2FuY2VsZWRPblRvdWNoPSExLHRoaXMuZm91cmNlQXV0b3BsYXlUZW1wPXRoaXMuY29yZS5zLmZvdXJjZUF1dG9wbGF5LHRoaXMuY29yZS5kb0NzcygpfHwodGhpcy5jb3JlLnMucHJvZ3Jlc3NCYXI9ITEpLHRoaXMuaW5pdCgpLHRoaXMpfTtmLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNvcmUucy5hdXRvcGxheUNvbnRyb2xzJiZhLmNvbnRyb2xzKCksYS5jb3JlLnMucHJvZ3Jlc3NCYXImJmEuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJsZy1wcm9ncmVzcy1iYXJcIj48ZGl2IGNsYXNzPVwibGctcHJvZ3Jlc3NcIj48L2Rpdj48L2Rpdj4nKSxhLnByb2dyZXNzKCksYS5jb3JlLnMuYXV0b3BsYXkmJmEuc3RhcnRsQXV0bygpLGEuJGVsLm9uKFwib25EcmFnc3RhcnQubGcudG0gdG91Y2hzdGFydC5sZy50bVwiLGZ1bmN0aW9uKCl7YS5pbnRlcnZhbCYmKGEuY2FuY2VsQXV0bygpLGEuY2FuY2VsZWRPblRvdWNoPSEwKX0pLGEuJGVsLm9uKFwib25EcmFnZW5kLmxnLnRtIHRvdWNoZW5kLmxnLnRtIG9uU2xpZGVDbGljay5sZy50bVwiLGZ1bmN0aW9uKCl7IWEuaW50ZXJ2YWwmJmEuY2FuY2VsZWRPblRvdWNoJiYoYS5zdGFydGxBdXRvKCksYS5jYW5jZWxlZE9uVG91Y2g9ITEpfSl9LGYucHJvdG90eXBlLnByb2dyZXNzPWZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXM7Yy4kZWwub24oXCJvbkJlZm9yZVNsaWRlLmxnLnRtXCIsZnVuY3Rpb24oKXtjLmNvcmUucy5wcm9ncmVzc0JhciYmYy5mcm9tQXV0byYmKGE9Yy5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXByb2dyZXNzLWJhclwiKSxiPWMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzc1wiKSxjLmludGVydmFsJiYoYi5yZW1vdmVBdHRyKFwic3R5bGVcIiksYS5yZW1vdmVDbGFzcyhcImxnLXN0YXJ0XCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmNzcyhcInRyYW5zaXRpb25cIixcIndpZHRoIFwiKyhjLmNvcmUucy5zcGVlZCtjLmNvcmUucy5wYXVzZSkrXCJtcyBlYXNlIDBzXCIpLGEuYWRkQ2xhc3MoXCJsZy1zdGFydFwiKX0sMjApKSksYy5mcm9tQXV0b3x8Yy5jb3JlLnMuZm91cmNlQXV0b3BsYXl8fGMuY2FuY2VsQXV0bygpLGMuZnJvbUF1dG89ITF9KX0sZi5wcm90b3R5cGUuY29udHJvbHM9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9JzxzcGFuIGNsYXNzPVwibGctYXV0b3BsYXktYnV0dG9uIGxnLWljb25cIj48L3NwYW4+JzthKHRoaXMuY29yZS5zLmFwcGVuZEF1dG9wbGF5Q29udHJvbHNUbykuYXBwZW5kKGMpLGIuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1hdXRvcGxheS1idXR0b25cIikub24oXCJjbGljay5sZ1wiLGZ1bmN0aW9uKCl7YShiLmNvcmUuJG91dGVyKS5oYXNDbGFzcyhcImxnLXNob3ctYXV0b3BsYXlcIik/KGIuY2FuY2VsQXV0bygpLGIuY29yZS5zLmZvdXJjZUF1dG9wbGF5PSExKTpiLmludGVydmFsfHwoYi5zdGFydGxBdXRvKCksYi5jb3JlLnMuZm91cmNlQXV0b3BsYXk9Yi5mb3VyY2VBdXRvcGxheVRlbXApfSl9LGYucHJvdG90eXBlLnN0YXJ0bEF1dG89ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzc1wiKS5jc3MoXCJ0cmFuc2l0aW9uXCIsXCJ3aWR0aCBcIisoYS5jb3JlLnMuc3BlZWQrYS5jb3JlLnMucGF1c2UpK1wibXMgZWFzZSAwc1wiKSxhLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctc2hvdy1hdXRvcGxheVwiKSxhLmNvcmUuJG91dGVyLmZpbmQoXCIubGctcHJvZ3Jlc3MtYmFyXCIpLmFkZENsYXNzKFwibGctc3RhcnRcIiksYS5pbnRlcnZhbD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2EuY29yZS5pbmRleCsxPGEuY29yZS4kaXRlbXMubGVuZ3RoP2EuY29yZS5pbmRleD1hLmNvcmUuaW5kZXg6YS5jb3JlLmluZGV4PS0xLGEuY29yZS5pbmRleCsrLGEuZnJvbUF1dG89ITAsYS5jb3JlLnNsaWRlKGEuY29yZS5pbmRleCwhMSwhMSl9LGEuY29yZS5zLnNwZWVkK2EuY29yZS5zLnBhdXNlKX0sZi5wcm90b3R5cGUuY2FuY2VsQXV0bz1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpcy5pbnRlcnZhbD0hMSx0aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGctcHJvZ3Jlc3NcIikucmVtb3ZlQXR0cihcInN0eWxlXCIpLHRoaXMuY29yZS4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1zaG93LWF1dG9wbGF5XCIpLHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzcy1iYXJcIikucmVtb3ZlQ2xhc3MoXCJsZy1zdGFydFwiKX0sZi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuY2FuY2VsQXV0bygpLHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wcm9ncmVzcy1iYXJcIikucmVtb3ZlKCl9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMuYXV0b3BsYXk9Zn0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9e2Z1bGxTY3JlZW46ITB9LGY9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuY29yZT1hKGIpLmRhdGEoXCJsaWdodEdhbGxlcnlcIiksdGhpcy4kZWw9YShiKSx0aGlzLmNvcmUucz1hLmV4dGVuZCh7fSxlLHRoaXMuY29yZS5zKSx0aGlzLmluaXQoKSx0aGlzfTtmLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGE9XCJcIjtpZih0aGlzLmNvcmUucy5mdWxsU2NyZWVuKXtpZighKGMuZnVsbHNjcmVlbkVuYWJsZWR8fGMud2Via2l0RnVsbHNjcmVlbkVuYWJsZWR8fGMubW96RnVsbFNjcmVlbkVuYWJsZWR8fGMubXNGdWxsc2NyZWVuRW5hYmxlZCkpcmV0dXJuO2E9JzxzcGFuIGNsYXNzPVwibGctZnVsbHNjcmVlbiBsZy1pY29uXCI+PC9zcGFuPicsdGhpcy5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRvb2xiYXJcIikuYXBwZW5kKGEpLHRoaXMuZnVsbFNjcmVlbigpfX0sZi5wcm90b3R5cGUucmVxdWVzdEZ1bGxzY3JlZW49ZnVuY3Rpb24oKXt2YXIgYT1jLmRvY3VtZW50RWxlbWVudDthLnJlcXVlc3RGdWxsc2NyZWVuP2EucmVxdWVzdEZ1bGxzY3JlZW4oKTphLm1zUmVxdWVzdEZ1bGxzY3JlZW4/YS5tc1JlcXVlc3RGdWxsc2NyZWVuKCk6YS5tb3pSZXF1ZXN0RnVsbFNjcmVlbj9hLm1velJlcXVlc3RGdWxsU2NyZWVuKCk6YS53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbiYmYS53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpfSxmLnByb3RvdHlwZS5leGl0RnVsbHNjcmVlbj1mdW5jdGlvbigpe2MuZXhpdEZ1bGxzY3JlZW4/Yy5leGl0RnVsbHNjcmVlbigpOmMubXNFeGl0RnVsbHNjcmVlbj9jLm1zRXhpdEZ1bGxzY3JlZW4oKTpjLm1vekNhbmNlbEZ1bGxTY3JlZW4/Yy5tb3pDYW5jZWxGdWxsU2NyZWVuKCk6Yy53ZWJraXRFeGl0RnVsbHNjcmVlbiYmYy53ZWJraXRFeGl0RnVsbHNjcmVlbigpfSxmLnByb3RvdHlwZS5mdWxsU2NyZWVuPWZ1bmN0aW9uKCl7dmFyIGI9dGhpczthKGMpLm9uKFwiZnVsbHNjcmVlbmNoYW5nZS5sZyB3ZWJraXRmdWxsc2NyZWVuY2hhbmdlLmxnIG1vemZ1bGxzY3JlZW5jaGFuZ2UubGcgTVNGdWxsc2NyZWVuQ2hhbmdlLmxnXCIsZnVuY3Rpb24oKXtiLmNvcmUuJG91dGVyLnRvZ2dsZUNsYXNzKFwibGctZnVsbHNjcmVlbi1vblwiKX0pLHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1mdWxsc2NyZWVuXCIpLm9uKFwiY2xpY2subGdcIixmdW5jdGlvbigpe2MuZnVsbHNjcmVlbkVsZW1lbnR8fGMubW96RnVsbFNjcmVlbkVsZW1lbnR8fGMud2Via2l0RnVsbHNjcmVlbkVsZW1lbnR8fGMubXNGdWxsc2NyZWVuRWxlbWVudD9iLmV4aXRGdWxsc2NyZWVuKCk6Yi5yZXF1ZXN0RnVsbHNjcmVlbigpfSl9LGYucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmV4aXRGdWxsc2NyZWVuKCksYShjKS5vZmYoXCJmdWxsc2NyZWVuY2hhbmdlLmxnIHdlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UubGcgbW96ZnVsbHNjcmVlbmNoYW5nZS5sZyBNU0Z1bGxzY3JlZW5DaGFuZ2UubGdcIil9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMuZnVsbHNjcmVlbj1mfShqUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhLGIsYyxkKXtcInVzZSBzdHJpY3RcIjt2YXIgZT17cGFnZXI6ITF9LGY9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuY29yZT1hKGIpLmRhdGEoXCJsaWdodEdhbGxlcnlcIiksdGhpcy4kZWw9YShiKSx0aGlzLmNvcmUucz1hLmV4dGVuZCh7fSxlLHRoaXMuY29yZS5zKSx0aGlzLmNvcmUucy5wYWdlciYmdGhpcy5jb3JlLiRpdGVtcy5sZW5ndGg+MSYmdGhpcy5pbml0KCksdGhpc307Zi5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBiLGMsZCxlPXRoaXMsZj1cIlwiO2lmKGUuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJsZy1wYWdlci1vdXRlclwiPjwvZGl2PicpLGUuY29yZS5zLmR5bmFtaWMpZm9yKHZhciBnPTA7ZzxlLmNvcmUucy5keW5hbWljRWwubGVuZ3RoO2crKylmKz0nPHNwYW4gY2xhc3M9XCJsZy1wYWdlci1jb250XCI+IDxzcGFuIGNsYXNzPVwibGctcGFnZXJcIj48L3NwYW4+PGRpdiBjbGFzcz1cImxnLXBhZ2VyLXRodW1iLWNvbnRcIj48c3BhbiBjbGFzcz1cImxnLWNhcmV0XCI+PC9zcGFuPiA8aW1nIHNyYz1cIicrZS5jb3JlLnMuZHluYW1pY0VsW2ddLnRodW1iKydcIiAvPjwvZGl2Pjwvc3Bhbj4nO2Vsc2UgZS5jb3JlLiRpdGVtcy5lYWNoKGZ1bmN0aW9uKCl7Zis9ZS5jb3JlLnMuZXhUaHVtYkltYWdlPyc8c3BhbiBjbGFzcz1cImxnLXBhZ2VyLWNvbnRcIj4gPHNwYW4gY2xhc3M9XCJsZy1wYWdlclwiPjwvc3Bhbj48ZGl2IGNsYXNzPVwibGctcGFnZXItdGh1bWItY29udFwiPjxzcGFuIGNsYXNzPVwibGctY2FyZXRcIj48L3NwYW4+IDxpbWcgc3JjPVwiJythKHRoaXMpLmF0dHIoZS5jb3JlLnMuZXhUaHVtYkltYWdlKSsnXCIgLz48L2Rpdj48L3NwYW4+JzonPHNwYW4gY2xhc3M9XCJsZy1wYWdlci1jb250XCI+IDxzcGFuIGNsYXNzPVwibGctcGFnZXJcIj48L3NwYW4+PGRpdiBjbGFzcz1cImxnLXBhZ2VyLXRodW1iLWNvbnRcIj48c3BhbiBjbGFzcz1cImxnLWNhcmV0XCI+PC9zcGFuPiA8aW1nIHNyYz1cIicrYSh0aGlzKS5maW5kKFwiaW1nXCIpLmF0dHIoXCJzcmNcIikrJ1wiIC8+PC9kaXY+PC9zcGFuPid9KTtjPWUuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1wYWdlci1vdXRlclwiKSxjLmh0bWwoZiksYj1lLmNvcmUuJG91dGVyLmZpbmQoXCIubGctcGFnZXItY29udFwiKSxiLm9uKFwiY2xpY2subGcgdG91Y2hlbmQubGdcIixmdW5jdGlvbigpe3ZhciBiPWEodGhpcyk7ZS5jb3JlLmluZGV4PWIuaW5kZXgoKSxlLmNvcmUuc2xpZGUoZS5jb3JlLmluZGV4LCExLCExKX0pLGMub24oXCJtb3VzZW92ZXIubGdcIixmdW5jdGlvbigpe2NsZWFyVGltZW91dChkKSxjLmFkZENsYXNzKFwibGctcGFnZXItaG92ZXJcIil9KSxjLm9uKFwibW91c2VvdXQubGdcIixmdW5jdGlvbigpe2Q9c2V0VGltZW91dChmdW5jdGlvbigpe2MucmVtb3ZlQ2xhc3MoXCJsZy1wYWdlci1ob3ZlclwiKX0pfSksZS5jb3JlLiRlbC5vbihcIm9uQmVmb3JlU2xpZGUubGcudG1cIixmdW5jdGlvbihhLGMsZCl7Yi5yZW1vdmVDbGFzcyhcImxnLXBhZ2VyLWFjdGl2ZVwiKSxiLmVxKGQpLmFkZENsYXNzKFwibGctcGFnZXItYWN0aXZlXCIpfSl9LGYucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMucGFnZXI9Zn0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9e3RodW1ibmFpbDohMCxhbmltYXRlVGh1bWI6ITAsY3VycmVudFBhZ2VyUG9zaXRpb246XCJtaWRkbGVcIix0aHVtYldpZHRoOjEwMCx0aHVtYkNvbnRIZWlnaHQ6MTAwLHRodW1iTWFyZ2luOjUsZXhUaHVtYkltYWdlOiExLHNob3dUaHVtYkJ5RGVmYXVsdDohMCx0b29nbGVUaHVtYjohMCxwdWxsQ2FwdGlvblVwOiEwLGVuYWJsZVRodW1iRHJhZzohMCxlbmFibGVUaHVtYlN3aXBlOiEwLHN3aXBlVGhyZXNob2xkOjUwLGxvYWRZb3V0dWJlVGh1bWJuYWlsOiEwLHlvdXR1YmVUaHVtYlNpemU6MSxsb2FkVmltZW9UaHVtYm5haWw6ITAsdmltZW9UaHVtYlNpemU6XCJ0aHVtYm5haWxfc21hbGxcIixsb2FkRGFpbHltb3Rpb25UaHVtYm5haWw6ITB9LGY9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuY29yZT1hKGIpLmRhdGEoXCJsaWdodEdhbGxlcnlcIiksdGhpcy5jb3JlLnM9YS5leHRlbmQoe30sZSx0aGlzLmNvcmUucyksdGhpcy4kZWw9YShiKSx0aGlzLiR0aHVtYk91dGVyPW51bGwsdGhpcy50aHVtYk91dGVyV2lkdGg9MCx0aGlzLnRodW1iVG90YWxXaWR0aD10aGlzLmNvcmUuJGl0ZW1zLmxlbmd0aCoodGhpcy5jb3JlLnMudGh1bWJXaWR0aCt0aGlzLmNvcmUucy50aHVtYk1hcmdpbiksdGhpcy50aHVtYkluZGV4PXRoaXMuY29yZS5pbmRleCx0aGlzLmxlZnQ9MCx0aGlzLmluaXQoKSx0aGlzfTtmLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5jb3JlLnMudGh1bWJuYWlsJiZ0aGlzLmNvcmUuJGl0ZW1zLmxlbmd0aD4xJiYodGhpcy5jb3JlLnMuc2hvd1RodW1iQnlEZWZhdWx0JiZ0aGlzLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctdGh1bWItb3BlblwiKSx0aGlzLmNvcmUucy5wdWxsQ2FwdGlvblVwJiZ0aGlzLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctcHVsbC1jYXB0aW9uLXVwXCIpLHRoaXMuYnVpbGQoKSx0aGlzLmNvcmUucy5hbmltYXRlVGh1bWI/KHRoaXMuY29yZS5zLmVuYWJsZVRodW1iRHJhZyYmIXRoaXMuY29yZS5pc1RvdWNoJiZ0aGlzLmNvcmUuZG9Dc3MoKSYmdGhpcy5lbmFibGVUaHVtYkRyYWcoKSx0aGlzLmNvcmUucy5lbmFibGVUaHVtYlN3aXBlJiZ0aGlzLmNvcmUuaXNUb3VjaCYmdGhpcy5jb3JlLmRvQ3NzKCkmJnRoaXMuZW5hYmxlVGh1bWJTd2lwZSgpLHRoaXMudGh1bWJDbGlja2FibGU9ITEpOnRoaXMudGh1bWJDbGlja2FibGU9ITAsdGhpcy50b29nbGUoKSx0aGlzLnRodW1ia2V5UHJlc3MoKSl9LGYucHJvdG90eXBlLmJ1aWxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGQsaD1lLmNvcmUuaXNWaWRlbyhhLGMpfHx7fSxpPVwiXCI7aC55b3V0dWJlfHxoLnZpbWVvfHxoLmRhaWx5bW90aW9uP2gueW91dHViZT9kPWUuY29yZS5zLmxvYWRZb3V0dWJlVGh1bWJuYWlsP1wiLy9pbWcueW91dHViZS5jb20vdmkvXCIraC55b3V0dWJlWzFdK1wiL1wiK2UuY29yZS5zLnlvdXR1YmVUaHVtYlNpemUrXCIuanBnXCI6YjpoLnZpbWVvP2UuY29yZS5zLmxvYWRWaW1lb1RodW1ibmFpbD8oZD1cIi8vaS52aW1lb2Nkbi5jb20vdmlkZW8vZXJyb3JfXCIrZytcIi5qcGdcIixpPWgudmltZW9bMV0pOmQ9YjpoLmRhaWx5bW90aW9uJiYoZD1lLmNvcmUucy5sb2FkRGFpbHltb3Rpb25UaHVtYm5haWw/XCIvL3d3dy5kYWlseW1vdGlvbi5jb20vdGh1bWJuYWlsL3ZpZGVvL1wiK2guZGFpbHltb3Rpb25bMV06Yik6ZD1iLGYrPSc8ZGl2IGRhdGEtdmltZW8taWQ9XCInK2krJ1wiIGNsYXNzPVwibGctdGh1bWItaXRlbVwiIHN0eWxlPVwid2lkdGg6JytlLmNvcmUucy50aHVtYldpZHRoK1wicHg7IG1hcmdpbi1yaWdodDogXCIrZS5jb3JlLnMudGh1bWJNYXJnaW4rJ3B4XCI+PGltZyBzcmM9XCInK2QrJ1wiIC8+PC9kaXY+JyxpPVwiXCJ9dmFyIGQsZT10aGlzLGY9XCJcIixnPVwiXCIsaD0nPGRpdiBjbGFzcz1cImxnLXRodW1iLW91dGVyXCI+PGRpdiBjbGFzcz1cImxnLXRodW1iIGdyb3VwXCI+PC9kaXY+PC9kaXY+Jztzd2l0Y2godGhpcy5jb3JlLnMudmltZW9UaHVtYlNpemUpe2Nhc2VcInRodW1ibmFpbF9sYXJnZVwiOmc9XCI2NDBcIjticmVhaztjYXNlXCJ0aHVtYm5haWxfbWVkaXVtXCI6Zz1cIjIwMHgxNTBcIjticmVhaztjYXNlXCJ0aHVtYm5haWxfc21hbGxcIjpnPVwiMTAweDc1XCJ9aWYoZS5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLWhhcy10aHVtYlwiKSxlLmNvcmUuJG91dGVyLmZpbmQoXCIubGdcIikuYXBwZW5kKGgpLGUuJHRodW1iT3V0ZXI9ZS5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iLW91dGVyXCIpLGUudGh1bWJPdXRlcldpZHRoPWUuJHRodW1iT3V0ZXIud2lkdGgoKSxlLmNvcmUucy5hbmltYXRlVGh1bWImJmUuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYlwiKS5jc3Moe3dpZHRoOmUudGh1bWJUb3RhbFdpZHRoK1wicHhcIixwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KSx0aGlzLmNvcmUucy5hbmltYXRlVGh1bWImJmUuJHRodW1iT3V0ZXIuY3NzKFwiaGVpZ2h0XCIsZS5jb3JlLnMudGh1bWJDb250SGVpZ2h0K1wicHhcIiksZS5jb3JlLnMuZHluYW1pYylmb3IodmFyIGk9MDtpPGUuY29yZS5zLmR5bmFtaWNFbC5sZW5ndGg7aSsrKWMoZS5jb3JlLnMuZHluYW1pY0VsW2ldLnNyYyxlLmNvcmUucy5keW5hbWljRWxbaV0udGh1bWIsaSk7ZWxzZSBlLmNvcmUuJGl0ZW1zLmVhY2goZnVuY3Rpb24oYil7ZS5jb3JlLnMuZXhUaHVtYkltYWdlP2MoYSh0aGlzKS5hdHRyKFwiaHJlZlwiKXx8YSh0aGlzKS5hdHRyKFwiZGF0YS1zcmNcIiksYSh0aGlzKS5hdHRyKGUuY29yZS5zLmV4VGh1bWJJbWFnZSksYik6YyhhKHRoaXMpLmF0dHIoXCJocmVmXCIpfHxhKHRoaXMpLmF0dHIoXCJkYXRhLXNyY1wiKSxhKHRoaXMpLmZpbmQoXCJpbWdcIikuYXR0cihcInNyY1wiKSxiKX0pO2UuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYlwiKS5odG1sKGYpLGQ9ZS5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iLWl0ZW1cIiksZC5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKSxjPWIuYXR0cihcImRhdGEtdmltZW8taWRcIik7YyYmYS5nZXRKU09OKFwiaHR0cDovL3d3dy52aW1lby5jb20vYXBpL3YyL3ZpZGVvL1wiK2MrXCIuanNvbj9jYWxsYmFjaz0/XCIse2Zvcm1hdDpcImpzb25cIn0sZnVuY3Rpb24oYSl7Yi5maW5kKFwiaW1nXCIpLmF0dHIoXCJzcmNcIixhWzBdW2UuY29yZS5zLnZpbWVvVGh1bWJTaXplXSl9KX0pLGQuZXEoZS5jb3JlLmluZGV4KS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxlLmNvcmUuJGVsLm9uKFwib25CZWZvcmVTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKCl7ZC5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxkLmVxKGUuY29yZS5pbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIil9KSxkLm9uKFwiY2xpY2subGcgdG91Y2hlbmQubGdcIixmdW5jdGlvbigpe3ZhciBiPWEodGhpcyk7c2V0VGltZW91dChmdW5jdGlvbigpeyhlLnRodW1iQ2xpY2thYmxlJiYhZS5jb3JlLmxnQnVzeXx8IWUuY29yZS5kb0NzcygpKSYmKGUuY29yZS5pbmRleD1iLmluZGV4KCksZS5jb3JlLnNsaWRlKGUuY29yZS5pbmRleCwhMSwhMCkpfSw1MCl9KSxlLmNvcmUuJGVsLm9uKFwib25CZWZvcmVTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKCl7ZS5hbmltYXRlVGh1bWIoZS5jb3JlLmluZGV4KX0pLGEoYikub24oXCJyZXNpemUubGcudGh1bWIgb3JpZW50YXRpb25jaGFuZ2UubGcudGh1bWJcIixmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmFuaW1hdGVUaHVtYihlLmNvcmUuaW5kZXgpLGUudGh1bWJPdXRlcldpZHRoPWUuJHRodW1iT3V0ZXIud2lkdGgoKX0sMjAwKX0pfSxmLnByb3RvdHlwZS5zZXRUcmFuc2xhdGU9ZnVuY3Rpb24oYSl7dGhpcy5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpLmNzcyh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLVwiK2ErXCJweCwgMHB4LCAwcHgpXCJ9KX0sZi5wcm90b3R5cGUuYW5pbWF0ZVRodW1iPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYlwiKTtpZih0aGlzLmNvcmUucy5hbmltYXRlVGh1bWIpe3ZhciBjO3N3aXRjaCh0aGlzLmNvcmUucy5jdXJyZW50UGFnZXJQb3NpdGlvbil7Y2FzZVwibGVmdFwiOmM9MDticmVhaztjYXNlXCJtaWRkbGVcIjpjPXRoaXMudGh1bWJPdXRlcldpZHRoLzItdGhpcy5jb3JlLnMudGh1bWJXaWR0aC8yO2JyZWFrO2Nhc2VcInJpZ2h0XCI6Yz10aGlzLnRodW1iT3V0ZXJXaWR0aC10aGlzLmNvcmUucy50aHVtYldpZHRofXRoaXMubGVmdD0odGhpcy5jb3JlLnMudGh1bWJXaWR0aCt0aGlzLmNvcmUucy50aHVtYk1hcmdpbikqYS0xLWMsdGhpcy5sZWZ0PnRoaXMudGh1bWJUb3RhbFdpZHRoLXRoaXMudGh1bWJPdXRlcldpZHRoJiYodGhpcy5sZWZ0PXRoaXMudGh1bWJUb3RhbFdpZHRoLXRoaXMudGh1bWJPdXRlcldpZHRoKSx0aGlzLmxlZnQ8MCYmKHRoaXMubGVmdD0wKSx0aGlzLmNvcmUubEdhbGxlcnlPbj8oYi5oYXNDbGFzcyhcIm9uXCIpfHx0aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikuY3NzKFwidHJhbnNpdGlvbi1kdXJhdGlvblwiLHRoaXMuY29yZS5zLnNwZWVkK1wibXNcIiksdGhpcy5jb3JlLmRvQ3NzKCl8fGIuYW5pbWF0ZSh7bGVmdDotdGhpcy5sZWZ0K1wicHhcIn0sdGhpcy5jb3JlLnMuc3BlZWQpKTp0aGlzLmNvcmUuZG9Dc3MoKXx8Yi5jc3MoXCJsZWZ0XCIsLXRoaXMubGVmdCtcInB4XCIpLHRoaXMuc2V0VHJhbnNsYXRlKHRoaXMubGVmdCl9fSxmLnByb3RvdHlwZS5lbmFibGVUaHVtYkRyYWc9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGQ9MCxlPTAsZj0hMSxnPSExLGg9MDtjLiR0aHVtYk91dGVyLmFkZENsYXNzKFwibGctZ3JhYlwiKSxjLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikub24oXCJtb3VzZWRvd24ubGcudGh1bWJcIixmdW5jdGlvbihhKXtjLnRodW1iVG90YWxXaWR0aD5jLnRodW1iT3V0ZXJXaWR0aCYmKGEucHJldmVudERlZmF1bHQoKSxkPWEucGFnZVgsZj0hMCxjLmNvcmUuJG91dGVyLnNjcm9sbExlZnQrPTEsYy5jb3JlLiRvdXRlci5zY3JvbGxMZWZ0LT0xLGMudGh1bWJDbGlja2FibGU9ITEsYy4kdGh1bWJPdXRlci5yZW1vdmVDbGFzcyhcImxnLWdyYWJcIikuYWRkQ2xhc3MoXCJsZy1ncmFiYmluZ1wiKSl9KSxhKGIpLm9uKFwibW91c2Vtb3ZlLmxnLnRodW1iXCIsZnVuY3Rpb24oYSl7ZiYmKGg9Yy5sZWZ0LGc9ITAsZT1hLnBhZ2VYLGMuJHRodW1iT3V0ZXIuYWRkQ2xhc3MoXCJsZy1kcmFnZ2luZ1wiKSxoLT1lLWQsaD5jLnRodW1iVG90YWxXaWR0aC1jLnRodW1iT3V0ZXJXaWR0aCYmKGg9Yy50aHVtYlRvdGFsV2lkdGgtYy50aHVtYk91dGVyV2lkdGgpLDA+aCYmKGg9MCksYy5zZXRUcmFuc2xhdGUoaCkpfSksYShiKS5vbihcIm1vdXNldXAubGcudGh1bWJcIixmdW5jdGlvbigpe2c/KGc9ITEsYy4kdGh1bWJPdXRlci5yZW1vdmVDbGFzcyhcImxnLWRyYWdnaW5nXCIpLGMubGVmdD1oLE1hdGguYWJzKGUtZCk8Yy5jb3JlLnMuc3dpcGVUaHJlc2hvbGQmJihjLnRodW1iQ2xpY2thYmxlPSEwKSk6Yy50aHVtYkNsaWNrYWJsZT0hMCxmJiYoZj0hMSxjLiR0aHVtYk91dGVyLnJlbW92ZUNsYXNzKFwibGctZ3JhYmJpbmdcIikuYWRkQ2xhc3MoXCJsZy1ncmFiXCIpKX0pfSxmLnByb3RvdHlwZS5lbmFibGVUaHVtYlN3aXBlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPTAsYz0wLGQ9ITEsZT0wO2EuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYlwiKS5vbihcInRvdWNoc3RhcnQubGdcIixmdW5jdGlvbihjKXthLnRodW1iVG90YWxXaWR0aD5hLnRodW1iT3V0ZXJXaWR0aCYmKGMucHJldmVudERlZmF1bHQoKSxiPWMub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYLGEudGh1bWJDbGlja2FibGU9ITEpfSksYS5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpLm9uKFwidG91Y2htb3ZlLmxnXCIsZnVuY3Rpb24oZil7YS50aHVtYlRvdGFsV2lkdGg+YS50aHVtYk91dGVyV2lkdGgmJihmLnByZXZlbnREZWZhdWx0KCksYz1mLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCxkPSEwLGEuJHRodW1iT3V0ZXIuYWRkQ2xhc3MoXCJsZy1kcmFnZ2luZ1wiKSxlPWEubGVmdCxlLT1jLWIsZT5hLnRodW1iVG90YWxXaWR0aC1hLnRodW1iT3V0ZXJXaWR0aCYmKGU9YS50aHVtYlRvdGFsV2lkdGgtYS50aHVtYk91dGVyV2lkdGgpLDA+ZSYmKGU9MCksYS5zZXRUcmFuc2xhdGUoZSkpfSksYS5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpLm9uKFwidG91Y2hlbmQubGdcIixmdW5jdGlvbigpe2EudGh1bWJUb3RhbFdpZHRoPmEudGh1bWJPdXRlcldpZHRoJiZkPyhkPSExLGEuJHRodW1iT3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1kcmFnZ2luZ1wiKSxNYXRoLmFicyhjLWIpPGEuY29yZS5zLnN3aXBlVGhyZXNob2xkJiYoYS50aHVtYkNsaWNrYWJsZT0hMCksYS5sZWZ0PWUpOmEudGh1bWJDbGlja2FibGU9ITB9KX0sZi5wcm90b3R5cGUudG9vZ2xlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNvcmUucy50b29nbGVUaHVtYiYmKGEuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1jYW4tdG9nZ2xlXCIpLGEuJHRodW1iT3V0ZXIuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImxnLXRvb2dsZS10aHVtYiBsZy1pY29uXCI+PC9zcGFuPicpLGEuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10b29nbGUtdGh1bWJcIikub24oXCJjbGljay5sZ1wiLGZ1bmN0aW9uKCl7YS5jb3JlLiRvdXRlci50b2dnbGVDbGFzcyhcImxnLXRodW1iLW9wZW5cIil9KSl9LGYucHJvdG90eXBlLnRodW1ia2V5UHJlc3M9ZnVuY3Rpb24oKXt2YXIgYz10aGlzO2EoYikub24oXCJrZXlkb3duLmxnLnRodW1iXCIsZnVuY3Rpb24oYSl7Mzg9PT1hLmtleUNvZGU/KGEucHJldmVudERlZmF1bHQoKSxjLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctdGh1bWItb3BlblwiKSk6NDA9PT1hLmtleUNvZGUmJihhLnByZXZlbnREZWZhdWx0KCksYy5jb3JlLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLXRodW1iLW9wZW5cIikpfSl9LGYucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNvcmUucy50aHVtYm5haWwmJnRoaXMuY29yZS4kaXRlbXMubGVuZ3RoPjEmJihhKGIpLm9mZihcInJlc2l6ZS5sZy50aHVtYiBvcmllbnRhdGlvbmNoYW5nZS5sZy50aHVtYiBrZXlkb3duLmxnLnRodW1iXCIpLHRoaXMuJHRodW1iT3V0ZXIucmVtb3ZlKCksdGhpcy5jb3JlLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLWhhcy10aHVtYlwiKSl9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMuVGh1bWJuYWlsPWZ9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO3ZhciBlPXt2aWRlb01heFdpZHRoOlwiODU1cHhcIix5b3V0dWJlUGxheWVyUGFyYW1zOiExLHZpbWVvUGxheWVyUGFyYW1zOiExLGRhaWx5bW90aW9uUGxheWVyUGFyYW1zOiExLHZpZGVvanM6ITF9LGY9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuY29yZT1hKGIpLmRhdGEoXCJsaWdodEdhbGxlcnlcIiksdGhpcy4kZWw9YShiKSx0aGlzLmNvcmUucz1hLmV4dGVuZCh7fSxlLHRoaXMuY29yZS5zKSx0aGlzLnZpZGVvTG9hZGVkPSExLHRoaXMuaW5pdCgpLHRoaXN9O2YucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYj10aGlzO2IuY29yZS4kZWwub24oXCJoYXNWaWRlby5sZy50bVwiLGZ1bmN0aW9uKGEsYyxkLGUpe2lmKGIuY29yZS4kc2xpZGUuZXEoYykuZmluZChcIi5sZy12aWRlb1wiKS5hcHBlbmQoYi5sb2FkVmlkZW8oZCxcImxnLW9iamVjdFwiLCEwLGMsZSkpLGUpaWYoYi5jb3JlLnMudmlkZW9qcyl0cnl7dmlkZW9qcyhiLmNvcmUuJHNsaWRlLmVxKGMpLmZpbmQoXCIubGctaHRtbDVcIikuZ2V0KDApLHt9LGZ1bmN0aW9uKCl7Yi52aWRlb0xvYWRlZHx8dGhpcy5wbGF5KCl9KX1jYXRjaChmKXtjb25zb2xlLmVycm9yKFwiTWFrZSBzdXJlIHlvdSBoYXZlIGluY2x1ZGVkIHZpZGVvanNcIil9ZWxzZSBiLmNvcmUuJHNsaWRlLmVxKGMpLmZpbmQoXCIubGctaHRtbDVcIikuZ2V0KDApLnBsYXkoKX0pLGIuY29yZS4kZWwub24oXCJvbkFmZXJBcHBlbmRTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKGEsYyl7Yi5jb3JlLiRzbGlkZS5lcShjKS5maW5kKFwiLmxnLXZpZGVvLWNvbnRcIikuY3NzKFwibWF4LXdpZHRoXCIsYi5jb3JlLnMudmlkZW9NYXhXaWR0aCksYi52aWRlb0xvYWRlZD0hMH0pO3ZhciBjPWZ1bmN0aW9uKGEpe2lmKGEuZmluZChcIi5sZy1vYmplY3RcIikuaGFzQ2xhc3MoXCJsZy1oYXMtcG9zdGVyXCIpJiZhLmZpbmQoXCIubGctb2JqZWN0XCIpLmlzKFwiOnZpc2libGVcIikpaWYoYS5oYXNDbGFzcyhcImxnLWhhcy12aWRlb1wiKSl7dmFyIGM9YS5maW5kKFwiLmxnLXlvdXR1YmVcIikuZ2V0KDApLGQ9YS5maW5kKFwiLmxnLXZpbWVvXCIpLmdldCgwKSxlPWEuZmluZChcIi5sZy1kYWlseW1vdGlvblwiKS5nZXQoMCksZj1hLmZpbmQoXCIubGctaHRtbDVcIikuZ2V0KDApO2lmKGMpYy5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKCd7XCJldmVudFwiOlwiY29tbWFuZFwiLFwiZnVuY1wiOlwicGxheVZpZGVvXCIsXCJhcmdzXCI6XCJcIn0nLFwiKlwiKTtlbHNlIGlmKGQpdHJ5eyRmKGQpLmFwaShcInBsYXlcIil9Y2F0Y2goZyl7Y29uc29sZS5lcnJvcihcIk1ha2Ugc3VyZSB5b3UgaGF2ZSBpbmNsdWRlZCBmcm9vZ2Fsb29wMiBqc1wiKX1lbHNlIGlmKGUpZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKFwicGxheVwiLFwiKlwiKTtlbHNlIGlmKGYpaWYoYi5jb3JlLnMudmlkZW9qcyl0cnl7dmlkZW9qcyhmKS5wbGF5KCl9Y2F0Y2goZyl7Y29uc29sZS5lcnJvcihcIk1ha2Ugc3VyZSB5b3UgaGF2ZSBpbmNsdWRlZCB2aWRlb2pzXCIpfWVsc2UgZi5wbGF5KCk7YS5hZGRDbGFzcyhcImxnLXZpZGVvLXBhbHlpbmdcIil9ZWxzZXthLmFkZENsYXNzKFwibGctdmlkZW8tcGFseWluZyBsZy1oYXMtdmlkZW9cIik7dmFyIGgsaSxqPWZ1bmN0aW9uKGMsZCl7aWYoYS5maW5kKFwiLmxnLXZpZGVvXCIpLmFwcGVuZChiLmxvYWRWaWRlbyhjLFwiXCIsITEsYi5jb3JlLmluZGV4LGQpKSxkKWlmKGIuY29yZS5zLnZpZGVvanMpdHJ5e3ZpZGVvanMoYi5jb3JlLiRzbGlkZS5lcShiLmNvcmUuaW5kZXgpLmZpbmQoXCIubGctaHRtbDVcIikuZ2V0KDApLHt9LGZ1bmN0aW9uKCl7dGhpcy5wbGF5KCl9KX1jYXRjaChlKXtjb25zb2xlLmVycm9yKFwiTWFrZSBzdXJlIHlvdSBoYXZlIGluY2x1ZGVkIHZpZGVvanNcIil9ZWxzZSBiLmNvcmUuJHNsaWRlLmVxKGIuY29yZS5pbmRleCkuZmluZChcIi5sZy1odG1sNVwiKS5nZXQoMCkucGxheSgpfTtiLmNvcmUucy5keW5hbWljPyhoPWIuY29yZS5zLmR5bmFtaWNFbFtiLmNvcmUuaW5kZXhdLnNyYyxpPWIuY29yZS5zLmR5bmFtaWNFbFtiLmNvcmUuaW5kZXhdLmh0bWwsaihoLGkpKTooaD1iLmNvcmUuJGl0ZW1zLmVxKGIuY29yZS5pbmRleCkuYXR0cihcImhyZWZcIil8fGIuY29yZS4kaXRlbXMuZXEoYi5jb3JlLmluZGV4KS5hdHRyKFwiZGF0YS1zcmNcIiksXG5pPWIuY29yZS4kaXRlbXMuZXEoYi5jb3JlLmluZGV4KS5hdHRyKFwiZGF0YS1odG1sXCIpLGooaCxpKSk7dmFyIGs9YS5maW5kKFwiLmxnLW9iamVjdFwiKTthLmZpbmQoXCIubGctdmlkZW9cIikuYXBwZW5kKGspLGEuZmluZChcIi5sZy12aWRlby1vYmplY3RcIikuaGFzQ2xhc3MoXCJsZy1odG1sNVwiKXx8KGEucmVtb3ZlQ2xhc3MoXCJsZy1jb21wbGV0ZVwiKSxhLmZpbmQoXCIubGctdmlkZW8tb2JqZWN0XCIpLm9uKFwibG9hZC5sZyBlcnJvci5sZ1wiLGZ1bmN0aW9uKCl7YS5hZGRDbGFzcyhcImxnLWNvbXBsZXRlXCIpfSkpfX07Yi5jb3JlLmRvQ3NzKCkmJmIuY29yZS4kaXRlbXMubGVuZ3RoPjEmJihiLmNvcmUucy5lbmFibGVTd2lwZSYmYi5jb3JlLmlzVG91Y2h8fGIuY29yZS5zLmVuYWJsZURyYWcmJiFiLmNvcmUuaXNUb3VjaCk/Yi5jb3JlLiRlbC5vbihcIm9uU2xpZGVDbGljay5sZy50bVwiLGZ1bmN0aW9uKCl7dmFyIGE9Yi5jb3JlLiRzbGlkZS5lcShiLmNvcmUuaW5kZXgpO2MoYSl9KTpiLmNvcmUuJHNsaWRlLm9uKFwiY2xpY2subGdcIixmdW5jdGlvbigpe2MoYSh0aGlzKSl9KSxiLmNvcmUuJGVsLm9uKFwib25CZWZvcmVTbGlkZS5sZy50bVwiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yi5jb3JlLiRzbGlkZS5lcShjKSxlPWQuZmluZChcIi5sZy15b3V0dWJlXCIpLmdldCgwKSxmPWQuZmluZChcIi5sZy12aW1lb1wiKS5nZXQoMCksZz1kLmZpbmQoXCIubGctZGFpbHltb3Rpb25cIikuZ2V0KDApLGg9ZC5maW5kKFwiLmxnLWh0bWw1XCIpLmdldCgwKTtpZihlKWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgne1wiZXZlbnRcIjpcImNvbW1hbmRcIixcImZ1bmNcIjpcInBhdXNlVmlkZW9cIixcImFyZ3NcIjpcIlwifScsXCIqXCIpO2Vsc2UgaWYoZil0cnl7JGYoZikuYXBpKFwicGF1c2VcIil9Y2F0Y2goaSl7Y29uc29sZS5lcnJvcihcIk1ha2Ugc3VyZSB5b3UgaGF2ZSBpbmNsdWRlZCBmcm9vZ2Fsb29wMiBqc1wiKX1lbHNlIGlmKGcpZy5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKFwicGF1c2VcIixcIipcIik7ZWxzZSBpZihoKWlmKGIuY29yZS5zLnZpZGVvanMpdHJ5e3ZpZGVvanMoaCkucGF1c2UoKX1jYXRjaChpKXtjb25zb2xlLmVycm9yKFwiTWFrZSBzdXJlIHlvdSBoYXZlIGluY2x1ZGVkIHZpZGVvanNcIil9ZWxzZSBoLnBhdXNlKCl9KSxiLmNvcmUuJGVsLm9uKFwib25BZnRlclNsaWRlLmxnLnRtXCIsZnVuY3Rpb24oYSxjKXtiLmNvcmUuJHNsaWRlLmVxKGMpLnJlbW92ZUNsYXNzKFwibGctdmlkZW8tcGFseWluZ1wiKX0pfSxmLnByb3RvdHlwZS5sb2FkVmlkZW89ZnVuY3Rpb24oYixjLGQsZSxmKXt2YXIgZz1cIlwiLGg9MSxpPVwiXCIsaj10aGlzLmNvcmUuaXNWaWRlbyhiLGUpfHx7fTtpZihkJiYoaD10aGlzLnZpZGVvTG9hZGVkPzA6MSksai55b3V0dWJlKWk9XCI/d21vZGU9b3BhcXVlJmF1dG9wbGF5PVwiK2grXCImZW5hYmxlanNhcGk9MVwiLHRoaXMuY29yZS5zLnlvdXR1YmVQbGF5ZXJQYXJhbXMmJihpPWkrXCImXCIrYS5wYXJhbSh0aGlzLmNvcmUucy55b3V0dWJlUGxheWVyUGFyYW1zKSksZz0nPGlmcmFtZSBjbGFzcz1cImxnLXZpZGVvLW9iamVjdCBsZy15b3V0dWJlICcrYysnXCIgd2lkdGg9XCI1NjBcIiBoZWlnaHQ9XCIzMTVcIiBzcmM9XCIvL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8nK2oueW91dHViZVsxXStpKydcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JztlbHNlIGlmKGoudmltZW8paT1cIj9hdXRvcGxheT1cIitoK1wiJmFwaT0xXCIsdGhpcy5jb3JlLnMudmltZW9QbGF5ZXJQYXJhbXMmJihpPWkrXCImXCIrYS5wYXJhbSh0aGlzLmNvcmUucy52aW1lb1BsYXllclBhcmFtcykpLGc9JzxpZnJhbWUgY2xhc3M9XCJsZy12aWRlby1vYmplY3QgbGctdmltZW8gJytjKydcIiB3aWR0aD1cIjU2MFwiIGhlaWdodD1cIjMxNVwiICBzcmM9XCJodHRwOi8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8nK2oudmltZW9bMV0raSsnXCIgZnJhbWVib3JkZXI9XCIwXCIgd2Via2l0QWxsb3dGdWxsU2NyZWVuIG1vemFsbG93ZnVsbHNjcmVlbiBhbGxvd0Z1bGxTY3JlZW4+PC9pZnJhbWU+JztlbHNlIGlmKGouZGFpbHltb3Rpb24paT1cIj93bW9kZT1vcGFxdWUmYXV0b3BsYXk9XCIraCtcIiZhcGk9cG9zdE1lc3NhZ2VcIix0aGlzLmNvcmUucy5kYWlseW1vdGlvblBsYXllclBhcmFtcyYmKGk9aStcIiZcIithLnBhcmFtKHRoaXMuY29yZS5zLmRhaWx5bW90aW9uUGxheWVyUGFyYW1zKSksZz0nPGlmcmFtZSBjbGFzcz1cImxnLXZpZGVvLW9iamVjdCBsZy1kYWlseW1vdGlvbiAnK2MrJ1wiIHdpZHRoPVwiNTYwXCIgaGVpZ2h0PVwiMzE1XCIgc3JjPVwiLy93d3cuZGFpbHltb3Rpb24uY29tL2VtYmVkL3ZpZGVvLycrai5kYWlseW1vdGlvblsxXStpKydcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JztlbHNlIGlmKGouaHRtbDUpe3ZhciBrPWYuc3Vic3RyaW5nKDAsMSk7KFwiLlwiPT09a3x8XCIjXCI9PT1rKSYmKGY9YShmKS5odG1sKCkpLGc9Zn1yZXR1cm4gZ30sZi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMudmlkZW9Mb2FkZWQ9ITF9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMudmlkZW89Zn0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9e3NjYWxlOjEsem9vbTohMCxlbmFibGVab29tQWZ0ZXI6MzAwfSxmPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmNvcmU9YShjKS5kYXRhKFwibGlnaHRHYWxsZXJ5XCIpLHRoaXMuY29yZS5zPWEuZXh0ZW5kKHt9LGUsdGhpcy5jb3JlLnMpLHRoaXMuY29yZS5zLnpvb20mJnRoaXMuY29yZS5kb0NzcygpJiYodGhpcy5pbml0KCksdGhpcy56b29tYWJsZXRpbWVvdXQ9ITEsdGhpcy5wYWdlWD1hKGIpLndpZHRoKCkvMix0aGlzLnBhZ2VZPWEoYikuaGVpZ2h0KCkvMithKGIpLnNjcm9sbFRvcCgpKSx0aGlzfTtmLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxkPSc8c3BhbiBpZD1cImxnLXpvb20taW5cIiBjbGFzcz1cImxnLWljb25cIj48L3NwYW4+PHNwYW4gaWQ9XCJsZy16b29tLW91dFwiIGNsYXNzPVwibGctaWNvblwiPjwvc3Bhbj4nO3RoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10b29sYmFyXCIpLmFwcGVuZChkKSxjLmNvcmUuJGVsLm9uKFwib25TbGlkZUl0ZW1Mb2FkLmxnLnRtLnpvb21cIixmdW5jdGlvbihiLGQsZSl7dmFyIGY9Yy5jb3JlLnMuZW5hYmxlWm9vbUFmdGVyK2U7YShcImJvZHlcIikuaGFzQ2xhc3MoXCJsZy1mcm9tLWhhc2hcIikmJmU/Zj0wOmEoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwibGctZnJvbS1oYXNoXCIpLGMuem9vbWFibGV0aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmNvcmUuJHNsaWRlLmVxKGQpLmFkZENsYXNzKFwibGctem9vbWFibGVcIil9LGYrMzApfSk7dmFyIGU9MSxmPWZ1bmN0aW9uKGQpe3ZhciBlLGYsZz1jLmNvcmUuJG91dGVyLmZpbmQoXCIubGctY3VycmVudCAubGctaW1hZ2VcIiksaD0oYShiKS53aWR0aCgpLWcud2lkdGgoKSkvMixpPShhKGIpLmhlaWdodCgpLWcuaGVpZ2h0KCkpLzIrYShiKS5zY3JvbGxUb3AoKTtlPWMucGFnZVgtaCxmPWMucGFnZVktaTt2YXIgaj0oZC0xKSplLGs9KGQtMSkqZjtnLmNzcyhcInRyYW5zZm9ybVwiLFwic2NhbGUzZChcIitkK1wiLCBcIitkK1wiLCAxKVwiKS5hdHRyKFwiZGF0YS1zY2FsZVwiLGQpLGcucGFyZW50KCkuY3NzKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUzZCgtXCIraitcInB4LCAtXCIraytcInB4LCAwKVwiKS5hdHRyKFwiZGF0YS14XCIsaikuYXR0cihcImRhdGEteVwiLGspfSxnPWZ1bmN0aW9uKCl7ZT4xP2MuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy16b29tZWRcIik6Yy5yZXNldFpvb20oKSwxPmUmJihlPTEpLGYoZSl9O2MuY29yZS4kZWwub24oXCJvbkFmZXJBcHBlbmRTbGlkZS5sZy50bS56b29tXCIsZnVuY3Rpb24oYSxiKXt2YXIgZD1jLmNvcmUuJHNsaWRlLmVxKGIpLmZpbmQoXCIubGctaW1hZ2VcIik7ZC5kYmxjbGljayhmdW5jdGlvbihhKXt2YXIgZixoPWQud2lkdGgoKSxpPWMuY29yZS4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtd2lkdGhcIil8fGRbMF0ubmF0dXJhbFdpZHRofHxoO2MuY29yZS4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy16b29tZWRcIik/ZT0xOmk+aCYmKGY9aS9oLGU9Znx8MiksYy5wYWdlWD1hLnBhZ2VYLGMucGFnZVk9YS5wYWdlWSxnKCksc2V0VGltZW91dChmdW5jdGlvbigpe2MuY29yZS4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1ncmFiYmluZ1wiKS5hZGRDbGFzcyhcImxnLWdyYWJcIil9LDEwKX0pfSksYShiKS5vbihcInJlc2l6ZS5sZy56b29tIHNjcm9sbC5sZy56b29tIG9yaWVudGF0aW9uY2hhbmdlLmxnLnpvb21cIixmdW5jdGlvbigpe2MucGFnZVg9YShiKS53aWR0aCgpLzIsYy5wYWdlWT1hKGIpLmhlaWdodCgpLzIrYShiKS5zY3JvbGxUb3AoKSxmKGUpfSksYShcIiNsZy16b29tLW91dFwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXtjLmNvcmUuJG91dGVyLmZpbmQoXCIubGctY3VycmVudCAubGctaW1hZ2VcIikubGVuZ3RoJiYoZS09Yy5jb3JlLnMuc2NhbGUsZygpKX0pLGEoXCIjbGctem9vbS1pblwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXtjLmNvcmUuJG91dGVyLmZpbmQoXCIubGctY3VycmVudCAubGctaW1hZ2VcIikubGVuZ3RoJiYoZSs9Yy5jb3JlLnMuc2NhbGUsZygpKX0pLGMuY29yZS4kZWwub24oXCJvbkJlZm9yZVNsaWRlLmxnLnRtXCIsZnVuY3Rpb24oKXtjLnJlc2V0Wm9vbSgpfSksYy5jb3JlLmlzVG91Y2h8fGMuem9vbURyYWcoKSxjLmNvcmUuaXNUb3VjaCYmYy56b29tU3dpcGUoKX0sZi5wcm90b3R5cGUucmVzZXRab29tPWZ1bmN0aW9uKCl7dGhpcy5jb3JlLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLXpvb21lZFwiKSx0aGlzLmNvcmUuJHNsaWRlLmZpbmQoXCIubGctaW1nLXdyYXBcIikucmVtb3ZlQXR0cihcInN0eWxlIGRhdGEteCBkYXRhLXlcIiksdGhpcy5jb3JlLiRzbGlkZS5maW5kKFwiLmxnLWltYWdlXCIpLnJlbW92ZUF0dHIoXCJzdHlsZSBkYXRhLXNjYWxlXCIpLHRoaXMucGFnZVg9YShiKS53aWR0aCgpLzIsdGhpcy5wYWdlWT1hKGIpLmhlaWdodCgpLzIrYShiKS5zY3JvbGxUb3AoKX0sZi5wcm90b3R5cGUuem9vbVN3aXBlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPXt9LGM9e30sZD0hMSxlPSExLGY9ITE7YS5jb3JlLiRzbGlkZS5vbihcInRvdWNoc3RhcnQubGdcIixmdW5jdGlvbihjKXtpZihhLmNvcmUuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpKXt2YXIgZD1hLmNvcmUuJHNsaWRlLmVxKGEuY29yZS5pbmRleCkuZmluZChcIi5sZy1vYmplY3RcIik7Zj1kLm91dGVySGVpZ2h0KCkqZC5hdHRyKFwiZGF0YS1zY2FsZVwiKT5hLmNvcmUuJG91dGVyLmZpbmQoXCIubGdcIikuaGVpZ2h0KCksZT1kLm91dGVyV2lkdGgoKSpkLmF0dHIoXCJkYXRhLXNjYWxlXCIpPmEuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS53aWR0aCgpLChlfHxmKSYmKGMucHJldmVudERlZmF1bHQoKSxiPXt4OmMub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYLHk6Yy5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVl9KX19KSxhLmNvcmUuJHNsaWRlLm9uKFwidG91Y2htb3ZlLmxnXCIsZnVuY3Rpb24oZyl7aWYoYS5jb3JlLiRvdXRlci5oYXNDbGFzcyhcImxnLXpvb21lZFwiKSl7dmFyIGgsaSxqPWEuY29yZS4kc2xpZGUuZXEoYS5jb3JlLmluZGV4KS5maW5kKFwiLmxnLWltZy13cmFwXCIpO2cucHJldmVudERlZmF1bHQoKSxkPSEwLGM9e3g6Zy5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVgseTpnLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWX0sYS5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLXpvb20tZHJhZ2dpbmdcIiksaT1mPy1NYXRoLmFicyhqLmF0dHIoXCJkYXRhLXlcIikpKyhjLnktYi55KTotTWF0aC5hYnMoai5hdHRyKFwiZGF0YS15XCIpKSxoPWU/LU1hdGguYWJzKGouYXR0cihcImRhdGEteFwiKSkrKGMueC1iLngpOi1NYXRoLmFicyhqLmF0dHIoXCJkYXRhLXhcIikpLGouY3NzKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUzZChcIitoK1wicHgsIFwiK2krXCJweCwgMClcIil9fSksYS5jb3JlLiRzbGlkZS5vbihcInRvdWNoZW5kLmxnXCIsZnVuY3Rpb24oKXthLmNvcmUuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpJiZkJiYoZD0hMSxhLmNvcmUuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctem9vbS1kcmFnZ2luZ1wiKSxhLnRvdWNoZW5kWm9vbShiLGMsZSxmKSl9KX0sZi5wcm90b3R5cGUuem9vbURyYWc9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGQ9e30sZT17fSxmPSExLGc9ITEsaD0hMSxpPSExO2MuY29yZS4kc2xpZGUub24oXCJtb3VzZWRvd24ubGcuem9vbVwiLGZ1bmN0aW9uKGIpe3ZhciBlPWMuY29yZS4kc2xpZGUuZXEoYy5jb3JlLmluZGV4KS5maW5kKFwiLmxnLW9iamVjdFwiKTtpPWUub3V0ZXJIZWlnaHQoKSplLmF0dHIoXCJkYXRhLXNjYWxlXCIpPmMuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS5oZWlnaHQoKSxoPWUub3V0ZXJXaWR0aCgpKmUuYXR0cihcImRhdGEtc2NhbGVcIik+Yy5jb3JlLiRvdXRlci5maW5kKFwiLmxnXCIpLndpZHRoKCksYy5jb3JlLiRvdXRlci5oYXNDbGFzcyhcImxnLXpvb21lZFwiKSYmYShiLnRhcmdldCkuaGFzQ2xhc3MoXCJsZy1vYmplY3RcIikmJihofHxpKSYmKGIucHJldmVudERlZmF1bHQoKSxkPXt4OmIucGFnZVgseTpiLnBhZ2VZfSxmPSEwLGMuY29yZS4kb3V0ZXIuc2Nyb2xsTGVmdCs9MSxjLmNvcmUuJG91dGVyLnNjcm9sbExlZnQtPTEsYy5jb3JlLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLWdyYWJcIikuYWRkQ2xhc3MoXCJsZy1ncmFiYmluZ1wiKSl9KSxhKGIpLm9uKFwibW91c2Vtb3ZlLmxnLnpvb21cIixmdW5jdGlvbihhKXtpZihmKXt2YXIgYixqLGs9Yy5jb3JlLiRzbGlkZS5lcShjLmNvcmUuaW5kZXgpLmZpbmQoXCIubGctaW1nLXdyYXBcIik7Zz0hMCxlPXt4OmEucGFnZVgseTphLnBhZ2VZfSxjLmNvcmUuJG91dGVyLmFkZENsYXNzKFwibGctem9vbS1kcmFnZ2luZ1wiKSxqPWk/LU1hdGguYWJzKGsuYXR0cihcImRhdGEteVwiKSkrKGUueS1kLnkpOi1NYXRoLmFicyhrLmF0dHIoXCJkYXRhLXlcIikpLGI9aD8tTWF0aC5hYnMoay5hdHRyKFwiZGF0YS14XCIpKSsoZS54LWQueCk6LU1hdGguYWJzKGsuYXR0cihcImRhdGEteFwiKSksay5jc3MoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZTNkKFwiK2IrXCJweCwgXCIraitcInB4LCAwKVwiKX19KSxhKGIpLm9uKFwibW91c2V1cC5sZy56b29tXCIsZnVuY3Rpb24oYSl7ZiYmKGY9ITEsYy5jb3JlLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLXpvb20tZHJhZ2dpbmdcIiksIWd8fGQueD09PWUueCYmZC55PT09ZS55fHwoZT17eDphLnBhZ2VYLHk6YS5wYWdlWX0sYy50b3VjaGVuZFpvb20oZCxlLGgsaSkpLGc9ITEpLGMuY29yZS4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1ncmFiYmluZ1wiKS5hZGRDbGFzcyhcImxnLWdyYWJcIil9KX0sZi5wcm90b3R5cGUudG91Y2hlbmRab29tPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1lLmNvcmUuJHNsaWRlLmVxKGUuY29yZS5pbmRleCkuZmluZChcIi5sZy1pbWctd3JhcFwiKSxnPWUuY29yZS4kc2xpZGUuZXEoZS5jb3JlLmluZGV4KS5maW5kKFwiLmxnLW9iamVjdFwiKSxoPS1NYXRoLmFicyhmLmF0dHIoXCJkYXRhLXhcIikpKyhiLngtYS54KSxpPS1NYXRoLmFicyhmLmF0dHIoXCJkYXRhLXlcIikpKyhiLnktYS55KSxqPShlLmNvcmUuJG91dGVyLmZpbmQoXCIubGdcIikuaGVpZ2h0KCktZy5vdXRlckhlaWdodCgpKS8yLGs9TWF0aC5hYnMoZy5vdXRlckhlaWdodCgpKk1hdGguYWJzKGcuYXR0cihcImRhdGEtc2NhbGVcIikpLWUuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS5oZWlnaHQoKStqKSxsPShlLmNvcmUuJG91dGVyLmZpbmQoXCIubGdcIikud2lkdGgoKS1nLm91dGVyV2lkdGgoKSkvMixtPU1hdGguYWJzKGcub3V0ZXJXaWR0aCgpKk1hdGguYWJzKGcuYXR0cihcImRhdGEtc2NhbGVcIikpLWUuY29yZS4kb3V0ZXIuZmluZChcIi5sZ1wiKS53aWR0aCgpK2wpO2QmJigtaz49aT9pPS1rOmk+PS1qJiYoaT0taikpLGMmJigtbT49aD9oPS1tOmg+PS1sJiYoaD0tbCkpLGQ/Zi5hdHRyKFwiZGF0YS15XCIsTWF0aC5hYnMoaSkpOmk9LU1hdGguYWJzKGYuYXR0cihcImRhdGEteVwiKSksYz9mLmF0dHIoXCJkYXRhLXhcIixNYXRoLmFicyhoKSk6aD0tTWF0aC5hYnMoZi5hdHRyKFwiZGF0YS14XCIpKSxmLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlM2QoXCIraCtcInB4LCBcIitpK1wicHgsIDApXCIpfSxmLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGM9dGhpcztjLmNvcmUuJGVsLm9mZihcIi5sZy56b29tXCIpLGEoYikub2ZmKFwiLmxnLnpvb21cIiksYy5jb3JlLiRzbGlkZS5vZmYoXCIubGcuem9vbVwiKSxjLmNvcmUuJGVsLm9mZihcIi5sZy50bS56b29tXCIpLGMucmVzZXRab29tKCksY2xlYXJUaW1lb3V0KGMuem9vbWFibGV0aW1lb3V0KSxjLnpvb21hYmxldGltZW91dD0hMX0sYS5mbi5saWdodEdhbGxlcnkubW9kdWxlcy56b29tPWZ9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO3ZhciBlPXtoYXNoOiEwfSxmPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmNvcmU9YShjKS5kYXRhKFwibGlnaHRHYWxsZXJ5XCIpLHRoaXMuY29yZS5zPWEuZXh0ZW5kKHt9LGUsdGhpcy5jb3JlLnMpLHRoaXMuY29yZS5zLmhhc2gmJih0aGlzLm9sZEhhc2g9Yi5sb2NhdGlvbi5oYXNoLHRoaXMuaW5pdCgpKSx0aGlzfTtmLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGMsZD10aGlzO2QuY29yZS4kZWwub24oXCJvbkFmdGVyU2xpZGUubGcudG1cIixmdW5jdGlvbihhLGMsZSl7Yi5sb2NhdGlvbi5oYXNoPVwibGc9XCIrZC5jb3JlLnMuZ2FsbGVyeUlkK1wiJnNsaWRlPVwiK2V9KSxhKGIpLm9uKFwiaGFzaGNoYW5nZVwiLGZ1bmN0aW9uKCl7Yz1iLmxvY2F0aW9uLmhhc2g7dmFyIGE9cGFyc2VJbnQoYy5zcGxpdChcIiZzbGlkZT1cIilbMV0sMTApO2MuaW5kZXhPZihcImxnPVwiK2QuY29yZS5zLmdhbGxlcnlJZCk+LTE/ZC5jb3JlLnNsaWRlKGEpOmQuY29yZS5sR2FsbGVyeU9uJiZkLmNvcmUuZGVzdHJveSgpfSl9LGYucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLm9sZEhhc2gmJnRoaXMub2xkSGFzaC5pbmRleE9mKFwibGc9XCIrdGhpcy5jb3JlLnMuZ2FsbGVyeUlkKTwwP2IubG9jYXRpb24uaGFzaD10aGlzLm9sZEhhc2g6aGlzdG9yeS5wdXNoU3RhdGU/aGlzdG9yeS5wdXNoU3RhdGUoXCJcIixjLnRpdGxlLGIubG9jYXRpb24ucGF0aG5hbWUrYi5sb2NhdGlvbi5zZWFyY2gpOmIubG9jYXRpb24uaGFzaD1cIlwifSxhLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzLmhhc2g9Zn0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qXHQwOC4gT1dMIENBUk9VU0VMXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qKlxuICogT3dsIGNhcm91c2VsXG4gKiBAdmVyc2lvbiAyLjAuMFxuICogQGF1dGhvciBCYXJ0b3N6IFdvamNpZWNob3dza2lcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuICogQHRvZG8gTGF6eSBMb2FkIEljb25cbiAqIEB0b2RvIHByZXZlbnQgYW5pbWF0aW9uZW5kIGJ1YmxpbmdcbiAqIEB0b2RvIGl0ZW1zU2NhbGVVcFxuICogQHRvZG8gVGVzdCBaZXB0b1xuICogQHRvZG8gc3RhZ2VQYWRkaW5nIGNhbGN1bGF0ZSB3cm9uZyBhY3RpdmUgY2xhc3Nlc1xuICovXG4hZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShiLGMpe3RoaXMuc2V0dGluZ3M9bnVsbCx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sZS5EZWZhdWx0cyxjKSx0aGlzLiRlbGVtZW50PWEoYiksdGhpcy5kcmFnPWEuZXh0ZW5kKHt9LG0pLHRoaXMuc3RhdGU9YS5leHRlbmQoe30sbiksdGhpcy5lPWEuZXh0ZW5kKHt9LG8pLHRoaXMuX3BsdWdpbnM9e30sdGhpcy5fc3VwcmVzcz17fSx0aGlzLl9jdXJyZW50PW51bGwsdGhpcy5fc3BlZWQ9bnVsbCx0aGlzLl9jb29yZGluYXRlcz1bXSx0aGlzLl9icmVha3BvaW50PW51bGwsdGhpcy5fd2lkdGg9bnVsbCx0aGlzLl9pdGVtcz1bXSx0aGlzLl9jbG9uZXM9W10sdGhpcy5fbWVyZ2Vycz1bXSx0aGlzLl9pbnZhbGlkYXRlZD17fSx0aGlzLl9waXBlPVtdLGEuZWFjaChlLlBsdWdpbnMsYS5wcm94eShmdW5jdGlvbihhLGIpe3RoaXMuX3BsdWdpbnNbYVswXS50b0xvd2VyQ2FzZSgpK2Euc2xpY2UoMSldPW5ldyBiKHRoaXMpfSx0aGlzKSksYS5lYWNoKGUuUGlwZSxhLnByb3h5KGZ1bmN0aW9uKGIsYyl7dGhpcy5fcGlwZS5wdXNoKHtmaWx0ZXI6Yy5maWx0ZXIscnVuOmEucHJveHkoYy5ydW4sdGhpcyl9KX0sdGhpcykpLHRoaXMuc2V0dXAoKSx0aGlzLmluaXRpYWxpemUoKX1mdW5jdGlvbiBmKGEpe2lmKGEudG91Y2hlcyE9PWQpcmV0dXJue3g6YS50b3VjaGVzWzBdLnBhZ2VYLHk6YS50b3VjaGVzWzBdLnBhZ2VZfTtpZihhLnRvdWNoZXM9PT1kKXtpZihhLnBhZ2VYIT09ZClyZXR1cm57eDphLnBhZ2VYLHk6YS5wYWdlWX07aWYoYS5wYWdlWD09PWQpcmV0dXJue3g6YS5jbGllbnRYLHk6YS5jbGllbnRZfX19ZnVuY3Rpb24gZyhhKXt2YXIgYixkLGU9Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGY9YTtmb3IoYiBpbiBmKWlmKGQ9ZltiXSxcInVuZGVmaW5lZFwiIT10eXBlb2YgZS5zdHlsZVtkXSlyZXR1cm4gZT1udWxsLFtkLGJdO3JldHVyblshMV19ZnVuY3Rpb24gaCgpe3JldHVybiBnKFtcInRyYW5zaXRpb25cIixcIldlYmtpdFRyYW5zaXRpb25cIixcIk1velRyYW5zaXRpb25cIixcIk9UcmFuc2l0aW9uXCJdKVsxXX1mdW5jdGlvbiBpKCl7cmV0dXJuIGcoW1widHJhbnNmb3JtXCIsXCJXZWJraXRUcmFuc2Zvcm1cIixcIk1velRyYW5zZm9ybVwiLFwiT1RyYW5zZm9ybVwiLFwibXNUcmFuc2Zvcm1cIl0pWzBdfWZ1bmN0aW9uIGooKXtyZXR1cm4gZyhbXCJwZXJzcGVjdGl2ZVwiLFwid2Via2l0UGVyc3BlY3RpdmVcIixcIk1velBlcnNwZWN0aXZlXCIsXCJPUGVyc3BlY3RpdmVcIixcIk1zUGVyc3BlY3RpdmVcIl0pWzBdfWZ1bmN0aW9uIGsoKXtyZXR1cm5cIm9udG91Y2hzdGFydFwiaW4gYnx8ISFuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50c31mdW5jdGlvbiBsKCl7cmV0dXJuIGIubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWR9dmFyIG0sbixvO209e3N0YXJ0OjAsc3RhcnRYOjAsc3RhcnRZOjAsY3VycmVudDowLGN1cnJlbnRYOjAsY3VycmVudFk6MCxvZmZzZXRYOjAsb2Zmc2V0WTowLGRpc3RhbmNlOm51bGwsc3RhcnRUaW1lOjAsZW5kVGltZTowLHVwZGF0ZWRYOjAsdGFyZ2V0RWw6bnVsbH0sbj17aXNUb3VjaDohMSxpc1Njcm9sbGluZzohMSxpc1N3aXBpbmc6ITEsZGlyZWN0aW9uOiExLGluTW90aW9uOiExfSxvPXtfb25EcmFnU3RhcnQ6bnVsbCxfb25EcmFnTW92ZTpudWxsLF9vbkRyYWdFbmQ6bnVsbCxfdHJhbnNpdGlvbkVuZDpudWxsLF9yZXNpemVyOm51bGwsX3Jlc3BvbnNpdmVDYWxsOm51bGwsX2dvVG9Mb29wOm51bGwsX2NoZWNrVmlzaWJpbGU6bnVsbH0sZS5EZWZhdWx0cz17aXRlbXM6Myxsb29wOiExLGNlbnRlcjohMSxtb3VzZURyYWc6ITAsdG91Y2hEcmFnOiEwLHB1bGxEcmFnOiEwLGZyZWVEcmFnOiExLG1hcmdpbjowLHN0YWdlUGFkZGluZzowLG1lcmdlOiExLG1lcmdlRml0OiEwLGF1dG9XaWR0aDohMSxzdGFydFBvc2l0aW9uOjAscnRsOiExLHNtYXJ0U3BlZWQ6MjUwLGZsdWlkU3BlZWQ6ITEsZHJhZ0VuZFNwZWVkOiExLHJlc3BvbnNpdmU6e30scmVzcG9uc2l2ZVJlZnJlc2hSYXRlOjIwMCxyZXNwb25zaXZlQmFzZUVsZW1lbnQ6YixyZXNwb25zaXZlQ2xhc3M6ITEsZmFsbGJhY2tFYXNpbmc6XCJzd2luZ1wiLGluZm86ITEsbmVzdGVkSXRlbVNlbGVjdG9yOiExLGl0ZW1FbGVtZW50OlwiZGl2XCIsc3RhZ2VFbGVtZW50OlwiZGl2XCIsdGhlbWVDbGFzczpcIm93bC10aGVtZVwiLGJhc2VDbGFzczpcIm93bC1jYXJvdXNlbFwiLGl0ZW1DbGFzczpcIm93bC1pdGVtXCIsY2VudGVyQ2xhc3M6XCJjZW50ZXJcIixhY3RpdmVDbGFzczpcImFjdGl2ZVwifSxlLldpZHRoPXtEZWZhdWx0OlwiZGVmYXVsdFwiLElubmVyOlwiaW5uZXJcIixPdXRlcjpcIm91dGVyXCJ9LGUuUGx1Z2lucz17fSxlLlBpcGU9W3tmaWx0ZXI6W1wid2lkdGhcIixcIml0ZW1zXCIsXCJzZXR0aW5nc1wiXSxydW46ZnVuY3Rpb24oYSl7YS5jdXJyZW50PXRoaXMuX2l0ZW1zJiZ0aGlzLl9pdGVtc1t0aGlzLnJlbGF0aXZlKHRoaXMuX2N1cnJlbnQpXX19LHtmaWx0ZXI6W1wiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2Nsb25lcyxiPXRoaXMuJHN0YWdlLmNoaWxkcmVuKFwiLmNsb25lZFwiKTsoYi5sZW5ndGghPT1hLmxlbmd0aHx8IXRoaXMuc2V0dGluZ3MubG9vcCYmYS5sZW5ndGg+MCkmJih0aGlzLiRzdGFnZS5jaGlsZHJlbihcIi5jbG9uZWRcIikucmVtb3ZlKCksdGhpcy5fY2xvbmVzPVtdKX19LHtmaWx0ZXI6W1wiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzLl9jbG9uZXMsZD10aGlzLl9pdGVtcyxlPXRoaXMuc2V0dGluZ3MubG9vcD9jLmxlbmd0aC1NYXRoLm1heCgyKnRoaXMuc2V0dGluZ3MuaXRlbXMsNCk6MDtmb3IoYT0wLGI9TWF0aC5hYnMoZS8yKTtiPmE7YSsrKWU+MD8odGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5lcShkLmxlbmd0aCtjLmxlbmd0aC0xKS5yZW1vdmUoKSxjLnBvcCgpLHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkuZXEoMCkucmVtb3ZlKCksYy5wb3AoKSk6KGMucHVzaChjLmxlbmd0aC8yKSx0aGlzLiRzdGFnZS5hcHBlbmQoZFtjW2MubGVuZ3RoLTFdXS5jbG9uZSgpLmFkZENsYXNzKFwiY2xvbmVkXCIpKSxjLnB1c2goZC5sZW5ndGgtMS0oYy5sZW5ndGgtMSkvMiksdGhpcy4kc3RhZ2UucHJlcGVuZChkW2NbYy5sZW5ndGgtMV1dLmNsb25lKCkuYWRkQ2xhc3MoXCJjbG9uZWRcIikpKX19LHtmaWx0ZXI6W1wid2lkdGhcIixcIml0ZW1zXCIsXCJzZXR0aW5nc1wiXSxydW46ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZD10aGlzLnNldHRpbmdzLnJ0bD8xOi0xLGU9KHRoaXMud2lkdGgoKS90aGlzLnNldHRpbmdzLml0ZW1zKS50b0ZpeGVkKCksZj0wO2Zvcih0aGlzLl9jb29yZGluYXRlcz1bXSxiPTAsYz10aGlzLl9jbG9uZXMubGVuZ3RoK3RoaXMuX2l0ZW1zLmxlbmd0aDtjPmI7YisrKWE9dGhpcy5fbWVyZ2Vyc1t0aGlzLnJlbGF0aXZlKGIpXSxhPXRoaXMuc2V0dGluZ3MubWVyZ2VGaXQmJk1hdGgubWluKGEsdGhpcy5zZXR0aW5ncy5pdGVtcyl8fGEsZis9KHRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoP3RoaXMuX2l0ZW1zW3RoaXMucmVsYXRpdmUoYildLndpZHRoKCkrdGhpcy5zZXR0aW5ncy5tYXJnaW46ZSphKSpkLHRoaXMuX2Nvb3JkaW5hdGVzLnB1c2goZil9fSx7ZmlsdGVyOltcIndpZHRoXCIsXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKCl7dmFyIGIsYyxkPSh0aGlzLndpZHRoKCkvdGhpcy5zZXR0aW5ncy5pdGVtcykudG9GaXhlZCgpLGU9e3dpZHRoOk1hdGguYWJzKHRoaXMuX2Nvb3JkaW5hdGVzW3RoaXMuX2Nvb3JkaW5hdGVzLmxlbmd0aC0xXSkrMip0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZyxcInBhZGRpbmctbGVmdFwiOnRoaXMuc2V0dGluZ3Muc3RhZ2VQYWRkaW5nfHxcIlwiLFwicGFkZGluZy1yaWdodFwiOnRoaXMuc2V0dGluZ3Muc3RhZ2VQYWRkaW5nfHxcIlwifTtpZih0aGlzLiRzdGFnZS5jc3MoZSksZT17d2lkdGg6dGhpcy5zZXR0aW5ncy5hdXRvV2lkdGg/XCJhdXRvXCI6ZC10aGlzLnNldHRpbmdzLm1hcmdpbn0sZVt0aGlzLnNldHRpbmdzLnJ0bD9cIm1hcmdpbi1sZWZ0XCI6XCJtYXJnaW4tcmlnaHRcIl09dGhpcy5zZXR0aW5ncy5tYXJnaW4sIXRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoJiZhLmdyZXAodGhpcy5fbWVyZ2VycyxmdW5jdGlvbihhKXtyZXR1cm4gYT4xfSkubGVuZ3RoPjApZm9yKGI9MCxjPXRoaXMuX2Nvb3JkaW5hdGVzLmxlbmd0aDtjPmI7YisrKWUud2lkdGg9TWF0aC5hYnModGhpcy5fY29vcmRpbmF0ZXNbYl0pLU1hdGguYWJzKHRoaXMuX2Nvb3JkaW5hdGVzW2ItMV18fDApLXRoaXMuc2V0dGluZ3MubWFyZ2luLHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkuZXEoYikuY3NzKGUpO2Vsc2UgdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5jc3MoZSl9fSx7ZmlsdGVyOltcIndpZHRoXCIsXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKGEpe2EuY3VycmVudCYmdGhpcy5yZXNldCh0aGlzLiRzdGFnZS5jaGlsZHJlbigpLmluZGV4KGEuY3VycmVudCkpfX0se2ZpbHRlcjpbXCJwb3NpdGlvblwiXSxydW46ZnVuY3Rpb24oKXt0aGlzLmFuaW1hdGUodGhpcy5jb29yZGluYXRlcyh0aGlzLl9jdXJyZW50KSl9fSx7ZmlsdGVyOltcIndpZHRoXCIsXCJwb3NpdGlvblwiLFwiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbigpe3ZhciBhLGIsYyxkLGU9dGhpcy5zZXR0aW5ncy5ydGw/MTotMSxmPTIqdGhpcy5zZXR0aW5ncy5zdGFnZVBhZGRpbmcsZz10aGlzLmNvb3JkaW5hdGVzKHRoaXMuY3VycmVudCgpKStmLGg9Zyt0aGlzLndpZHRoKCkqZSxpPVtdO2ZvcihjPTAsZD10aGlzLl9jb29yZGluYXRlcy5sZW5ndGg7ZD5jO2MrKylhPXRoaXMuX2Nvb3JkaW5hdGVzW2MtMV18fDAsYj1NYXRoLmFicyh0aGlzLl9jb29yZGluYXRlc1tjXSkrZiplLCh0aGlzLm9wKGEsXCI8PVwiLGcpJiZ0aGlzLm9wKGEsXCI+XCIsaCl8fHRoaXMub3AoYixcIjxcIixnKSYmdGhpcy5vcChiLFwiPlwiLGgpKSYmaS5wdXNoKGMpO3RoaXMuJHN0YWdlLmNoaWxkcmVuKFwiLlwiK3RoaXMuc2V0dGluZ3MuYWN0aXZlQ2xhc3MpLnJlbW92ZUNsYXNzKHRoaXMuc2V0dGluZ3MuYWN0aXZlQ2xhc3MpLHRoaXMuJHN0YWdlLmNoaWxkcmVuKFwiOmVxKFwiK2kuam9pbihcIiksIDplcShcIikrXCIpXCIpLmFkZENsYXNzKHRoaXMuc2V0dGluZ3MuYWN0aXZlQ2xhc3MpLHRoaXMuc2V0dGluZ3MuY2VudGVyJiYodGhpcy4kc3RhZ2UuY2hpbGRyZW4oXCIuXCIrdGhpcy5zZXR0aW5ncy5jZW50ZXJDbGFzcykucmVtb3ZlQ2xhc3ModGhpcy5zZXR0aW5ncy5jZW50ZXJDbGFzcyksdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLmN1cnJlbnQoKSkuYWRkQ2xhc3ModGhpcy5zZXR0aW5ncy5jZW50ZXJDbGFzcykpfX1dLGUucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXtpZih0aGlzLnRyaWdnZXIoXCJpbml0aWFsaXplXCIpLHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3ModGhpcy5zZXR0aW5ncy5iYXNlQ2xhc3MpLmFkZENsYXNzKHRoaXMuc2V0dGluZ3MudGhlbWVDbGFzcykudG9nZ2xlQ2xhc3MoXCJvd2wtcnRsXCIsdGhpcy5zZXR0aW5ncy5ydGwpLHRoaXMuYnJvd3NlclN1cHBvcnQoKSx0aGlzLnNldHRpbmdzLmF1dG9XaWR0aCYmdGhpcy5zdGF0ZS5pbWFnZXNMb2FkZWQhPT0hMCl7dmFyIGIsYyxlO2lmKGI9dGhpcy4kZWxlbWVudC5maW5kKFwiaW1nXCIpLGM9dGhpcy5zZXR0aW5ncy5uZXN0ZWRJdGVtU2VsZWN0b3I/XCIuXCIrdGhpcy5zZXR0aW5ncy5uZXN0ZWRJdGVtU2VsZWN0b3I6ZCxlPXRoaXMuJGVsZW1lbnQuY2hpbGRyZW4oYykud2lkdGgoKSxiLmxlbmd0aCYmMD49ZSlyZXR1cm4gdGhpcy5wcmVsb2FkQXV0b1dpZHRoSW1hZ2VzKGIpLCExfXRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoXCJvd2wtbG9hZGluZ1wiKSx0aGlzLiRzdGFnZT1hKFwiPFwiK3RoaXMuc2V0dGluZ3Muc3RhZ2VFbGVtZW50KycgY2xhc3M9XCJvd2wtc3RhZ2VcIi8+Jykud3JhcCgnPGRpdiBjbGFzcz1cIm93bC1zdGFnZS1vdXRlclwiPicpLHRoaXMuJGVsZW1lbnQuYXBwZW5kKHRoaXMuJHN0YWdlLnBhcmVudCgpKSx0aGlzLnJlcGxhY2UodGhpcy4kZWxlbWVudC5jaGlsZHJlbigpLm5vdCh0aGlzLiRzdGFnZS5wYXJlbnQoKSkpLHRoaXMuX3dpZHRoPXRoaXMuJGVsZW1lbnQud2lkdGgoKSx0aGlzLnJlZnJlc2goKSx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwib3dsLWxvYWRpbmdcIikuYWRkQ2xhc3MoXCJvd2wtbG9hZGVkXCIpLHRoaXMuZXZlbnRzQ2FsbCgpLHRoaXMuaW50ZXJuYWxFdmVudHMoKSx0aGlzLmFkZFRyaWdnZXJhYmxlRXZlbnRzKCksdGhpcy50cmlnZ2VyKFwiaW5pdGlhbGl6ZWRcIil9LGUucHJvdG90eXBlLnNldHVwPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy52aWV3cG9ydCgpLGM9dGhpcy5vcHRpb25zLnJlc3BvbnNpdmUsZD0tMSxlPW51bGw7Yz8oYS5lYWNoKGMsZnVuY3Rpb24oYSl7Yj49YSYmYT5kJiYoZD1OdW1iZXIoYSkpfSksZT1hLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMsY1tkXSksZGVsZXRlIGUucmVzcG9uc2l2ZSxlLnJlc3BvbnNpdmVDbGFzcyYmdGhpcy4kZWxlbWVudC5hdHRyKFwiY2xhc3NcIixmdW5jdGlvbihhLGIpe3JldHVybiBiLnJlcGxhY2UoL1xcYiBvd2wtcmVzcG9uc2l2ZS1cXFMrL2csXCJcIil9KS5hZGRDbGFzcyhcIm93bC1yZXNwb25zaXZlLVwiK2QpKTplPWEuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyksKG51bGw9PT10aGlzLnNldHRpbmdzfHx0aGlzLl9icmVha3BvaW50IT09ZCkmJih0aGlzLnRyaWdnZXIoXCJjaGFuZ2VcIix7cHJvcGVydHk6e25hbWU6XCJzZXR0aW5nc1wiLHZhbHVlOmV9fSksdGhpcy5fYnJlYWtwb2ludD1kLHRoaXMuc2V0dGluZ3M9ZSx0aGlzLmludmFsaWRhdGUoXCJzZXR0aW5nc1wiKSx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse3Byb3BlcnR5OntuYW1lOlwic2V0dGluZ3NcIix2YWx1ZTp0aGlzLnNldHRpbmdzfX0pKX0sZS5wcm90b3R5cGUub3B0aW9uc0xvZ2ljPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcyhcIm93bC1jZW50ZXJcIix0aGlzLnNldHRpbmdzLmNlbnRlciksdGhpcy5zZXR0aW5ncy5sb29wJiZ0aGlzLl9pdGVtcy5sZW5ndGg8dGhpcy5zZXR0aW5ncy5pdGVtcyYmKHRoaXMuc2V0dGluZ3MubG9vcD0hMSksdGhpcy5zZXR0aW5ncy5hdXRvV2lkdGgmJih0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZz0hMSx0aGlzLnNldHRpbmdzLm1lcmdlPSExKX0sZS5wcm90b3R5cGUucHJlcGFyZT1mdW5jdGlvbihiKXt2YXIgYz10aGlzLnRyaWdnZXIoXCJwcmVwYXJlXCIse2NvbnRlbnQ6Yn0pO3JldHVybiBjLmRhdGF8fChjLmRhdGE9YShcIjxcIit0aGlzLnNldHRpbmdzLml0ZW1FbGVtZW50K1wiLz5cIikuYWRkQ2xhc3ModGhpcy5zZXR0aW5ncy5pdGVtQ2xhc3MpLmFwcGVuZChiKSksdGhpcy50cmlnZ2VyKFwicHJlcGFyZWRcIix7Y29udGVudDpjLmRhdGF9KSxjLmRhdGF9LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe2Zvcih2YXIgYj0wLGM9dGhpcy5fcGlwZS5sZW5ndGgsZD1hLnByb3h5KGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzW2FdfSx0aGlzLl9pbnZhbGlkYXRlZCksZT17fTtjPmI7KSh0aGlzLl9pbnZhbGlkYXRlZC5hbGx8fGEuZ3JlcCh0aGlzLl9waXBlW2JdLmZpbHRlcixkKS5sZW5ndGg+MCkmJnRoaXMuX3BpcGVbYl0ucnVuKGUpLGIrKzt0aGlzLl9pbnZhbGlkYXRlZD17fX0sZS5wcm90b3R5cGUud2lkdGg9ZnVuY3Rpb24oYSl7c3dpdGNoKGE9YXx8ZS5XaWR0aC5EZWZhdWx0KXtjYXNlIGUuV2lkdGguSW5uZXI6Y2FzZSBlLldpZHRoLk91dGVyOnJldHVybiB0aGlzLl93aWR0aDtkZWZhdWx0OnJldHVybiB0aGlzLl93aWR0aC0yKnRoaXMuc2V0dGluZ3Muc3RhZ2VQYWRkaW5nK3RoaXMuc2V0dGluZ3MubWFyZ2lufX0sZS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbigpe2lmKDA9PT10aGlzLl9pdGVtcy5sZW5ndGgpcmV0dXJuITE7KG5ldyBEYXRlKS5nZXRUaW1lKCk7dGhpcy50cmlnZ2VyKFwicmVmcmVzaFwiKSx0aGlzLnNldHVwKCksdGhpcy5vcHRpb25zTG9naWMoKSx0aGlzLiRzdGFnZS5hZGRDbGFzcyhcIm93bC1yZWZyZXNoXCIpLHRoaXMudXBkYXRlKCksdGhpcy4kc3RhZ2UucmVtb3ZlQ2xhc3MoXCJvd2wtcmVmcmVzaFwiKSx0aGlzLnN0YXRlLm9yaWVudGF0aW9uPWIub3JpZW50YXRpb24sdGhpcy53YXRjaFZpc2liaWxpdHkoKSx0aGlzLnRyaWdnZXIoXCJyZWZyZXNoZWRcIil9LGUucHJvdG90eXBlLmV2ZW50c0NhbGw9ZnVuY3Rpb24oKXt0aGlzLmUuX29uRHJhZ1N0YXJ0PWEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5vbkRyYWdTdGFydChhKX0sdGhpcyksdGhpcy5lLl9vbkRyYWdNb3ZlPWEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5vbkRyYWdNb3ZlKGEpfSx0aGlzKSx0aGlzLmUuX29uRHJhZ0VuZD1hLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMub25EcmFnRW5kKGEpfSx0aGlzKSx0aGlzLmUuX29uUmVzaXplPWEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5vblJlc2l6ZShhKX0sdGhpcyksdGhpcy5lLl90cmFuc2l0aW9uRW5kPWEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy50cmFuc2l0aW9uRW5kKGEpfSx0aGlzKSx0aGlzLmUuX3ByZXZlbnRDbGljaz1hLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMucHJldmVudENsaWNrKGEpfSx0aGlzKX0sZS5wcm90b3R5cGUub25UaHJvdHRsZWRSZXNpemU9ZnVuY3Rpb24oKXtiLmNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVyKSx0aGlzLnJlc2l6ZVRpbWVyPWIuc2V0VGltZW91dCh0aGlzLmUuX29uUmVzaXplLHRoaXMuc2V0dGluZ3MucmVzcG9uc2l2ZVJlZnJlc2hSYXRlKX0sZS5wcm90b3R5cGUub25SZXNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RoP3RoaXMuX3dpZHRoPT09dGhpcy4kZWxlbWVudC53aWR0aCgpPyExOnRoaXMudHJpZ2dlcihcInJlc2l6ZVwiKS5pc0RlZmF1bHRQcmV2ZW50ZWQoKT8hMToodGhpcy5fd2lkdGg9dGhpcy4kZWxlbWVudC53aWR0aCgpLHRoaXMuaW52YWxpZGF0ZShcIndpZHRoXCIpLHRoaXMucmVmcmVzaCgpLHZvaWQgdGhpcy50cmlnZ2VyKFwicmVzaXplZFwiKSk6ITF9LGUucHJvdG90eXBlLmV2ZW50c1JvdXRlcj1mdW5jdGlvbihhKXt2YXIgYj1hLnR5cGU7XCJtb3VzZWRvd25cIj09PWJ8fFwidG91Y2hzdGFydFwiPT09Yj90aGlzLm9uRHJhZ1N0YXJ0KGEpOlwibW91c2Vtb3ZlXCI9PT1ifHxcInRvdWNobW92ZVwiPT09Yj90aGlzLm9uRHJhZ01vdmUoYSk6XCJtb3VzZXVwXCI9PT1ifHxcInRvdWNoZW5kXCI9PT1iP3RoaXMub25EcmFnRW5kKGEpOlwidG91Y2hjYW5jZWxcIj09PWImJnRoaXMub25EcmFnRW5kKGEpfSxlLnByb3RvdHlwZS5pbnRlcm5hbEV2ZW50cz1mdW5jdGlvbigpe3ZhciBjPShrKCksbCgpKTt0aGlzLnNldHRpbmdzLm1vdXNlRHJhZz8odGhpcy4kc3RhZ2Uub24oXCJtb3VzZWRvd25cIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzUm91dGVyKGEpfSx0aGlzKSksdGhpcy4kc3RhZ2Uub24oXCJkcmFnc3RhcnRcIixmdW5jdGlvbigpe3JldHVybiExfSksdGhpcy4kc3RhZ2UuZ2V0KDApLm9uc2VsZWN0c3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0pOnRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoXCJvd2wtdGV4dC1zZWxlY3Qtb25cIiksdGhpcy5zZXR0aW5ncy50b3VjaERyYWcmJiFjJiZ0aGlzLiRzdGFnZS5vbihcInRvdWNoc3RhcnQgdG91Y2hjYW5jZWxcIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzUm91dGVyKGEpfSx0aGlzKSksdGhpcy50cmFuc2l0aW9uRW5kVmVuZG9yJiZ0aGlzLm9uKHRoaXMuJHN0YWdlLmdldCgwKSx0aGlzLnRyYW5zaXRpb25FbmRWZW5kb3IsdGhpcy5lLl90cmFuc2l0aW9uRW5kLCExKSx0aGlzLnNldHRpbmdzLnJlc3BvbnNpdmUhPT0hMSYmdGhpcy5vbihiLFwicmVzaXplXCIsYS5wcm94eSh0aGlzLm9uVGhyb3R0bGVkUmVzaXplLHRoaXMpKX0sZS5wcm90b3R5cGUub25EcmFnU3RhcnQ9ZnVuY3Rpb24oZCl7dmFyIGUsZyxoLGk7aWYoZT1kLm9yaWdpbmFsRXZlbnR8fGR8fGIuZXZlbnQsMz09PWUud2hpY2h8fHRoaXMuc3RhdGUuaXNUb3VjaClyZXR1cm4hMTtpZihcIm1vdXNlZG93blwiPT09ZS50eXBlJiZ0aGlzLiRzdGFnZS5hZGRDbGFzcyhcIm93bC1ncmFiXCIpLHRoaXMudHJpZ2dlcihcImRyYWdcIiksdGhpcy5kcmFnLnN0YXJ0VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSx0aGlzLnNwZWVkKDApLHRoaXMuc3RhdGUuaXNUb3VjaD0hMCx0aGlzLnN0YXRlLmlzU2Nyb2xsaW5nPSExLHRoaXMuc3RhdGUuaXNTd2lwaW5nPSExLHRoaXMuZHJhZy5kaXN0YW5jZT0wLGc9ZihlKS54LGg9ZihlKS55LHRoaXMuZHJhZy5vZmZzZXRYPXRoaXMuJHN0YWdlLnBvc2l0aW9uKCkubGVmdCx0aGlzLmRyYWcub2Zmc2V0WT10aGlzLiRzdGFnZS5wb3NpdGlvbigpLnRvcCx0aGlzLnNldHRpbmdzLnJ0bCYmKHRoaXMuZHJhZy5vZmZzZXRYPXRoaXMuJHN0YWdlLnBvc2l0aW9uKCkubGVmdCt0aGlzLiRzdGFnZS53aWR0aCgpLXRoaXMud2lkdGgoKSt0aGlzLnNldHRpbmdzLm1hcmdpbiksdGhpcy5zdGF0ZS5pbk1vdGlvbiYmdGhpcy5zdXBwb3J0M2QpaT10aGlzLmdldFRyYW5zZm9ybVByb3BlcnR5KCksdGhpcy5kcmFnLm9mZnNldFg9aSx0aGlzLmFuaW1hdGUoaSksdGhpcy5zdGF0ZS5pbk1vdGlvbj0hMDtlbHNlIGlmKHRoaXMuc3RhdGUuaW5Nb3Rpb24mJiF0aGlzLnN1cHBvcnQzZClyZXR1cm4gdGhpcy5zdGF0ZS5pbk1vdGlvbj0hMSwhMTt0aGlzLmRyYWcuc3RhcnRYPWctdGhpcy5kcmFnLm9mZnNldFgsdGhpcy5kcmFnLnN0YXJ0WT1oLXRoaXMuZHJhZy5vZmZzZXRZLHRoaXMuZHJhZy5zdGFydD1nLXRoaXMuZHJhZy5zdGFydFgsdGhpcy5kcmFnLnRhcmdldEVsPWUudGFyZ2V0fHxlLnNyY0VsZW1lbnQsdGhpcy5kcmFnLnVwZGF0ZWRYPXRoaXMuZHJhZy5zdGFydCwoXCJJTUdcIj09PXRoaXMuZHJhZy50YXJnZXRFbC50YWdOYW1lfHxcIkFcIj09PXRoaXMuZHJhZy50YXJnZXRFbC50YWdOYW1lKSYmKHRoaXMuZHJhZy50YXJnZXRFbC5kcmFnZ2FibGU9ITEpLGEoYykub24oXCJtb3VzZW1vdmUub3dsLmRyYWdFdmVudHMgbW91c2V1cC5vd2wuZHJhZ0V2ZW50cyB0b3VjaG1vdmUub3dsLmRyYWdFdmVudHMgdG91Y2hlbmQub3dsLmRyYWdFdmVudHNcIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzUm91dGVyKGEpfSx0aGlzKSl9LGUucHJvdG90eXBlLm9uRHJhZ01vdmU9ZnVuY3Rpb24oYSl7dmFyIGMsZSxnLGgsaSxqO3RoaXMuc3RhdGUuaXNUb3VjaCYmKHRoaXMuc3RhdGUuaXNTY3JvbGxpbmd8fChjPWEub3JpZ2luYWxFdmVudHx8YXx8Yi5ldmVudCxlPWYoYykueCxnPWYoYykueSx0aGlzLmRyYWcuY3VycmVudFg9ZS10aGlzLmRyYWcuc3RhcnRYLHRoaXMuZHJhZy5jdXJyZW50WT1nLXRoaXMuZHJhZy5zdGFydFksdGhpcy5kcmFnLmRpc3RhbmNlPXRoaXMuZHJhZy5jdXJyZW50WC10aGlzLmRyYWcub2Zmc2V0WCx0aGlzLmRyYWcuZGlzdGFuY2U8MD90aGlzLnN0YXRlLmRpcmVjdGlvbj10aGlzLnNldHRpbmdzLnJ0bD9cInJpZ2h0XCI6XCJsZWZ0XCI6dGhpcy5kcmFnLmRpc3RhbmNlPjAmJih0aGlzLnN0YXRlLmRpcmVjdGlvbj10aGlzLnNldHRpbmdzLnJ0bD9cImxlZnRcIjpcInJpZ2h0XCIpLHRoaXMuc2V0dGluZ3MubG9vcD90aGlzLm9wKHRoaXMuZHJhZy5jdXJyZW50WCxcIj5cIix0aGlzLmNvb3JkaW5hdGVzKHRoaXMubWluaW11bSgpKSkmJlwicmlnaHRcIj09PXRoaXMuc3RhdGUuZGlyZWN0aW9uP3RoaXMuZHJhZy5jdXJyZW50WC09KHRoaXMuc2V0dGluZ3MuY2VudGVyJiZ0aGlzLmNvb3JkaW5hdGVzKDApKS10aGlzLmNvb3JkaW5hdGVzKHRoaXMuX2l0ZW1zLmxlbmd0aCk6dGhpcy5vcCh0aGlzLmRyYWcuY3VycmVudFgsXCI8XCIsdGhpcy5jb29yZGluYXRlcyh0aGlzLm1heGltdW0oKSkpJiZcImxlZnRcIj09PXRoaXMuc3RhdGUuZGlyZWN0aW9uJiYodGhpcy5kcmFnLmN1cnJlbnRYKz0odGhpcy5zZXR0aW5ncy5jZW50ZXImJnRoaXMuY29vcmRpbmF0ZXMoMCkpLXRoaXMuY29vcmRpbmF0ZXModGhpcy5faXRlbXMubGVuZ3RoKSk6KGg9dGhpcy5jb29yZGluYXRlcyh0aGlzLnNldHRpbmdzLnJ0bD90aGlzLm1heGltdW0oKTp0aGlzLm1pbmltdW0oKSksaT10aGlzLmNvb3JkaW5hdGVzKHRoaXMuc2V0dGluZ3MucnRsP3RoaXMubWluaW11bSgpOnRoaXMubWF4aW11bSgpKSxqPXRoaXMuc2V0dGluZ3MucHVsbERyYWc/dGhpcy5kcmFnLmRpc3RhbmNlLzU6MCx0aGlzLmRyYWcuY3VycmVudFg9TWF0aC5tYXgoTWF0aC5taW4odGhpcy5kcmFnLmN1cnJlbnRYLGgraiksaStqKSksKHRoaXMuZHJhZy5kaXN0YW5jZT44fHx0aGlzLmRyYWcuZGlzdGFuY2U8LTgpJiYoYy5wcmV2ZW50RGVmYXVsdCE9PWQ/Yy5wcmV2ZW50RGVmYXVsdCgpOmMucmV0dXJuVmFsdWU9ITEsdGhpcy5zdGF0ZS5pc1N3aXBpbmc9ITApLHRoaXMuZHJhZy51cGRhdGVkWD10aGlzLmRyYWcuY3VycmVudFgsKHRoaXMuZHJhZy5jdXJyZW50WT4xNnx8dGhpcy5kcmFnLmN1cnJlbnRZPC0xNikmJnRoaXMuc3RhdGUuaXNTd2lwaW5nPT09ITEmJih0aGlzLnN0YXRlLmlzU2Nyb2xsaW5nPSEwLHRoaXMuZHJhZy51cGRhdGVkWD10aGlzLmRyYWcuc3RhcnQpLHRoaXMuYW5pbWF0ZSh0aGlzLmRyYWcudXBkYXRlZFgpKSl9LGUucHJvdG90eXBlLm9uRHJhZ0VuZD1mdW5jdGlvbihiKXt2YXIgZCxlLGY7aWYodGhpcy5zdGF0ZS5pc1RvdWNoKXtpZihcIm1vdXNldXBcIj09PWIudHlwZSYmdGhpcy4kc3RhZ2UucmVtb3ZlQ2xhc3MoXCJvd2wtZ3JhYlwiKSx0aGlzLnRyaWdnZXIoXCJkcmFnZ2VkXCIpLHRoaXMuZHJhZy50YXJnZXRFbC5yZW1vdmVBdHRyaWJ1dGUoXCJkcmFnZ2FibGVcIiksdGhpcy5zdGF0ZS5pc1RvdWNoPSExLHRoaXMuc3RhdGUuaXNTY3JvbGxpbmc9ITEsdGhpcy5zdGF0ZS5pc1N3aXBpbmc9ITEsMD09PXRoaXMuZHJhZy5kaXN0YW5jZSYmdGhpcy5zdGF0ZS5pbk1vdGlvbiE9PSEwKXJldHVybiB0aGlzLnN0YXRlLmluTW90aW9uPSExLCExO3RoaXMuZHJhZy5lbmRUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGQ9dGhpcy5kcmFnLmVuZFRpbWUtdGhpcy5kcmFnLnN0YXJ0VGltZSxlPU1hdGguYWJzKHRoaXMuZHJhZy5kaXN0YW5jZSksKGU+M3x8ZD4zMDApJiZ0aGlzLnJlbW92ZUNsaWNrKHRoaXMuZHJhZy50YXJnZXRFbCksZj10aGlzLmNsb3Nlc3QodGhpcy5kcmFnLnVwZGF0ZWRYKSx0aGlzLnNwZWVkKHRoaXMuc2V0dGluZ3MuZHJhZ0VuZFNwZWVkfHx0aGlzLnNldHRpbmdzLnNtYXJ0U3BlZWQpLHRoaXMuY3VycmVudChmKSx0aGlzLmludmFsaWRhdGUoXCJwb3NpdGlvblwiKSx0aGlzLnVwZGF0ZSgpLHRoaXMuc2V0dGluZ3MucHVsbERyYWd8fHRoaXMuZHJhZy51cGRhdGVkWCE9PXRoaXMuY29vcmRpbmF0ZXMoZil8fHRoaXMudHJhbnNpdGlvbkVuZCgpLHRoaXMuZHJhZy5kaXN0YW5jZT0wLGEoYykub2ZmKFwiLm93bC5kcmFnRXZlbnRzXCIpfX0sZS5wcm90b3R5cGUucmVtb3ZlQ2xpY2s9ZnVuY3Rpb24oYyl7dGhpcy5kcmFnLnRhcmdldEVsPWMsYShjKS5vbihcImNsaWNrLnByZXZlbnRDbGlja1wiLHRoaXMuZS5fcHJldmVudENsaWNrKSxiLnNldFRpbWVvdXQoZnVuY3Rpb24oKXthKGMpLm9mZihcImNsaWNrLnByZXZlbnRDbGlja1wiKX0sMzAwKX0sZS5wcm90b3R5cGUucHJldmVudENsaWNrPWZ1bmN0aW9uKGIpe2IucHJldmVudERlZmF1bHQ/Yi5wcmV2ZW50RGVmYXVsdCgpOmIucmV0dXJuVmFsdWU9ITEsYi5zdG9wUHJvcGFnYXRpb24mJmIuc3RvcFByb3BhZ2F0aW9uKCksYShiLnRhcmdldCkub2ZmKFwiY2xpY2sucHJldmVudENsaWNrXCIpfSxlLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm1Qcm9wZXJ0eT1mdW5jdGlvbigpe3ZhciBhLGM7cmV0dXJuIGE9Yi5nZXRDb21wdXRlZFN0eWxlKHRoaXMuJHN0YWdlLmdldCgwKSxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKHRoaXMudmVuZG9yTmFtZStcInRyYW5zZm9ybVwiKSxhPWEucmVwbGFjZSgvbWF0cml4KDNkKT9cXCh8XFwpL2csXCJcIikuc3BsaXQoXCIsXCIpLGM9MTY9PT1hLmxlbmd0aCxjIT09ITA/YVs0XTphWzEyXX0sZS5wcm90b3R5cGUuY2xvc2VzdD1mdW5jdGlvbihiKXt2YXIgYz0tMSxkPTMwLGU9dGhpcy53aWR0aCgpLGY9dGhpcy5jb29yZGluYXRlcygpO3JldHVybiB0aGlzLnNldHRpbmdzLmZyZWVEcmFnfHxhLmVhY2goZixhLnByb3h5KGZ1bmN0aW9uKGEsZyl7cmV0dXJuIGI+Zy1kJiZnK2Q+Yj9jPWE6dGhpcy5vcChiLFwiPFwiLGcpJiZ0aGlzLm9wKGIsXCI+XCIsZlthKzFdfHxnLWUpJiYoYz1cImxlZnRcIj09PXRoaXMuc3RhdGUuZGlyZWN0aW9uP2ErMTphKSwtMT09PWN9LHRoaXMpKSx0aGlzLnNldHRpbmdzLmxvb3B8fCh0aGlzLm9wKGIsXCI+XCIsZlt0aGlzLm1pbmltdW0oKV0pP2M9Yj10aGlzLm1pbmltdW0oKTp0aGlzLm9wKGIsXCI8XCIsZlt0aGlzLm1heGltdW0oKV0pJiYoYz1iPXRoaXMubWF4aW11bSgpKSksY30sZS5wcm90b3R5cGUuYW5pbWF0ZT1mdW5jdGlvbihiKXt0aGlzLnRyaWdnZXIoXCJ0cmFuc2xhdGVcIiksdGhpcy5zdGF0ZS5pbk1vdGlvbj10aGlzLnNwZWVkKCk+MCx0aGlzLnN1cHBvcnQzZD90aGlzLiRzdGFnZS5jc3Moe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK2IrXCJweCwwcHgsIDBweClcIix0cmFuc2l0aW9uOnRoaXMuc3BlZWQoKS8xZTMrXCJzXCJ9KTp0aGlzLnN0YXRlLmlzVG91Y2g/dGhpcy4kc3RhZ2UuY3NzKHtsZWZ0OmIrXCJweFwifSk6dGhpcy4kc3RhZ2UuYW5pbWF0ZSh7bGVmdDpifSx0aGlzLnNwZWVkKCkvMWUzLHRoaXMuc2V0dGluZ3MuZmFsbGJhY2tFYXNpbmcsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuc3RhdGUuaW5Nb3Rpb24mJnRoaXMudHJhbnNpdGlvbkVuZCgpfSx0aGlzKSl9LGUucHJvdG90eXBlLmN1cnJlbnQ9ZnVuY3Rpb24oYSl7aWYoYT09PWQpcmV0dXJuIHRoaXMuX2N1cnJlbnQ7aWYoMD09PXRoaXMuX2l0ZW1zLmxlbmd0aClyZXR1cm4gZDtpZihhPXRoaXMubm9ybWFsaXplKGEpLHRoaXMuX2N1cnJlbnQhPT1hKXt2YXIgYj10aGlzLnRyaWdnZXIoXCJjaGFuZ2VcIix7cHJvcGVydHk6e25hbWU6XCJwb3NpdGlvblwiLHZhbHVlOmF9fSk7Yi5kYXRhIT09ZCYmKGE9dGhpcy5ub3JtYWxpemUoYi5kYXRhKSksdGhpcy5fY3VycmVudD1hLHRoaXMuaW52YWxpZGF0ZShcInBvc2l0aW9uXCIpLHRoaXMudHJpZ2dlcihcImNoYW5nZWRcIix7cHJvcGVydHk6e25hbWU6XCJwb3NpdGlvblwiLHZhbHVlOnRoaXMuX2N1cnJlbnR9fSl9cmV0dXJuIHRoaXMuX2N1cnJlbnR9LGUucHJvdG90eXBlLmludmFsaWRhdGU9ZnVuY3Rpb24oYSl7dGhpcy5faW52YWxpZGF0ZWRbYV09ITB9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKGEpe2E9dGhpcy5ub3JtYWxpemUoYSksYSE9PWQmJih0aGlzLl9zcGVlZD0wLHRoaXMuX2N1cnJlbnQ9YSx0aGlzLnN1cHByZXNzKFtcInRyYW5zbGF0ZVwiLFwidHJhbnNsYXRlZFwiXSksdGhpcy5hbmltYXRlKHRoaXMuY29vcmRpbmF0ZXMoYSkpLHRoaXMucmVsZWFzZShbXCJ0cmFuc2xhdGVcIixcInRyYW5zbGF0ZWRcIl0pKX0sZS5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKGIsYyl7dmFyIGU9Yz90aGlzLl9pdGVtcy5sZW5ndGg6dGhpcy5faXRlbXMubGVuZ3RoK3RoaXMuX2Nsb25lcy5sZW5ndGg7cmV0dXJuIWEuaXNOdW1lcmljKGIpfHwxPmU/ZDpiPXRoaXMuX2Nsb25lcy5sZW5ndGg/KGIlZStlKSVlOk1hdGgubWF4KHRoaXMubWluaW11bShjKSxNYXRoLm1pbih0aGlzLm1heGltdW0oYyksYikpfSxlLnByb3RvdHlwZS5yZWxhdGl2ZT1mdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLm5vcm1hbGl6ZShhKSxhLT10aGlzLl9jbG9uZXMubGVuZ3RoLzIsdGhpcy5ub3JtYWxpemUoYSwhMCl9LGUucHJvdG90eXBlLm1heGltdW09ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9MCxmPXRoaXMuc2V0dGluZ3M7aWYoYSlyZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RoLTE7aWYoIWYubG9vcCYmZi5jZW50ZXIpYj10aGlzLl9pdGVtcy5sZW5ndGgtMTtlbHNlIGlmKGYubG9vcHx8Zi5jZW50ZXIpaWYoZi5sb29wfHxmLmNlbnRlciliPXRoaXMuX2l0ZW1zLmxlbmd0aCtmLml0ZW1zO2Vsc2V7aWYoIWYuYXV0b1dpZHRoJiYhZi5tZXJnZSl0aHJvd1wiQ2FuIG5vdCBkZXRlY3QgbWF4aW11bSBhYnNvbHV0ZSBwb3NpdGlvbi5cIjtmb3IocmV2ZXJ0PWYucnRsPzE6LTEsYz10aGlzLiRzdGFnZS53aWR0aCgpLXRoaXMuJGVsZW1lbnQud2lkdGgoKTsoZD10aGlzLmNvb3JkaW5hdGVzKGUpKSYmIShkKnJldmVydD49Yyk7KWI9KytlfWVsc2UgYj10aGlzLl9pdGVtcy5sZW5ndGgtZi5pdGVtcztyZXR1cm4gYn0sZS5wcm90b3R5cGUubWluaW11bT1mdW5jdGlvbihhKXtyZXR1cm4gYT8wOnRoaXMuX2Nsb25lcy5sZW5ndGgvMn0sZS5wcm90b3R5cGUuaXRlbXM9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1kP3RoaXMuX2l0ZW1zLnNsaWNlKCk6KGE9dGhpcy5ub3JtYWxpemUoYSwhMCksdGhpcy5faXRlbXNbYV0pfSxlLnByb3RvdHlwZS5tZXJnZXJzPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09ZD90aGlzLl9tZXJnZXJzLnNsaWNlKCk6KGE9dGhpcy5ub3JtYWxpemUoYSwhMCksdGhpcy5fbWVyZ2Vyc1thXSl9LGUucHJvdG90eXBlLmNsb25lcz1mdW5jdGlvbihiKXt2YXIgYz10aGlzLl9jbG9uZXMubGVuZ3RoLzIsZT1jK3RoaXMuX2l0ZW1zLmxlbmd0aCxmPWZ1bmN0aW9uKGEpe3JldHVybiBhJTI9PT0wP2UrYS8yOmMtKGErMSkvMn07cmV0dXJuIGI9PT1kP2EubWFwKHRoaXMuX2Nsb25lcyxmdW5jdGlvbihhLGIpe3JldHVybiBmKGIpfSk6YS5tYXAodGhpcy5fY2xvbmVzLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGE9PT1iP2YoYyk6bnVsbH0pfSxlLnByb3RvdHlwZS5zcGVlZD1mdW5jdGlvbihhKXtyZXR1cm4gYSE9PWQmJih0aGlzLl9zcGVlZD1hKSx0aGlzLl9zcGVlZH0sZS5wcm90b3R5cGUuY29vcmRpbmF0ZXM9ZnVuY3Rpb24oYil7dmFyIGM9bnVsbDtyZXR1cm4gYj09PWQ/YS5tYXAodGhpcy5fY29vcmRpbmF0ZXMsYS5wcm94eShmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNvb3JkaW5hdGVzKGIpfSx0aGlzKSk6KHRoaXMuc2V0dGluZ3MuY2VudGVyPyhjPXRoaXMuX2Nvb3JkaW5hdGVzW2JdLGMrPSh0aGlzLndpZHRoKCktYysodGhpcy5fY29vcmRpbmF0ZXNbYi0xXXx8MCkpLzIqKHRoaXMuc2V0dGluZ3MucnRsPy0xOjEpKTpjPXRoaXMuX2Nvb3JkaW5hdGVzW2ItMV18fDAsYyl9LGUucHJvdG90eXBlLmR1cmF0aW9uPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoTWF0aC5hYnMoYi1hKSwxKSw2KSpNYXRoLmFicyhjfHx0aGlzLnNldHRpbmdzLnNtYXJ0U3BlZWQpfSxlLnByb3RvdHlwZS50bz1mdW5jdGlvbihjLGQpe2lmKHRoaXMuc2V0dGluZ3MubG9vcCl7dmFyIGU9Yy10aGlzLnJlbGF0aXZlKHRoaXMuY3VycmVudCgpKSxmPXRoaXMuY3VycmVudCgpLGc9dGhpcy5jdXJyZW50KCksaD10aGlzLmN1cnJlbnQoKStlLGk9MD5nLWg/ITA6ITEsaj10aGlzLl9jbG9uZXMubGVuZ3RoK3RoaXMuX2l0ZW1zLmxlbmd0aDtoPHRoaXMuc2V0dGluZ3MuaXRlbXMmJmk9PT0hMT8oZj1nK3RoaXMuX2l0ZW1zLmxlbmd0aCx0aGlzLnJlc2V0KGYpKTpoPj1qLXRoaXMuc2V0dGluZ3MuaXRlbXMmJmk9PT0hMCYmKGY9Zy10aGlzLl9pdGVtcy5sZW5ndGgsdGhpcy5yZXNldChmKSksYi5jbGVhclRpbWVvdXQodGhpcy5lLl9nb1RvTG9vcCksdGhpcy5lLl9nb1RvTG9vcD1iLnNldFRpbWVvdXQoYS5wcm94eShmdW5jdGlvbigpe3RoaXMuc3BlZWQodGhpcy5kdXJhdGlvbih0aGlzLmN1cnJlbnQoKSxmK2UsZCkpLHRoaXMuY3VycmVudChmK2UpLHRoaXMudXBkYXRlKCl9LHRoaXMpLDMwKX1lbHNlIHRoaXMuc3BlZWQodGhpcy5kdXJhdGlvbih0aGlzLmN1cnJlbnQoKSxjLGQpKSx0aGlzLmN1cnJlbnQoYyksdGhpcy51cGRhdGUoKX0sZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbihhKXthPWF8fCExLHRoaXMudG8odGhpcy5yZWxhdGl2ZSh0aGlzLmN1cnJlbnQoKSkrMSxhKX0sZS5wcm90b3R5cGUucHJldj1mdW5jdGlvbihhKXthPWF8fCExLHRoaXMudG8odGhpcy5yZWxhdGl2ZSh0aGlzLmN1cnJlbnQoKSktMSxhKX0sZS5wcm90b3R5cGUudHJhbnNpdGlvbkVuZD1mdW5jdGlvbihhKXtyZXR1cm4gYSE9PWQmJihhLnN0b3BQcm9wYWdhdGlvbigpLChhLnRhcmdldHx8YS5zcmNFbGVtZW50fHxhLm9yaWdpbmFsVGFyZ2V0KSE9PXRoaXMuJHN0YWdlLmdldCgwKSk/ITE6KHRoaXMuc3RhdGUuaW5Nb3Rpb249ITEsdm9pZCB0aGlzLnRyaWdnZXIoXCJ0cmFuc2xhdGVkXCIpKX0sZS5wcm90b3R5cGUudmlld3BvcnQ9ZnVuY3Rpb24oKXt2YXIgZDtpZih0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZUJhc2VFbGVtZW50IT09YilkPWEodGhpcy5vcHRpb25zLnJlc3BvbnNpdmVCYXNlRWxlbWVudCkud2lkdGgoKTtlbHNlIGlmKGIuaW5uZXJXaWR0aClkPWIuaW5uZXJXaWR0aDtlbHNle2lmKCFjLmRvY3VtZW50RWxlbWVudHx8IWMuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKXRocm93XCJDYW4gbm90IGRldGVjdCB2aWV3cG9ydCB3aWR0aC5cIjtkPWMuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRofXJldHVybiBkfSxlLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGIpe3RoaXMuJHN0YWdlLmVtcHR5KCksdGhpcy5faXRlbXM9W10sYiYmKGI9YiBpbnN0YW5jZW9mIGpRdWVyeT9iOmEoYikpLHRoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yJiYoYj1iLmZpbmQoXCIuXCIrdGhpcy5zZXR0aW5ncy5uZXN0ZWRJdGVtU2VsZWN0b3IpKSxiLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5ub2RlVHlwZX0pLmVhY2goYS5wcm94eShmdW5jdGlvbihhLGIpe2I9dGhpcy5wcmVwYXJlKGIpLHRoaXMuJHN0YWdlLmFwcGVuZChiKSx0aGlzLl9pdGVtcy5wdXNoKGIpLHRoaXMuX21lcmdlcnMucHVzaCgxKmIuZmluZChcIltkYXRhLW1lcmdlXVwiKS5hbmRTZWxmKFwiW2RhdGEtbWVyZ2VdXCIpLmF0dHIoXCJkYXRhLW1lcmdlXCIpfHwxKX0sdGhpcykpLHRoaXMucmVzZXQoYS5pc051bWVyaWModGhpcy5zZXR0aW5ncy5zdGFydFBvc2l0aW9uKT90aGlzLnNldHRpbmdzLnN0YXJ0UG9zaXRpb246MCksdGhpcy5pbnZhbGlkYXRlKFwiaXRlbXNcIil9LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIpe2I9Yj09PWQ/dGhpcy5faXRlbXMubGVuZ3RoOnRoaXMubm9ybWFsaXplKGIsITApLHRoaXMudHJpZ2dlcihcImFkZFwiLHtjb250ZW50OmEscG9zaXRpb246Yn0pLDA9PT10aGlzLl9pdGVtcy5sZW5ndGh8fGI9PT10aGlzLl9pdGVtcy5sZW5ndGg/KHRoaXMuJHN0YWdlLmFwcGVuZChhKSx0aGlzLl9pdGVtcy5wdXNoKGEpLHRoaXMuX21lcmdlcnMucHVzaCgxKmEuZmluZChcIltkYXRhLW1lcmdlXVwiKS5hbmRTZWxmKFwiW2RhdGEtbWVyZ2VdXCIpLmF0dHIoXCJkYXRhLW1lcmdlXCIpfHwxKSk6KHRoaXMuX2l0ZW1zW2JdLmJlZm9yZShhKSx0aGlzLl9pdGVtcy5zcGxpY2UoYiwwLGEpLHRoaXMuX21lcmdlcnMuc3BsaWNlKGIsMCwxKmEuZmluZChcIltkYXRhLW1lcmdlXVwiKS5hbmRTZWxmKFwiW2RhdGEtbWVyZ2VdXCIpLmF0dHIoXCJkYXRhLW1lcmdlXCIpfHwxKSksdGhpcy5pbnZhbGlkYXRlKFwiaXRlbXNcIiksdGhpcy50cmlnZ2VyKFwiYWRkZWRcIix7Y29udGVudDphLHBvc2l0aW9uOmJ9KX0sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGEpe2E9dGhpcy5ub3JtYWxpemUoYSwhMCksYSE9PWQmJih0aGlzLnRyaWdnZXIoXCJyZW1vdmVcIix7Y29udGVudDp0aGlzLl9pdGVtc1thXSxwb3NpdGlvbjphfSksdGhpcy5faXRlbXNbYV0ucmVtb3ZlKCksdGhpcy5faXRlbXMuc3BsaWNlKGEsMSksdGhpcy5fbWVyZ2Vycy5zcGxpY2UoYSwxKSx0aGlzLmludmFsaWRhdGUoXCJpdGVtc1wiKSx0aGlzLnRyaWdnZXIoXCJyZW1vdmVkXCIse2NvbnRlbnQ6bnVsbCxwb3NpdGlvbjphfSkpfSxlLnByb3RvdHlwZS5hZGRUcmlnZ2VyYWJsZUV2ZW50cz1mdW5jdGlvbigpe3ZhciBiPWEucHJveHkoZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5wcm94eShmdW5jdGlvbihhKXthLnJlbGF0ZWRUYXJnZXQhPT10aGlzJiYodGhpcy5zdXBwcmVzcyhbY10pLGIuYXBwbHkodGhpcyxbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSksdGhpcy5yZWxlYXNlKFtjXSkpfSx0aGlzKX0sdGhpcyk7YS5lYWNoKHtuZXh0OnRoaXMubmV4dCxwcmV2OnRoaXMucHJldix0bzp0aGlzLnRvLGRlc3Ryb3k6dGhpcy5kZXN0cm95LHJlZnJlc2g6dGhpcy5yZWZyZXNoLHJlcGxhY2U6dGhpcy5yZXBsYWNlLGFkZDp0aGlzLmFkZCxyZW1vdmU6dGhpcy5yZW1vdmV9LGEucHJveHkoZnVuY3Rpb24oYSxjKXt0aGlzLiRlbGVtZW50Lm9uKGErXCIub3dsLmNhcm91c2VsXCIsYihjLGErXCIub3dsLmNhcm91c2VsXCIpKX0sdGhpcykpfSxlLnByb3RvdHlwZS53YXRjaFZpc2liaWxpdHk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBjKGEpe3JldHVybiBhLm9mZnNldFdpZHRoPjAmJmEub2Zmc2V0SGVpZ2h0PjB9ZnVuY3Rpb24gZCgpe2ModGhpcy4kZWxlbWVudC5nZXQoMCkpJiYodGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcIm93bC1oaWRkZW5cIiksdGhpcy5yZWZyZXNoKCksYi5jbGVhckludGVydmFsKHRoaXMuZS5fY2hlY2tWaXNpYmlsZSkpfWModGhpcy4kZWxlbWVudC5nZXQoMCkpfHwodGhpcy4kZWxlbWVudC5hZGRDbGFzcyhcIm93bC1oaWRkZW5cIiksYi5jbGVhckludGVydmFsKHRoaXMuZS5fY2hlY2tWaXNpYmlsZSksdGhpcy5lLl9jaGVja1Zpc2liaWxlPWIuc2V0SW50ZXJ2YWwoYS5wcm94eShkLHRoaXMpLDUwMCkpfSxlLnByb3RvdHlwZS5wcmVsb2FkQXV0b1dpZHRoSW1hZ2VzPWZ1bmN0aW9uKGIpe3ZhciBjLGQsZSxmO2M9MCxkPXRoaXMsYi5lYWNoKGZ1bmN0aW9uKGcsaCl7ZT1hKGgpLGY9bmV3IEltYWdlLGYub25sb2FkPWZ1bmN0aW9uKCl7YysrLGUuYXR0cihcInNyY1wiLGYuc3JjKSxlLmNzcyhcIm9wYWNpdHlcIiwxKSxjPj1iLmxlbmd0aCYmKGQuc3RhdGUuaW1hZ2VzTG9hZGVkPSEwLGQuaW5pdGlhbGl6ZSgpKX0sZi5zcmM9ZS5hdHRyKFwic3JjXCIpfHxlLmF0dHIoXCJkYXRhLXNyY1wiKXx8ZS5hdHRyKFwiZGF0YS1zcmMtcmV0aW5hXCIpfSl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKHRoaXMuc2V0dGluZ3MudGhlbWVDbGFzcykmJnRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5zZXR0aW5ncy50aGVtZUNsYXNzKSx0aGlzLnNldHRpbmdzLnJlc3BvbnNpdmUhPT0hMSYmYShiKS5vZmYoXCJyZXNpemUub3dsLmNhcm91c2VsXCIpLHRoaXMudHJhbnNpdGlvbkVuZFZlbmRvciYmdGhpcy5vZmYodGhpcy4kc3RhZ2UuZ2V0KDApLHRoaXMudHJhbnNpdGlvbkVuZFZlbmRvcix0aGlzLmUuX3RyYW5zaXRpb25FbmQpO2Zvcih2YXIgZCBpbiB0aGlzLl9wbHVnaW5zKXRoaXMuX3BsdWdpbnNbZF0uZGVzdHJveSgpOyh0aGlzLnNldHRpbmdzLm1vdXNlRHJhZ3x8dGhpcy5zZXR0aW5ncy50b3VjaERyYWcpJiYodGhpcy4kc3RhZ2Uub2ZmKFwibW91c2Vkb3duIHRvdWNoc3RhcnQgdG91Y2hjYW5jZWxcIiksYShjKS5vZmYoXCIub3dsLmRyYWdFdmVudHNcIiksdGhpcy4kc3RhZ2UuZ2V0KDApLm9uc2VsZWN0c3RhcnQ9ZnVuY3Rpb24oKXt9LHRoaXMuJHN0YWdlLm9mZihcImRyYWdzdGFydFwiLGZ1bmN0aW9uKCl7cmV0dXJuITF9KSksdGhpcy4kZWxlbWVudC5vZmYoXCIub3dsXCIpLHRoaXMuJHN0YWdlLmNoaWxkcmVuKFwiLmNsb25lZFwiKS5yZW1vdmUoKSx0aGlzLmU9bnVsbCx0aGlzLiRlbGVtZW50LnJlbW92ZURhdGEoXCJvd2xDYXJvdXNlbFwiKSx0aGlzLiRzdGFnZS5jaGlsZHJlbigpLmNvbnRlbnRzKCkudW53cmFwKCksdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS51bndyYXAoKSx0aGlzLiRzdGFnZS51bndyYXAoKX0sZS5wcm90b3R5cGUub3A9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuc2V0dGluZ3MucnRsO3N3aXRjaChiKXtjYXNlXCI8XCI6cmV0dXJuIGQ/YT5jOmM+YTtjYXNlXCI+XCI6cmV0dXJuIGQ/Yz5hOmE+YztjYXNlXCI+PVwiOnJldHVybiBkP2M+PWE6YT49YztjYXNlXCI8PVwiOnJldHVybiBkP2E+PWM6Yz49YX19LGUucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGEsYixjLGQpe2EuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIoYixjLGQpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoXCJvblwiK2IsYyl9LGUucHJvdG90eXBlLm9mZj1mdW5jdGlvbihhLGIsYyxkKXthLnJlbW92ZUV2ZW50TGlzdGVuZXI/YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyxkKTphLmRldGFjaEV2ZW50JiZhLmRldGFjaEV2ZW50KFwib25cIitiLGMpfSxlLnByb3RvdHlwZS50cmlnZ2VyPWZ1bmN0aW9uKGIsYyxkKXt2YXIgZT17aXRlbTp7Y291bnQ6dGhpcy5faXRlbXMubGVuZ3RoLGluZGV4OnRoaXMuY3VycmVudCgpfX0sZj1hLmNhbWVsQ2FzZShhLmdyZXAoW1wib25cIixiLGRdLGZ1bmN0aW9uKGEpe3JldHVybiBhfSkuam9pbihcIi1cIikudG9Mb3dlckNhc2UoKSksZz1hLkV2ZW50KFtiLFwib3dsXCIsZHx8XCJjYXJvdXNlbFwiXS5qb2luKFwiLlwiKS50b0xvd2VyQ2FzZSgpLGEuZXh0ZW5kKHtyZWxhdGVkVGFyZ2V0OnRoaXN9LGUsYykpO3JldHVybiB0aGlzLl9zdXByZXNzW2JdfHwoYS5lYWNoKHRoaXMuX3BsdWdpbnMsZnVuY3Rpb24oYSxiKXtiLm9uVHJpZ2dlciYmYi5vblRyaWdnZXIoZyl9KSx0aGlzLiRlbGVtZW50LnRyaWdnZXIoZyksdGhpcy5zZXR0aW5ncyYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5zZXR0aW5nc1tmXSYmdGhpcy5zZXR0aW5nc1tmXS5hcHBseSh0aGlzLGcpKSxnfSxlLnByb3RvdHlwZS5zdXBwcmVzcz1mdW5jdGlvbihiKXthLmVhY2goYixhLnByb3h5KGZ1bmN0aW9uKGEsYil7dGhpcy5fc3VwcmVzc1tiXT0hMH0sdGhpcykpfSxlLnByb3RvdHlwZS5yZWxlYXNlPWZ1bmN0aW9uKGIpe2EuZWFjaChiLGEucHJveHkoZnVuY3Rpb24oYSxiKXtkZWxldGUgdGhpcy5fc3VwcmVzc1tiXX0sdGhpcykpfSxlLnByb3RvdHlwZS5icm93c2VyU3VwcG9ydD1mdW5jdGlvbigpe2lmKHRoaXMuc3VwcG9ydDNkPWooKSx0aGlzLnN1cHBvcnQzZCl7dGhpcy50cmFuc2Zvcm1WZW5kb3I9aSgpO3ZhciBhPVtcInRyYW5zaXRpb25lbmRcIixcIndlYmtpdFRyYW5zaXRpb25FbmRcIixcInRyYW5zaXRpb25lbmRcIixcIm9UcmFuc2l0aW9uRW5kXCJdO3RoaXMudHJhbnNpdGlvbkVuZFZlbmRvcj1hW2goKV0sdGhpcy52ZW5kb3JOYW1lPXRoaXMudHJhbnNmb3JtVmVuZG9yLnJlcGxhY2UoL1RyYW5zZm9ybS9pLFwiXCIpLHRoaXMudmVuZG9yTmFtZT1cIlwiIT09dGhpcy52ZW5kb3JOYW1lP1wiLVwiK3RoaXMudmVuZG9yTmFtZS50b0xvd2VyQ2FzZSgpK1wiLVwiOlwiXCJ9dGhpcy5zdGF0ZS5vcmllbnRhdGlvbj1iLm9yaWVudGF0aW9ufSxhLmZuLm93bENhcm91c2VsPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXthKHRoaXMpLmRhdGEoXCJvd2xDYXJvdXNlbFwiKXx8YSh0aGlzKS5kYXRhKFwib3dsQ2Fyb3VzZWxcIixuZXcgZSh0aGlzLGIpKX0pfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yPWV9KHdpbmRvdy5aZXB0b3x8d2luZG93LmpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYil7dGhpcy5fY29yZT1iLHRoaXMuX2xvYWRlZD1bXSx0aGlzLl9oYW5kbGVycz17XCJpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWwgY2hhbmdlLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYil7aWYoYi5uYW1lc3BhY2UmJnRoaXMuX2NvcmUuc2V0dGluZ3MmJnRoaXMuX2NvcmUuc2V0dGluZ3MubGF6eUxvYWQmJihiLnByb3BlcnR5JiZcInBvc2l0aW9uXCI9PWIucHJvcGVydHkubmFtZXx8XCJpbml0aWFsaXplZFwiPT1iLnR5cGUpKWZvcih2YXIgYz10aGlzLl9jb3JlLnNldHRpbmdzLGQ9Yy5jZW50ZXImJk1hdGguY2VpbChjLml0ZW1zLzIpfHxjLml0ZW1zLGU9Yy5jZW50ZXImJi0xKmR8fDAsZj0oYi5wcm9wZXJ0eSYmYi5wcm9wZXJ0eS52YWx1ZXx8dGhpcy5fY29yZS5jdXJyZW50KCkpK2UsZz10aGlzLl9jb3JlLmNsb25lcygpLmxlbmd0aCxoPWEucHJveHkoZnVuY3Rpb24oYSxiKXt0aGlzLmxvYWQoYil9LHRoaXMpO2UrKzxkOyl0aGlzLmxvYWQoZy8yK3RoaXMuX2NvcmUucmVsYXRpdmUoZikpLGcmJmEuZWFjaCh0aGlzLl9jb3JlLmNsb25lcyh0aGlzLl9jb3JlLnJlbGF0aXZlKGYrKykpLGgpfSx0aGlzKX0sdGhpcy5fY29yZS5vcHRpb25zPWEuZXh0ZW5kKHt9LGMuRGVmYXVsdHMsdGhpcy5fY29yZS5vcHRpb25zKSx0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKX07Yy5EZWZhdWx0cz17bGF6eUxvYWQ6ITF9LGMucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5fY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS5lcShjKSxlPWQmJmQuZmluZChcIi5vd2wtbGF6eVwiKTshZXx8YS5pbkFycmF5KGQuZ2V0KDApLHRoaXMuX2xvYWRlZCk+LTF8fChlLmVhY2goYS5wcm94eShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShkKSxnPWIuZGV2aWNlUGl4ZWxSYXRpbz4xJiZmLmF0dHIoXCJkYXRhLXNyYy1yZXRpbmFcIil8fGYuYXR0cihcImRhdGEtc3JjXCIpO3RoaXMuX2NvcmUudHJpZ2dlcihcImxvYWRcIix7ZWxlbWVudDpmLHVybDpnfSxcImxhenlcIiksZi5pcyhcImltZ1wiKT9mLm9uZShcImxvYWQub3dsLmxhenlcIixhLnByb3h5KGZ1bmN0aW9uKCl7Zi5jc3MoXCJvcGFjaXR5XCIsMSksdGhpcy5fY29yZS50cmlnZ2VyKFwibG9hZGVkXCIse2VsZW1lbnQ6Zix1cmw6Z30sXCJsYXp5XCIpfSx0aGlzKSkuYXR0cihcInNyY1wiLGcpOihlPW5ldyBJbWFnZSxlLm9ubG9hZD1hLnByb3h5KGZ1bmN0aW9uKCl7Zi5jc3Moe1wiYmFja2dyb3VuZC1pbWFnZVwiOlwidXJsKFwiK2crXCIpXCIsb3BhY2l0eTpcIjFcIn0pLHRoaXMuX2NvcmUudHJpZ2dlcihcImxvYWRlZFwiLHtlbGVtZW50OmYsdXJsOmd9LFwibGF6eVwiKX0sdGhpcyksZS5zcmM9Zyl9LHRoaXMpKSx0aGlzLl9sb2FkZWQucHVzaChkLmdldCgwKSkpfSxjLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGEsYjtmb3IoYSBpbiB0aGlzLmhhbmRsZXJzKXRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGEsdGhpcy5oYW5kbGVyc1thXSk7Zm9yKGIgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tiXSYmKHRoaXNbYl09bnVsbCl9LGEuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5MYXp5PWN9KHdpbmRvdy5aZXB0b3x8d2luZG93LmpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGEpe3ZhciBiPWZ1bmN0aW9uKGMpe3RoaXMuX2NvcmU9Yyx0aGlzLl9oYW5kbGVycz17XCJpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvSGVpZ2h0JiZ0aGlzLnVwZGF0ZSgpfSx0aGlzKSxcImNoYW5nZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXt0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9IZWlnaHQmJlwicG9zaXRpb25cIj09YS5wcm9wZXJ0eS5uYW1lJiZ0aGlzLnVwZGF0ZSgpfSx0aGlzKSxcImxvYWRlZC5vd2wubGF6eVwiOmEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvSGVpZ2h0JiZhLmVsZW1lbnQuY2xvc2VzdChcIi5cIit0aGlzLl9jb3JlLnNldHRpbmdzLml0ZW1DbGFzcyk9PT10aGlzLl9jb3JlLiRzdGFnZS5jaGlsZHJlbigpLmVxKHRoaXMuX2NvcmUuY3VycmVudCgpKSYmdGhpcy51cGRhdGUoKX0sdGhpcyl9LHRoaXMuX2NvcmUub3B0aW9ucz1hLmV4dGVuZCh7fSxiLkRlZmF1bHRzLHRoaXMuX2NvcmUub3B0aW9ucyksdGhpcy5fY29yZS4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyl9O2IuRGVmYXVsdHM9e2F1dG9IZWlnaHQ6ITEsYXV0b0hlaWdodENsYXNzOlwib3dsLWhlaWdodFwifSxiLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLiRzdGFnZS5wYXJlbnQoKS5oZWlnaHQodGhpcy5fY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLl9jb3JlLmN1cnJlbnQoKSkuaGVpZ2h0KCkpLmFkZENsYXNzKHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b0hlaWdodENsYXNzKX0sYi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhLGI7Zm9yKGEgaW4gdGhpcy5faGFuZGxlcnMpdGhpcy5fY29yZS4kZWxlbWVudC5vZmYoYSx0aGlzLl9oYW5kbGVyc1thXSk7Zm9yKGIgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tiXSYmKHRoaXNbYl09bnVsbCl9LGEuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5BdXRvSGVpZ2h0PWJ9KHdpbmRvdy5aZXB0b3x8d2luZG93LmpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihiKXt0aGlzLl9jb3JlPWIsdGhpcy5fdmlkZW9zPXt9LHRoaXMuX3BsYXlpbmc9bnVsbCx0aGlzLl9mdWxsc2NyZWVuPSExLHRoaXMuX2hhbmRsZXJzPXtcInJlc2l6ZS5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuX2NvcmUuc2V0dGluZ3MudmlkZW8mJiF0aGlzLmlzSW5GdWxsU2NyZWVuKCkmJmEucHJldmVudERlZmF1bHQoKX0sdGhpcyksXCJyZWZyZXNoLm93bC5jYXJvdXNlbCBjaGFuZ2VkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oKXt0aGlzLl9wbGF5aW5nJiZ0aGlzLnN0b3AoKX0sdGhpcyksXCJwcmVwYXJlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGIpe3ZhciBjPWEoYi5jb250ZW50KS5maW5kKFwiLm93bC12aWRlb1wiKTtjLmxlbmd0aCYmKGMuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKSx0aGlzLmZldGNoKGMsYShiLmNvbnRlbnQpKSl9LHRoaXMpfSx0aGlzLl9jb3JlLm9wdGlvbnM9YS5leHRlbmQoe30sZC5EZWZhdWx0cyx0aGlzLl9jb3JlLm9wdGlvbnMpLHRoaXMuX2NvcmUuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpLHRoaXMuX2NvcmUuJGVsZW1lbnQub24oXCJjbGljay5vd2wudmlkZW9cIixcIi5vd2wtdmlkZW8tcGxheS1pY29uXCIsYS5wcm94eShmdW5jdGlvbihhKXt0aGlzLnBsYXkoYSl9LHRoaXMpKX07ZC5EZWZhdWx0cz17dmlkZW86ITEsdmlkZW9IZWlnaHQ6ITEsdmlkZW9XaWR0aDohMX0sZC5wcm90b3R5cGUuZmV0Y2g9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmF0dHIoXCJkYXRhLXZpbWVvLWlkXCIpP1widmltZW9cIjpcInlvdXR1YmVcIixkPWEuYXR0cihcImRhdGEtdmltZW8taWRcIil8fGEuYXR0cihcImRhdGEteW91dHViZS1pZFwiKSxlPWEuYXR0cihcImRhdGEtd2lkdGhcIil8fHRoaXMuX2NvcmUuc2V0dGluZ3MudmlkZW9XaWR0aCxmPWEuYXR0cihcImRhdGEtaGVpZ2h0XCIpfHx0aGlzLl9jb3JlLnNldHRpbmdzLnZpZGVvSGVpZ2h0LGc9YS5hdHRyKFwiaHJlZlwiKTtpZighZyl0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHZpZGVvIFVSTC5cIik7aWYoZD1nLm1hdGNoKC8oaHR0cDp8aHR0cHM6fClcXC9cXC8ocGxheWVyLnx3d3cuKT8odmltZW9cXC5jb218eW91dHUoYmVcXC5jb218XFwuYmV8YmVcXC5nb29nbGVhcGlzXFwuY29tKSlcXC8odmlkZW9cXC98ZW1iZWRcXC98d2F0Y2hcXD92PXx2XFwvKT8oW0EtWmEtejAtOS5fJS1dKikoXFwmXFxTKyk/LyksZFszXS5pbmRleE9mKFwieW91dHVcIik+LTEpYz1cInlvdXR1YmVcIjtlbHNle2lmKCEoZFszXS5pbmRleE9mKFwidmltZW9cIik+LTEpKXRocm93IG5ldyBFcnJvcihcIlZpZGVvIFVSTCBub3Qgc3VwcG9ydGVkLlwiKTtjPVwidmltZW9cIn1kPWRbNl0sdGhpcy5fdmlkZW9zW2ddPXt0eXBlOmMsaWQ6ZCx3aWR0aDplLGhlaWdodDpmfSxiLmF0dHIoXCJkYXRhLXZpZGVvXCIsZyksdGhpcy50aHVtYm5haWwoYSx0aGlzLl92aWRlb3NbZ10pfSxkLnByb3RvdHlwZS50aHVtYm5haWw9ZnVuY3Rpb24oYixjKXt2YXIgZCxlLGYsZz1jLndpZHRoJiZjLmhlaWdodD8nc3R5bGU9XCJ3aWR0aDonK2Mud2lkdGgrXCJweDtoZWlnaHQ6XCIrYy5oZWlnaHQrJ3B4O1wiJzpcIlwiLGg9Yi5maW5kKFwiaW1nXCIpLGk9XCJzcmNcIixqPVwiXCIsaz10aGlzLl9jb3JlLnNldHRpbmdzLGw9ZnVuY3Rpb24oYSl7ZT0nPGRpdiBjbGFzcz1cIm93bC12aWRlby1wbGF5LWljb25cIj48L2Rpdj4nLGQ9ay5sYXp5TG9hZD8nPGRpdiBjbGFzcz1cIm93bC12aWRlby10biAnK2orJ1wiICcraSsnPVwiJythKydcIj48L2Rpdj4nOic8ZGl2IGNsYXNzPVwib3dsLXZpZGVvLXRuXCIgc3R5bGU9XCJvcGFjaXR5OjE7YmFja2dyb3VuZC1pbWFnZTp1cmwoJythKycpXCI+PC9kaXY+JyxiLmFmdGVyKGQpLGIuYWZ0ZXIoZSl9O3JldHVybiBiLndyYXAoJzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8td3JhcHBlclwiJytnK1wiPjwvZGl2PlwiKSx0aGlzLl9jb3JlLnNldHRpbmdzLmxhenlMb2FkJiYoaT1cImRhdGEtc3JjXCIsaj1cIm93bC1sYXp5XCIpLGgubGVuZ3RoPyhsKGguYXR0cihpKSksaC5yZW1vdmUoKSwhMSk6dm9pZChcInlvdXR1YmVcIj09PWMudHlwZT8oZj1cImh0dHA6Ly9pbWcueW91dHViZS5jb20vdmkvXCIrYy5pZCtcIi9ocWRlZmF1bHQuanBnXCIsbChmKSk6XCJ2aW1lb1wiPT09Yy50eXBlJiZhLmFqYXgoe3R5cGU6XCJHRVRcIix1cmw6XCJodHRwOi8vdmltZW8uY29tL2FwaS92Mi92aWRlby9cIitjLmlkK1wiLmpzb25cIixqc29ucDpcImNhbGxiYWNrXCIsZGF0YVR5cGU6XCJqc29ucFwiLHN1Y2Nlc3M6ZnVuY3Rpb24oYSl7Zj1hWzBdLnRodW1ibmFpbF9sYXJnZSxsKGYpfX0pKX0sZC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX2NvcmUudHJpZ2dlcihcInN0b3BcIixudWxsLFwidmlkZW9cIiksdGhpcy5fcGxheWluZy5maW5kKFwiLm93bC12aWRlby1mcmFtZVwiKS5yZW1vdmUoKSx0aGlzLl9wbGF5aW5nLnJlbW92ZUNsYXNzKFwib3dsLXZpZGVvLXBsYXlpbmdcIiksdGhpcy5fcGxheWluZz1udWxsfSxkLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKGIpe3RoaXMuX2NvcmUudHJpZ2dlcihcInBsYXlcIixudWxsLFwidmlkZW9cIiksdGhpcy5fcGxheWluZyYmdGhpcy5zdG9wKCk7dmFyIGMsZCxlPWEoYi50YXJnZXR8fGIuc3JjRWxlbWVudCksZj1lLmNsb3Nlc3QoXCIuXCIrdGhpcy5fY29yZS5zZXR0aW5ncy5pdGVtQ2xhc3MpLGc9dGhpcy5fdmlkZW9zW2YuYXR0cihcImRhdGEtdmlkZW9cIildLGg9Zy53aWR0aHx8XCIxMDAlXCIsaT1nLmhlaWdodHx8dGhpcy5fY29yZS4kc3RhZ2UuaGVpZ2h0KCk7XCJ5b3V0dWJlXCI9PT1nLnR5cGU/Yz0nPGlmcmFtZSB3aWR0aD1cIicraCsnXCIgaGVpZ2h0PVwiJytpKydcIiBzcmM9XCJodHRwOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLycrZy5pZCtcIj9hdXRvcGxheT0xJnY9XCIrZy5pZCsnXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPic6XCJ2aW1lb1wiPT09Zy50eXBlJiYoYz0nPGlmcmFtZSBzcmM9XCJodHRwOi8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8nK2cuaWQrJz9hdXRvcGxheT0xXCIgd2lkdGg9XCInK2grJ1wiIGhlaWdodD1cIicraSsnXCIgZnJhbWVib3JkZXI9XCIwXCIgd2Via2l0YWxsb3dmdWxsc2NyZWVuIG1vemFsbG93ZnVsbHNjcmVlbiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JyksZi5hZGRDbGFzcyhcIm93bC12aWRlby1wbGF5aW5nXCIpLHRoaXMuX3BsYXlpbmc9ZixkPWEoJzxkaXYgc3R5bGU9XCJoZWlnaHQ6JytpK1wicHg7IHdpZHRoOlwiK2grJ3B4XCIgY2xhc3M9XCJvd2wtdmlkZW8tZnJhbWVcIj4nK2MrXCI8L2Rpdj5cIiksZS5hZnRlcihkKX0sZC5wcm90b3R5cGUuaXNJbkZ1bGxTY3JlZW49ZnVuY3Rpb24oKXt2YXIgZD1jLmZ1bGxzY3JlZW5FbGVtZW50fHxjLm1vekZ1bGxTY3JlZW5FbGVtZW50fHxjLndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50O3JldHVybiBkJiZhKGQpLnBhcmVudCgpLmhhc0NsYXNzKFwib3dsLXZpZGVvLWZyYW1lXCIpJiYodGhpcy5fY29yZS5zcGVlZCgwKSx0aGlzLl9mdWxsc2NyZWVuPSEwKSxkJiZ0aGlzLl9mdWxsc2NyZWVuJiZ0aGlzLl9wbGF5aW5nPyExOnRoaXMuX2Z1bGxzY3JlZW4/KHRoaXMuX2Z1bGxzY3JlZW49ITEsITEpOnRoaXMuX3BsYXlpbmcmJnRoaXMuX2NvcmUuc3RhdGUub3JpZW50YXRpb24hPT1iLm9yaWVudGF0aW9uPyh0aGlzLl9jb3JlLnN0YXRlLm9yaWVudGF0aW9uPWIub3JpZW50YXRpb24sITEpOiEwfSxkLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGEsYjt0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihcImNsaWNrLm93bC52aWRlb1wiKTtmb3IoYSBpbiB0aGlzLl9oYW5kbGVycyl0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihhLHRoaXMuX2hhbmRsZXJzW2FdKTtmb3IoYiBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSlcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzW2JdJiYodGhpc1tiXT1udWxsKX0sYS5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLlZpZGVvPWR9KHdpbmRvdy5aZXB0b3x8d2luZG93LmpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWZ1bmN0aW9uKGIpe3RoaXMuY29yZT1iLHRoaXMuY29yZS5vcHRpb25zPWEuZXh0ZW5kKHt9LGUuRGVmYXVsdHMsdGhpcy5jb3JlLm9wdGlvbnMpLHRoaXMuc3dhcHBpbmc9ITAsdGhpcy5wcmV2aW91cz1kLHRoaXMubmV4dD1kLHRoaXMuaGFuZGxlcnM9e1wiY2hhbmdlLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7XCJwb3NpdGlvblwiPT1hLnByb3BlcnR5Lm5hbWUmJih0aGlzLnByZXZpb3VzPXRoaXMuY29yZS5jdXJyZW50KCksdGhpcy5uZXh0PWEucHJvcGVydHkudmFsdWUpfSx0aGlzKSxcImRyYWcub3dsLmNhcm91c2VsIGRyYWdnZWQub3dsLmNhcm91c2VsIHRyYW5zbGF0ZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXt0aGlzLnN3YXBwaW5nPVwidHJhbnNsYXRlZFwiPT1hLnR5cGV9LHRoaXMpLFwidHJhbnNsYXRlLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oKXt0aGlzLnN3YXBwaW5nJiYodGhpcy5jb3JlLm9wdGlvbnMuYW5pbWF0ZU91dHx8dGhpcy5jb3JlLm9wdGlvbnMuYW5pbWF0ZUluKSYmdGhpcy5zd2FwKCl9LHRoaXMpfSx0aGlzLmNvcmUuJGVsZW1lbnQub24odGhpcy5oYW5kbGVycyl9O2UuRGVmYXVsdHM9e2FuaW1hdGVPdXQ6ITEsYW5pbWF0ZUluOiExfSxlLnByb3RvdHlwZS5zd2FwPWZ1bmN0aW9uKCl7aWYoMT09PXRoaXMuY29yZS5zZXR0aW5ncy5pdGVtcyYmdGhpcy5jb3JlLnN1cHBvcnQzZCl7dGhpcy5jb3JlLnNwZWVkKDApO3ZhciBiLGM9YS5wcm94eSh0aGlzLmNsZWFyLHRoaXMpLGQ9dGhpcy5jb3JlLiRzdGFnZS5jaGlsZHJlbigpLmVxKHRoaXMucHJldmlvdXMpLGU9dGhpcy5jb3JlLiRzdGFnZS5jaGlsZHJlbigpLmVxKHRoaXMubmV4dCksZj10aGlzLmNvcmUuc2V0dGluZ3MuYW5pbWF0ZUluLGc9dGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVPdXQ7dGhpcy5jb3JlLmN1cnJlbnQoKSE9PXRoaXMucHJldmlvdXMmJihnJiYoYj10aGlzLmNvcmUuY29vcmRpbmF0ZXModGhpcy5wcmV2aW91cyktdGhpcy5jb3JlLmNvb3JkaW5hdGVzKHRoaXMubmV4dCksZC5jc3Moe2xlZnQ6YitcInB4XCJ9KS5hZGRDbGFzcyhcImFuaW1hdGVkIG93bC1hbmltYXRlZC1vdXRcIikuYWRkQ2xhc3MoZykub25lKFwid2Via2l0QW5pbWF0aW9uRW5kIG1vekFuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIGFuaW1hdGlvbmVuZFwiLGMpKSxmJiZlLmFkZENsYXNzKFwiYW5pbWF0ZWQgb3dsLWFuaW1hdGVkLWluXCIpLmFkZENsYXNzKGYpLm9uZShcIndlYmtpdEFuaW1hdGlvbkVuZCBtb3pBbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBhbmltYXRpb25lbmRcIixjKSl9fSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbihiKXthKGIudGFyZ2V0KS5jc3Moe2xlZnQ6XCJcIn0pLnJlbW92ZUNsYXNzKFwiYW5pbWF0ZWQgb3dsLWFuaW1hdGVkLW91dCBvd2wtYW5pbWF0ZWQtaW5cIikucmVtb3ZlQ2xhc3ModGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVJbikucmVtb3ZlQ2xhc3ModGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVPdXQpLHRoaXMuY29yZS50cmFuc2l0aW9uRW5kKCl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYSxiO2ZvcihhIGluIHRoaXMuaGFuZGxlcnMpdGhpcy5jb3JlLiRlbGVtZW50Lm9mZihhLHRoaXMuaGFuZGxlcnNbYV0pO2ZvcihiIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbYl0mJih0aGlzW2JdPW51bGwpfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuQW5pbWF0ZT1lfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYil7dGhpcy5jb3JlPWIsdGhpcy5jb3JlLm9wdGlvbnM9YS5leHRlbmQoe30sZC5EZWZhdWx0cyx0aGlzLmNvcmUub3B0aW9ucyksdGhpcy5oYW5kbGVycz17XCJ0cmFuc2xhdGVkLm93bC5jYXJvdXNlbCByZWZyZXNoZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbigpe3RoaXMuYXV0b3BsYXkoKVxufSx0aGlzKSxcInBsYXkub3dsLmF1dG9wbGF5XCI6YS5wcm94eShmdW5jdGlvbihhLGIsYyl7dGhpcy5wbGF5KGIsYyl9LHRoaXMpLFwic3RvcC5vd2wuYXV0b3BsYXlcIjphLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5zdG9wKCl9LHRoaXMpLFwibW91c2VvdmVyLm93bC5hdXRvcGxheVwiOmEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmNvcmUuc2V0dGluZ3MuYXV0b3BsYXlIb3ZlclBhdXNlJiZ0aGlzLnBhdXNlKCl9LHRoaXMpLFwibW91c2VsZWF2ZS5vd2wuYXV0b3BsYXlcIjphLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5jb3JlLnNldHRpbmdzLmF1dG9wbGF5SG92ZXJQYXVzZSYmdGhpcy5hdXRvcGxheSgpfSx0aGlzKX0sdGhpcy5jb3JlLiRlbGVtZW50Lm9uKHRoaXMuaGFuZGxlcnMpfTtkLkRlZmF1bHRzPXthdXRvcGxheTohMSxhdXRvcGxheVRpbWVvdXQ6NWUzLGF1dG9wbGF5SG92ZXJQYXVzZTohMSxhdXRvcGxheVNwZWVkOiExfSxkLnByb3RvdHlwZS5hdXRvcGxheT1mdW5jdGlvbigpe3RoaXMuY29yZS5zZXR0aW5ncy5hdXRvcGxheSYmIXRoaXMuY29yZS5zdGF0ZS52aWRlb1BsYXk/KGIuY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKSx0aGlzLmludGVydmFsPWIuc2V0SW50ZXJ2YWwoYS5wcm94eShmdW5jdGlvbigpe3RoaXMucGxheSgpfSx0aGlzKSx0aGlzLmNvcmUuc2V0dGluZ3MuYXV0b3BsYXlUaW1lb3V0KSk6Yi5jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpfSxkLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKCl7cmV0dXJuIGMuaGlkZGVuPT09ITB8fHRoaXMuY29yZS5zdGF0ZS5pc1RvdWNofHx0aGlzLmNvcmUuc3RhdGUuaXNTY3JvbGxpbmd8fHRoaXMuY29yZS5zdGF0ZS5pc1N3aXBpbmd8fHRoaXMuY29yZS5zdGF0ZS5pbk1vdGlvbj92b2lkIDA6dGhpcy5jb3JlLnNldHRpbmdzLmF1dG9wbGF5PT09ITE/dm9pZCBiLmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk6dm9pZCB0aGlzLmNvcmUubmV4dCh0aGlzLmNvcmUuc2V0dGluZ3MuYXV0b3BsYXlTcGVlZCl9LGQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtiLmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCl9LGQucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7Yi5jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpfSxkLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGEsYztiLmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7Zm9yKGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLmNvcmUuJGVsZW1lbnQub2ZmKGEsdGhpcy5oYW5kbGVyc1thXSk7Zm9yKGMgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tjXSYmKHRoaXNbY109bnVsbCl9LGEuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5hdXRvcGxheT1kfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjt2YXIgYj1mdW5jdGlvbihjKXt0aGlzLl9jb3JlPWMsdGhpcy5faW5pdGlhbGl6ZWQ9ITEsdGhpcy5fcGFnZXM9W10sdGhpcy5fY29udHJvbHM9e30sdGhpcy5fdGVtcGxhdGVzPVtdLHRoaXMuJGVsZW1lbnQ9dGhpcy5fY29yZS4kZWxlbWVudCx0aGlzLl9vdmVycmlkZXM9e25leHQ6dGhpcy5fY29yZS5uZXh0LHByZXY6dGhpcy5fY29yZS5wcmV2LHRvOnRoaXMuX2NvcmUudG99LHRoaXMuX2hhbmRsZXJzPXtcInByZXBhcmVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYil7dGhpcy5fY29yZS5zZXR0aW5ncy5kb3RzRGF0YSYmdGhpcy5fdGVtcGxhdGVzLnB1c2goYShiLmNvbnRlbnQpLmZpbmQoXCJbZGF0YS1kb3RdXCIpLmFuZFNlbGYoXCJbZGF0YS1kb3RdXCIpLmF0dHIoXCJkYXRhLWRvdFwiKSl9LHRoaXMpLFwiYWRkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYil7dGhpcy5fY29yZS5zZXR0aW5ncy5kb3RzRGF0YSYmdGhpcy5fdGVtcGxhdGVzLnNwbGljZShiLnBvc2l0aW9uLDAsYShiLmNvbnRlbnQpLmZpbmQoXCJbZGF0YS1kb3RdXCIpLmFuZFNlbGYoXCJbZGF0YS1kb3RdXCIpLmF0dHIoXCJkYXRhLWRvdFwiKSl9LHRoaXMpLFwicmVtb3ZlLm93bC5jYXJvdXNlbCBwcmVwYXJlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuX2NvcmUuc2V0dGluZ3MuZG90c0RhdGEmJnRoaXMuX3RlbXBsYXRlcy5zcGxpY2UoYS5wb3NpdGlvbiwxKX0sdGhpcyksXCJjaGFuZ2Uub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXtpZihcInBvc2l0aW9uXCI9PWEucHJvcGVydHkubmFtZSYmIXRoaXMuX2NvcmUuc3RhdGUucmV2ZXJ0JiYhdGhpcy5fY29yZS5zZXR0aW5ncy5sb29wJiZ0aGlzLl9jb3JlLnNldHRpbmdzLm5hdlJld2luZCl7dmFyIGI9dGhpcy5fY29yZS5jdXJyZW50KCksYz10aGlzLl9jb3JlLm1heGltdW0oKSxkPXRoaXMuX2NvcmUubWluaW11bSgpO2EuZGF0YT1hLnByb3BlcnR5LnZhbHVlPmM/Yj49Yz9kOmM6YS5wcm9wZXJ0eS52YWx1ZTxkP2M6YS5wcm9wZXJ0eS52YWx1ZX19LHRoaXMpLFwiY2hhbmdlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe1wicG9zaXRpb25cIj09YS5wcm9wZXJ0eS5uYW1lJiZ0aGlzLmRyYXcoKX0sdGhpcyksXCJyZWZyZXNoZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbigpe3RoaXMuX2luaXRpYWxpemVkfHwodGhpcy5pbml0aWFsaXplKCksdGhpcy5faW5pdGlhbGl6ZWQ9ITApLHRoaXMuX2NvcmUudHJpZ2dlcihcInJlZnJlc2hcIixudWxsLFwibmF2aWdhdGlvblwiKSx0aGlzLnVwZGF0ZSgpLHRoaXMuZHJhdygpLHRoaXMuX2NvcmUudHJpZ2dlcihcInJlZnJlc2hlZFwiLG51bGwsXCJuYXZpZ2F0aW9uXCIpfSx0aGlzKX0sdGhpcy5fY29yZS5vcHRpb25zPWEuZXh0ZW5kKHt9LGIuRGVmYXVsdHMsdGhpcy5fY29yZS5vcHRpb25zKSx0aGlzLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKX07Yi5EZWZhdWx0cz17bmF2OiExLG5hdlJld2luZDohMCxuYXZUZXh0OltcInByZXZcIixcIm5leHRcIl0sbmF2U3BlZWQ6ITEsbmF2RWxlbWVudDpcImRpdlwiLG5hdkNvbnRhaW5lcjohMSxuYXZDb250YWluZXJDbGFzczpcIm93bC1uYXZcIixuYXZDbGFzczpbXCJvd2wtcHJldlwiLFwib3dsLW5leHRcIl0sc2xpZGVCeToxLGRvdENsYXNzOlwib3dsLWRvdFwiLGRvdHNDbGFzczpcIm93bC1kb3RzXCIsZG90czohMCxkb3RzRWFjaDohMSxkb3REYXRhOiExLGRvdHNTcGVlZDohMSxkb3RzQ29udGFpbmVyOiExLGNvbnRyb2xzQ2xhc3M6XCJvd2wtY29udHJvbHNcIn0sYi5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3ZhciBiLGMsZD10aGlzLl9jb3JlLnNldHRpbmdzO2QuZG90c0RhdGF8fCh0aGlzLl90ZW1wbGF0ZXM9W2EoXCI8ZGl2PlwiKS5hZGRDbGFzcyhkLmRvdENsYXNzKS5hcHBlbmQoYShcIjxzcGFuPlwiKSkucHJvcChcIm91dGVySFRNTFwiKV0pLGQubmF2Q29udGFpbmVyJiZkLmRvdHNDb250YWluZXJ8fCh0aGlzLl9jb250cm9scy4kY29udGFpbmVyPWEoXCI8ZGl2PlwiKS5hZGRDbGFzcyhkLmNvbnRyb2xzQ2xhc3MpLmFwcGVuZFRvKHRoaXMuJGVsZW1lbnQpKSx0aGlzLl9jb250cm9scy4kaW5kaWNhdG9ycz1kLmRvdHNDb250YWluZXI/YShkLmRvdHNDb250YWluZXIpOmEoXCI8ZGl2PlwiKS5oaWRlKCkuYWRkQ2xhc3MoZC5kb3RzQ2xhc3MpLmFwcGVuZFRvKHRoaXMuX2NvbnRyb2xzLiRjb250YWluZXIpLHRoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzLm9uKFwiY2xpY2tcIixcImRpdlwiLGEucHJveHkoZnVuY3Rpb24oYil7dmFyIGM9YShiLnRhcmdldCkucGFyZW50KCkuaXModGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMpP2EoYi50YXJnZXQpLmluZGV4KCk6YShiLnRhcmdldCkucGFyZW50KCkuaW5kZXgoKTtiLnByZXZlbnREZWZhdWx0KCksdGhpcy50byhjLGQuZG90c1NwZWVkKX0sdGhpcykpLGI9ZC5uYXZDb250YWluZXI/YShkLm5hdkNvbnRhaW5lcik6YShcIjxkaXY+XCIpLmFkZENsYXNzKGQubmF2Q29udGFpbmVyQ2xhc3MpLnByZXBlbmRUbyh0aGlzLl9jb250cm9scy4kY29udGFpbmVyKSx0aGlzLl9jb250cm9scy4kbmV4dD1hKFwiPFwiK2QubmF2RWxlbWVudCtcIj5cIiksdGhpcy5fY29udHJvbHMuJHByZXZpb3VzPXRoaXMuX2NvbnRyb2xzLiRuZXh0LmNsb25lKCksdGhpcy5fY29udHJvbHMuJHByZXZpb3VzLmFkZENsYXNzKGQubmF2Q2xhc3NbMF0pLmh0bWwoZC5uYXZUZXh0WzBdKS5oaWRlKCkucHJlcGVuZFRvKGIpLm9uKFwiY2xpY2tcIixhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5wcmV2KGQubmF2U3BlZWQpfSx0aGlzKSksdGhpcy5fY29udHJvbHMuJG5leHQuYWRkQ2xhc3MoZC5uYXZDbGFzc1sxXSkuaHRtbChkLm5hdlRleHRbMV0pLmhpZGUoKS5hcHBlbmRUbyhiKS5vbihcImNsaWNrXCIsYS5wcm94eShmdW5jdGlvbigpe3RoaXMubmV4dChkLm5hdlNwZWVkKX0sdGhpcykpO2ZvcihjIGluIHRoaXMuX292ZXJyaWRlcyl0aGlzLl9jb3JlW2NdPWEucHJveHkodGhpc1tjXSx0aGlzKX0sYi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhLGIsYyxkO2ZvcihhIGluIHRoaXMuX2hhbmRsZXJzKXRoaXMuJGVsZW1lbnQub2ZmKGEsdGhpcy5faGFuZGxlcnNbYV0pO2ZvcihiIGluIHRoaXMuX2NvbnRyb2xzKXRoaXMuX2NvbnRyb2xzW2JdLnJlbW92ZSgpO2ZvcihkIGluIHRoaXMub3ZlcmlkZXMpdGhpcy5fY29yZVtkXT10aGlzLl9vdmVycmlkZXNbZF07Zm9yKGMgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tjXSYmKHRoaXNbY109bnVsbCl9LGIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhLGIsYyxkPXRoaXMuX2NvcmUuc2V0dGluZ3MsZT10aGlzLl9jb3JlLmNsb25lcygpLmxlbmd0aC8yLGY9ZSt0aGlzLl9jb3JlLml0ZW1zKCkubGVuZ3RoLGc9ZC5jZW50ZXJ8fGQuYXV0b1dpZHRofHxkLmRvdERhdGE/MTpkLmRvdHNFYWNofHxkLml0ZW1zO2lmKFwicGFnZVwiIT09ZC5zbGlkZUJ5JiYoZC5zbGlkZUJ5PU1hdGgubWluKGQuc2xpZGVCeSxkLml0ZW1zKSksZC5kb3RzfHxcInBhZ2VcIj09ZC5zbGlkZUJ5KWZvcih0aGlzLl9wYWdlcz1bXSxhPWUsYj0wLGM9MDtmPmE7YSsrKShiPj1nfHwwPT09YikmJih0aGlzLl9wYWdlcy5wdXNoKHtzdGFydDphLWUsZW5kOmEtZStnLTF9KSxiPTAsKytjKSxiKz10aGlzLl9jb3JlLm1lcmdlcnModGhpcy5fY29yZS5yZWxhdGl2ZShhKSl9LGIucHJvdG90eXBlLmRyYXc9ZnVuY3Rpb24oKXt2YXIgYixjLGQ9XCJcIixlPXRoaXMuX2NvcmUuc2V0dGluZ3MsZj0odGhpcy5fY29yZS4kc3RhZ2UuY2hpbGRyZW4oKSx0aGlzLl9jb3JlLnJlbGF0aXZlKHRoaXMuX2NvcmUuY3VycmVudCgpKSk7aWYoIWUubmF2fHxlLmxvb3B8fGUubmF2UmV3aW5kfHwodGhpcy5fY29udHJvbHMuJHByZXZpb3VzLnRvZ2dsZUNsYXNzKFwiZGlzYWJsZWRcIiwwPj1mKSx0aGlzLl9jb250cm9scy4kbmV4dC50b2dnbGVDbGFzcyhcImRpc2FibGVkXCIsZj49dGhpcy5fY29yZS5tYXhpbXVtKCkpKSx0aGlzLl9jb250cm9scy4kcHJldmlvdXMudG9nZ2xlKGUubmF2KSx0aGlzLl9jb250cm9scy4kbmV4dC50b2dnbGUoZS5uYXYpLGUuZG90cyl7aWYoYj10aGlzLl9wYWdlcy5sZW5ndGgtdGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMuY2hpbGRyZW4oKS5sZW5ndGgsZS5kb3REYXRhJiYwIT09Yil7Zm9yKGM9MDtjPHRoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKCkubGVuZ3RoO2MrKylkKz10aGlzLl90ZW1wbGF0ZXNbdGhpcy5fY29yZS5yZWxhdGl2ZShjKV07dGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMuaHRtbChkKX1lbHNlIGI+MD8oZD1uZXcgQXJyYXkoYisxKS5qb2luKHRoaXMuX3RlbXBsYXRlc1swXSksdGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMuYXBwZW5kKGQpKTowPmImJnRoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKCkuc2xpY2UoYikucmVtb3ZlKCk7dGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMuZmluZChcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksdGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMuY2hpbGRyZW4oKS5lcShhLmluQXJyYXkodGhpcy5jdXJyZW50KCksdGhpcy5fcGFnZXMpKS5hZGRDbGFzcyhcImFjdGl2ZVwiKX10aGlzLl9jb250cm9scy4kaW5kaWNhdG9ycy50b2dnbGUoZS5kb3RzKX0sYi5wcm90b3R5cGUub25UcmlnZ2VyPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuX2NvcmUuc2V0dGluZ3M7Yi5wYWdlPXtpbmRleDphLmluQXJyYXkodGhpcy5jdXJyZW50KCksdGhpcy5fcGFnZXMpLGNvdW50OnRoaXMuX3BhZ2VzLmxlbmd0aCxzaXplOmMmJihjLmNlbnRlcnx8Yy5hdXRvV2lkdGh8fGMuZG90RGF0YT8xOmMuZG90c0VhY2h8fGMuaXRlbXMpfX0sYi5wcm90b3R5cGUuY3VycmVudD1mdW5jdGlvbigpe3ZhciBiPXRoaXMuX2NvcmUucmVsYXRpdmUodGhpcy5fY29yZS5jdXJyZW50KCkpO3JldHVybiBhLmdyZXAodGhpcy5fcGFnZXMsZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RhcnQ8PWImJmEuZW5kPj1ifSkucG9wKCl9LGIucHJvdG90eXBlLmdldFBvc2l0aW9uPWZ1bmN0aW9uKGIpe3ZhciBjLGQsZT10aGlzLl9jb3JlLnNldHRpbmdzO3JldHVyblwicGFnZVwiPT1lLnNsaWRlQnk/KGM9YS5pbkFycmF5KHRoaXMuY3VycmVudCgpLHRoaXMuX3BhZ2VzKSxkPXRoaXMuX3BhZ2VzLmxlbmd0aCxiPysrYzotLWMsYz10aGlzLl9wYWdlc1soYyVkK2QpJWRdLnN0YXJ0KTooYz10aGlzLl9jb3JlLnJlbGF0aXZlKHRoaXMuX2NvcmUuY3VycmVudCgpKSxkPXRoaXMuX2NvcmUuaXRlbXMoKS5sZW5ndGgsYj9jKz1lLnNsaWRlQnk6Yy09ZS5zbGlkZUJ5KSxjfSxiLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKGIpe2EucHJveHkodGhpcy5fb3ZlcnJpZGVzLnRvLHRoaXMuX2NvcmUpKHRoaXMuZ2V0UG9zaXRpb24oITApLGIpfSxiLnByb3RvdHlwZS5wcmV2PWZ1bmN0aW9uKGIpe2EucHJveHkodGhpcy5fb3ZlcnJpZGVzLnRvLHRoaXMuX2NvcmUpKHRoaXMuZ2V0UG9zaXRpb24oITEpLGIpfSxiLnByb3RvdHlwZS50bz1mdW5jdGlvbihiLGMsZCl7dmFyIGU7ZD9hLnByb3h5KHRoaXMuX292ZXJyaWRlcy50byx0aGlzLl9jb3JlKShiLGMpOihlPXRoaXMuX3BhZ2VzLmxlbmd0aCxhLnByb3h5KHRoaXMuX292ZXJyaWRlcy50byx0aGlzLl9jb3JlKSh0aGlzLl9wYWdlc1soYiVlK2UpJWVdLnN0YXJ0LGMpKX0sYS5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLk5hdmlnYXRpb249Yn0od2luZG93LlplcHRvfHx3aW5kb3cualF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjt2YXIgYz1mdW5jdGlvbihkKXt0aGlzLl9jb3JlPWQsdGhpcy5faGFzaGVzPXt9LHRoaXMuJGVsZW1lbnQ9dGhpcy5fY29yZS4kZWxlbWVudCx0aGlzLl9oYW5kbGVycz17XCJpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKCl7XCJVUkxIYXNoXCI9PXRoaXMuX2NvcmUuc2V0dGluZ3Muc3RhcnRQb3NpdGlvbiYmYShiKS50cmlnZ2VyKFwiaGFzaGNoYW5nZS5vd2wubmF2aWdhdGlvblwiKX0sdGhpcyksXCJwcmVwYXJlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGIpe3ZhciBjPWEoYi5jb250ZW50KS5maW5kKFwiW2RhdGEtaGFzaF1cIikuYW5kU2VsZihcIltkYXRhLWhhc2hdXCIpLmF0dHIoXCJkYXRhLWhhc2hcIik7dGhpcy5faGFzaGVzW2NdPWIuY29udGVudH0sdGhpcyl9LHRoaXMuX2NvcmUub3B0aW9ucz1hLmV4dGVuZCh7fSxjLkRlZmF1bHRzLHRoaXMuX2NvcmUub3B0aW9ucyksdGhpcy4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyksYShiKS5vbihcImhhc2hjaGFuZ2Uub3dsLm5hdmlnYXRpb25cIixhLnByb3h5KGZ1bmN0aW9uKCl7dmFyIGE9Yi5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSxjPXRoaXMuX2NvcmUuJHN0YWdlLmNoaWxkcmVuKCksZD10aGlzLl9oYXNoZXNbYV0mJmMuaW5kZXgodGhpcy5faGFzaGVzW2FdKXx8MDtyZXR1cm4gYT92b2lkIHRoaXMuX2NvcmUudG8oZCwhMSwhMCk6ITF9LHRoaXMpKX07Yy5EZWZhdWx0cz17VVJMaGFzaExpc3RlbmVyOiExfSxjLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGMsZDthKGIpLm9mZihcImhhc2hjaGFuZ2Uub3dsLm5hdmlnYXRpb25cIik7Zm9yKGMgaW4gdGhpcy5faGFuZGxlcnMpdGhpcy5fY29yZS4kZWxlbWVudC5vZmYoYyx0aGlzLl9oYW5kbGVyc1tjXSk7Zm9yKGQgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tkXSYmKHRoaXNbZF09bnVsbCl9LGEuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5IYXNoPWN9KHdpbmRvdy5aZXB0b3x8d2luZG93LmpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKlx0MDkuIFRBQiBDT0xMQVBTRVxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4hZnVuY3Rpb24gKCQpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLy8gVEFCQ09MTEFQU0UgQ0xBU1MgREVGSU5JVElPTlxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIHZhciBUYWJDb2xsYXBzZSA9IGZ1bmN0aW9uIChlbCwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgICA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuJHRhYnMgID0gJChlbCk7XG5cbiAgICAgICAgdGhpcy5fYWNjb3JkaW9uVmlzaWJsZSA9IGZhbHNlOyAvL2NvbnRlbnQgaXMgYXR0YWNoZWQgdG8gdGFicyBhdCBmaXJzdFxuICAgICAgICB0aGlzLl9pbml0QWNjb3JkaW9uKCk7XG4gICAgICAgIHRoaXMuX2NoZWNrU3RhdGVPblJlc2l6ZSgpO1xuXG5cbiAgICAgICAgLy8gY2hlY2tTdGF0ZSgpIGhhcyBnb25lIHRvIHNldFRpbWVvdXQgZm9yIG1ha2luZyBpdCBwb3NzaWJsZSB0byBhdHRhY2ggbGlzdGVuZXJzIHRvXG4gICAgICAgIC8vIHNob3duLWFjY29yZGlvbi5icy50YWJjb2xsYXBzZSBldmVudCBvbiBwYWdlIGxvYWQuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmxhdGxvZ2ljL2Jvb3RzdHJhcC10YWJjb2xsYXBzZS9pc3N1ZXMvMjNcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHRoYXQuY2hlY2tTdGF0ZSgpO1xuICAgICAgICB9LCAwKTtcbiAgICB9O1xuXG4gICAgVGFiQ29sbGFwc2UuREVGQVVMVFMgPSB7XG4gICAgICAgIGFjY29yZGlvbkNsYXNzOiAndmlzaWJsZS14cycsXG4gICAgICAgIHRhYnNDbGFzczogJ2hpZGRlbi14cycsXG4gICAgICAgIGFjY29yZGlvblRlbXBsYXRlOiBmdW5jdGlvbihoZWFkaW5nLCBncm91cElkLCBwYXJlbnRJZCwgYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm4gICc8ZGl2IGNsYXNzPVwicGFuZWwgcGFuZWwtZGVmYXVsdFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgPGRpdiBjbGFzcz1cInBhbmVsLWhlYWRpbmdcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgIDxoNCBjbGFzcz1cInBhbmVsLXRpdGxlXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICcgICAgICA8L2g0PicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICcgICA8ZGl2IGlkPVwiJyArIGdyb3VwSWQgKyAnXCIgY2xhc3M9XCJwYW5lbC1jb2xsYXBzZSBjb2xsYXBzZSAnICsgKGFjdGl2ZSA/ICdpbicgOiAnJykgKyAnXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWJvZHkganMtdGFiY29sbGFwc2UtcGFuZWwtYm9keVwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgICAgIDwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nXG5cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBUYWJDb2xsYXBzZS5wcm90b3R5cGUuY2hlY2tTdGF0ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmICh0aGlzLiR0YWJzLmlzKCc6dmlzaWJsZScpICYmIHRoaXMuX2FjY29yZGlvblZpc2libGUpe1xuICAgICAgICAgICAgdGhpcy5zaG93VGFicygpO1xuICAgICAgICAgICAgdGhpcy5fYWNjb3JkaW9uVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuJGFjY29yZGlvbi5pcygnOnZpc2libGUnKSAmJiAhdGhpcy5fYWNjb3JkaW9uVmlzaWJsZSl7XG4gICAgICAgICAgICB0aGlzLnNob3dBY2NvcmRpb24oKTtcbiAgICAgICAgICAgIHRoaXMuX2FjY29yZGlvblZpc2libGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIFRhYkNvbGxhcHNlLnByb3RvdHlwZS5zaG93VGFicyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcztcbiAgICAgICAgdGhpcy4kdGFicy50cmlnZ2VyKCQuRXZlbnQoJ3Nob3ctdGFicy5icy50YWJjb2xsYXBzZScpKTtcblxuICAgICAgICB2YXIgJHBhbmVsSGVhZGluZ3MgPSB0aGlzLiRhY2NvcmRpb24uZmluZCgnLmpzLXRhYmNvbGxhcHNlLXBhbmVsLWhlYWRpbmcnKS5kZXRhY2goKTtcblxuICAgICAgICAkcGFuZWxIZWFkaW5ncy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyICRwYW5lbEhlYWRpbmcgPSAkKHRoaXMpLFxuICAgICAgICAgICAgJHBhcmVudExpID0gJHBhbmVsSGVhZGluZy5kYXRhKCdicy50YWJjb2xsYXBzZS5wYXJlbnRMaScpO1xuXG4gICAgICAgICAgICB2YXIgJG9sZEhlYWRpbmcgPSB2aWV3Ll9wYW5lbEhlYWRpbmdUb1RhYkhlYWRpbmcoJHBhbmVsSGVhZGluZyk7XG5cbiAgICAgICAgICAgICRwYXJlbnRMaS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBpZiAoJHBhcmVudExpLnBhcmVudCgpLmhhc0NsYXNzKCdkcm9wZG93bi1tZW51JykgJiYgISRwYXJlbnRMaS5zaWJsaW5ncygnbGknKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICAkcGFyZW50TGkucGFyZW50KCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoISRvbGRIZWFkaW5nLmhhc0NsYXNzKCdjb2xsYXBzZWQnKSkge1xuICAgICAgICAgICAgICAgICRwYXJlbnRMaS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgaWYgKCRwYXJlbnRMaS5wYXJlbnQoKS5oYXNDbGFzcygnZHJvcGRvd24tbWVudScpKSB7XG4gICAgICAgICAgICAgICAgICAgICRwYXJlbnRMaS5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkb2xkSGVhZGluZy5yZW1vdmVDbGFzcygnY29sbGFwc2VkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRwYXJlbnRMaS5hcHBlbmQoJHBhbmVsSGVhZGluZyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghJCgnbGknKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICQoJ2xpJykuZmlyc3QoKS5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciAkcGFuZWxCb2RpZXMgPSB0aGlzLiRhY2NvcmRpb24uZmluZCgnLmpzLXRhYmNvbGxhcHNlLXBhbmVsLWJvZHknKTtcbiAgICAgICAgJHBhbmVsQm9kaWVzLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciAkcGFuZWxCb2R5ID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAkdGFiUGFuZSA9ICRwYW5lbEJvZHkuZGF0YSgnYnMudGFiY29sbGFwc2UudGFicGFuZScpO1xuICAgICAgICAgICAgJHRhYlBhbmUuYXBwZW5kKCRwYW5lbEJvZHkuY29udGVudHMoKS5kZXRhY2goKSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiRhY2NvcmRpb24uaHRtbCgnJyk7XG5cbiAgICAgICAgaWYodGhpcy5vcHRpb25zLnVwZGF0ZUxpbmtzKSB7XG4gICAgICAgICAgICB2YXIgJHRhYkNvbnRlbnRzID0gdGhpcy5nZXRUYWJDb250ZW50RWxlbWVudCgpO1xuICAgICAgICAgICAgJHRhYkNvbnRlbnRzLmZpbmQoJ1tkYXRhLXRvZ2dsZS13YXM9XCJ0YWJcIl0sIFtkYXRhLXRvZ2dsZS13YXM9XCJwaWxsXCJdJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGVsID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICB2YXIgaHJlZiA9ICRlbC5hdHRyKCdocmVmJykucmVwbGFjZSgvLWNvbGxhcHNlJC9nLCAnJyk7XG4gICAgICAgICAgICAgICAgJGVsLmF0dHIoe1xuICAgICAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiAkZWwuYXR0cignZGF0YS10b2dnbGUtd2FzJyksXG4gICAgICAgICAgICAgICAgICAgICdkYXRhLXRvZ2dsZS13YXMnOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEtcGFyZW50JzogJycsXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IGhyZWZcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4kdGFicy50cmlnZ2VyKCQuRXZlbnQoJ3Nob3duLXRhYnMuYnMudGFiY29sbGFwc2UnKSk7XG4gICAgfTtcblxuICAgIFRhYkNvbGxhcHNlLnByb3RvdHlwZS5nZXRUYWJDb250ZW50RWxlbWVudCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciAkdGFiQ29udGVudHMgPSAkKHRoaXMub3B0aW9ucy50YWJDb250ZW50U2VsZWN0b3IpO1xuICAgICAgICBpZigkdGFiQ29udGVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAkdGFiQ29udGVudHMgPSB0aGlzLiR0YWJzLnNpYmxpbmdzKCcudGFiLWNvbnRlbnQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHRhYkNvbnRlbnRzO1xuICAgIH07XG5cbiAgICBUYWJDb2xsYXBzZS5wcm90b3R5cGUuc2hvd0FjY29yZGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuJHRhYnMudHJpZ2dlcigkLkV2ZW50KCdzaG93LWFjY29yZGlvbi5icy50YWJjb2xsYXBzZScpKTtcblxuICAgICAgICB2YXIgJGhlYWRpbmdzID0gdGhpcy4kdGFicy5maW5kKCdsaTpub3QoLmRyb3Bkb3duKSBbZGF0YS10b2dnbGU9XCJ0YWJcIl0sIGxpOm5vdCguZHJvcGRvd24pIFtkYXRhLXRvZ2dsZT1cInBpbGxcIl0nKSxcbiAgICAgICAgICAgIHZpZXcgPSB0aGlzO1xuICAgICAgICAkaGVhZGluZ3MuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyICRoZWFkaW5nID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAkcGFyZW50TGkgPSAkaGVhZGluZy5wYXJlbnQoKTtcbiAgICAgICAgICAgICRoZWFkaW5nLmRhdGEoJ2JzLnRhYmNvbGxhcHNlLnBhcmVudExpJywgJHBhcmVudExpKTtcbiAgICAgICAgICAgIHZpZXcuJGFjY29yZGlvbi5hcHBlbmQodmlldy5fY3JlYXRlQWNjb3JkaW9uR3JvdXAodmlldy4kYWNjb3JkaW9uLmF0dHIoJ2lkJyksICRoZWFkaW5nLmRldGFjaCgpKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKHRoaXMub3B0aW9ucy51cGRhdGVMaW5rcykge1xuICAgICAgICAgICAgdmFyIHBhcmVudElkID0gdGhpcy4kYWNjb3JkaW9uLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICB2YXIgJHNlbGVjdG9yID0gdGhpcy4kYWNjb3JkaW9uLmZpbmQoJy5qcy10YWJjb2xsYXBzZS1wYW5lbC1ib2R5Jyk7XG4gICAgICAgICAgICAkc2VsZWN0b3IuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdLCBbZGF0YS10b2dnbGU9XCJwaWxsXCJdJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGVsID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICB2YXIgaHJlZiA9ICRlbC5hdHRyKCdocmVmJykgKyAnLWNvbGxhcHNlJztcbiAgICAgICAgICAgICAgICAkZWwuYXR0cih7XG4gICAgICAgICAgICAgICAgICAgICdkYXRhLXRvZ2dsZS13YXMnOiAkZWwuYXR0cignZGF0YS10b2dnbGUnKSxcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogJ2NvbGxhcHNlJyxcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEtcGFyZW50JzogJyMnICsgcGFyZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IGhyZWZcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4kdGFicy50cmlnZ2VyKCQuRXZlbnQoJ3Nob3duLWFjY29yZGlvbi5icy50YWJjb2xsYXBzZScpKTtcbiAgICB9O1xuXG4gICAgVGFiQ29sbGFwc2UucHJvdG90eXBlLl9wYW5lbEhlYWRpbmdUb1RhYkhlYWRpbmcgPSBmdW5jdGlvbigkaGVhZGluZykge1xuICAgICAgICB2YXIgaHJlZiA9ICRoZWFkaW5nLmF0dHIoJ2hyZWYnKS5yZXBsYWNlKC8tY29sbGFwc2UkL2csICcnKTtcbiAgICAgICAgJGhlYWRpbmcuYXR0cih7XG4gICAgICAgICAgICAnZGF0YS10b2dnbGUnOiAndGFiJyxcbiAgICAgICAgICAgICdocmVmJzogaHJlZixcbiAgICAgICAgICAgICdkYXRhLXBhcmVudCc6ICcnXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gJGhlYWRpbmc7XG4gICAgfTtcblxuICAgIFRhYkNvbGxhcHNlLnByb3RvdHlwZS5fdGFiSGVhZGluZ1RvUGFuZWxIZWFkaW5nID0gZnVuY3Rpb24oJGhlYWRpbmcsIGdyb3VwSWQsIHBhcmVudElkLCBhY3RpdmUpIHtcbiAgICAgICAgJGhlYWRpbmcuYWRkQ2xhc3MoJ2pzLXRhYmNvbGxhcHNlLXBhbmVsLWhlYWRpbmcgJyArIChhY3RpdmUgPyAnJyA6ICdjb2xsYXBzZWQnKSk7XG4gICAgICAgICRoZWFkaW5nLmF0dHIoe1xuICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogJ2NvbGxhcHNlJyxcbiAgICAgICAgICAgICdkYXRhLXBhcmVudCc6ICcjJyArIHBhcmVudElkLFxuICAgICAgICAgICAgJ2hyZWYnOiAnIycgKyBncm91cElkXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gJGhlYWRpbmc7XG4gICAgfTtcblxuICAgIFRhYkNvbGxhcHNlLnByb3RvdHlwZS5fY2hlY2tTdGF0ZU9uUmVzaXplID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzO1xuICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodmlldy5fcmVzaXplVGltZW91dCk7XG4gICAgICAgICAgICB2aWV3Ll9yZXNpemVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHZpZXcuY2hlY2tTdGF0ZSgpO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgVGFiQ29sbGFwc2UucHJvdG90eXBlLl9pbml0QWNjb3JkaW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHJhbmRvbVN0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCIsXG4gICAgICAgICAgICAgICAgcG9zc2libGUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XG4gICAgICAgICAgICBmb3IoIHZhciBpPTA7IGkgPCA1OyBpKysgKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHNyY0lkID0gdGhpcy4kdGFicy5hdHRyKCdpZCcpLFxuICAgICAgICAgICAgYWNjb3JkaW9uSWQgPSAoc3JjSWQgPyBzcmNJZCA6IHJhbmRvbVN0cmluZygpKSArICctYWNjb3JkaW9uJztcblxuICAgICAgICB0aGlzLiRhY2NvcmRpb24gPSAkKCc8ZGl2IGNsYXNzPVwicGFuZWwtZ3JvdXAgJyArIHRoaXMub3B0aW9ucy5hY2NvcmRpb25DbGFzcyArICdcIiBpZD1cIicgKyBhY2NvcmRpb25JZCArJ1wiPjwvZGl2PicpO1xuICAgICAgICB0aGlzLiR0YWJzLmFmdGVyKHRoaXMuJGFjY29yZGlvbik7XG4gICAgICAgIHRoaXMuJHRhYnMuYWRkQ2xhc3ModGhpcy5vcHRpb25zLnRhYnNDbGFzcyk7XG4gICAgICAgIHRoaXMuZ2V0VGFiQ29udGVudEVsZW1lbnQoKS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMudGFic0NsYXNzKTtcbiAgICB9O1xuXG4gICAgVGFiQ29sbGFwc2UucHJvdG90eXBlLl9jcmVhdGVBY2NvcmRpb25Hcm91cCA9IGZ1bmN0aW9uKHBhcmVudElkLCAkaGVhZGluZyl7XG4gICAgICAgIHZhciB0YWJTZWxlY3RvciA9ICRoZWFkaW5nLmF0dHIoJ2RhdGEtdGFyZ2V0JyksXG4gICAgICAgICAgICBhY3RpdmUgPSAkaGVhZGluZy5kYXRhKCdicy50YWJjb2xsYXBzZS5wYXJlbnRMaScpLmlzKCcuYWN0aXZlJyk7XG5cbiAgICAgICAgaWYgKCF0YWJTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGFiU2VsZWN0b3IgPSAkaGVhZGluZy5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICB0YWJTZWxlY3RvciA9IHRhYlNlbGVjdG9yICYmIHRhYlNlbGVjdG9yLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sICcnKTsgLy9zdHJpcCBmb3IgaWU3XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJHRhYlBhbmUgPSAkKHRhYlNlbGVjdG9yKSxcbiAgICAgICAgICAgIGdyb3VwSWQgPSAkdGFiUGFuZS5hdHRyKCdpZCcpICsgJy1jb2xsYXBzZScsXG4gICAgICAgICAgICAkcGFuZWwgPSAkKHRoaXMub3B0aW9ucy5hY2NvcmRpb25UZW1wbGF0ZSgkaGVhZGluZywgZ3JvdXBJZCwgcGFyZW50SWQsIGFjdGl2ZSkpO1xuICAgICAgICAkcGFuZWwuZmluZCgnLnBhbmVsLWhlYWRpbmcgPiAucGFuZWwtdGl0bGUnKS5hcHBlbmQodGhpcy5fdGFiSGVhZGluZ1RvUGFuZWxIZWFkaW5nKCRoZWFkaW5nLCBncm91cElkLCBwYXJlbnRJZCwgYWN0aXZlKSk7XG4gICAgICAgICRwYW5lbC5maW5kKCcucGFuZWwtYm9keScpLmFwcGVuZCgkdGFiUGFuZS5jb250ZW50cygpLmRldGFjaCgpKVxuICAgICAgICAgICAgLmRhdGEoJ2JzLnRhYmNvbGxhcHNlLnRhYnBhbmUnLCAkdGFiUGFuZSk7XG5cbiAgICAgICAgcmV0dXJuICRwYW5lbDtcbiAgICB9O1xuXG5cblxuICAgIC8vIFRBQkNPTExBUFNFIFBMVUdJTiBERUZJTklUSU9OXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgICQuZm4udGFiQ29sbGFwc2UgPSBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpO1xuICAgICAgICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy50YWJjb2xsYXBzZScpO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgVGFiQ29sbGFwc2UuREVGQVVMVFMsICR0aGlzLmRhdGEoKSwgdHlwZW9mIG9wdGlvbiA9PT0gJ29iamVjdCcgJiYgb3B0aW9uKTtcblxuICAgICAgICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy50YWJjb2xsYXBzZScsIG5ldyBUYWJDb2xsYXBzZSh0aGlzLCBvcHRpb25zKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkLmZuLnRhYkNvbGxhcHNlLkNvbnN0cnVjdG9yID0gVGFiQ29sbGFwc2U7XG5cblxufSh3aW5kb3cualF1ZXJ5KTtcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcdDEwLiBQUk9HUkVTU0JBUlxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4oZnVuY3Rpb24oJCkge1xuXG5cdGpRdWVyeS5mbi5wcm9ncmVzc0JhciA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdFx0Ly9EZWZhdWx0IHZhbHVlcyBmb3IgcHJvZ3Jlc3NfYmFyXG5cdFx0dmFyIGRlZmF1bHRzID0ge1xuXHRcdFx0aGVpZ2h0IDogXCIzMFwiLFxuXHRcdFx0YmFja2dyb3VuZENvbG9yIDogXCIjRTBFMEUwXCIsXG5cdFx0XHRiYXJDb2xvciA6IFwiI0Y5NzM1MlwiLFxuXHRcdFx0dGFyZ2V0QmFyQ29sb3IgOiBcIiNDQ0NcIixcblx0XHRcdHBlcmNlbnRhZ2UgOiB0cnVlLFxuXHRcdFx0c2hhZG93IDogZmFsc2UsXG5cdFx0XHRib3JkZXIgOiBmYWxzZSxcblx0XHRcdGFuaW1hdGlvbiA6IGZhbHNlLFxuXHRcdFx0YW5pbWF0ZVRhcmdldCA6IGZhbHNlLFxuXHRcdH07XG5cblx0XHR2YXIgc2V0dGluZ3MgPSAkLmV4dGVuZCgge30sIGRlZmF1bHRzLCBvcHRpb25zICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBlbGVtID0gJCggdGhpcyApO1xuXHRcdFx0JC5mbi5yZXBsYWNlUHJvZ3Jlc3NCYXIoIGVsZW0sIHNldHRpbmdzICk7XG5cdFx0fSk7XG5cdH07XG5cblx0JC5mbi5yZXBsYWNlUHJvZ3Jlc3NCYXIgPSBmdW5jdGlvbiggaXRlbSwgc2V0dGluZ3MgKSB7XG5cdFx0dmFyIHNraWxsXHRcdD0gaXRlbS50ZXh0KCk7XG5cdFx0dmFyIHByb2dyZXNzXHQ9IGl0ZW0uZGF0YSggJ3dpZHRoJyApO1xuXHRcdHZhciB0YXJnZXRcdFx0PSBpdGVtLmRhdGEgKCAndGFyZ2V0JyApO1xuXHRcdHZhciBiYXJfY2xhc3NlcyA9ICcgJztcblx0XHR2YXIgYW5pbWF0aW9uX2NsYXNzID0gJyc7XG5cdFx0dmFyIGJhcl9zdHlsZXNcdD0gJ2JhY2tncm91bmQtY29sb3I6JyArIHNldHRpbmdzLmJhY2tncm91bmRDb2xvciArICc7aGVpZ2h0OicgKyBzZXR0aW5ncy5oZWlnaHQgKyAncHg7Jztcblx0XHRpZiAoIHNldHRpbmdzLnNoYWRvdyApIHsgYmFyX2NsYXNzZXMgKz0gJ3NoYWRvdyc7IH1cblx0XHRpZiAoIHNldHRpbmdzLmJvcmRlciApIHsgYmFyX2NsYXNzZXMgKz0gJyBib3JkZXInOyB9XG5cdFx0aWYgKCBzZXR0aW5ncy5hbmltYXRpb24gKSB7IGFuaW1hdGlvbl9jbGFzcyA9ICcgYW5pbWF0ZSc7IH1cblxuXHRcdHZhciBvdmVybGF5ID0gJzxkaXYgY2xhc3M9XCJzb25ueV9wcm9ncmVzc2JhcicgKyBhbmltYXRpb25fY2xhc3MgKyAnXCIgZGF0YS13aWR0aD1cIicgKyBwcm9ncmVzcyArICdcIj4nO1xuXHRcdG92ZXJsYXkgKz0gJzxwIGNsYXNzPVwidGl0bGVcIj4nICsgc2tpbGwgKyAnPC9wPic7XG5cdFx0b3ZlcmxheSArPSAnPGRpdiBjbGFzcz1cImJhci1jb250YWluZXInICsgYmFyX2NsYXNzZXMgKyAnXCIgc3R5bGU9XCInICsgYmFyX3N0eWxlcyArICdcIj4nO1xuXG5cdFx0Ly8gUmVuZGVyIHRoZSBwcm9ncmVzcyBiYXIgYmFja2dyb3VuZFxuXHRcdG92ZXJsYXkgKz0gJzxzcGFuIGNsYXNzPVwiYmFja2dyb3VuZEJhclwiPjwvc3Bhbj4nO1xuXG5cdFx0Ly8gRGlzcGxheSB0YXJnZXQgYmFyIG9ubHkgaWYgc2V0XG5cdFx0aWYgKCB0YXJnZXQgKSB7XG5cdFx0XHRpZiAoIHNldHRpbmdzLmFuaW1hdGVUYXJnZXQgKSB7XG5cdFx0XHRcdG92ZXJsYXkgKz0gJzxzcGFuIGNsYXNzPVwidGFyZ2V0QmFyIGxvYWRlclwiIHN0eWxlPVwid2lkdGg6JyArIHRhcmdldCArICclO2JhY2tncm91bmQtY29sb3I6JyArIHNldHRpbmdzLnRhcmdldEJhckNvbG9yICsgJztcIj48L3NwYW4+Jztcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRvdmVybGF5ICs9ICc8c3BhbiBjbGFzcz1cInRhcmdldEJhclwiIHN0eWxlPVwid2lkdGg6JyArIHRhcmdldCArICclO2JhY2tncm91bmQtY29sb3I6JyArIHNldHRpbmdzLnRhcmdldEJhckNvbG9yICsgJztcIj48L3NwYW4+Jztcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW5kZXIgdGhlIHByb2dyZXNzIGJhclxuXHRcdGlmICggc2V0dGluZ3MuYW5pbWF0aW9uICkge1xuXHRcdFx0b3ZlcmxheSArPSAnPHNwYW4gY2xhc3M9XCJiYXJcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6JyArIHNldHRpbmdzLmJhckNvbG9yICsgJztcIj48L3NwYW4+Jztcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRvdmVybGF5ICs9ICc8c3BhbiBjbGFzcz1cImJhclwiIHN0eWxlPVwid2lkdGg6JyArIHByb2dyZXNzICsgJyU7YmFja2dyb3VuZC1jb2xvcjonICsgc2V0dGluZ3MuYmFyQ29sb3IgKyAnO1wiPjwvc3Bhbj4nO1xuXHRcdH1cblxuXHRcdC8vIFJlbmRlciB0aGUgcGVyY2VudGFnZSBpZiBlbmFibGVkXG5cdFx0aWYgKCBzZXR0aW5ncy5wZXJjZW50YWdlICkge1xuXHRcdFx0b3ZlcmxheSArPSAnPHNwYW4gY2xhc3M9XCJwcm9ncmVzcy1wZXJjZW50XCIgc3R5bGU9XCJsaW5lLWhlaWdodDonICsgc2V0dGluZ3MuaGVpZ2h0ICsgJ3B4O1wiPicgKyBwcm9ncmVzcyArICclPC9zcGFuPic7XG5cdFx0fVxuXG5cdFx0Ly8gRW5kXG5cdFx0b3ZlcmxheSArPSAnPC9kaXY+PC9kaXY+JztcblxuXHRcdC8vIFJlbmRlciB0aGUgcHJvZ3Jlc3MgYmFyIG9uIHRoZSBwYWdlXG5cdFx0JCggaXRlbSApLnJlcGxhY2VXaXRoKCBvdmVybGF5ICk7XG5cblx0fTtcblxuXHR2YXIgYW5pbWF0ZSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIGRvY19oZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cblx0XHQkKCAnLnNvbm55X3Byb2dyZXNzYmFyLmFuaW1hdGUnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgcG9zaXRpb24gPSAkKCB0aGlzICkub2Zmc2V0KCkudG9wO1xuXG5cdFx0XHRpZiAoICggJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgZG9jX2hlaWdodCAtIDYwICkgPiBwb3NpdGlvbiApIHtcblx0XHRcdFx0dmFyIHByb2dyZXNzID0gJCggdGhpcyApLmRhdGEoICd3aWR0aCcgKSArIFwiJVwiO1xuXG5cdFx0XHRcdCQoIHRoaXMgKS5yZW1vdmVDbGFzcyggJ2FuaW1hdGUnICk7XG5cdFx0XHRcdCQoIHRoaXMgKS5maW5kKCAnLmJhcicgKS5jc3MoJ29wYWNpdHknLCAnMScpO1xuXG5cdFx0XHRcdCQoIHRoaXMgKS5maW5kKCAnLmJhcicgKS5hbmltYXRlKHtcblx0XHRcdFx0XHR3aWR0aCA6IHByb2dyZXNzLFxuXHRcdFx0XHRcdG9wYWNpdHkgOiAxXG5cdFx0XHRcdH0sIDMwMDAgKTtcblx0XHRcdH1cblxuXHRcdH0pO1xuXG5cdH07XG5cblx0Ly8gTG9va2luZyBmb3IgYW4gYW5pbWF0aW9uIGVsZW1lbnQgaW4gdGhlIHZpZXdcblx0JCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcblxuXHRcdGlmICggJCggJy5zb25ueV9wcm9ncmVzc2Jhci5hbmltYXRlJyApLmxlbmd0aCA8IDEgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlcmUgaXMgYW4gYW5pbWF0ZSBlbGVtZW50IHZpc2libGUgb24gdGhlIHBhZ2UsIHRyaWdnZXIgdGhlIGFuaW1hdGlvblxuXHRcdGFuaW1hdGUoKTtcblxuXHR9KTtcblxuXG59KShqUXVlcnkpO1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKlx0MTEuIFdBWVBPSU5UU1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG4vKlxualF1ZXJ5IFdheXBvaW50cyAtIHYyLjAuM1xuQ29weXJpZ2h0IChjKSAyMDExLTIwMTMgQ2FsZWIgVHJvdWdodG9uXG5EdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBhbmQgR1BMIGxpY2Vuc2UuXG5odHRwczovL2dpdGh1Yi5jb20vaW1ha2V3ZWJ0aGluZ3MvanF1ZXJ5LXdheXBvaW50cy9ibG9iL21hc3Rlci9saWNlbnNlcy50eHRcbiovXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qXHQxMi4gQ09VTlRFUiBVUFxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKiFcbioganF1ZXJ5LmNvdW50ZXJ1cC5qcyAxLjBcbipcbiogQ29weXJpZ2h0IDIwMTMsIEJlbmphbWluIEludGFsIGh0dHA6Ly9nYW1iaXQucGggQGJmaW50YWxcbiogUmVsZWFzZWQgdW5kZXIgdGhlIEdQTCB2MiBMaWNlbnNlXG4qXG4qIERhdGU6IE5vdiAyNiwgMjAxM1xuKi8oZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZS5mbi5jb3VudGVyVXA9ZnVuY3Rpb24odCl7dmFyIG49ZS5leHRlbmQoe3RpbWU6NDAwLGRlbGF5OjEwfSx0KTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxyPW4saT1mdW5jdGlvbigpe3ZhciBlPVtdLG49ci50aW1lL3IuZGVsYXksaT10LnRleHQoKSxzPS9bMC05XSssWzAtOV0rLy50ZXN0KGkpO2k9aS5yZXBsYWNlKC8sL2csXCJcIik7dmFyIG89L15bMC05XSskLy50ZXN0KGkpLHU9L15bMC05XStcXC5bMC05XSskLy50ZXN0KGkpLGE9dT8oaS5zcGxpdChcIi5cIilbMV18fFtdKS5sZW5ndGg6MDtmb3IodmFyIGY9bjtmPj0xO2YtLSl7dmFyIGw9cGFyc2VJbnQoaS9uKmYpO3UmJihsPXBhcnNlRmxvYXQoaS9uKmYpLnRvRml4ZWQoYSkpO2lmKHMpd2hpbGUoLyhcXGQrKShcXGR7M30pLy50ZXN0KGwudG9TdHJpbmcoKSkpbD1sLnRvU3RyaW5nKCkucmVwbGFjZSgvKFxcZCspKFxcZHszfSkvLFwiJDEsJDJcIik7ZS51bnNoaWZ0KGwpfXQuZGF0YShcImNvdW50ZXJ1cC1udW1zXCIsZSk7dC50ZXh0KFwiMFwiKTt2YXIgYz1mdW5jdGlvbigpe3QudGV4dCh0LmRhdGEoXCJjb3VudGVydXAtbnVtc1wiKS5zaGlmdCgpKTtpZih0LmRhdGEoXCJjb3VudGVydXAtbnVtc1wiKS5sZW5ndGgpc2V0VGltZW91dCh0LmRhdGEoXCJjb3VudGVydXAtZnVuY1wiKSxyLmRlbGF5KTtlbHNle2RlbGV0ZSB0LmRhdGEoXCJjb3VudGVydXAtbnVtc1wiKTt0LmRhdGEoXCJjb3VudGVydXAtbnVtc1wiLG51bGwpO3QuZGF0YShcImNvdW50ZXJ1cC1mdW5jXCIsbnVsbCl9fTt0LmRhdGEoXCJjb3VudGVydXAtZnVuY1wiLGMpO3NldFRpbWVvdXQodC5kYXRhKFwiY291bnRlcnVwLWZ1bmNcIiksci5kZWxheSl9O3Qud2F5cG9pbnQoaSx7b2Zmc2V0OlwiMTAwJVwiLHRyaWdnZXJPbmNlOiEwfSl9KX19KShqUXVlcnkpO1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKlx0MTMuIENJUkNMRSBQUk9HUkVTUyBCQVJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLy8gUHJvZ3Jlc3NCYXIuanMgMC44LjFcbi8vIGh0dHBzOi8va2ltbW9icnVuZmVsZHQuZ2l0aHViLmlvL3Byb2dyZXNzYmFyLmpzXG4vLyBMaWNlbnNlOiBNSVRcblxuIWZ1bmN0aW9uKGEpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWEoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sYSk7ZWxzZXt2YXIgYjtiPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyxiLlByb2dyZXNzQmFyPWEoKX19KGZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uIGIoYSxjLGQpe2Z1bmN0aW9uIGUoZyxoKXtpZighY1tnXSl7aWYoIWFbZ10pe3ZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWgmJmkpcmV0dXJuIGkoZywhMCk7aWYoZilyZXR1cm4gZihnLCEwKTt2YXIgaj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2crXCInXCIpO3Rocm93IGouY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixqfXZhciBrPWNbZ109e2V4cG9ydHM6e319O2FbZ11bMF0uY2FsbChrLmV4cG9ydHMsZnVuY3Rpb24oYil7dmFyIGM9YVtnXVsxXVtiXTtyZXR1cm4gZShjP2M6Yil9LGssay5leHBvcnRzLGIsYSxjLGQpfXJldHVybiBjW2ddLmV4cG9ydHN9Zm9yKHZhciBmPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsZz0wO2c8ZC5sZW5ndGg7ZysrKWUoZFtnXSk7cmV0dXJuIGV9KHsxOltmdW5jdGlvbihiLGMsZCl7IWZ1bmN0aW9uKGIpe1widW5kZWZpbmVkXCI9PXR5cGVvZiBTSElGVFlfREVCVUdfTk9XJiYoU0hJRlRZX0RFQlVHX05PVz1mdW5jdGlvbigpe3JldHVybituZXcgRGF0ZX0pO3ZhciBlPWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSgpe31mdW5jdGlvbiBmKGEsYil7dmFyIGM7Zm9yKGMgaW4gYSlPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChhLGMpJiZiKGMpfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gZihiLGZ1bmN0aW9uKGMpe2FbY109YltjXX0pLGF9ZnVuY3Rpb24gaChhLGIpe2YoYixmdW5jdGlvbihjKXtcInVuZGVmaW5lZFwiPT10eXBlb2YgYVtjXSYmKGFbY109YltjXSl9KX1mdW5jdGlvbiBpKGEsYixjLGQsZSxmLGcpe3ZhciBoLGk9KGEtZikvZTtmb3IoaCBpbiBiKWIuaGFzT3duUHJvcGVydHkoaCkmJihiW2hdPWooY1toXSxkW2hdLG9bZ1toXV0saSkpO3JldHVybiBifWZ1bmN0aW9uIGooYSxiLGMsZCl7cmV0dXJuIGErKGItYSkqYyhkKX1mdW5jdGlvbiBrKGEsYil7dmFyIGM9bi5wcm90b3R5cGUuZmlsdGVyLGQ9YS5fZmlsdGVyQXJncztmKGMsZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNbZV1bYl0mJmNbZV1bYl0uYXBwbHkoYSxkKX0pfWZ1bmN0aW9uIGwoYSxiLGMsZCxlLGYsZyxoLGope3Y9YitjLHc9TWF0aC5taW4odSgpLHYpLHg9dz49dixhLmlzUGxheWluZygpJiYheD8oaihhLl90aW1lb3V0SGFuZGxlcixzKSxrKGEsXCJiZWZvcmVUd2VlblwiKSxpKHcsZCxlLGYsYyxiLGcpLGsoYSxcImFmdGVyVHdlZW5cIiksaChkKSk6eCYmKGgoZiksYS5zdG9wKCEwKSl9ZnVuY3Rpb24gbShhLGIpe3ZhciBjPXt9O3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBiP2YoYSxmdW5jdGlvbihhKXtjW2FdPWJ9KTpmKGEsZnVuY3Rpb24oYSl7Y1thXXx8KGNbYV09YlthXXx8cSl9KSxjfWZ1bmN0aW9uIG4oYSxiKXt0aGlzLl9jdXJyZW50U3RhdGU9YXx8e30sdGhpcy5fY29uZmlndXJlZD0hMSx0aGlzLl9zY2hlZHVsZUZ1bmN0aW9uPXAsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGImJnRoaXMuc2V0Q29uZmlnKGIpfXZhciBvLHAscT1cImxpbmVhclwiLHI9NTAwLHM9MWUzLzYwLHQ9RGF0ZS5ub3c/RGF0ZS5ub3c6ZnVuY3Rpb24oKXtyZXR1cm4rbmV3IERhdGV9LHU9U0hJRlRZX0RFQlVHX05PVz9TSElGVFlfREVCVUdfTk9XOnQ7cD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUmJndpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHNldFRpbWVvdXQ6c2V0VGltZW91dDt2YXIgdix3LHg7cmV0dXJuIG4ucHJvdG90eXBlLnR3ZWVuPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9pc1R3ZWVuaW5nP3RoaXM6KHZvaWQgMD09PWEmJnRoaXMuX2NvbmZpZ3VyZWR8fHRoaXMuc2V0Q29uZmlnKGEpLHRoaXMuX3N0YXJ0KHRoaXMuZ2V0KCkpLHRoaXMucmVzdW1lKCkpfSxuLnByb3RvdHlwZS5zZXRDb25maWc9ZnVuY3Rpb24oYSl7YT1hfHx7fSx0aGlzLl9jb25maWd1cmVkPSEwLHRoaXMuX3BhdXNlZEF0VGltZT1udWxsLHRoaXMuX3N0YXJ0PWEuc3RhcnR8fGUsdGhpcy5fc3RlcD1hLnN0ZXB8fGUsdGhpcy5fZmluaXNoPWEuZmluaXNofHxlLHRoaXMuX2R1cmF0aW9uPWEuZHVyYXRpb258fHIsdGhpcy5fY3VycmVudFN0YXRlPWEuZnJvbXx8dGhpcy5nZXQoKSx0aGlzLl9vcmlnaW5hbFN0YXRlPXRoaXMuZ2V0KCksdGhpcy5fdGFyZ2V0U3RhdGU9YS50b3x8dGhpcy5nZXQoKSx0aGlzLl90aW1lc3RhbXA9dSgpO3ZhciBiPXRoaXMuX2N1cnJlbnRTdGF0ZSxjPXRoaXMuX3RhcmdldFN0YXRlO3JldHVybiBoKGMsYiksdGhpcy5fZWFzaW5nPW0oYixhLmVhc2luZ3x8cSksdGhpcy5fZmlsdGVyQXJncz1bYix0aGlzLl9vcmlnaW5hbFN0YXRlLGMsdGhpcy5fZWFzaW5nXSxrKHRoaXMsXCJ0d2VlbkNyZWF0ZWRcIiksdGhpc30sbi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGcoe30sdGhpcy5fY3VycmVudFN0YXRlKX0sbi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEpe3RoaXMuX2N1cnJlbnRTdGF0ZT1hfSxuLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXVzZWRBdFRpbWU9dSgpLHRoaXMuX2lzUGF1c2VkPSEwLHRoaXN9LG4ucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3RoaXMuX2lzUGF1c2VkJiYodGhpcy5fdGltZXN0YW1wKz11KCktdGhpcy5fcGF1c2VkQXRUaW1lKSx0aGlzLl9pc1BhdXNlZD0hMSx0aGlzLl9pc1R3ZWVuaW5nPSEwO3ZhciBhPXRoaXM7cmV0dXJuIHRoaXMuX3RpbWVvdXRIYW5kbGVyPWZ1bmN0aW9uKCl7bChhLGEuX3RpbWVzdGFtcCxhLl9kdXJhdGlvbixhLl9jdXJyZW50U3RhdGUsYS5fb3JpZ2luYWxTdGF0ZSxhLl90YXJnZXRTdGF0ZSxhLl9lYXNpbmcsYS5fc3RlcCxhLl9zY2hlZHVsZUZ1bmN0aW9uKX0sdGhpcy5fdGltZW91dEhhbmRsZXIoKSx0aGlzfSxuLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9pc1R3ZWVuaW5nPSExLHRoaXMuX2lzUGF1c2VkPSExLHRoaXMuX3RpbWVvdXRIYW5kbGVyPWUsYSYmKGcodGhpcy5fY3VycmVudFN0YXRlLHRoaXMuX3RhcmdldFN0YXRlKSxrKHRoaXMsXCJhZnRlclR3ZWVuRW5kXCIpLHRoaXMuX2ZpbmlzaC5jYWxsKHRoaXMsdGhpcy5fY3VycmVudFN0YXRlKSksdGhpc30sbi5wcm90b3R5cGUuaXNQbGF5aW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVHdlZW5pbmcmJiF0aGlzLl9pc1BhdXNlZH0sbi5wcm90b3R5cGUuc2V0U2NoZWR1bGVGdW5jdGlvbj1mdW5jdGlvbihhKXt0aGlzLl9zY2hlZHVsZUZ1bmN0aW9uPWF9LG4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgYTtmb3IoYSBpbiB0aGlzKXRoaXMuaGFzT3duUHJvcGVydHkoYSkmJmRlbGV0ZSB0aGlzW2FdfSxuLnByb3RvdHlwZS5maWx0ZXI9e30sbi5wcm90b3R5cGUuZm9ybXVsYT17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfX0sbz1uLnByb3RvdHlwZS5mb3JtdWxhLGcobix7bm93OnUsZWFjaDpmLHR3ZWVuUHJvcHM6aSx0d2VlblByb3A6aixhcHBseUZpbHRlcjprLHNoYWxsb3dDb3B5OmcsZGVmYXVsdHM6aCxjb21wb3NlRWFzaW5nT2JqZWN0Om19KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTSElGVFlfREVCVUdfTk9XJiYoYi50aW1lb3V0SGFuZGxlcj1sKSxcIm9iamVjdFwiPT10eXBlb2YgZD9jLmV4cG9ydHM9bjpcImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhLmFtZD9hKGZ1bmN0aW9uKCl7cmV0dXJuIG59KTpcInVuZGVmaW5lZFwiPT10eXBlb2YgYi5Ud2VlbmFibGUmJihiLlR3ZWVuYWJsZT1uKSxufSgpOyFmdW5jdGlvbigpe2Uuc2hhbGxvd0NvcHkoZS5wcm90b3R5cGUuZm9ybXVsYSx7ZWFzZUluUXVhZDpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5wb3coYSwyKX0sZWFzZU91dFF1YWQ6ZnVuY3Rpb24oYSl7cmV0dXJuLShNYXRoLnBvdyhhLTEsMiktMSl9LGVhc2VJbk91dFF1YWQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGEvPS41KTwxPy41Kk1hdGgucG93KGEsMik6LS41KigoYS09MikqYS0yKX0sZWFzZUluQ3ViaWM6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KGEsMyl9LGVhc2VPdXRDdWJpYzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5wb3coYS0xLDMpKzF9LGVhc2VJbk91dEN1YmljOmZ1bmN0aW9uKGEpe3JldHVybihhLz0uNSk8MT8uNSpNYXRoLnBvdyhhLDMpOi41KihNYXRoLnBvdyhhLTIsMykrMil9LGVhc2VJblF1YXJ0OmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnBvdyhhLDQpfSxlYXNlT3V0UXVhcnQ6ZnVuY3Rpb24oYSl7cmV0dXJuLShNYXRoLnBvdyhhLTEsNCktMSl9LGVhc2VJbk91dFF1YXJ0OmZ1bmN0aW9uKGEpe3JldHVybihhLz0uNSk8MT8uNSpNYXRoLnBvdyhhLDQpOi0uNSooKGEtPTIpKk1hdGgucG93KGEsMyktMil9LGVhc2VJblF1aW50OmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnBvdyhhLDUpfSxlYXNlT3V0UXVpbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KGEtMSw1KSsxfSxlYXNlSW5PdXRRdWludDpmdW5jdGlvbihhKXtyZXR1cm4oYS89LjUpPDE/LjUqTWF0aC5wb3coYSw1KTouNSooTWF0aC5wb3coYS0yLDUpKzIpfSxlYXNlSW5TaW5lOmZ1bmN0aW9uKGEpe3JldHVybi1NYXRoLmNvcyhhKihNYXRoLlBJLzIpKSsxfSxlYXNlT3V0U2luZTpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zaW4oYSooTWF0aC5QSS8yKSl9LGVhc2VJbk91dFNpbmU6ZnVuY3Rpb24oYSl7cmV0dXJuLS41KihNYXRoLmNvcyhNYXRoLlBJKmEpLTEpfSxlYXNlSW5FeHBvOmZ1bmN0aW9uKGEpe3JldHVybiAwPT09YT8wOk1hdGgucG93KDIsMTAqKGEtMSkpfSxlYXNlT3V0RXhwbzpmdW5jdGlvbihhKXtyZXR1cm4gMT09PWE/MTotTWF0aC5wb3coMiwtMTAqYSkrMX0sZWFzZUluT3V0RXhwbzpmdW5jdGlvbihhKXtyZXR1cm4gMD09PWE/MDoxPT09YT8xOihhLz0uNSk8MT8uNSpNYXRoLnBvdygyLDEwKihhLTEpKTouNSooLU1hdGgucG93KDIsLTEwKi0tYSkrMil9LGVhc2VJbkNpcmM6ZnVuY3Rpb24oYSl7cmV0dXJuLShNYXRoLnNxcnQoMS1hKmEpLTEpfSxlYXNlT3V0Q2lyYzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zcXJ0KDEtTWF0aC5wb3coYS0xLDIpKX0sZWFzZUluT3V0Q2lyYzpmdW5jdGlvbihhKXtyZXR1cm4oYS89LjUpPDE/LS41KihNYXRoLnNxcnQoMS1hKmEpLTEpOi41KihNYXRoLnNxcnQoMS0oYS09MikqYSkrMSl9LGVhc2VPdXRCb3VuY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIDEvMi43NT5hPzcuNTYyNSphKmE6Mi8yLjc1PmE/Ny41NjI1KihhLT0xLjUvMi43NSkqYSsuNzU6Mi41LzIuNzU+YT83LjU2MjUqKGEtPTIuMjUvMi43NSkqYSsuOTM3NTo3LjU2MjUqKGEtPTIuNjI1LzIuNzUpKmErLjk4NDM3NX0sZWFzZUluQmFjazpmdW5jdGlvbihhKXt2YXIgYj0xLjcwMTU4O3JldHVybiBhKmEqKChiKzEpKmEtYil9LGVhc2VPdXRCYWNrOmZ1bmN0aW9uKGEpe3ZhciBiPTEuNzAxNTg7cmV0dXJuKGEtPTEpKmEqKChiKzEpKmErYikrMX0sZWFzZUluT3V0QmFjazpmdW5jdGlvbihhKXt2YXIgYj0xLjcwMTU4O3JldHVybihhLz0uNSk8MT8uNSphKmEqKCgoYio9MS41MjUpKzEpKmEtYik6LjUqKChhLT0yKSphKigoKGIqPTEuNTI1KSsxKSphK2IpKzIpfSxlbGFzdGljOmZ1bmN0aW9uKGEpe3JldHVybi0xKk1hdGgucG93KDQsLTgqYSkqTWF0aC5zaW4oMiooNiphLTEpKk1hdGguUEkvMikrMX0sc3dpbmdGcm9tVG86ZnVuY3Rpb24oYSl7dmFyIGI9MS43MDE1ODtyZXR1cm4oYS89LjUpPDE/LjUqYSphKigoKGIqPTEuNTI1KSsxKSphLWIpOi41KigoYS09MikqYSooKChiKj0xLjUyNSkrMSkqYStiKSsyKX0sc3dpbmdGcm9tOmZ1bmN0aW9uKGEpe3ZhciBiPTEuNzAxNTg7cmV0dXJuIGEqYSooKGIrMSkqYS1iKX0sc3dpbmdUbzpmdW5jdGlvbihhKXt2YXIgYj0xLjcwMTU4O3JldHVybihhLT0xKSphKigoYisxKSphK2IpKzF9LGJvdW5jZTpmdW5jdGlvbihhKXtyZXR1cm4gMS8yLjc1PmE/Ny41NjI1KmEqYToyLzIuNzU+YT83LjU2MjUqKGEtPTEuNS8yLjc1KSphKy43NToyLjUvMi43NT5hPzcuNTYyNSooYS09Mi4yNS8yLjc1KSphKy45Mzc1OjcuNTYyNSooYS09Mi42MjUvMi43NSkqYSsuOTg0Mzc1fSxib3VuY2VQYXN0OmZ1bmN0aW9uKGEpe3JldHVybiAxLzIuNzU+YT83LjU2MjUqYSphOjIvMi43NT5hPzItKDcuNTYyNSooYS09MS41LzIuNzUpKmErLjc1KToyLjUvMi43NT5hPzItKDcuNTYyNSooYS09Mi4yNS8yLjc1KSphKy45Mzc1KToyLSg3LjU2MjUqKGEtPTIuNjI1LzIuNzUpKmErLjk4NDM3NSl9LGVhc2VGcm9tVG86ZnVuY3Rpb24oYSl7cmV0dXJuKGEvPS41KTwxPy41Kk1hdGgucG93KGEsNCk6LS41KigoYS09MikqTWF0aC5wb3coYSwzKS0yKX0sZWFzZUZyb206ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KGEsNCl9LGVhc2VUbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5wb3coYSwuMjUpfX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhKXtyZXR1cm4oKG4qYStvKSphK3ApKmF9ZnVuY3Rpb24gaChhKXtyZXR1cm4oKHEqYStyKSphK3MpKmF9ZnVuY3Rpb24gaShhKXtyZXR1cm4oMypuKmErMipvKSphK3B9ZnVuY3Rpb24gaihhKXtyZXR1cm4gMS8oMjAwKmEpfWZ1bmN0aW9uIGsoYSxiKXtyZXR1cm4gaChtKGEsYikpfWZ1bmN0aW9uIGwoYSl7cmV0dXJuIGE+PTA/YTowLWF9ZnVuY3Rpb24gbShhLGIpe3ZhciBjLGQsZSxmLGgsajtmb3IoZT1hLGo9MDs4Pmo7aisrKXtpZihmPWcoZSktYSxsKGYpPGIpcmV0dXJuIGU7aWYoaD1pKGUpLGwoaCk8MWUtNilicmVhaztlLT1mL2h9aWYoYz0wLGQ9MSxlPWEsYz5lKXJldHVybiBjO2lmKGU+ZClyZXR1cm4gZDtmb3IoO2Q+Yzspe2lmKGY9ZyhlKSxsKGYtYSk8YilyZXR1cm4gZTthPmY/Yz1lOmQ9ZSxlPS41KihkLWMpK2N9cmV0dXJuIGV9dmFyIG49MCxvPTAscD0wLHE9MCxyPTAscz0wO3JldHVybiBwPTMqYixvPTMqKGQtYiktcCxuPTEtcC1vLHM9MypjLHI9MyooZS1jKS1zLHE9MS1zLXIsayhhLGooZikpfWZ1bmN0aW9uIGIoYixjLGQsZSl7cmV0dXJuIGZ1bmN0aW9uKGYpe3JldHVybiBhKGYsYixjLGQsZSwxKX19ZS5zZXRCZXppZXJGdW5jdGlvbj1mdW5jdGlvbihhLGMsZCxmLGcpe3ZhciBoPWIoYyxkLGYsZyk7cmV0dXJuIGgueDE9YyxoLnkxPWQsaC54Mj1mLGgueTI9ZyxlLnByb3RvdHlwZS5mb3JtdWxhW2FdPWh9LGUudW5zZXRCZXppZXJGdW5jdGlvbj1mdW5jdGlvbihhKXtkZWxldGUgZS5wcm90b3R5cGUuZm9ybXVsYVthXX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixjLGQsZil7cmV0dXJuIGUudHdlZW5Qcm9wcyhkLGIsYSxjLDEsMCxmKX12YXIgYj1uZXcgZTtiLl9maWx0ZXJBcmdzPVtdLGUuaW50ZXJwb2xhdGU9ZnVuY3Rpb24oYyxkLGYsZyl7dmFyIGg9ZS5zaGFsbG93Q29weSh7fSxjKSxpPWUuY29tcG9zZUVhc2luZ09iamVjdChjLGd8fFwibGluZWFyXCIpO2Iuc2V0KHt9KTt2YXIgaj1iLl9maWx0ZXJBcmdzO2oubGVuZ3RoPTAsalswXT1oLGpbMV09YyxqWzJdPWQsalszXT1pLGUuYXBwbHlGaWx0ZXIoYixcInR3ZWVuQ3JlYXRlZFwiKSxlLmFwcGx5RmlsdGVyKGIsXCJiZWZvcmVUd2VlblwiKTt2YXIgaz1hKGMsaCxkLGYsaSk7cmV0dXJuIGUuYXBwbHlGaWx0ZXIoYixcImFmdGVyVHdlZW5cIiksa319KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe0IubGVuZ3RoPTA7dmFyIGMsZD1hLmxlbmd0aDtmb3IoYz0wO2Q+YztjKyspQi5wdXNoKFwiX1wiK2IrXCJfXCIrYyk7cmV0dXJuIEJ9ZnVuY3Rpb24gYyhhKXt2YXIgYj1hLm1hdGNoKHYpO3JldHVybiBiPygxPT09Yi5sZW5ndGh8fGFbMF0ubWF0Y2godSkpJiZiLnVuc2hpZnQoXCJcIik6Yj1bXCJcIixcIlwiXSxiLmpvaW4oQSl9ZnVuY3Rpb24gZChiKXthLmVhY2goYixmdW5jdGlvbihhKXt2YXIgYz1iW2FdO1wic3RyaW5nXCI9PXR5cGVvZiBjJiZjLm1hdGNoKHopJiYoYlthXT1lKGMpKX0pfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGkoeixhLGYpfWZ1bmN0aW9uIGYoYSl7dmFyIGI9ZyhhKTtyZXR1cm5cInJnYihcIitiWzBdK1wiLFwiK2JbMV0rXCIsXCIrYlsyXStcIilcIn1mdW5jdGlvbiBnKGEpe3JldHVybiBhPWEucmVwbGFjZSgvIy8sXCJcIiksMz09PWEubGVuZ3RoJiYoYT1hLnNwbGl0KFwiXCIpLGE9YVswXSthWzBdK2FbMV0rYVsxXSthWzJdK2FbMl0pLENbMF09aChhLnN1YnN0cigwLDIpKSxDWzFdPWgoYS5zdWJzdHIoMiwyKSksQ1syXT1oKGEuc3Vic3RyKDQsMikpLEN9ZnVuY3Rpb24gaChhKXtyZXR1cm4gcGFyc2VJbnQoYSwxNil9ZnVuY3Rpb24gaShhLGIsYyl7dmFyIGQ9Yi5tYXRjaChhKSxlPWIucmVwbGFjZShhLEEpO2lmKGQpZm9yKHZhciBmLGc9ZC5sZW5ndGgsaD0wO2c+aDtoKyspZj1kLnNoaWZ0KCksZT1lLnJlcGxhY2UoQSxjKGYpKTtyZXR1cm4gZX1mdW5jdGlvbiBqKGEpe3JldHVybiBpKHgsYSxrKX1mdW5jdGlvbiBrKGEpe2Zvcih2YXIgYj1hLm1hdGNoKHcpLGM9Yi5sZW5ndGgsZD1hLm1hdGNoKHkpWzBdLGU9MDtjPmU7ZSsrKWQrPXBhcnNlSW50KGJbZV0sMTApK1wiLFwiO3JldHVybiBkPWQuc2xpY2UoMCwtMSkrXCIpXCJ9ZnVuY3Rpb24gbChkKXt2YXIgZT17fTtyZXR1cm4gYS5lYWNoKGQsZnVuY3Rpb24oYSl7dmFyIGY9ZFthXTtpZihcInN0cmluZ1wiPT10eXBlb2YgZil7dmFyIGc9cihmKTtlW2FdPXtmb3JtYXRTdHJpbmc6YyhmKSxjaHVua05hbWVzOmIoZyxhKX19fSksZX1mdW5jdGlvbiBtKGIsYyl7YS5lYWNoKGMsZnVuY3Rpb24oYSl7Zm9yKHZhciBkPWJbYV0sZT1yKGQpLGY9ZS5sZW5ndGgsZz0wO2Y+ZztnKyspYltjW2FdLmNodW5rTmFtZXNbZ11dPStlW2ddO2RlbGV0ZSBiW2FdfSl9ZnVuY3Rpb24gbihiLGMpe2EuZWFjaChjLGZ1bmN0aW9uKGEpe3ZhciBkPWJbYV0sZT1vKGIsY1thXS5jaHVua05hbWVzKSxmPXAoZSxjW2FdLmNodW5rTmFtZXMpO2Q9cShjW2FdLmZvcm1hdFN0cmluZyxmKSxiW2FdPWooZCl9KX1mdW5jdGlvbiBvKGEsYil7Zm9yKHZhciBjLGQ9e30sZT1iLmxlbmd0aCxmPTA7ZT5mO2YrKyljPWJbZl0sZFtjXT1hW2NdLGRlbGV0ZSBhW2NdO3JldHVybiBkfWZ1bmN0aW9uIHAoYSxiKXtELmxlbmd0aD0wO2Zvcih2YXIgYz1iLmxlbmd0aCxkPTA7Yz5kO2QrKylELnB1c2goYVtiW2RdXSk7cmV0dXJuIER9ZnVuY3Rpb24gcShhLGIpe2Zvcih2YXIgYz1hLGQ9Yi5sZW5ndGgsZT0wO2Q+ZTtlKyspYz1jLnJlcGxhY2UoQSwrYltlXS50b0ZpeGVkKDQpKTtyZXR1cm4gY31mdW5jdGlvbiByKGEpe3JldHVybiBhLm1hdGNoKHcpfWZ1bmN0aW9uIHMoYixjKXthLmVhY2goYyxmdW5jdGlvbihhKXtmb3IodmFyIGQ9Y1thXSxlPWQuY2h1bmtOYW1lcyxmPWUubGVuZ3RoLGc9YlthXS5zcGxpdChcIiBcIiksaD1nW2cubGVuZ3RoLTFdLGk9MDtmPmk7aSsrKWJbZVtpXV09Z1tpXXx8aDtkZWxldGUgYlthXX0pfWZ1bmN0aW9uIHQoYixjKXthLmVhY2goYyxmdW5jdGlvbihhKXtmb3IodmFyIGQ9Y1thXSxlPWQuY2h1bmtOYW1lcyxmPWUubGVuZ3RoLGc9XCJcIixoPTA7Zj5oO2grKylnKz1cIiBcIitiW2VbaF1dLGRlbGV0ZSBiW2VbaF1dO2JbYV09Zy5zdWJzdHIoMSl9KX12YXIgdT0vKFxcZHxcXC18XFwuKS8sdj0vKFteXFwtMC05XFwuXSspL2csdz0vWzAtOS5cXC1dKy9nLHg9bmV3IFJlZ0V4cChcInJnYlxcXFwoXCIrdy5zb3VyY2UrLyxcXHMqLy5zb3VyY2Urdy5zb3VyY2UrLyxcXHMqLy5zb3VyY2Urdy5zb3VyY2UrXCJcXFxcKVwiLFwiZ1wiKSx5PS9eLipcXCgvLHo9LyMoWzAtOV18W2EtZl0pezMsNn0vZ2ksQT1cIlZBTFwiLEI9W10sQz1bXSxEPVtdO2EucHJvdG90eXBlLmZpbHRlci50b2tlbj17dHdlZW5DcmVhdGVkOmZ1bmN0aW9uKGEsYixjKXtkKGEpLGQoYiksZChjKSx0aGlzLl90b2tlbkRhdGE9bChhKX0sYmVmb3JlVHdlZW46ZnVuY3Rpb24oYSxiLGMsZCl7cyhkLHRoaXMuX3Rva2VuRGF0YSksbShhLHRoaXMuX3Rva2VuRGF0YSksbShiLHRoaXMuX3Rva2VuRGF0YSksbShjLHRoaXMuX3Rva2VuRGF0YSl9LGFmdGVyVHdlZW46ZnVuY3Rpb24oYSxiLGMsZCl7bihhLHRoaXMuX3Rva2VuRGF0YSksbihiLHRoaXMuX3Rva2VuRGF0YSksbihjLHRoaXMuX3Rva2VuRGF0YSksdChkLHRoaXMuX3Rva2VuRGF0YSl9fX0oZSl9KHRoaXMpfSx7fV0sMjpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9zaGFwZVwiKSxkPWEoXCIuL3V0aWxzXCIpLGU9ZnVuY3Rpb24oKXt0aGlzLl9wYXRoVGVtcGxhdGU9XCJNIDUwLDUwIG0gMCwte3JhZGl1c30gYSB7cmFkaXVzfSx7cmFkaXVzfSAwIDEgMSAwLHsycmFkaXVzfSBhIHtyYWRpdXN9LHtyYWRpdXN9IDAgMSAxIDAsLXsycmFkaXVzfVwiLGMuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtlLnByb3RvdHlwZT1uZXcgYyxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLl9wYXRoU3RyaW5nPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3Ryb2tlV2lkdGg7YS50cmFpbFdpZHRoJiZhLnRyYWlsV2lkdGg+YS5zdHJva2VXaWR0aCYmKGI9YS50cmFpbFdpZHRoKTt2YXIgYz01MC1iLzI7cmV0dXJuIGQucmVuZGVyKHRoaXMuX3BhdGhUZW1wbGF0ZSx7cmFkaXVzOmMsXCIycmFkaXVzXCI6MipjfSl9LGUucHJvdG90eXBlLl90cmFpbFN0cmluZz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fcGF0aFN0cmluZyhhKX0sYi5leHBvcnRzPWV9LHtcIi4vc2hhcGVcIjo2LFwiLi91dGlsc1wiOjh9XSwzOltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL3NoYXBlXCIpLGQ9YShcIi4vdXRpbHNcIiksZT1mdW5jdGlvbigpe3RoaXMuX3BhdGhUZW1wbGF0ZT1cIk0gMCx7Y2VudGVyfSBMIDEwMCx7Y2VudGVyfVwiLGMuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtlLnByb3RvdHlwZT1uZXcgYyxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLl9pbml0aWFsaXplU3ZnPWZ1bmN0aW9uKGEsYil7YS5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsXCIwIDAgMTAwIFwiK2Iuc3Ryb2tlV2lkdGgpLGEuc2V0QXR0cmlidXRlKFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLFwibm9uZVwiKX0sZS5wcm90b3R5cGUuX3BhdGhTdHJpbmc9ZnVuY3Rpb24oYSl7cmV0dXJuIGQucmVuZGVyKHRoaXMuX3BhdGhUZW1wbGF0ZSx7Y2VudGVyOmEuc3Ryb2tlV2lkdGgvMn0pfSxlLnByb3RvdHlwZS5fdHJhaWxTdHJpbmc9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3BhdGhTdHJpbmcoYSl9LGIuZXhwb3J0cz1lfSx7XCIuL3NoYXBlXCI6NixcIi4vdXRpbHNcIjo4fV0sNDpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9saW5lXCIpLGQ9YShcIi4vY2lyY2xlXCIpLGU9YShcIi4vc3F1YXJlXCIpLGY9YShcIi4vcGF0aFwiKTtiLmV4cG9ydHM9e0xpbmU6YyxDaXJjbGU6ZCxTcXVhcmU6ZSxQYXRoOmZ9fSx7XCIuL2NpcmNsZVwiOjIsXCIuL2xpbmVcIjozLFwiLi9wYXRoXCI6NSxcIi4vc3F1YXJlXCI6N31dLDU6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcInNoaWZ0eVwiKSxkPWEoXCIuL3V0aWxzXCIpLGU9e2Vhc2VJbjpcImVhc2VJbkN1YmljXCIsZWFzZU91dDpcImVhc2VPdXRDdWJpY1wiLGVhc2VJbk91dDpcImVhc2VJbk91dEN1YmljXCJ9LGY9ZnVuY3Rpb24oYSxiKXtiPWQuZXh0ZW5kKHtkdXJhdGlvbjo4MDAsZWFzaW5nOlwibGluZWFyXCIsZnJvbTp7fSx0bzp7fSxzdGVwOmZ1bmN0aW9uKCl7fX0sYik7dmFyIGM7Yz1kLmlzU3RyaW5nKGEpP2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYSk6YSx0aGlzLnBhdGg9Yyx0aGlzLl9vcHRzPWIsdGhpcy5fdHdlZW5hYmxlPW51bGw7dmFyIGU9dGhpcy5wYXRoLmdldFRvdGFsTGVuZ3RoKCk7dGhpcy5wYXRoLnN0eWxlLnN0cm9rZURhc2hhcnJheT1lK1wiIFwiK2UsdGhpcy5zZXQoMCl9O2YucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZ2V0Q29tcHV0ZWREYXNoT2Zmc2V0KCksYj10aGlzLnBhdGguZ2V0VG90YWxMZW5ndGgoKSxjPTEtYS9iO3JldHVybiBwYXJzZUZsb2F0KGMudG9GaXhlZCg2KSwxMCl9LGYucHJvdG90eXBlLnNldD1mdW5jdGlvbihhKXt0aGlzLnN0b3AoKSx0aGlzLnBhdGguc3R5bGUuc3Ryb2tlRGFzaG9mZnNldD10aGlzLl9wcm9ncmVzc1RvT2Zmc2V0KGEpO3ZhciBiPXRoaXMuX29wdHMuc3RlcDtpZihkLmlzRnVuY3Rpb24oYikpe3ZhciBjPXRoaXMuX2Vhc2luZyh0aGlzLl9vcHRzLmVhc2luZyksZT10aGlzLl9jYWxjdWxhdGVUbyhhLGMpO2IoZSx0aGlzLl9vcHRzLnNoYXBlfHx0aGlzLHRoaXMuX29wdHMuYXR0YWNobWVudCl9fSxmLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5fc3RvcFR3ZWVuKCksdGhpcy5wYXRoLnN0eWxlLnN0cm9rZURhc2hvZmZzZXQ9dGhpcy5fZ2V0Q29tcHV0ZWREYXNoT2Zmc2V0KCl9LGYucHJvdG90eXBlLmFuaW1hdGU9ZnVuY3Rpb24oYSxiLGUpe2I9Ynx8e30sZC5pc0Z1bmN0aW9uKGIpJiYoZT1iLGI9e30pO3ZhciBmPWQuZXh0ZW5kKHt9LGIpLGc9ZC5leHRlbmQoe30sdGhpcy5fb3B0cyk7Yj1kLmV4dGVuZChnLGIpO3ZhciBoPXRoaXMuX2Vhc2luZyhiLmVhc2luZyksaT10aGlzLl9yZXNvbHZlRnJvbUFuZFRvKGEsaCxmKTt0aGlzLnN0b3AoKSx0aGlzLnBhdGguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dmFyIGo9dGhpcy5fZ2V0Q29tcHV0ZWREYXNoT2Zmc2V0KCksaz10aGlzLl9wcm9ncmVzc1RvT2Zmc2V0KGEpLGw9dGhpczt0aGlzLl90d2VlbmFibGU9bmV3IGMsdGhpcy5fdHdlZW5hYmxlLnR3ZWVuKHtmcm9tOmQuZXh0ZW5kKHtvZmZzZXQ6an0saS5mcm9tKSx0bzpkLmV4dGVuZCh7b2Zmc2V0Omt9LGkudG8pLGR1cmF0aW9uOmIuZHVyYXRpb24sZWFzaW5nOmgsc3RlcDpmdW5jdGlvbihhKXtsLnBhdGguc3R5bGUuc3Ryb2tlRGFzaG9mZnNldD1hLm9mZnNldCxiLnN0ZXAoYSxiLnNoYXBlfHxsLGIuYXR0YWNobWVudCl9LGZpbmlzaDpmdW5jdGlvbigpe2QuaXNGdW5jdGlvbihlKSYmZSgpfX0pfSxmLnByb3RvdHlwZS5fZ2V0Q29tcHV0ZWREYXNoT2Zmc2V0PWZ1bmN0aW9uKCl7dmFyIGE9d2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5wYXRoLG51bGwpO3JldHVybiBwYXJzZUZsb2F0KGEuZ2V0UHJvcGVydHlWYWx1ZShcInN0cm9rZS1kYXNob2Zmc2V0XCIpLDEwKX0sZi5wcm90b3R5cGUuX3Byb2dyZXNzVG9PZmZzZXQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wYXRoLmdldFRvdGFsTGVuZ3RoKCk7cmV0dXJuIGItYSpifSxmLnByb3RvdHlwZS5fcmVzb2x2ZUZyb21BbmRUbz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGMuZnJvbSYmYy50bz97ZnJvbTpjLmZyb20sdG86Yy50b306e2Zyb206dGhpcy5fY2FsY3VsYXRlRnJvbShiKSx0bzp0aGlzLl9jYWxjdWxhdGVUbyhhLGIpfX0sZi5wcm90b3R5cGUuX2NhbGN1bGF0ZUZyb209ZnVuY3Rpb24oYSl7cmV0dXJuIGMuaW50ZXJwb2xhdGUodGhpcy5fb3B0cy5mcm9tLHRoaXMuX29wdHMudG8sdGhpcy52YWx1ZSgpLGEpfSxmLnByb3RvdHlwZS5fY2FsY3VsYXRlVG89ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy5pbnRlcnBvbGF0ZSh0aGlzLl9vcHRzLmZyb20sdGhpcy5fb3B0cy50byxhLGIpfSxmLnByb3RvdHlwZS5fc3RvcFR3ZWVuPWZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMuX3R3ZWVuYWJsZSYmKHRoaXMuX3R3ZWVuYWJsZS5zdG9wKCksdGhpcy5fdHdlZW5hYmxlLmRpc3Bvc2UoKSx0aGlzLl90d2VlbmFibGU9bnVsbCl9LGYucHJvdG90eXBlLl9lYXNpbmc9ZnVuY3Rpb24oYSl7cmV0dXJuIGUuaGFzT3duUHJvcGVydHkoYSk/ZVthXTphfSxiLmV4cG9ydHM9Zn0se1wiLi91dGlsc1wiOjgsc2hpZnR5OjF9XSw2OltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL3BhdGhcIiksZD1hKFwiLi91dGlsc1wiKSxlPVwiT2JqZWN0IGlzIGRlc3Ryb3llZFwiLGY9ZnVuY3Rpb24gZyhhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGcpKXRocm93IG5ldyBFcnJvcihcIkNvbnN0cnVjdG9yIHdhcyBjYWxsZWQgd2l0aG91dCBuZXcga2V5d29yZFwiKTtpZigwIT09YXJndW1lbnRzLmxlbmd0aCl7dGhpcy5fb3B0cz1kLmV4dGVuZCh7Y29sb3I6XCIjNTU1XCIsc3Ryb2tlV2lkdGg6MSx0cmFpbENvbG9yOm51bGwsdHJhaWxXaWR0aDpudWxsLGZpbGw6bnVsbCx0ZXh0OnthdXRvU3R5bGU6ITAsY29sb3I6bnVsbCx2YWx1ZTpcIlwiLGNsYXNzTmFtZTpcInByb2dyZXNzYmFyLXRleHRcIn19LGIsITApO3ZhciBlLGY9dGhpcy5fY3JlYXRlU3ZnVmlldyh0aGlzLl9vcHRzKTtpZihlPWQuaXNTdHJpbmcoYSk/ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhKTphLCFlKXRocm93IG5ldyBFcnJvcihcIkNvbnRhaW5lciBkb2VzIG5vdCBleGlzdDogXCIrYSk7dGhpcy5fY29udGFpbmVyPWUsdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKGYuc3ZnKSx0aGlzLnRleHQ9bnVsbCx0aGlzLl9vcHRzLnRleHQudmFsdWUmJih0aGlzLnRleHQ9dGhpcy5fY3JlYXRlVGV4dEVsZW1lbnQodGhpcy5fb3B0cyx0aGlzLl9jb250YWluZXIpLHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnRleHQpKSx0aGlzLnN2Zz1mLnN2Zyx0aGlzLnBhdGg9Zi5wYXRoLHRoaXMudHJhaWw9Zi50cmFpbDt2YXIgaD1kLmV4dGVuZCh7YXR0YWNobWVudDp2b2lkIDAsc2hhcGU6dGhpc30sdGhpcy5fb3B0cyk7dGhpcy5fcHJvZ3Jlc3NQYXRoPW5ldyBjKGYucGF0aCxoKX19O2YucHJvdG90eXBlLmFuaW1hdGU9ZnVuY3Rpb24oYSxiLGMpe2lmKG51bGw9PT10aGlzLl9wcm9ncmVzc1BhdGgpdGhyb3cgbmV3IEVycm9yKGUpO3RoaXMuX3Byb2dyZXNzUGF0aC5hbmltYXRlKGEsYixjKX0sZi5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLl9wcm9ncmVzc1BhdGgpdGhyb3cgbmV3IEVycm9yKGUpO3ZvaWQgMCE9PXRoaXMuX3Byb2dyZXNzUGF0aCYmdGhpcy5fcHJvZ3Jlc3NQYXRoLnN0b3AoKX0sZi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLl9wcm9ncmVzc1BhdGgpdGhyb3cgbmV3IEVycm9yKGUpO3RoaXMuc3RvcCgpLHRoaXMuc3ZnLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zdmcpLHRoaXMuc3ZnPW51bGwsdGhpcy5wYXRoPW51bGwsdGhpcy50cmFpbD1udWxsLHRoaXMuX3Byb2dyZXNzUGF0aD1udWxsLG51bGwhPT10aGlzLnRleHQmJih0aGlzLnRleHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnRleHQpLHRoaXMudGV4dD1udWxsKX0sZi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEpe2lmKG51bGw9PT10aGlzLl9wcm9ncmVzc1BhdGgpdGhyb3cgbmV3IEVycm9yKGUpO3RoaXMuX3Byb2dyZXNzUGF0aC5zZXQoYSl9LGYucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuX3Byb2dyZXNzUGF0aCl0aHJvdyBuZXcgRXJyb3IoZSk7cmV0dXJuIHZvaWQgMD09PXRoaXMuX3Byb2dyZXNzUGF0aD8wOnRoaXMuX3Byb2dyZXNzUGF0aC52YWx1ZSgpfSxmLnByb3RvdHlwZS5zZXRUZXh0PWZ1bmN0aW9uKGEpe2lmKG51bGw9PT10aGlzLl9wcm9ncmVzc1BhdGgpdGhyb3cgbmV3IEVycm9yKGUpO251bGw9PT10aGlzLnRleHQmJih0aGlzLnRleHQ9dGhpcy5fY3JlYXRlVGV4dEVsZW1lbnQodGhpcy5fb3B0cyx0aGlzLl9jb250YWluZXIpLHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnRleHQpKSx0aGlzLnRleHQucmVtb3ZlQ2hpbGQodGhpcy50ZXh0LmZpcnN0Q2hpbGQpLHRoaXMudGV4dC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9LGYucHJvdG90eXBlLl9jcmVhdGVTdmdWaWV3PWZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJzdmdcIik7dGhpcy5faW5pdGlhbGl6ZVN2ZyhiLGEpO3ZhciBjPW51bGw7KGEudHJhaWxDb2xvcnx8YS50cmFpbFdpZHRoKSYmKGM9dGhpcy5fY3JlYXRlVHJhaWwoYSksYi5hcHBlbmRDaGlsZChjKSk7dmFyIGQ9dGhpcy5fY3JlYXRlUGF0aChhKTtyZXR1cm4gYi5hcHBlbmRDaGlsZChkKSx7c3ZnOmIscGF0aDpkLHRyYWlsOmN9fSxmLnByb3RvdHlwZS5faW5pdGlhbGl6ZVN2Zz1mdW5jdGlvbihhKXthLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIixcIjAgMCAxMDAgMTAwXCIpfSxmLnByb3RvdHlwZS5fY3JlYXRlUGF0aD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl9wYXRoU3RyaW5nKGEpO3JldHVybiB0aGlzLl9jcmVhdGVQYXRoRWxlbWVudChiLGEpfSxmLnByb3RvdHlwZS5fY3JlYXRlVHJhaWw9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fdHJhaWxTdHJpbmcoYSksYz1kLmV4dGVuZCh7fSxhKTtyZXR1cm4gYy50cmFpbENvbG9yfHwoYy50cmFpbENvbG9yPVwiI2VlZVwiKSxjLnRyYWlsV2lkdGh8fChjLnRyYWlsV2lkdGg9Yy5zdHJva2VXaWR0aCksYy5jb2xvcj1jLnRyYWlsQ29sb3IsYy5zdHJva2VXaWR0aD1jLnRyYWlsV2lkdGgsYy5maWxsPW51bGwsdGhpcy5fY3JlYXRlUGF0aEVsZW1lbnQoYixjKX0sZi5wcm90b3R5cGUuX2NyZWF0ZVBhdGhFbGVtZW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7cmV0dXJuIGMuc2V0QXR0cmlidXRlKFwiZFwiLGEpLGMuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsYi5jb2xvciksYy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIixiLnN0cm9rZVdpZHRoKSxiLmZpbGw/Yy5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsYi5maWxsKTpjLnNldEF0dHJpYnV0ZShcImZpbGwtb3BhY2l0eVwiLFwiMFwiKSxjfSxmLnByb3RvdHlwZS5fY3JlYXRlVGV4dEVsZW1lbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtyZXR1cm4gYy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhLnRleHQudmFsdWUpKSxhLnRleHQuYXV0b1N0eWxlJiYoYi5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIsYy5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsYy5zdHlsZS50b3A9XCI1MCVcIixjLnN0eWxlLmxlZnQ9XCI1MCVcIixjLnN0eWxlLnBhZGRpbmc9MCxjLnN0eWxlLm1hcmdpbj0wLGQuc2V0U3R5bGUoYyxcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKC01MCUsIC01MCUpXCIpLGMuc3R5bGUuY29sb3I9YS50ZXh0LmNvbG9yP2EudGV4dC5jb2xvcjphLmNvbG9yKSxjLmNsYXNzTmFtZT1hLnRleHQuY2xhc3NOYW1lLGN9LGYucHJvdG90eXBlLl9wYXRoU3RyaW5nPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBmb3IgZWFjaCBwcm9ncmVzcyBiYXJcIil9LGYucHJvdG90eXBlLl90cmFpbFN0cmluZz1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIk92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gZm9yIGVhY2ggcHJvZ3Jlc3MgYmFyXCIpfSxiLmV4cG9ydHM9Zn0se1wiLi9wYXRoXCI6NSxcIi4vdXRpbHNcIjo4fV0sNzpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9zaGFwZVwiKSxkPWEoXCIuL3V0aWxzXCIpLGU9ZnVuY3Rpb24oKXt0aGlzLl9wYXRoVGVtcGxhdGU9XCJNIDAse2hhbGZPZlN0cm9rZVdpZHRofSBMIHt3aWR0aH0se2hhbGZPZlN0cm9rZVdpZHRofSBMIHt3aWR0aH0se3dpZHRofSBMIHtoYWxmT2ZTdHJva2VXaWR0aH0se3dpZHRofSBMIHtoYWxmT2ZTdHJva2VXaWR0aH0se3N0cm9rZVdpZHRofVwiLHRoaXMuX3RyYWlsVGVtcGxhdGU9XCJNIHtzdGFydE1hcmdpbn0se2hhbGZPZlN0cm9rZVdpZHRofSBMIHt3aWR0aH0se2hhbGZPZlN0cm9rZVdpZHRofSBMIHt3aWR0aH0se3dpZHRofSBMIHtoYWxmT2ZTdHJva2VXaWR0aH0se3dpZHRofSBMIHtoYWxmT2ZTdHJva2VXaWR0aH0se2hhbGZPZlN0cm9rZVdpZHRofVwiLGMuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtlLnByb3RvdHlwZT1uZXcgYyxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLl9wYXRoU3RyaW5nPWZ1bmN0aW9uKGEpe3ZhciBiPTEwMC1hLnN0cm9rZVdpZHRoLzI7cmV0dXJuIGQucmVuZGVyKHRoaXMuX3BhdGhUZW1wbGF0ZSx7d2lkdGg6YixzdHJva2VXaWR0aDphLnN0cm9rZVdpZHRoLGhhbGZPZlN0cm9rZVdpZHRoOmEuc3Ryb2tlV2lkdGgvMn0pfSxlLnByb3RvdHlwZS5fdHJhaWxTdHJpbmc9ZnVuY3Rpb24oYSl7dmFyIGI9MTAwLWEuc3Ryb2tlV2lkdGgvMjtyZXR1cm4gZC5yZW5kZXIodGhpcy5fdHJhaWxUZW1wbGF0ZSx7d2lkdGg6YixzdHJva2VXaWR0aDphLnN0cm9rZVdpZHRoLGhhbGZPZlN0cm9rZVdpZHRoOmEuc3Ryb2tlV2lkdGgvMixzdGFydE1hcmdpbjphLnN0cm9rZVdpZHRoLzItYS50cmFpbFdpZHRoLzJ9KX0sYi5leHBvcnRzPWV9LHtcIi4vc2hhcGVcIjo2LFwiLi91dGlsc1wiOjh9XSw4OltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiLGQpe2E9YXx8e30sYj1ifHx7fSxkPWR8fCExO2Zvcih2YXIgZSBpbiBiKWlmKGIuaGFzT3duUHJvcGVydHkoZSkpe3ZhciBmPWFbZV0sZz1iW2VdO2FbZV09ZCYmaihmKSYmaihnKT9jKGYsZyxkKTpnfXJldHVybiBhfWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1hO2Zvcih2YXIgZCBpbiBiKWlmKGIuaGFzT3duUHJvcGVydHkoZCkpe3ZhciBlPWJbZF0sZj1cIlxcXFx7XCIrZCtcIlxcXFx9XCIsZz1uZXcgUmVnRXhwKGYsXCJnXCIpO2M9Yy5yZXBsYWNlKGcsZSl9cmV0dXJuIGN9ZnVuY3Rpb24gZShhLGIsYyl7Zm9yKHZhciBkPTA7ZDxrLmxlbmd0aDsrK2Qpe3ZhciBlPWtbZF07YS5zdHlsZVtlK2YoYildPWN9YS5zdHlsZVtiXT1jfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKX1mdW5jdGlvbiBnKGEpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhfHxhIGluc3RhbmNlb2YgU3RyaW5nfWZ1bmN0aW9uIGgoYSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgYX1mdW5jdGlvbiBpKGEpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX1mdW5jdGlvbiBqKGEpe2lmKGkoYSkpcmV0dXJuITE7dmFyIGI9dHlwZW9mIGE7cmV0dXJuXCJvYmplY3RcIj09PWImJiEhYX12YXIgaz1cIldlYmtpdCBNb3ogTyBtc1wiLnNwbGl0KFwiIFwiKTtiLmV4cG9ydHM9e2V4dGVuZDpjLHJlbmRlcjpkLHNldFN0eWxlOmUsY2FwaXRhbGl6ZTpmLGlzU3RyaW5nOmcsaXNGdW5jdGlvbjpoLGlzT2JqZWN0Omp9fSx7fV19LHt9LFs0XSkoNCl9KTtcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcdDE0LiBWQU5JTExBXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qXG4gKiBWYW5pbGxhIEZvcm0gdi4gMi4wLjBcbiAqIEF1dGhvcjogTWljaGFsIFN6ZXBpZWxha1xuICpcbiAqIFByb2R1Y3QgaW5mbyBhbmQgbGljZW5zZSB0ZXJtczpcbiAqIGh0dHA6Ly9jb2RlY2FueW9uLm5ldC9pdGVtL3ZhbmlsbGEtZm9ybS1tb2Rlcm4tcmVzcG9uc2l2ZS1jb250YWN0LWZvcm0vMTA0NDc3MzNcbiAqL1xudmFyIFZhbmlsbGFGb3JtPWZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYSl7dmFyIGI9W107cmV0dXJuIGEuZWFjaChmdW5jdGlvbihhLGMpe2JbYV09bmV3IGcoYyl9KSxiLmxlbmd0aDw9MT9iWzBdOmJ9ZnVuY3Rpb24gYygpe3ZhciBhPVwiOTMyMDA4NzEwNTQzNDA4NDcxNVwiO3JldHVybiBhPWEuc3BsaXQoXCJcIiksYT1hLnJldmVyc2UoKS5qb2luKFwiXCIpfWZ1bmN0aW9uIGQoYSl7YS5mb3JtRm9jdXNlZD0hMH1mdW5jdGlvbiBlKGEsYil7dmFyIGMsZD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9XCIrYi5uYW1lK1wiXVwiKTtmb3IoYz0wO2M8ZC5sZW5ndGg7YysrKWRbY10uY2xhc3NMaXN0LnJlbW92ZShcImVycm9yXCIpLGRbY10ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsaFtiLm5hbWVdLCExKTtkZWxldGUgaFtiLm5hbWVdLGgubGVuZ3RoLS0saC5sZW5ndGg8PTAmJihoLmxlbmd0aD0wLGEuc2V0U3VibWl0U3RhdGUoXCJpbml0aWFsXCIpKX1mdW5jdGlvbiBmKGIpe3ZhciBjPWIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZD1NYXRoLnJvdW5kKGMudG9wKS01LGU9YS5pbm5lckhlaWdodDtyZXR1cm4gMD49ZD92b2lkIGEuc2Nyb2xsQnkoMCxkKTp2b2lkKGQ+PWUmJmEuc2Nyb2xsQnkoMCxkLWUrMzApKX1mdW5jdGlvbiBnKGMpe3ZhciBkPXRoaXM7cmV0dXJuIGEualF1ZXJ5JiZjIGluc3RhbmNlb2YgYS5qUXVlcnk/YihjKTpjPyhkLmRpY3Q9e21hcmtlZEFzU3BhbUVycm9yOlwiWW91ciBtZXNzYWdlIHdhcyBtYXJrZWQgYXMgc3BhbSBhbmQgd2FzIG5vdCBzZW50ISBGaXggeW91ciBtZXNzYWdlIVwiLG1hcmtlZEFzU3BhbVNlcnZlckVycm9yOlwiWW91ciBtZXNzYWdlIHdhcyBtYXJrZWQgYXMgU1BBTSBhbmQgd2FzIG5vdCBzZW5kLlwiLHNlbmRTdWNjZXNzOlwiV2UgaGF2ZSByZWNlaXZlZCB5b3VyIGlucXVpcnkuIFN0YXkgdHVuZWQsIHdl4oCZbGwgZ2V0IGJhY2sgdG8geW91IHZlcnkgc29vbi5cIixzZW5kRXJyb3I6XCJNYWlsIHNlcnZlciBoYXMgZXhwZXJpZW5jZWQgYW4gZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4uXCIsaHR0cFJlcXVlc3RFcnJvcjpcIlslc10gVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHJlY2VpdmluZyByZXNwb25zZSBmcm9tIG1haWxpbmcgc2VydmVyXCIsdGltZW91dEVycm9yOlwiWW91ciByZXF1ZXN0IHdhcyB0aW1lb3V0LiBQbGVhc2UgdHJ5IGFnYWluLlwiLHBhcnNlUmVzcG9uc2VFcnJvcjpcIlJlc3BvbnNlIGZyb20gbWFpbGluZyBzZXJ2ZXIgd2FzIHVuY2xlYXIuIFBsZWFzZSBjb250YWN0IGFkbWluaXN0cmF0b3IuXCJ9LGQucmVzcG9uc2VUaW1lb3V0PTVlMyxkLmh0dHBSZXF1ZXN0PW51bGwsZC51cmw9Yy5hY3Rpb258fGxvY2F0aW9uLmhyZWYsZC5mb3JtPWMsZC5wcm9jZXNzaW5nPSExLGQuc3VibWl0QnV0dG9uPWMucXVlcnlTZWxlY3RvcignW3R5cGU9XCJzdWJtaXRcIl0nKSxkLnN1Ym1pdEJ1dHRvbj8oZC5ub3RpZmljYXRpb25Cb3g9Yy5xdWVyeVNlbGVjdG9yKFwiLm5vdGlmaWNhdGlvbi1ib3hcIiksZC5ub3RpZmljYXRpb25Cb3g/KGQubm90aWZpY2F0aW9uQm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKCl7dGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1lcnJvclwiKSx0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LXN1Y2Nlc3NcIil9LCExKSxkLmZvcm1Gb2N1c2VkPSExLGQuZm9jdXNCb3VuZD1udWxsLGQuaW5pdCgpLGQpOihjb25zb2xlLndhcm4oXCJDb3VsZG4ndCBiaW5kIHRvIHN1Ym1pdCBidXR0b25cIiksbnVsbCkpOihjb25zb2xlLndhcm4oXCJDb3VsZG4ndCBiaW5kIHRvIHN1Ym1pdCBidXR0b25cIiksbnVsbCkpOihjb25zb2xlLndhcm4oXCJDb3VsZG4ndCBiaW5kIHRvIGZvcm0gZWxlbWVudFwiKSxudWxsKX12YXIgaD17bGVuZ3RoOjB9O3JldHVybiBnLnByb3RvdHlwZS5sb2dFcnJvcj1mdW5jdGlvbihhKXt0aGlzLm5vdGlmeShhLFwiZXJyb3JcIil9LGcucHJvdG90eXBlLm5vdGlmeT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubm90aWZpY2F0aW9uQm94O3JldHVybiBjPyhjLmlubmVySFRNTD1hLGMuY2xhc3NMaXN0LmFkZChcInNob3ctXCIrKGJ8fFwiZXJyb3JcIikpLHZvaWQgZihjKSk6dm9pZCBjb25zb2xlLndhcm4oXCJOb3RpZmljYXRpb24gYm94IG5vdCBmb3VuZFwiKX0sZy5wcm90b3R5cGUuc2V0U3VibWl0U3RhdGU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuc3VibWl0QnV0dG9uLGQ9Yy5nZXRBdHRyaWJ1dGUoXCJkYXRhLVwiK2EpLGU9Yy5jbGFzc05hbWUucmVwbGFjZSgvc3RhdGUtW2Etel0rL2dpLFwiXCIpO2IucHJvY2Vzc2luZz1cInByb2Nlc3NpbmdcIj09PWEsYy5jbGFzc05hbWU9ZStcIiBzdGF0ZS1cIithLGMudmFsdWU9ZH0sZy5wcm90b3R5cGUudmFsaWRhdGVGb3JtPWZ1bmN0aW9uKCl7dmFyIGIsZCxmLGc9dGhpcyxpPWcuZm9ybSxqPWkuZWxlbWVudHMsaz0hMSxsPSExLG09L14oW1xcd1xcLV0rKD86XFwuW1xcd1xcLV0rKSopQCgoPzpbXFx3XFwtXStcXC4pKlxcd1tcXHdcXC1dezAsNjZ9KVxcLihbYS16XXsyLDZ9KD86XFwuW2Etel17Mn0pPykkL2k7Zm9yKGQ9ai5sZW5ndGgtMTtkPj0wOy0tZClmPWpbZF0saFtmLm5hbWVdJiZlKGcsZik7Zm9yKGQ9ai5sZW5ndGgtMTtkPj0wOy0tZClmPWpbZF0saz0hMSxcIlwiPT09Zi52YWx1ZSYmZi5yZXF1aXJlZD9rPSEwOihcImNoZWNrYm94XCI9PT1mLnR5cGUmJmYucmVxdWlyZWQmJiFmLmNoZWNrZWQmJihrPSEwKSxcImVtYWlsXCIhPT1mLnR5cGV8fFwiXCI9PT1mLnZhbHVlfHxtLnRlc3QoZi52YWx1ZSl8fChrPSEwKSxcInJhZGlvXCI9PT1mLnR5cGUmJmYucmVxdWlyZWQmJihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9XCIrZi5uYW1lK1wiXTpjaGVja2VkXCIpfHwoaz0hMCkpKSxrPyhmLmNsYXNzTGlzdC5hZGQoXCJlcnJvclwiKSxoW2YubmFtZV18fChoW2YubmFtZV09ZS5iaW5kKG51bGwsZyxmKSxoLmxlbmd0aCsrKSxmLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLGhbZi5uYW1lXSwhMSksbD0hMCk6Zi5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3JcIiksbCYmZy5zZXRTdWJtaXRTdGF0ZShcImVycm9yXCIpO2lmKCFsKXtpZihnLmZvcm1Gb2N1c2VkIT09ITApcmV0dXJuIGcubG9nRXJyb3IoZy5kaWN0Lm1hcmtlZEFzU3BhbUVycm9yKSwhMTtiPWkucXVlcnlTZWxlY3RvcignW25hbWU9XCJjb250YWN0X3NlY3JldFwiXScpLGJ8fChiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxiLnR5cGU9XCJoaWRkZW5cIixiLm5hbWU9XCJjb250YWN0X3NlY3JldFwiLGkuYXBwZW5kQ2hpbGQoYikpLGIudmFsdWU9YygpfXJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5zY3JvbGxCeSgwLC0xKX0sMSksIWx9LGcucHJvdG90eXBlLnJlc2V0Rm9ybT1mdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzLGQ9Yy5mb3JtLGU9Yy5zdWJtaXRCdXR0b247Zm9yKGI9ZC5sZW5ndGgtMTtiPj0wOy0tYilhPWRbYl0sYSE9PWUmJihhLmNsYXNzTGlzdC5yZW1vdmUoXCJzdWNjZXNzXCIpLGEudmFsdWU9XCJcIik7Yy5zZXRTdWJtaXRTdGF0ZShcImluaXRpYWxcIil9LGcucHJvdG90eXBlLnN1Y2Nlc3NGb3JtPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLnNldFN1Ym1pdFN0YXRlKFwic3VjY2Vzc1wiKSxhLm5vdGlmeShhLmRpY3Quc2VuZFN1Y2Nlc3MsXCJzdWNjZXNzXCIpfSxnLnByb3RvdHlwZS5wcm9jZXNzUmVzcG9uc2U9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLGQ9Yy5kaWN0O3RyeXtiPUpTT04ucGFyc2UoYSl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKSxiPXtyZXN1bHQ6XCJQYXJzZUVycm9yXCJ9fXN3aXRjaChiLnJlc3VsdCl7Y2FzZVwiT0tcIjpjLnN1Y2Nlc3NGb3JtKGQuc2VuZFN1Y2Nlc3MpLHNldFRpbWVvdXQoYy5yZXNldEZvcm0uYmluZChjKSw0ZTMpO2JyZWFrO2Nhc2VcIk5PX1NQQU1cIjpjLmxvZ0Vycm9yKGQubWFya2VkQXNTcGFtU2VydmVyRXJyb3IpO2JyZWFrO2Nhc2VcIlNFTkRfRVJST1JcIjpjLmxvZ0Vycm9yKGQuc2VuZEVycm9yKSxjLnNldFN1Ym1pdFN0YXRlKFwiaW5pdGlhbFwiKTticmVhaztjYXNlXCJQYXJzZUVycm9yXCI6Yy5sb2dFcnJvcihkLnBhcnNlUmVzcG9uc2VFcnJvcil9fSxnLnByb3RvdHlwZS5yZXF1ZXN0U3RhdGVDaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5odHRwUmVxdWVzdDs0PT09Yi5yZWFkeVN0YXRlJiYoMjAwPT09Yi5zdGF0dXM/YS5wcm9jZXNzUmVzcG9uc2UoYi5yZXNwb25zZVRleHQpOihhLnNldFN1Ym1pdFN0YXRlKFwiaW5pdGlhbFwiKSwwIT09Yi5zdGF0dXMmJmEubG9nRXJyb3IoYS5kaWN0Lmh0dHBSZXF1ZXN0RXJyb3IucmVwbGFjZShcIiVzXCIsYi5zdGF0dXMpKSkpfSxnLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGIsYyxlPXRoaXMsZj1lLmZvcm0sZz1lLnN1Ym1pdEJ1dHRvbixoPWYuZWxlbWVudHM7aWYoZi5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsZS5zdWJtaXRGb3JtLmJpbmQoZSksITApLGEuWE1MSHR0cFJlcXVlc3Q/ZS5odHRwUmVxdWVzdD1uZXcgWE1MSHR0cFJlcXVlc3Q6YS5BY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIikmJihlLmh0dHBSZXF1ZXN0PW5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIikpLGUuZm9jdXNCb3VuZD1kLmJpbmQobnVsbCxlKSwhZS5odHRwUmVxdWVzdClyZXR1cm4gY29uc29sZS5lcnJvcihcIkNvdWxkbid0IGluaXQgWE1MSHR0cFJlcXVlc3RcIiksbnVsbDtmb3IoZS5mb3JtRm9jdXNlZD0hMSxjPWgubGVuZ3RoLTE7Yz49MDstLWMpYj1oW2NdLFwic3VibWl0XCIhPT1iLnR5cGUmJmIuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsZS5mb2N1c0JvdW5kLCExKTtnLnZhbHVlIT09Zy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluaXRpYWxcIikmJihnLnNldEF0dHJpYnV0ZShcImRhdGEtaW5pdGlhbFwiLGcudmFsdWUpLGUuc2V0U3VibWl0U3RhdGUoXCJpbml0aWFsXCIpKX0sZy5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5odHRwUmVxdWVzdDtjLm9wZW4oXCJQT1NUXCIsYi51cmwsITApLGMudGltZW91dD1iLnJlc3BvbnNlVGltZW91dCxjLm9udGltZW91dD1mdW5jdGlvbigpe2IubG9nRXJyb3IoYi5kaWN0LnRpbWVvdXRFcnJvciksYi5zZXRTdWJtaXRTdGF0ZShcImluaXRpYWxcIil9LGMuc2VuZChhKSxjLm9ucmVhZHlzdGF0ZWNoYW5nZT1iLnJlcXVlc3RTdGF0ZUNoYW5nZS5iaW5kKGIpfSxnLnByb3RvdHlwZS5zdWJtaXRGb3JtPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1cIlwiO3JldHVybiBhJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkpLGIudmFsaWRhdGVGb3JtKCkmJihiLnNldFN1Ym1pdFN0YXRlKFwicHJvY2Vzc2luZ1wiKSxjPW5ldyBGb3JtRGF0YShiLmZvcm0pLGIuc2VuZChjKSksITF9LGd9KHdpbmRvdyk7XG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qXHQxNS4gSU5TVEFGRUVEXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4zLjMgSU5TVEFGRUVEXG4oZnVuY3Rpb24oKXt2YXIgZSx0O2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIG4scjt0aGlzLm9wdGlvbnM9e3RhcmdldDpcImluc3RhZmVlZFwiLGdldDpcInBvcHVsYXJcIixyZXNvbHV0aW9uOlwidGh1bWJuYWlsXCIsc29ydEJ5Olwibm9uZVwiLGxpbmtzOiEwLG1vY2s6ITEsdXNlSHR0cDohMX07aWYodHlwZW9mIGU9PVwib2JqZWN0XCIpZm9yKG4gaW4gZSlyPWVbbl0sdGhpcy5vcHRpb25zW25dPXI7dGhpcy5jb250ZXh0PXQhPW51bGw/dDp0aGlzLHRoaXMudW5pcXVlPXRoaXMuX2dlbktleSgpfXJldHVybiBlLnByb3RvdHlwZS5oYXNOZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiB0aGlzLmNvbnRleHQubmV4dFVybD09XCJzdHJpbmdcIiYmdGhpcy5jb250ZXh0Lm5leHRVcmwubGVuZ3RoPjB9LGUucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNOZXh0KCk/dGhpcy5ydW4odGhpcy5jb250ZXh0Lm5leHRVcmwpOiExfSxlLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24odCl7dmFyIG4scixpO2lmKHR5cGVvZiB0aGlzLm9wdGlvbnMuY2xpZW50SWQhPVwic3RyaW5nXCImJnR5cGVvZiB0aGlzLm9wdGlvbnMuYWNjZXNzVG9rZW4hPVwic3RyaW5nXCIpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBjbGllbnRJZCBvciBhY2Nlc3NUb2tlbi5cIik7aWYodHlwZW9mIHRoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbiE9XCJzdHJpbmdcIiYmdHlwZW9mIHRoaXMub3B0aW9ucy5jbGllbnRJZCE9XCJzdHJpbmdcIil0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGNsaWVudElkIG9yIGFjY2Vzc1Rva2VuLlwiKTtyZXR1cm4gdGhpcy5vcHRpb25zLmJlZm9yZSE9bnVsbCYmdHlwZW9mIHRoaXMub3B0aW9ucy5iZWZvcmU9PVwiZnVuY3Rpb25cIiYmdGhpcy5vcHRpb25zLmJlZm9yZS5jYWxsKHRoaXMpLHR5cGVvZiBkb2N1bWVudCE9XCJ1bmRlZmluZWRcIiYmZG9jdW1lbnQhPT1udWxsJiYoaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLGkuaWQ9XCJpbnN0YWZlZWQtZmV0Y2hlclwiLGkuc3JjPXR8fHRoaXMuX2J1aWxkVXJsKCksbj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIiksblswXS5hcHBlbmRDaGlsZChpKSxyPVwiaW5zdGFmZWVkQ2FjaGVcIit0aGlzLnVuaXF1ZSx3aW5kb3dbcl09bmV3IGUodGhpcy5vcHRpb25zLHRoaXMpLHdpbmRvd1tyXS51bmlxdWU9dGhpcy51bmlxdWUpLCEwfSxlLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxzLG8sdSxhLGYsbCxjLGgscCxkLHYsbSxnLHksYix3LEUsUztpZih0eXBlb2YgZSE9XCJvYmplY3RcIil7aWYodGhpcy5vcHRpb25zLmVycm9yIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmVycm9yPT1cImZ1bmN0aW9uXCIpcmV0dXJuIHRoaXMub3B0aW9ucy5lcnJvci5jYWxsKHRoaXMsXCJJbnZhbGlkIEpTT04gZGF0YVwiKSwhMTt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEpTT04gcmVzcG9uc2VcIil9aWYoZS5tZXRhLmNvZGUhPT0yMDApe2lmKHRoaXMub3B0aW9ucy5lcnJvciE9bnVsbCYmdHlwZW9mIHRoaXMub3B0aW9ucy5lcnJvcj09XCJmdW5jdGlvblwiKXJldHVybiB0aGlzLm9wdGlvbnMuZXJyb3IuY2FsbCh0aGlzLGUubWV0YS5lcnJvcl9tZXNzYWdlKSwhMTt0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBmcm9tIEluc3RhZ3JhbTogXCIrZS5tZXRhLmVycm9yX21lc3NhZ2UpfWlmKGUuZGF0YS5sZW5ndGg9PT0wKXtpZih0aGlzLm9wdGlvbnMuZXJyb3IhPW51bGwmJnR5cGVvZiB0aGlzLm9wdGlvbnMuZXJyb3I9PVwiZnVuY3Rpb25cIilyZXR1cm4gdGhpcy5vcHRpb25zLmVycm9yLmNhbGwodGhpcyxcIk5vIGltYWdlcyB3ZXJlIHJldHVybmVkIGZyb20gSW5zdGFncmFtXCIpLCExO3Rocm93IG5ldyBFcnJvcihcIk5vIGltYWdlcyB3ZXJlIHJldHVybmVkIGZyb20gSW5zdGFncmFtXCIpfXRoaXMub3B0aW9ucy5zdWNjZXNzIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLnN1Y2Nlc3M9PVwiZnVuY3Rpb25cIiYmdGhpcy5vcHRpb25zLnN1Y2Nlc3MuY2FsbCh0aGlzLGUpLHRoaXMuY29udGV4dC5uZXh0VXJsPVwiXCIsZS5wYWdpbmF0aW9uIT1udWxsJiYodGhpcy5jb250ZXh0Lm5leHRVcmw9ZS5wYWdpbmF0aW9uLm5leHRfdXJsKTtpZih0aGlzLm9wdGlvbnMuc29ydEJ5IT09XCJub25lXCIpe3RoaXMub3B0aW9ucy5zb3J0Qnk9PT1cInJhbmRvbVwiP2Q9W1wiXCIsXCJyYW5kb21cIl06ZD10aGlzLm9wdGlvbnMuc29ydEJ5LnNwbGl0KFwiLVwiKSxwPWRbMF09PT1cImxlYXN0XCI/ITA6ITE7c3dpdGNoKGRbMV0pe2Nhc2VcInJhbmRvbVwiOmUuZGF0YS5zb3J0KGZ1bmN0aW9uKCl7cmV0dXJuLjUtTWF0aC5yYW5kb20oKX0pO2JyZWFrO2Nhc2VcInJlY2VudFwiOmUuZGF0YT10aGlzLl9zb3J0QnkoZS5kYXRhLFwiY3JlYXRlZF90aW1lXCIscCk7YnJlYWs7Y2FzZVwibGlrZWRcIjplLmRhdGE9dGhpcy5fc29ydEJ5KGUuZGF0YSxcImxpa2VzLmNvdW50XCIscCk7YnJlYWs7Y2FzZVwiY29tbWVudGVkXCI6ZS5kYXRhPXRoaXMuX3NvcnRCeShlLmRhdGEsXCJjb21tZW50cy5jb3VudFwiLHApO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcHRpb24gZm9yIHNvcnRCeTogJ1wiK3RoaXMub3B0aW9ucy5zb3J0QnkrXCInLlwiKX19aWYodHlwZW9mIGRvY3VtZW50IT1cInVuZGVmaW5lZFwiJiZkb2N1bWVudCE9PW51bGwmJnRoaXMub3B0aW9ucy5tb2NrPT09ITEpe2E9ZS5kYXRhLHRoaXMub3B0aW9ucy5saW1pdCE9bnVsbCYmYS5sZW5ndGg+dGhpcy5vcHRpb25zLmxpbWl0JiYoYT1hLnNsaWNlKDAsdGhpcy5vcHRpb25zLmxpbWl0KzF8fDllOSkpLG49ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHRoaXMub3B0aW9ucy5maWx0ZXIhPW51bGwmJnR5cGVvZiB0aGlzLm9wdGlvbnMuZmlsdGVyPT1cImZ1bmN0aW9uXCImJihhPXRoaXMuX2ZpbHRlcihhLHRoaXMub3B0aW9ucy5maWx0ZXIpKTtpZih0aGlzLm9wdGlvbnMudGVtcGxhdGUhPW51bGwmJnR5cGVvZiB0aGlzLm9wdGlvbnMudGVtcGxhdGU9PVwic3RyaW5nXCIpe2k9XCJcIixvPVwiXCIsbD1cIlwiLHY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IobT0wLGI9YS5sZW5ndGg7bTxiO20rKylzPWFbbV0sdT1zLmltYWdlc1t0aGlzLm9wdGlvbnMucmVzb2x1dGlvbl0udXJsLHRoaXMub3B0aW9ucy51c2VIdHRwfHwodT11LnJlcGxhY2UoXCJodHRwOi8vXCIsXCIvL1wiKSksbz10aGlzLl9tYWtlVGVtcGxhdGUodGhpcy5vcHRpb25zLnRlbXBsYXRlLHttb2RlbDpzLGlkOnMuaWQsbGluazpzLmxpbmssaW1hZ2U6dSxjYXB0aW9uOnRoaXMuX2dldE9iamVjdFByb3BlcnR5KHMsXCJjYXB0aW9uLnRleHRcIiksbGlrZXM6cy5saWtlcy5jb3VudCxjb21tZW50czpzLmNvbW1lbnRzLmNvdW50LGxvY2F0aW9uOnRoaXMuX2dldE9iamVjdFByb3BlcnR5KHMsXCJsb2NhdGlvbi5uYW1lXCIpfSksaSs9bzt2LmlubmVySFRNTD1pLFM9W10uc2xpY2UuY2FsbCh2LmNoaWxkTm9kZXMpO2ZvcihnPTAsdz1TLmxlbmd0aDtnPHc7ZysrKWg9U1tnXSxuLmFwcGVuZENoaWxkKGgpfWVsc2UgZm9yKHk9MCxFPWEubGVuZ3RoO3k8RTt5Kyspcz1hW3ldLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKSx1PXMuaW1hZ2VzW3RoaXMub3B0aW9ucy5yZXNvbHV0aW9uXS51cmwsdGhpcy5vcHRpb25zLnVzZUh0dHB8fCh1PXUucmVwbGFjZShcImh0dHA6Ly9cIixcIi8vXCIpKSxmLnNyYz11LHRoaXMub3B0aW9ucy5saW5rcz09PSEwPyh0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLHQuaHJlZj1zLmxpbmssdC5hcHBlbmRDaGlsZChmKSxuLmFwcGVuZENoaWxkKHQpKTpuLmFwcGVuZENoaWxkKGYpO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMub3B0aW9ucy50YXJnZXQpLmFwcGVuZENoaWxkKG4pLHI9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLHIucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnN0YWZlZWQtZmV0Y2hlclwiKSksYz1cImluc3RhZmVlZENhY2hlXCIrdGhpcy51bmlxdWUsd2luZG93W2NdPXZvaWQgMDt0cnl7ZGVsZXRlIHdpbmRvd1tjXX1jYXRjaCh4KXt9fXJldHVybiB0aGlzLm9wdGlvbnMuYWZ0ZXIhPW51bGwmJnR5cGVvZiB0aGlzLm9wdGlvbnMuYWZ0ZXI9PVwiZnVuY3Rpb25cIiYmdGhpcy5vcHRpb25zLmFmdGVyLmNhbGwodGhpcyksITB9LGUucHJvdG90eXBlLl9idWlsZFVybD1mdW5jdGlvbigpe3ZhciBlLHQsbjtlPVwiaHR0cHM6Ly9hcGkuaW5zdGFncmFtLmNvbS92MVwiO3N3aXRjaCh0aGlzLm9wdGlvbnMuZ2V0KXtjYXNlXCJwb3B1bGFyXCI6dD1cIm1lZGlhL3BvcHVsYXJcIjticmVhaztjYXNlXCJ0YWdnZWRcIjppZih0eXBlb2YgdGhpcy5vcHRpb25zLnRhZ05hbWUhPVwic3RyaW5nXCIpdGhyb3cgbmV3IEVycm9yKFwiTm8gdGFnIG5hbWUgc3BlY2lmaWVkLiBVc2UgdGhlICd0YWdOYW1lJyBvcHRpb24uXCIpO3Q9XCJ0YWdzL1wiK3RoaXMub3B0aW9ucy50YWdOYW1lK1wiL21lZGlhL3JlY2VudFwiO2JyZWFrO2Nhc2VcImxvY2F0aW9uXCI6aWYodHlwZW9mIHRoaXMub3B0aW9ucy5sb2NhdGlvbklkIT1cIm51bWJlclwiKXRocm93IG5ldyBFcnJvcihcIk5vIGxvY2F0aW9uIHNwZWNpZmllZC4gVXNlIHRoZSAnbG9jYXRpb25JZCcgb3B0aW9uLlwiKTt0PVwibG9jYXRpb25zL1wiK3RoaXMub3B0aW9ucy5sb2NhdGlvbklkK1wiL21lZGlhL3JlY2VudFwiO2JyZWFrO2Nhc2VcInVzZXJcIjppZih0eXBlb2YgdGhpcy5vcHRpb25zLnVzZXJJZCE9XCJudW1iZXJcIil0aHJvdyBuZXcgRXJyb3IoXCJObyB1c2VyIHNwZWNpZmllZC4gVXNlIHRoZSAndXNlcklkJyBvcHRpb24uXCIpO2lmKHR5cGVvZiB0aGlzLm9wdGlvbnMuYWNjZXNzVG9rZW4hPVwic3RyaW5nXCIpdGhyb3cgbmV3IEVycm9yKFwiTm8gYWNjZXNzIHRva2VuLiBVc2UgdGhlICdhY2Nlc3NUb2tlbicgb3B0aW9uLlwiKTt0PVwidXNlcnMvXCIrdGhpcy5vcHRpb25zLnVzZXJJZCtcIi9tZWRpYS9yZWNlbnRcIjticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIkludmFsaWQgb3B0aW9uIGZvciBnZXQ6ICdcIit0aGlzLm9wdGlvbnMuZ2V0K1wiJy5cIil9cmV0dXJuIG49XCJcIitlK1wiL1wiK3QsdGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuIT1udWxsP24rPVwiP2FjY2Vzc190b2tlbj1cIit0aGlzLm9wdGlvbnMuYWNjZXNzVG9rZW46bis9XCI/Y2xpZW50X2lkPVwiK3RoaXMub3B0aW9ucy5jbGllbnRJZCx0aGlzLm9wdGlvbnMubGltaXQhPW51bGwmJihuKz1cIiZjb3VudD1cIit0aGlzLm9wdGlvbnMubGltaXQpLG4rPVwiJmNhbGxiYWNrPWluc3RhZmVlZENhY2hlXCIrdGhpcy51bmlxdWUrXCIucGFyc2VcIixufSxlLnByb3RvdHlwZS5fZ2VuS2V5PWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIGU9ZnVuY3Rpb24oKXtyZXR1cm4oKDErTWF0aC5yYW5kb20oKSkqNjU1MzZ8MCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKX0sXCJcIitlKCkrZSgpK2UoKStlKCl9LGUucHJvdG90eXBlLl9tYWtlVGVtcGxhdGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGkscyxvO3I9Lyg/Olxce3syfSkoW1xcd1xcW1xcXVxcLl0rKSg/OlxcfXsyfSkvLG49ZTt3aGlsZShyLnRlc3QobikpaT1uLm1hdGNoKHIpWzFdLHM9KG89dGhpcy5fZ2V0T2JqZWN0UHJvcGVydHkodCxpKSkhPW51bGw/bzpcIlwiLG49bi5yZXBsYWNlKHIsXCJcIitzKTtyZXR1cm4gbn0sZS5wcm90b3R5cGUuX2dldE9iamVjdFByb3BlcnR5PWZ1bmN0aW9uKGUsdCl7dmFyIG4scjt0PXQucmVwbGFjZSgvXFxbKFxcdyspXFxdL2csXCIuJDFcIikscj10LnNwbGl0KFwiLlwiKTt3aGlsZShyLmxlbmd0aCl7bj1yLnNoaWZ0KCk7aWYoIShlIT1udWxsJiZuIGluIGUpKXJldHVybiBudWxsO2U9ZVtuXX1yZXR1cm4gZX0sZS5wcm90b3R5cGUuX3NvcnRCeT1mdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIHI9ZnVuY3Rpb24oZSxyKXt2YXIgaSxzO3JldHVybiBpPXRoaXMuX2dldE9iamVjdFByb3BlcnR5KGUsdCkscz10aGlzLl9nZXRPYmplY3RQcm9wZXJ0eShyLHQpLG4/aT5zPzE6LTE6aTxzPzE6LTF9LGUuc29ydChyLmJpbmQodGhpcykpLGV9LGUucHJvdG90eXBlLl9maWx0ZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGkscyxvO249W10saT1mdW5jdGlvbihlKXtpZih0KGUpKXJldHVybiBuLnB1c2goZSl9O2ZvcihzPTAsbz1lLmxlbmd0aDtzPG87cysrKXI9ZVtzXSxpKHIpO3JldHVybiBufSxlfSgpLHQ9dHlwZW9mIGV4cG9ydHMhPVwidW5kZWZpbmVkXCImJmV4cG9ydHMhPT1udWxsP2V4cG9ydHM6d2luZG93LHQuSW5zdGFmZWVkPWV9KS5jYWxsKHRoaXMpO1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKlx0MTYuIEZJVFZJRFNcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypnbG9iYWwgalF1ZXJ5ICovXG4vKmpzaGludCBicm93c2VyOnRydWUgKi9cbi8qIVxuKiBGaXRWaWRzIDEuMVxuKlxuKiBDb3B5cmlnaHQgMjAxMywgQ2hyaXMgQ295aWVyIC0gaHR0cDovL2Nzcy10cmlja3MuY29tICsgRGF2ZSBSdXBlcnQgLSBodHRwOi8vZGF2ZXJ1cGVydC5jb21cbiogQ3JlZGl0IHRvIFRoaWVycnkgS29ibGVudHogLSBodHRwOi8vd3d3LmFsaXN0YXBhcnQuY29tL2FydGljbGVzL2NyZWF0aW5nLWludHJpbnNpYy1yYXRpb3MtZm9yLXZpZGVvL1xuKiBSZWxlYXNlZCB1bmRlciB0aGUgV1RGUEwgbGljZW5zZSAtIGh0dHA6Ly9zYW0uem95Lm9yZy93dGZwbC9cbipcbiovXG5cbihmdW5jdGlvbiggJCApe1xuXG4gIFwidXNlIHN0cmljdFwiO1xuXG4gICQuZm4uZml0VmlkcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuICAgIHZhciBzZXR0aW5ncyA9IHtcbiAgICAgIGN1c3RvbVNlbGVjdG9yOiBudWxsXG4gICAgfTtcblxuICAgIGlmKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZml0LXZpZHMtc3R5bGUnKSkge1xuICAgICAgLy8gYXBwZW5kU3R5bGVzOiBodHRwczovL2dpdGh1Yi5jb20vdG9kZG1vdHRvL2ZsdWlkdmlkcy9ibG9iL21hc3Rlci9kaXN0L2ZsdWlkdmlkcy5qc1xuICAgICAgdmFyIGhlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgICB2YXIgY3NzID0gJy5mbHVpZC13aWR0aC12aWRlby13cmFwcGVye3dpZHRoOjEwMCU7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzowO30uZmx1aWQtd2lkdGgtdmlkZW8td3JhcHBlciBpZnJhbWUsLmZsdWlkLXdpZHRoLXZpZGVvLXdyYXBwZXIgb2JqZWN0LC5mbHVpZC13aWR0aC12aWRlby13cmFwcGVyIGVtYmVkIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt9JztcbiAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGRpdi5pbm5lckhUTUwgPSAnPHA+eDwvcD48c3R5bGUgaWQ9XCJmaXQtdmlkcy1zdHlsZVwiPicgKyBjc3MgKyAnPC9zdHlsZT4nO1xuICAgICAgaGVhZC5hcHBlbmRDaGlsZChkaXYuY2hpbGROb2Rlc1sxXSk7XG4gICAgfVxuXG4gICAgaWYgKCBvcHRpb25zICkge1xuICAgICAgJC5leHRlbmQoIHNldHRpbmdzLCBvcHRpb25zICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuICAgICAgdmFyIHNlbGVjdG9ycyA9IFtcbiAgICAgICAgXCJpZnJhbWVbc3JjKj0ncGxheWVyLnZpbWVvLmNvbSddXCIsXG4gICAgICAgIFwiaWZyYW1lW3NyYyo9J3lvdXR1YmUuY29tJ11cIixcbiAgICAgICAgXCJpZnJhbWVbc3JjKj0neW91dHViZS1ub2Nvb2tpZS5jb20nXVwiLFxuICAgICAgICBcImlmcmFtZVtzcmMqPSdraWNrc3RhcnRlci5jb20nXVtzcmMqPSd2aWRlby5odG1sJ11cIixcbiAgICAgICAgXCJvYmplY3RcIixcbiAgICAgICAgXCJlbWJlZFwiXG4gICAgICBdO1xuXG4gICAgICBpZiAoc2V0dGluZ3MuY3VzdG9tU2VsZWN0b3IpIHtcbiAgICAgICAgc2VsZWN0b3JzLnB1c2goc2V0dGluZ3MuY3VzdG9tU2VsZWN0b3IpO1xuICAgICAgfVxuXG4gICAgICB2YXIgJGFsbFZpZGVvcyA9ICQodGhpcykuZmluZChzZWxlY3RvcnMuam9pbignLCcpKTtcbiAgICAgICRhbGxWaWRlb3MgPSAkYWxsVmlkZW9zLm5vdChcIm9iamVjdCBvYmplY3RcIik7IC8vIFN3Zk9iaiBjb25mbGljdCBwYXRjaFxuXG4gICAgICAkYWxsVmlkZW9zLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnZW1iZWQnICYmICR0aGlzLnBhcmVudCgnb2JqZWN0JykubGVuZ3RoIHx8ICR0aGlzLnBhcmVudCgnLmZsdWlkLXdpZHRoLXZpZGVvLXdyYXBwZXInKS5sZW5ndGgpIHsgcmV0dXJuOyB9XG4gICAgICAgIHZhciBoZWlnaHQgPSAoIHRoaXMudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnb2JqZWN0JyB8fCAoJHRoaXMuYXR0cignaGVpZ2h0JykgJiYgIWlzTmFOKHBhcnNlSW50KCR0aGlzLmF0dHIoJ2hlaWdodCcpLCAxMCkpKSApID8gcGFyc2VJbnQoJHRoaXMuYXR0cignaGVpZ2h0JyksIDEwKSA6ICR0aGlzLmhlaWdodCgpLFxuICAgICAgICAgICAgd2lkdGggPSAhaXNOYU4ocGFyc2VJbnQoJHRoaXMuYXR0cignd2lkdGgnKSwgMTApKSA/IHBhcnNlSW50KCR0aGlzLmF0dHIoJ3dpZHRoJyksIDEwKSA6ICR0aGlzLndpZHRoKCksXG4gICAgICAgICAgICBhc3BlY3RSYXRpbyA9IGhlaWdodCAvIHdpZHRoO1xuICAgICAgICBpZighJHRoaXMuYXR0cignaWQnKSl7XG4gICAgICAgICAgdmFyIHZpZGVvSUQgPSAnZml0dmlkJyArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo5OTk5OTkpO1xuICAgICAgICAgICR0aGlzLmF0dHIoJ2lkJywgdmlkZW9JRCk7XG4gICAgICAgIH1cbiAgICAgICAgJHRoaXMud3JhcCgnPGRpdiBjbGFzcz1cImZsdWlkLXdpZHRoLXZpZGVvLXdyYXBwZXJcIj48L2Rpdj4nKS5wYXJlbnQoJy5mbHVpZC13aWR0aC12aWRlby13cmFwcGVyJykuY3NzKCdwYWRkaW5nLXRvcCcsIChhc3BlY3RSYXRpbyAqIDEwMCkrXCIlXCIpO1xuICAgICAgICAkdGhpcy5yZW1vdmVBdHRyKCdoZWlnaHQnKS5yZW1vdmVBdHRyKCd3aWR0aCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4vLyBXb3JrcyB3aXRoIGVpdGhlciBqUXVlcnkgb3IgWmVwdG9cbn0pKCB3aW5kb3cualF1ZXJ5IHx8IHdpbmRvdy5aZXB0byApO1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKlx0R08gVE8gVE9QXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiEgZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICBhLmZuLnNjcm9sbFVwID0gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgYS5kYXRhKGMuYm9keSwgXCJzY3JvbGxVcFwiKSB8fCAoYS5kYXRhKGMuYm9keSwgXCJzY3JvbGxVcFwiLCAhMCksIGEuZm4uc2Nyb2xsVXAuaW5pdChiKSlcbiAgICB9LCBhLmZuLnNjcm9sbFVwLmluaXQgPSBmdW5jdGlvbiAoZCkge1xuICAgICAgICB2YXIgZSA9IGEuZm4uc2Nyb2xsVXAuc2V0dGluZ3MgPSBhLmV4dGVuZCh7fSwgYS5mbi5zY3JvbGxVcC5kZWZhdWx0cywgZCksXG4gICAgICAgIGYgPSBlLnNjcm9sbFRpdGxlID8gZS5zY3JvbGxUaXRsZSA6IGUuc2Nyb2xsVGV4dCxcbiAgICAgICAgZyA9IGEoXCI8YS8+XCIsIHtcbiAgICAgICAgICAgIGlkOiBlLnNjcm9sbE5hbWUsXG4gICAgICAgICAgICBocmVmOiBcIiN0b3BcIixcbiAgICAgICAgICAgIHRpdGxlOiBmXG4gICAgICAgIH0pLmFwcGVuZFRvKFwiYm9keVwiKTtcbiAgICAgICAgZS5zY3JvbGxJbWcgfHwgZy5odG1sKGUuc2Nyb2xsVGV4dCksIGcuY3NzKHtcbiAgICAgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiLFxuICAgICAgICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcbiAgICAgICAgICAgIHpJbmRleDogZS56SW5kZXhcbiAgICAgICAgfSksIGUuYWN0aXZlT3ZlcmxheSAmJiBhKFwiPGRpdi8+XCIsIHtcbiAgICAgICAgICAgIGlkOiBlLnNjcm9sbE5hbWUgKyBcIi1hY3RpdmVcIlxuICAgICAgICB9KS5jc3Moe1xuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgIHRvcDogZS5zY3JvbGxEaXN0YW5jZSArIFwicHhcIixcbiAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgICAgIGJvcmRlclRvcDogXCIxcHggZG90dGVkXCIgKyBlLmFjdGl2ZU92ZXJsYXksXG4gICAgICAgICAgICB6SW5kZXg6IGUuekluZGV4XG4gICAgICAgIH0pLmFwcGVuZFRvKFwiYm9keVwiKSwgc2Nyb2xsRXZlbnQgPSBhKGIpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHNjcm9sbERpcyA9IFwidG9wXCIgPT09IGUuc2Nyb2xsRnJvbSA/IGUuc2Nyb2xsRGlzdGFuY2UgOiBhKGMpLmhlaWdodCgpIC0gYShiKS5oZWlnaHQoKSAtIGUuc2Nyb2xsRGlzdGFuY2UsIGUuYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwiZmFkZVwiOlxuICAgICAgICAgICAgICAgIGEoYShiKS5zY3JvbGxUb3AoKSA+IHNjcm9sbERpcyA/IGcuZmFkZUluKGUuYW5pbWF0aW9uSW5TcGVlZCkgOiBnLmZhZGVPdXQoZS5hbmltYXRpb25PdXRTcGVlZCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInNsaWRlXCI6XG4gICAgICAgICAgICAgICAgYShhKGIpLnNjcm9sbFRvcCgpID4gc2Nyb2xsRGlzID8gZy5zbGlkZURvd24oZS5hbmltYXRpb25JblNwZWVkKSA6IGcuc2xpZGVVcChlLmFuaW1hdGlvbk91dFNwZWVkKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGEoYShiKS5zY3JvbGxUb3AoKSA+IHNjcm9sbERpcyA/IGcuc2hvdygwKSA6IGcuaGlkZSgwKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIGcuY2xpY2soZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgIGIucHJldmVudERlZmF1bHQoKSwgYShcImh0bWwsIGJvZHlcIikuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAwXG4gICAgICAgICAgICB9LCBlLnRvcFNwZWVkLCBlLmVhc2luZ1R5cGUpXG4gICAgICAgIH0pXG4gICAgfSwgYS5mbi5zY3JvbGxVcC5kZWZhdWx0cyA9IHtcbiAgICAgICAgc2Nyb2xsTmFtZTogXCJzY3JvbGxVcFwiLFxuICAgICAgICBzY3JvbGxEaXN0YW5jZTogMzAwLFxuICAgICAgICBzY3JvbGxGcm9tOiBcInRvcFwiLFxuICAgICAgICBzY3JvbGxTcGVlZDogMzAwLFxuICAgICAgICBlYXNpbmdUeXBlOiBcImxpbmVhclwiLFxuICAgICAgICBhbmltYXRpb246IFwiZmFkZVwiLFxuICAgICAgICBhbmltYXRpb25JblNwZWVkOiAyMDAsXG4gICAgICAgIGFuaW1hdGlvbk91dFNwZWVkOiAyMDAsXG4gICAgICAgIHNjcm9sbFRleHQ6IFwiU2Nyb2xsIHRvIHRvcFwiLFxuICAgICAgICBzY3JvbGxUaXRsZTogITEsXG4gICAgICAgIHNjcm9sbEltZzogITEsXG4gICAgICAgIGFjdGl2ZU92ZXJsYXk6ICExLFxuICAgICAgICB6SW5kZXg6IDIxNDc0ODM2NDdcbiAgICB9LCBhLmZuLnNjcm9sbFVwLmRlc3Ryb3kgPSBmdW5jdGlvbiAoZCkge1xuICAgICAgICBhLnJlbW92ZURhdGEoYy5ib2R5LCBcInNjcm9sbFVwXCIpLCBhKFwiI1wiICsgYS5mbi5zY3JvbGxVcC5zZXR0aW5ncy5zY3JvbGxOYW1lKS5yZW1vdmUoKSwgYShcIiNcIiArIGEuZm4uc2Nyb2xsVXAuc2V0dGluZ3Muc2Nyb2xsTmFtZSArIFwiLWFjdGl2ZVwiKS5yZW1vdmUoKSwgYS5mbi5qcXVlcnkuc3BsaXQoXCIuXCIpWzFdID49IDcgPyBhKGIpLm9mZihcInNjcm9sbFwiLCBkKSA6IGEoYikudW5iaW5kKFwic2Nyb2xsXCIsIGQpXG4gICAgfSwgYS5zY3JvbGxVcCA9IGEuZm4uc2Nyb2xsVXBcbn0oalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcdDE3LiBMT0NBTFNDUk9MTCAmIFNDUk9MTFRPXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qKlxuKiBqUXVlcnkuTG9jYWxTY3JvbGwgLSBBbmltYXRlZCBzY3JvbGxpbmcgbmF2aWdhdGlvbiwgdXNpbmcgYW5jaG9ycy5cbiogQ29weXJpZ2h0IChjKSAyMDA3LTIwMDkgQXJpZWwgRmxlc2xlciAtIGFmbGVzbGVyKGF0KWdtYWlsKGRvdCljb20gfCBodHRwOi8vZmxlc2xlci5ibG9nc3BvdC5jb21cbiogRHVhbCBsaWNlbnNlZCB1bmRlciBNSVQgYW5kIEdQTC5cbiogRGF0ZTogMy8xMS8yMDA5XG4qIEBhdXRob3IgQXJpZWwgRmxlc2xlclxuKiBAdmVyc2lvbiAxLjIuN1xuKiovXG4oZnVuY3Rpb24oJCkge1xuICAgIHZhciBsID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiovLCAnJyk7XG4gICAgdmFyIGcgPSAkLmxvY2FsU2Nyb2xsID0gZnVuY3Rpb24oYSkge1xuICAgICAgICAkKCdib2R5JykubG9jYWxTY3JvbGwoYSlcbiAgICB9O1xuICAgIGcuZGVmYXVsdHMgPSB7XG4gICAgICAgIGR1cmF0aW9uOiAxZTMsXG4gICAgICAgIGF4aXM6ICd5JyxcbiAgICAgICAgZXZlbnQ6ICdjbGljaycsXG4gICAgICAgIHN0b3A6IHRydWUsXG4gICAgICAgIHRhcmdldDogd2luZG93LFxuICAgICAgICByZXNldDogdHJ1ZVxuICAgIH07XG4gICAgZy5oYXNoID0gZnVuY3Rpb24oYSkge1xuICAgICAgICBpZiAobG9jYXRpb24uaGFzaCkge1xuICAgICAgICAgICAgYSA9ICQuZXh0ZW5kKHt9LCBnLmRlZmF1bHRzLCBhKTtcbiAgICAgICAgICAgIGEuaGFzaCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGEucmVzZXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGEuZHVyYXRpb247XG4gICAgICAgICAgICAgICAgZGVsZXRlIGEuZHVyYXRpb247XG4gICAgICAgICAgICAgICAgJChhLnRhcmdldCkuc2Nyb2xsVG8oMCwgYSk7XG4gICAgICAgICAgICAgICAgYS5kdXJhdGlvbiA9IGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkoMCwgbG9jYXRpb24sIGEpXG4gICAgICAgIH1cbiAgICB9O1xuICAgICQuZm4ubG9jYWxTY3JvbGwgPSBmdW5jdGlvbihiKSB7XG4gICAgICAgIGIgPSAkLmV4dGVuZCh7fSwgZy5kZWZhdWx0cywgYik7XG4gICAgICAgIHJldHVybiBiLmxhenkgPyB0aGlzLmJpbmQoYi5ldmVudCwgZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgdmFyIGUgPSAkKFthLnRhcmdldCwgYS50YXJnZXQucGFyZW50Tm9kZV0pLmZpbHRlcihkKVswXTtcbiAgICAgICAgICAgIGlmIChlKVxuICAgICAgICAgICAgICAgIGkoYSwgZSwgYilcbiAgICAgICAgfSkgOiB0aGlzLmZpbmQoJ2EsYXJlYScpLmZpbHRlcihkKS5iaW5kKGIuZXZlbnQsIGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIGkoYSwgdGhpcywgYilcbiAgICAgICAgfSkuZW5kKCkuZW5kKCk7XG4gICAgICAgIGZ1bmN0aW9uIGQoKSB7XG4gICAgICAgICAgICByZXR1cm4gISF0aGlzLmhyZWYmJiEhdGhpcy5oYXNoICYmIHRoaXMuaHJlZi5yZXBsYWNlKHRoaXMuaGFzaCwgJycpID09IGwgJiYgKCFiLmZpbHRlciB8fCAkKHRoaXMpLmlzKGIuZmlsdGVyKSlcbiAgICAgICAgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gaShhLCBlLCBiKSB7XG4gICAgICAgIHZhciBkID0gZS5oYXNoLnNsaWNlKDEpLCBmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZCkgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoZClbMF07XG4gICAgICAgIGlmICghZilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGEpXG4gICAgICAgICAgICBhLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBoID0gJChiLnRhcmdldCk7XG4gICAgICAgIGlmIChiLmxvY2sgJiYgaC5pcygnOmFuaW1hdGVkJykgfHwgYi5vbkJlZm9yZSAmJiBiLm9uQmVmb3JlLmNhbGwoYiwgYSwgZiwgaCkgPT09IGZhbHNlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoYi5zdG9wKVxuICAgICAgICAgICAgaC5zdG9wKHRydWUpO1xuICAgICAgICBpZiAoYi5oYXNoKSB7XG4gICAgICAgICAgICB2YXIgaiA9IGYuaWQgPT0gZCA/ICdpZCc6ICduYW1lJywgayA9ICQoJzxhPiA8L2E+JykuYXR0cihqLCBkKS5jc3Moe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgIHRvcDogJCh3aW5kb3cpLnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgICAgIGxlZnQ6ICQod2luZG93KS5zY3JvbGxMZWZ0KClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZltqXSA9ICcnO1xuICAgICAgICAgICAgJCgnYm9keScpLnByZXBlbmQoayk7XG4gICAgICAgICAgICBsb2NhdGlvbiA9IGUuaGFzaDtcbiAgICAgICAgICAgIGsucmVtb3ZlKCk7XG4gICAgICAgICAgICBmW2pdID0gZFxuICAgICAgICB9XG4gICAgICAgIGguc2Nyb2xsVG8oZiwgYikudHJpZ2dlcignbm90aWZ5LnNlcmlhbFNjcm9sbCcsIFtmXSlcbiAgICB9XG59KShqUXVlcnkpO1xuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMDctMjAxMiBBcmllbCBGbGVzbGVyIC0gYWZsZXNsZXIoYXQpZ21haWwoZG90KWNvbSB8IGh0dHA6Ly9mbGVzbGVyLmJsb2dzcG90LmNvbVxuICogRHVhbCBsaWNlbnNlZCB1bmRlciBNSVQgYW5kIEdQTC5cbiAqIEBhdXRob3IgQXJpZWwgRmxlc2xlclxuICogQHZlcnNpb24gMS40LjUgQkVUQVxuICovXG47XG4oZnVuY3Rpb24oJCkge1xuICAgIHZhciBoID0gJC5zY3JvbGxUbyA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgICAgJCh3aW5kb3cpLnNjcm9sbFRvKGEsIGIsIGMpXG4gICAgfTtcbiAgICBoLmRlZmF1bHRzID0ge1xuICAgICAgICBheGlzOiAneHknLFxuICAgICAgICBkdXJhdGlvbjogcGFyc2VGbG9hdCgkLmZuLmpxdWVyeSkgPj0gMS4zID8gMDogMSxcbiAgICAgICAgbGltaXQ6IHRydWVcbiAgICB9O1xuICAgIGgud2luZG93ID0gZnVuY3Rpb24oYSkge1xuICAgICAgICByZXR1cm4gJCh3aW5kb3cpLl9zY3JvbGxhYmxlKClcbiAgICB9O1xuICAgICQuZm4uX3Njcm9sbGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGEgPSB0aGlzLCBpc1dpbj0hYS5ub2RlTmFtZSB8fCAkLmluQXJyYXkoYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCBbJ2lmcmFtZScsICcjZG9jdW1lbnQnLCAnaHRtbCcsICdib2R5J10pIT0tMTtcbiAgICAgICAgICAgIGlmICghaXNXaW4pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICB2YXIgYiA9IChhLmNvbnRlbnRXaW5kb3cgfHwgYSkuZG9jdW1lbnQgfHwgYS5vd25lckRvY3VtZW50IHx8IGE7XG4gICAgICAgICAgICByZXR1cm4gL3dlYmtpdC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgfHwgYi5jb21wYXRNb2RlID09ICdCYWNrQ29tcGF0JyA/IGIuYm9keSA6IGIuZG9jdW1lbnRFbGVtZW50XG4gICAgICAgIH0pXG4gICAgfTtcbiAgICAkLmZuLnNjcm9sbFRvID0gZnVuY3Rpb24oZSwgZiwgZykge1xuICAgICAgICBpZiAodHlwZW9mIGYgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGcgPSBmO1xuICAgICAgICAgICAgZiA9IDBcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGcgPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIGcgPSB7XG4gICAgICAgICAgICAgICAgb25BZnRlcjogZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT0gJ21heCcpXG4gICAgICAgICAgICBlID0gOWU5O1xuICAgICAgICBnID0gJC5leHRlbmQoe30sIGguZGVmYXVsdHMsIGcpO1xuICAgICAgICBmID0gZiB8fCBnLmR1cmF0aW9uO1xuICAgICAgICBnLnF1ZXVlID0gZy5xdWV1ZSAmJiBnLmF4aXMubGVuZ3RoID4gMTtcbiAgICAgICAgaWYgKGcucXVldWUpXG4gICAgICAgICAgICBmLz0yO1xuICAgICAgICBnLm9mZnNldCA9IGJvdGgoZy5vZmZzZXQpO1xuICAgICAgICBnLm92ZXIgPSBib3RoKGcub3Zlcik7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxhYmxlKCkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChlID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGQgPSB0aGlzLCAkZWxlbSA9ICQoZCksIHRhcmcgPSBlLCB0b2ZmLCBhdHRyID0ge30sIHdpbiA9ICRlbGVtLmlzKCdodG1sLGJvZHknKTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHRhcmcpIHtcbiAgICAgICAgICAgIGNhc2UnbnVtYmVyJzpcbiAgICAgICAgICAgIGNhc2Unc3RyaW5nJzpcbiAgICAgICAgICAgICAgICBpZiAoL14oWystXT0/KT9cXGQrKFxcLlxcZCspPyhweHwlKT8kLy50ZXN0KHRhcmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmcgPSBib3RoKHRhcmcpO1xuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0YXJnID0gJCh0YXJnLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmcubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYXNlJ29iamVjdCc6XG4gICAgICAgICAgICAgICAgaWYgKHRhcmcuaXMgfHwgdGFyZy5zdHlsZSlcbiAgICAgICAgICAgICAgICAgICAgdG9mZiA9ICh0YXJnID0gJCh0YXJnKSkub2Zmc2V0KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQuZWFjaChnLmF4aXMuc3BsaXQoJycpLCBmdW5jdGlvbihpLCBhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGIgPSBhID09ICd4JyA/ICdMZWZ0JzogJ1RvcCcsIHBvcyA9IGIudG9Mb3dlckNhc2UoKSwga2V5ID0gJ3Njcm9sbCcgKyBiLCBvbGQgPSBkW2tleV0sIG1heCA9IGgubWF4KGQsIGEpO1xuICAgICAgICAgICAgICAgIGlmICh0b2ZmKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJba2V5XSA9IHRvZmZbcG9zXSArICh3aW4gPyAwIDogb2xkIC0gJGVsZW0ub2Zmc2V0KClbcG9zXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnLm1hcmdpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cltrZXldIC09IHBhcnNlSW50KHRhcmcuY3NzKCdtYXJnaW4nICsgYikpIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyW2tleV0gLT0gcGFyc2VJbnQodGFyZy5jc3MoJ2JvcmRlcicgKyBiICsgJ1dpZHRoJykpIHx8IDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhdHRyW2tleV0gKz0gZy5vZmZzZXRbcG9zXSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZy5vdmVyW3Bvc10pXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyW2tleV0gKz0gdGFyZ1thID09ICd4JyA/ICd3aWR0aCc6ICdoZWlnaHQnXSgpICogZy5vdmVyW3Bvc11cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHRhcmdbcG9zXTtcbiAgICAgICAgICAgICAgICAgICAgYXR0cltrZXldID0gYy5zbGljZSAmJiBjLnNsaWNlKCAtIDEpID09ICclJyA/IHBhcnNlRmxvYXQoYykgLyAxMDAgKiBtYXggOiBjXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnLmxpbWl0ICYmIC9eXFxkKyQvLnRlc3QoYXR0cltrZXldKSlcbiAgICAgICAgICAgICAgICAgICAgYXR0cltrZXldID0gYXR0cltrZXldIDw9IDAgPyAwIDogTWF0aC5taW4oYXR0cltrZXldLCBtYXgpO1xuICAgICAgICAgICAgICAgIGlmICghaSAmJiBnLnF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGQgIT0gYXR0cltrZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZShnLm9uQWZ0ZXJGaXJzdCk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdHRyW2tleV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFuaW1hdGUoZy5vbkFmdGVyKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFuaW1hdGUoYSkge1xuICAgICAgICAgICAgICAgICRlbGVtLmFuaW1hdGUoYXR0ciwgZiwgZy5lYXNpbmcsIGEgJiYgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGEuY2FsbCh0aGlzLCBlLCBnKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmVuZCgpXG4gICAgfTtcbiAgICBoLm1heCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgdmFyIGMgPSBiID09ICd4JyA/ICdXaWR0aCc6ICdIZWlnaHQnLCBzY3JvbGwgPSAnc2Nyb2xsJyArIGM7XG4gICAgICAgIGlmICghJChhKS5pcygnaHRtbCxib2R5JykpXG4gICAgICAgICAgICByZXR1cm4gYVtzY3JvbGxdIC0gJChhKVtjLnRvTG93ZXJDYXNlKCldKCk7XG4gICAgICAgIHZhciBkID0gJ2NsaWVudCcgKyBjLCBodG1sID0gYS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgYm9keSA9IGEub3duZXJEb2N1bWVudC5ib2R5O1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoaHRtbFtzY3JvbGxdLCBib2R5W3Njcm9sbF0pIC0gTWF0aC5taW4oaHRtbFtkXSwgYm9keVtkXSlcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGJvdGgoYSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGEgPT0gJ29iamVjdCcgPyBhIDoge1xuICAgICAgICAgICAgdG9wOiBhLFxuICAgICAgICAgICAgbGVmdDogYVxuICAgICAgICB9XG4gICAgfVxufSkoalF1ZXJ5KTtcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcdDE4LiBQUkVUVElGWVxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4hZnVuY3Rpb24oKXsvKlxuXG4gQ29weXJpZ2h0IChDKSAyMDA2IEdvb2dsZSBJbmMuXG5cbiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cbiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG53aW5kb3cuUFJfU0hPVUxEX1VTRV9DT05USU5VQVRJT049ITA7XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBUKGEpe2Z1bmN0aW9uIGQoZSl7dmFyIGI9ZS5jaGFyQ29kZUF0KDApO2lmKDkyIT09YilyZXR1cm4gYjt2YXIgYT1lLmNoYXJBdCgxKTtyZXR1cm4oYj13W2FdKT9iOlwiMFwiPD1hJiZcIjdcIj49YT9wYXJzZUludChlLnN1YnN0cmluZygxKSw4KTpcInVcIj09PWF8fFwieFwiPT09YT9wYXJzZUludChlLnN1YnN0cmluZygyKSwxNik6ZS5jaGFyQ29kZUF0KDEpfWZ1bmN0aW9uIGYoZSl7aWYoMzI+ZSlyZXR1cm4oMTY+ZT9cIlxcXFx4MFwiOlwiXFxcXHhcIikrZS50b1N0cmluZygxNik7ZT1TdHJpbmcuZnJvbUNoYXJDb2RlKGUpO3JldHVyblwiXFxcXFwiPT09ZXx8XCItXCI9PT1lfHxcIl1cIj09PWV8fFwiXlwiPT09ZT9cIlxcXFxcIitlOmV9ZnVuY3Rpb24gYihlKXt2YXIgYj1lLnN1YnN0cmluZygxLGUubGVuZ3RoLTEpLm1hdGNoKC9cXFxcdVswLTlBLUZhLWZdezR9fFxcXFx4WzAtOUEtRmEtZl17Mn18XFxcXFswLTNdWzAtN117MCwyfXxcXFxcWzAtN117MSwyfXxcXFxcW1xcc1xcU118LXxbXi1cXFxcXS9nKTtlPVxuW107dmFyIGE9XCJeXCI9PT1iWzBdLGM9W1wiW1wiXTthJiZjLnB1c2goXCJeXCIpO2Zvcih2YXIgYT1hPzE6MCxnPWIubGVuZ3RoO2E8ZzsrK2Epe3ZhciBoPWJbYV07aWYoL1xcXFxbYmRzd10vaS50ZXN0KGgpKWMucHVzaChoKTtlbHNle3ZhciBoPWQoaCksazthKzI8ZyYmXCItXCI9PT1iW2ErMV0/KGs9ZChiW2ErMl0pLGErPTIpOms9aDtlLnB1c2goW2gsa10pOzY1Pmt8fDEyMjxofHwoNjU+a3x8OTA8aHx8ZS5wdXNoKFtNYXRoLm1heCg2NSxoKXwzMixNYXRoLm1pbihrLDkwKXwzMl0pLDk3Pmt8fDEyMjxofHxlLnB1c2goW01hdGgubWF4KDk3LGgpJi0zMyxNYXRoLm1pbihrLDEyMikmLTMzXSkpfX1lLnNvcnQoZnVuY3Rpb24oZSxhKXtyZXR1cm4gZVswXS1hWzBdfHxhWzFdLWVbMV19KTtiPVtdO2c9W107Zm9yKGE9MDthPGUubGVuZ3RoOysrYSloPWVbYV0saFswXTw9Z1sxXSsxP2dbMV09TWF0aC5tYXgoZ1sxXSxoWzFdKTpiLnB1c2goZz1oKTtmb3IoYT0wO2E8Yi5sZW5ndGg7KythKWg9YlthXSxcbmMucHVzaChmKGhbMF0pKSxoWzFdPmhbMF0mJihoWzFdKzE+aFswXSYmYy5wdXNoKFwiLVwiKSxjLnB1c2goZihoWzFdKSkpO2MucHVzaChcIl1cIik7cmV0dXJuIGMuam9pbihcIlwiKX1mdW5jdGlvbiB2KGUpe2Zvcih2YXIgYT1lLnNvdXJjZS5tYXRjaCgvKD86XFxbKD86W15cXHg1Q1xceDVEXXxcXFxcW1xcc1xcU10pKlxcXXxcXFxcdVtBLUZhLWYwLTldezR9fFxcXFx4W0EtRmEtZjAtOV17Mn18XFxcXFswLTldK3xcXFxcW151eDAtOV18XFwoXFw/WzohPV18W1xcKFxcKVxcXl18W15cXHg1QlxceDVDXFwoXFwpXFxeXSspL2cpLGM9YS5sZW5ndGgsZD1bXSxnPTAsaD0wO2c8YzsrK2cpe3ZhciBrPWFbZ107XCIoXCI9PT1rPysraDpcIlxcXFxcIj09PWsuY2hhckF0KDApJiYoaz0ray5zdWJzdHJpbmcoMSkpJiYoazw9aD9kW2tdPS0xOmFbZ109ZihrKSl9Zm9yKGc9MTtnPGQubGVuZ3RoOysrZyktMT09PWRbZ10mJihkW2ddPSsrQSk7Zm9yKGg9Zz0wO2c8YzsrK2cpaz1hW2ddLFwiKFwiPT09az8oKytoLGRbaF18fChhW2ddPVwiKD86XCIpKTpcIlxcXFxcIj09PVxuay5jaGFyQXQoMCkmJihrPStrLnN1YnN0cmluZygxKSkmJms8PWgmJihhW2ddPVwiXFxcXFwiK2Rba10pO2ZvcihnPTA7ZzxjOysrZylcIl5cIj09PWFbZ10mJlwiXlwiIT09YVtnKzFdJiYoYVtnXT1cIlwiKTtpZihlLmlnbm9yZUNhc2UmJm4pZm9yKGc9MDtnPGM7KytnKWs9YVtnXSxlPWsuY2hhckF0KDApLDI8PWsubGVuZ3RoJiZcIltcIj09PWU/YVtnXT1iKGspOlwiXFxcXFwiIT09ZSYmKGFbZ109ay5yZXBsYWNlKC9bYS16QS1aXS9nLGZ1bmN0aW9uKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVyblwiW1wiK1N0cmluZy5mcm9tQ2hhckNvZGUoYSYtMzMsYXwzMikrXCJdXCJ9KSk7cmV0dXJuIGEuam9pbihcIlwiKX1mb3IodmFyIEE9MCxuPSExLGw9ITEsbT0wLGM9YS5sZW5ndGg7bTxjOysrbSl7dmFyIHA9YVttXTtpZihwLmlnbm9yZUNhc2UpbD0hMDtlbHNlIGlmKC9bYS16XS9pLnRlc3QocC5zb3VyY2UucmVwbGFjZSgvXFxcXHVbMC05YS1mXXs0fXxcXFxceFswLTlhLWZdezJ9fFxcXFxbXnV4XS9naSxcIlwiKSkpe249ITA7XG5sPSExO2JyZWFrfX1mb3IodmFyIHc9e2I6OCx0OjksbjoxMCx2OjExLGY6MTIscjoxM30scj1bXSxtPTAsYz1hLmxlbmd0aDttPGM7KyttKXtwPWFbbV07aWYocC5nbG9iYWx8fHAubXVsdGlsaW5lKXRocm93IEVycm9yKFwiXCIrcCk7ci5wdXNoKFwiKD86XCIrdihwKStcIilcIil9cmV0dXJuIG5ldyBSZWdFeHAoci5qb2luKFwifFwiKSxsP1wiZ2lcIjpcImdcIil9ZnVuY3Rpb24gVShhLGQpe2Z1bmN0aW9uIGYoYSl7dmFyIGM9YS5ub2RlVHlwZTtpZigxPT1jKXtpZighYi50ZXN0KGEuY2xhc3NOYW1lKSl7Zm9yKGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWYoYyk7Yz1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoXCJiclwiPT09Y3x8XCJsaVwiPT09Yyl2W2xdPVwiXFxuXCIsbltsPDwxXT1BKyssbltsKys8PDF8MV09YX19ZWxzZSBpZigzPT1jfHw0PT1jKWM9YS5ub2RlVmFsdWUsYy5sZW5ndGgmJihjPWQ/Yy5yZXBsYWNlKC9cXHJcXG4/L2csXCJcXG5cIik6Yy5yZXBsYWNlKC9bIFxcdFxcclxcbl0rL2csXG5cIiBcIiksdltsXT1jLG5bbDw8MV09QSxBKz1jLmxlbmd0aCxuW2wrKzw8MXwxXT1hKX12YXIgYj0vKD86XnxcXHMpbm9jb2RlKD86XFxzfCQpLyx2PVtdLEE9MCxuPVtdLGw9MDtmKGEpO3JldHVybnthOnYuam9pbihcIlwiKS5yZXBsYWNlKC9cXG4kLyxcIlwiKSxjOm59fWZ1bmN0aW9uIEooYSxkLGYsYix2KXtmJiYoYT17aDphLGw6MSxqOm51bGwsbTpudWxsLGE6ZixjOm51bGwsaTpkLGc6bnVsbH0sYihhKSx2LnB1c2guYXBwbHkodixhLmcpKX1mdW5jdGlvbiBWKGEpe2Zvcih2YXIgZD12b2lkIDAsZj1hLmZpcnN0Q2hpbGQ7ZjtmPWYubmV4dFNpYmxpbmcpdmFyIGI9Zi5ub2RlVHlwZSxkPTE9PT1iP2Q/YTpmOjM9PT1iP1cudGVzdChmLm5vZGVWYWx1ZSk/YTpkOmQ7cmV0dXJuIGQ9PT1hP3ZvaWQgMDpkfWZ1bmN0aW9uIEcoYSxkKXtmdW5jdGlvbiBmKGEpe2Zvcih2YXIgbD1hLmksbT1hLmgsYz1bbCxcInBsblwiXSxwPTAsdz1hLmEubWF0Y2godil8fFtdLHI9e30sZT0wLHQ9dy5sZW5ndGg7ZTxcbnQ7KytlKXt2YXIgej13W2VdLHE9clt6XSxnPXZvaWQgMCxoO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgcSloPSExO2Vsc2V7dmFyIGs9Ylt6LmNoYXJBdCgwKV07aWYoaylnPXoubWF0Y2goa1sxXSkscT1rWzBdO2Vsc2V7Zm9yKGg9MDtoPEE7KytoKWlmKGs9ZFtoXSxnPXoubWF0Y2goa1sxXSkpe3E9a1swXTticmVha31nfHwocT1cInBsblwiKX0hKGg9NTw9cS5sZW5ndGgmJlwibGFuZy1cIj09PXEuc3Vic3RyaW5nKDAsNSkpfHxnJiZcInN0cmluZ1wiPT09dHlwZW9mIGdbMV18fChoPSExLHE9XCJzcmNcIik7aHx8KHJbel09cSl9az1wO3ArPXoubGVuZ3RoO2lmKGgpe2g9Z1sxXTt2YXIgQj16LmluZGV4T2YoaCksRD1CK2gubGVuZ3RoO2dbMl0mJihEPXoubGVuZ3RoLWdbMl0ubGVuZ3RoLEI9RC1oLmxlbmd0aCk7cT1xLnN1YnN0cmluZyg1KTtKKG0sbCtrLHouc3Vic3RyaW5nKDAsQiksZixjKTtKKG0sbCtrK0IsaCxLKHEsaCksYyk7SihtLGwraytELHouc3Vic3RyaW5nKEQpLGYsYyl9ZWxzZSBjLnB1c2gobCtcbmsscSl9YS5nPWN9dmFyIGI9e30sdjsoZnVuY3Rpb24oKXtmb3IodmFyIGY9YS5jb25jYXQoZCksbD1bXSxtPXt9LGM9MCxwPWYubGVuZ3RoO2M8cDsrK2Mpe3ZhciB3PWZbY10scj13WzNdO2lmKHIpZm9yKHZhciBlPXIubGVuZ3RoOzA8PS0tZTspYltyLmNoYXJBdChlKV09dzt3PXdbMV07cj1cIlwiK3c7bS5oYXNPd25Qcm9wZXJ0eShyKXx8KGwucHVzaCh3KSxtW3JdPW51bGwpfWwucHVzaCgvW1xcMC1cXHVmZmZmXS8pO3Y9VChsKX0pKCk7dmFyIEE9ZC5sZW5ndGg7cmV0dXJuIGZ9ZnVuY3Rpb24geShhKXt2YXIgZD1bXSxmPVtdO2EudHJpcGxlUXVvdGVkU3RyaW5ncz9kLnB1c2goW1wic3RyXCIsL14oPzpcXCdcXCdcXCcoPzpbXlxcJ1xcXFxdfFxcXFxbXFxzXFxTXXxcXCd7MSwyfSg/PVteXFwnXSkpKig/OlxcJ1xcJ1xcJ3wkKXxcXFwiXFxcIlxcXCIoPzpbXlxcXCJcXFxcXXxcXFxcW1xcc1xcU118XFxcInsxLDJ9KD89W15cXFwiXSkpKig/OlxcXCJcXFwiXFxcInwkKXxcXCcoPzpbXlxcXFxcXCddfFxcXFxbXFxzXFxTXSkqKD86XFwnfCQpfFxcXCIoPzpbXlxcXFxcXFwiXXxcXFxcW1xcc1xcU10pKig/OlxcXCJ8JCkpLyxcbm51bGwsXCInXFxcIlwiXSk6YS5tdWx0aUxpbmVTdHJpbmdzP2QucHVzaChbXCJzdHJcIiwvXig/OlxcJyg/OlteXFxcXFxcJ118XFxcXFtcXHNcXFNdKSooPzpcXCd8JCl8XFxcIig/OlteXFxcXFxcXCJdfFxcXFxbXFxzXFxTXSkqKD86XFxcInwkKXxcXGAoPzpbXlxcXFxcXGBdfFxcXFxbXFxzXFxTXSkqKD86XFxgfCQpKS8sbnVsbCxcIidcXFwiYFwiXSk6ZC5wdXNoKFtcInN0clwiLC9eKD86XFwnKD86W15cXFxcXFwnXFxyXFxuXXxcXFxcLikqKD86XFwnfCQpfFxcXCIoPzpbXlxcXFxcXFwiXFxyXFxuXXxcXFxcLikqKD86XFxcInwkKSkvLG51bGwsXCJcXFwiJ1wiXSk7YS52ZXJiYXRpbVN0cmluZ3MmJmYucHVzaChbXCJzdHJcIiwvXkBcXFwiKD86W15cXFwiXXxcXFwiXFxcIikqKD86XFxcInwkKS8sbnVsbF0pO3ZhciBiPWEuaGFzaENvbW1lbnRzO2ImJihhLmNTdHlsZUNvbW1lbnRzPygxPGI/ZC5wdXNoKFtcImNvbVwiLC9eIyg/OiMjKD86W14jXXwjKD8hIyMpKSooPzojIyN8JCl8LiopLyxudWxsLFwiI1wiXSk6ZC5wdXNoKFtcImNvbVwiLC9eIyg/Oig/OmRlZmluZXxlKD86bHxuZClpZnxlbHNlfGVycm9yfGlmbj9kZWZ8aW5jbHVkZXxsaW5lfHByYWdtYXx1bmRlZnx3YXJuaW5nKVxcYnxbXlxcclxcbl0qKS8sXG5udWxsLFwiI1wiXSksZi5wdXNoKFtcInN0clwiLC9ePCg/Oig/Oig/OlxcLlxcLlxcLykqfFxcLz8pKD86W1xcdy1dKyg/OlxcL1tcXHctXSspKyk/W1xcdy1dK1xcLmgoPzpofHBwfFxcK1xcKyk/fFthLXpdXFx3Kik+LyxudWxsXSkpOmQucHVzaChbXCJjb21cIiwvXiNbXlxcclxcbl0qLyxudWxsLFwiI1wiXSkpO2EuY1N0eWxlQ29tbWVudHMmJihmLnB1c2goW1wiY29tXCIsL15cXC9cXC9bXlxcclxcbl0qLyxudWxsXSksZi5wdXNoKFtcImNvbVwiLC9eXFwvXFwqW1xcc1xcU10qPyg/OlxcKlxcL3wkKS8sbnVsbF0pKTtpZihiPWEucmVnZXhMaXRlcmFscyl7dmFyIHY9KGI9MTxiP1wiXCI6XCJcXG5cXHJcIik/XCIuXCI6XCJbXFxcXFNcXFxcc11cIjtmLnB1c2goW1wibGFuZy1yZWdleFwiLFJlZ0V4cChcIl4oPzpeXlxcXFwuP3xbKy1dfFshPV09Pz0/fFxcXFwjfCU9P3wmJj89P3xcXFxcKHxcXFxcKj0/fFsrXFxcXC1dPXwtPnxcXFxcLz0/fDo6P3w8PD89P3w+Pj8+Pz0/fCx8O3xcXFxcP3xAfFxcXFxbfH58e3xcXFxcXlxcXFxePz0/fFxcXFx8XFxcXHw/PT98YnJlYWt8Y2FzZXxjb250aW51ZXxkZWxldGV8ZG98ZWxzZXxmaW5hbGx5fGluc3RhbmNlb2Z8cmV0dXJufHRocm93fHRyeXx0eXBlb2YpXFxcXHMqKFwiK1xuKFwiLyg/PVteLypcIitiK1wiXSkoPzpbXi9cXFxceDVCXFxcXHg1Q1wiK2IrXCJdfFxcXFx4NUNcIit2K1wifFxcXFx4NUIoPzpbXlxcXFx4NUNcXFxceDVEXCIrYitcIl18XFxcXHg1Q1wiK3YrXCIpKig/OlxcXFx4NUR8JCkpKy9cIikrXCIpXCIpXSl9KGI9YS50eXBlcykmJmYucHVzaChbXCJ0eXBcIixiXSk7Yj0oXCJcIithLmtleXdvcmRzKS5yZXBsYWNlKC9eIHwgJC9nLFwiXCIpO2IubGVuZ3RoJiZmLnB1c2goW1wia3dkXCIsbmV3IFJlZ0V4cChcIl4oPzpcIitiLnJlcGxhY2UoL1tcXHMsXSsvZyxcInxcIikrXCIpXFxcXGJcIiksbnVsbF0pO2QucHVzaChbXCJwbG5cIiwvXlxccysvLG51bGwsXCIgXFxyXFxuXFx0XFx1MDBhMFwiXSk7Yj1cIl4uW15cXFxcc1xcXFx3LiRAJ1xcXCJgL1xcXFxcXFxcXSpcIjthLnJlZ2V4TGl0ZXJhbHMmJihiKz1cIig/IXMqLylcIik7Zi5wdXNoKFtcImxpdFwiLC9eQFthLXpfJF1bYS16XyRAMC05XSovaSxudWxsXSxbXCJ0eXBcIiwvXig/OltAX10/W0EtWl0rW2Etel1bQS1aYS16XyRAMC05XSp8XFx3K190XFxiKS8sbnVsbF0sW1wicGxuXCIsL15bYS16XyRdW2Etel8kQDAtOV0qL2ksXG5udWxsXSxbXCJsaXRcIiwvXig/OjB4W2EtZjAtOV0rfCg/OlxcZCg/Ol9cXGQrKSpcXGQqKD86XFwuXFxkKik/fFxcLlxcZFxcKykoPzplWytcXC1dP1xcZCspPylbYS16XSovaSxudWxsLFwiMDEyMzQ1Njc4OVwiXSxbXCJwbG5cIiwvXlxcXFxbXFxzXFxTXT8vLG51bGxdLFtcInB1blwiLG5ldyBSZWdFeHAoYiksbnVsbF0pO3JldHVybiBHKGQsZil9ZnVuY3Rpb24gTChhLGQsZil7ZnVuY3Rpb24gYihhKXt2YXIgYz1hLm5vZGVUeXBlO2lmKDE9PWMmJiFBLnRlc3QoYS5jbGFzc05hbWUpKWlmKFwiYnJcIj09PWEubm9kZU5hbWUpdihhKSxhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKTtlbHNlIGZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyliKGEpO2Vsc2UgaWYoKDM9PWN8fDQ9PWMpJiZmKXt2YXIgZD1hLm5vZGVWYWx1ZSxxPWQubWF0Y2gobik7cSYmKGM9ZC5zdWJzdHJpbmcoMCxxLmluZGV4KSxhLm5vZGVWYWx1ZT1jLChkPWQuc3Vic3RyaW5nKHEuaW5kZXgrcVswXS5sZW5ndGgpKSYmXG5hLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGwuY3JlYXRlVGV4dE5vZGUoZCksYS5uZXh0U2libGluZyksdihhKSxjfHxhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSkpfX1mdW5jdGlvbiB2KGEpe2Z1bmN0aW9uIGIoYSxjKXt2YXIgZD1jP2EuY2xvbmVOb2RlKCExKTphLGs9YS5wYXJlbnROb2RlO2lmKGspe3ZhciBrPWIoaywxKSxlPWEubmV4dFNpYmxpbmc7ay5hcHBlbmRDaGlsZChkKTtmb3IodmFyIGY9ZTtmO2Y9ZSllPWYubmV4dFNpYmxpbmcsay5hcHBlbmRDaGlsZChmKX1yZXR1cm4gZH1mb3IoOyFhLm5leHRTaWJsaW5nOylpZihhPWEucGFyZW50Tm9kZSwhYSlyZXR1cm47YT1iKGEubmV4dFNpYmxpbmcsMCk7Zm9yKHZhciBkOyhkPWEucGFyZW50Tm9kZSkmJjE9PT1kLm5vZGVUeXBlOylhPWQ7Yy5wdXNoKGEpfWZvcih2YXIgQT0vKD86XnxcXHMpbm9jb2RlKD86XFxzfCQpLyxuPS9cXHJcXG4/fFxcbi8sbD1hLm93bmVyRG9jdW1lbnQsbT1sLmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTthLmZpcnN0Q2hpbGQ7KW0uYXBwZW5kQ2hpbGQoYS5maXJzdENoaWxkKTtcbmZvcih2YXIgYz1bbV0scD0wO3A8Yy5sZW5ndGg7KytwKWIoY1twXSk7ZD09PShkfDApJiZjWzBdLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsZCk7dmFyIHc9bC5jcmVhdGVFbGVtZW50KFwib2xcIik7dy5jbGFzc05hbWU9XCJsaW5lbnVtc1wiO2Q9TWF0aC5tYXgoMCxkLTF8MCl8fDA7Zm9yKHZhciBwPTAscj1jLmxlbmd0aDtwPHI7KytwKW09Y1twXSxtLmNsYXNzTmFtZT1cIkxcIisocCtkKSUxMCxtLmZpcnN0Q2hpbGR8fG0uYXBwZW5kQ2hpbGQobC5jcmVhdGVUZXh0Tm9kZShcIlxcdTAwYTBcIikpLHcuYXBwZW5kQ2hpbGQobSk7YS5hcHBlbmRDaGlsZCh3KX1mdW5jdGlvbiB0KGEsZCl7Zm9yKHZhciBmPWQubGVuZ3RoOzA8PS0tZjspe3ZhciBiPWRbZl07SS5oYXNPd25Qcm9wZXJ0eShiKT9FLmNvbnNvbGUmJmNvbnNvbGUud2FybihcImNhbm5vdCBvdmVycmlkZSBsYW5ndWFnZSBoYW5kbGVyICVzXCIsYik6SVtiXT1hfX1mdW5jdGlvbiBLKGEsZCl7YSYmSS5oYXNPd25Qcm9wZXJ0eShhKXx8KGE9L15cXHMqPC8udGVzdChkKT9cblwiZGVmYXVsdC1tYXJrdXBcIjpcImRlZmF1bHQtY29kZVwiKTtyZXR1cm4gSVthXX1mdW5jdGlvbiBNKGEpe3ZhciBkPWEuajt0cnl7dmFyIGY9VShhLmgsYS5sKSxiPWYuYTthLmE9YjthLmM9Zi5jO2EuaT0wO0soZCxiKShhKTt2YXIgdj0vXFxiTVNJRVxccyhcXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSx2PXYmJjg+PSt2WzFdLGQ9L1xcbi9nLEE9YS5hLG49QS5sZW5ndGgsZj0wLGw9YS5jLG09bC5sZW5ndGgsYj0wLGM9YS5nLHA9Yy5sZW5ndGgsdz0wO2NbcF09bjt2YXIgcixlO2ZvcihlPXI9MDtlPHA7KWNbZV0hPT1jW2UrMl0/KGNbcisrXT1jW2UrK10sY1tyKytdPWNbZSsrXSk6ZSs9MjtwPXI7Zm9yKGU9cj0wO2U8cDspe2Zvcih2YXIgdD1jW2VdLHo9Y1tlKzFdLHE9ZSsyO3ErMjw9cCYmY1txKzFdPT09ejspcSs9MjtjW3IrK109dDtjW3IrK109ejtlPXF9Yy5sZW5ndGg9cjt2YXIgZz1hLmg7YT1cIlwiO2cmJihhPWcuc3R5bGUuZGlzcGxheSxnLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpO1xudHJ5e2Zvcig7YjxtOyl7dmFyIGg9bFtiKzJdfHxuLGs9Y1t3KzJdfHxuLHE9TWF0aC5taW4oaCxrKSxCPWxbYisxXSxEO2lmKDEhPT1CLm5vZGVUeXBlJiYoRD1BLnN1YnN0cmluZyhmLHEpKSl7diYmKEQ9RC5yZXBsYWNlKGQsXCJcXHJcIikpO0Iubm9kZVZhbHVlPUQ7dmFyIE49Qi5vd25lckRvY3VtZW50LHU9Ti5jcmVhdGVFbGVtZW50KFwic3BhblwiKTt1LmNsYXNzTmFtZT1jW3crMV07dmFyIHk9Qi5wYXJlbnROb2RlO3kucmVwbGFjZUNoaWxkKHUsQik7dS5hcHBlbmRDaGlsZChCKTtmPGgmJihsW2IrMV09Qj1OLmNyZWF0ZVRleHROb2RlKEEuc3Vic3RyaW5nKHEsaCkpLHkuaW5zZXJ0QmVmb3JlKEIsdS5uZXh0U2libGluZykpfWY9cTtmPj1oJiYoYis9Mik7Zj49ayYmKHcrPTIpfX1maW5hbGx5e2cmJihnLnN0eWxlLmRpc3BsYXk9YSl9fWNhdGNoKHgpe0UuY29uc29sZSYmY29uc29sZS5sb2coeCYmeC5zdGFja3x8eCl9fXZhciBFPXdpbmRvdyxDPVtcImJyZWFrLGNvbnRpbnVlLGRvLGVsc2UsZm9yLGlmLHJldHVybix3aGlsZVwiXSxcbkY9W1tDLFwiYXV0byxjYXNlLGNoYXIsY29uc3QsZGVmYXVsdCxkb3VibGUsZW51bSxleHRlcm4sZmxvYXQsZ290byxpbmxpbmUsaW50LGxvbmcscmVnaXN0ZXIsc2hvcnQsc2lnbmVkLHNpemVvZixzdGF0aWMsc3RydWN0LHN3aXRjaCx0eXBlZGVmLHVuaW9uLHVuc2lnbmVkLHZvaWQsdm9sYXRpbGVcIl0sXCJjYXRjaCxjbGFzcyxkZWxldGUsZmFsc2UsaW1wb3J0LG5ldyxvcGVyYXRvcixwcml2YXRlLHByb3RlY3RlZCxwdWJsaWMsdGhpcyx0aHJvdyx0cnVlLHRyeSx0eXBlb2ZcIl0sSD1bRixcImFsaWdub2YsYWxpZ25fdW5pb24sYXNtLGF4aW9tLGJvb2wsY29uY2VwdCxjb25jZXB0X21hcCxjb25zdF9jYXN0LGNvbnN0ZXhwcixkZWNsdHlwZSxkZWxlZ2F0ZSxkeW5hbWljX2Nhc3QsZXhwbGljaXQsZXhwb3J0LGZyaWVuZCxnZW5lcmljLGxhdGVfY2hlY2ssbXV0YWJsZSxuYW1lc3BhY2UsbnVsbHB0cixwcm9wZXJ0eSxyZWludGVycHJldF9jYXN0LHN0YXRpY19hc3NlcnQsc3RhdGljX2Nhc3QsdGVtcGxhdGUsdHlwZWlkLHR5cGVuYW1lLHVzaW5nLHZpcnR1YWwsd2hlcmVcIl0sXG5PPVtGLFwiYWJzdHJhY3QsYXNzZXJ0LGJvb2xlYW4sYnl0ZSxleHRlbmRzLGZpbmFsbHksZmluYWwsaW1wbGVtZW50cyxpbXBvcnQsaW5zdGFuY2VvZixpbnRlcmZhY2UsbnVsbCxuYXRpdmUscGFja2FnZSxzdHJpY3RmcCxzdXBlcixzeW5jaHJvbml6ZWQsdGhyb3dzLHRyYW5zaWVudFwiXSxQPVtGLFwiYWJzdHJhY3QsYXMsYmFzZSxib29sLGJ5LGJ5dGUsY2hlY2tlZCxkZWNpbWFsLGRlbGVnYXRlLGRlc2NlbmRpbmcsZHluYW1pYyxldmVudCxmaW5hbGx5LGZpeGVkLGZvcmVhY2gsZnJvbSxncm91cCxpbXBsaWNpdCxpbixpbnRlcmZhY2UsaW50ZXJuYWwsaW50byxpcyxsZXQsbG9jayxudWxsLG9iamVjdCxvdXQsb3ZlcnJpZGUsb3JkZXJieSxwYXJhbXMscGFydGlhbCxyZWFkb25seSxyZWYsc2J5dGUsc2VhbGVkLHN0YWNrYWxsb2Msc3RyaW5nLHNlbGVjdCx1aW50LHVsb25nLHVuY2hlY2tlZCx1bnNhZmUsdXNob3J0LHZhcix2aXJ0dWFsLHdoZXJlXCJdLEY9W0YsXCJkZWJ1Z2dlcixldmFsLGV4cG9ydCxmdW5jdGlvbixnZXQsaW5zdGFuY2VvZixudWxsLHNldCx1bmRlZmluZWQsdmFyLHdpdGgsSW5maW5pdHksTmFOXCJdLFxuUT1bQyxcImFuZCxhcyxhc3NlcnQsY2xhc3MsZGVmLGRlbCxlbGlmLGV4Y2VwdCxleGVjLGZpbmFsbHksZnJvbSxnbG9iYWwsaW1wb3J0LGluLGlzLGxhbWJkYSxub25sb2NhbCxub3Qsb3IscGFzcyxwcmludCxyYWlzZSx0cnksd2l0aCx5aWVsZCxGYWxzZSxUcnVlLE5vbmVcIl0sUj1bQyxcImFsaWFzLGFuZCxiZWdpbixjYXNlLGNsYXNzLGRlZixkZWZpbmVkLGVsc2lmLGVuZCxlbnN1cmUsZmFsc2UsaW4sbW9kdWxlLG5leHQsbmlsLG5vdCxvcixyZWRvLHJlc2N1ZSxyZXRyeSxzZWxmLHN1cGVyLHRoZW4sdHJ1ZSx1bmRlZix1bmxlc3MsdW50aWwsd2hlbix5aWVsZCxCRUdJTixFTkRcIl0sQz1bQyxcImNhc2UsZG9uZSxlbGlmLGVzYWMsZXZhbCxmaSxmdW5jdGlvbixpbixsb2NhbCxzZXQsdGhlbix1bnRpbFwiXSxTPS9eKERJUnxGSUxFfHZlY3RvcnwoZGV8cHJpb3JpdHlfKT9xdWV1ZXxsaXN0fHN0YWNrfChjb25zdF8pP2l0ZXJhdG9yfChtdWx0aSk/KHNldHxtYXApfGJpdHNldHx1PyhpbnR8ZmxvYXQpXFxkKilcXGIvLFxuVz0vXFxTLyxYPXkoe2tleXdvcmRzOltILFAsTyxGLFwiY2FsbGVyLGRlbGV0ZSxkaWUsZG8sZHVtcCxlbHNpZixldmFsLGV4aXQsZm9yZWFjaCxmb3IsZ290byxpZixpbXBvcnQsbGFzdCxsb2NhbCxteSxuZXh0LG5vLG91cixwcmludCxwYWNrYWdlLHJlZG8scmVxdWlyZSxzdWIsdW5kZWYsdW5sZXNzLHVudGlsLHVzZSx3YW50YXJyYXksd2hpbGUsQkVHSU4sRU5EXCIsUSxSLENdLGhhc2hDb21tZW50czohMCxjU3R5bGVDb21tZW50czohMCxtdWx0aUxpbmVTdHJpbmdzOiEwLHJlZ2V4TGl0ZXJhbHM6ITB9KSxJPXt9O3QoWCxbXCJkZWZhdWx0LWNvZGVcIl0pO3QoRyhbXSxbW1wicGxuXCIsL15bXjw/XSsvXSxbXCJkZWNcIiwvXjwhXFx3W14+XSooPzo+fCQpL10sW1wiY29tXCIsL148XFwhLS1bXFxzXFxTXSo/KD86LVxcLT58JCkvXSxbXCJsYW5nLVwiLC9ePFxcPyhbXFxzXFxTXSs/KSg/OlxcPz58JCkvXSxbXCJsYW5nLVwiLC9ePCUoW1xcc1xcU10rPykoPzolPnwkKS9dLFtcInB1blwiLC9eKD86PFslP118WyU/XT4pL10sW1wibGFuZy1cIixcbi9ePHhtcFxcYltePl0qPihbXFxzXFxTXSs/KTxcXC94bXBcXGJbXj5dKj4vaV0sW1wibGFuZy1qc1wiLC9ePHNjcmlwdFxcYltePl0qPihbXFxzXFxTXSo/KSg8XFwvc2NyaXB0XFxiW14+XSo+KS9pXSxbXCJsYW5nLWNzc1wiLC9ePHN0eWxlXFxiW14+XSo+KFtcXHNcXFNdKj8pKDxcXC9zdHlsZVxcYltePl0qPikvaV0sW1wibGFuZy1pbi50YWdcIiwvXig8XFwvP1thLXpdW148Pl0qPikvaV1dKSxcImRlZmF1bHQtbWFya3VwIGh0bSBodG1sIG14bWwgeGh0bWwgeG1sIHhzbFwiLnNwbGl0KFwiIFwiKSk7dChHKFtbXCJwbG5cIiwvXltcXHNdKy8sbnVsbCxcIiBcXHRcXHJcXG5cIl0sW1wiYXR2XCIsL14oPzpcXFwiW15cXFwiXSpcXFwiP3xcXCdbXlxcJ10qXFwnPykvLG51bGwsXCJcXFwiJ1wiXV0sW1tcInRhZ1wiLC9eXjxcXC8/W2Etel0oPzpbXFx3LjotXSpcXHcpP3xcXC8/PiQvaV0sW1wiYXRuXCIsL14oPyFzdHlsZVtcXHM9XXxvbilbYS16XSg/OltcXHc6LV0qXFx3KT8vaV0sW1wibGFuZy11cS52YWxcIiwvXj1cXHMqKFtePlxcJ1xcXCJcXHNdKig/OltePlxcJ1xcXCJcXHNcXC9dfFxcLyg/PVxccykpKS9dLFxuW1wicHVuXCIsL15bPTw+XFwvXSsvXSxbXCJsYW5nLWpzXCIsL15vblxcdytcXHMqPVxccypcXFwiKFteXFxcIl0rKVxcXCIvaV0sW1wibGFuZy1qc1wiLC9eb25cXHcrXFxzKj1cXHMqXFwnKFteXFwnXSspXFwnL2ldLFtcImxhbmctanNcIiwvXm9uXFx3K1xccyo9XFxzKihbXlxcXCJcXCc+XFxzXSspL2ldLFtcImxhbmctY3NzXCIsL15zdHlsZVxccyo9XFxzKlxcXCIoW15cXFwiXSspXFxcIi9pXSxbXCJsYW5nLWNzc1wiLC9ec3R5bGVcXHMqPVxccypcXCcoW15cXCddKylcXCcvaV0sW1wibGFuZy1jc3NcIiwvXnN0eWxlXFxzKj1cXHMqKFteXFxcIlxcJz5cXHNdKykvaV1dKSxbXCJpbi50YWdcIl0pO3QoRyhbXSxbW1wiYXR2XCIsL15bXFxzXFxTXSsvXV0pLFtcInVxLnZhbFwiXSk7dCh5KHtrZXl3b3JkczpILGhhc2hDb21tZW50czohMCxjU3R5bGVDb21tZW50czohMCx0eXBlczpTfSksXCJjIGNjIGNwcCBjeHggY3ljIG1cIi5zcGxpdChcIiBcIikpO3QoeSh7a2V5d29yZHM6XCJudWxsLHRydWUsZmFsc2VcIn0pLFtcImpzb25cIl0pO3QoeSh7a2V5d29yZHM6UCxoYXNoQ29tbWVudHM6ITAsY1N0eWxlQ29tbWVudHM6ITAsXG52ZXJiYXRpbVN0cmluZ3M6ITAsdHlwZXM6U30pLFtcImNzXCJdKTt0KHkoe2tleXdvcmRzOk8sY1N0eWxlQ29tbWVudHM6ITB9KSxbXCJqYXZhXCJdKTt0KHkoe2tleXdvcmRzOkMsaGFzaENvbW1lbnRzOiEwLG11bHRpTGluZVN0cmluZ3M6ITB9KSxbXCJiYXNoXCIsXCJic2hcIixcImNzaFwiLFwic2hcIl0pO3QoeSh7a2V5d29yZHM6USxoYXNoQ29tbWVudHM6ITAsbXVsdGlMaW5lU3RyaW5nczohMCx0cmlwbGVRdW90ZWRTdHJpbmdzOiEwfSksW1wiY3ZcIixcInB5XCIsXCJweXRob25cIl0pO3QoeSh7a2V5d29yZHM6XCJjYWxsZXIsZGVsZXRlLGRpZSxkbyxkdW1wLGVsc2lmLGV2YWwsZXhpdCxmb3JlYWNoLGZvcixnb3RvLGlmLGltcG9ydCxsYXN0LGxvY2FsLG15LG5leHQsbm8sb3VyLHByaW50LHBhY2thZ2UscmVkbyxyZXF1aXJlLHN1Yix1bmRlZix1bmxlc3MsdW50aWwsdXNlLHdhbnRhcnJheSx3aGlsZSxCRUdJTixFTkRcIixoYXNoQ29tbWVudHM6ITAsbXVsdGlMaW5lU3RyaW5nczohMCxyZWdleExpdGVyYWxzOjJ9KSxcbltcInBlcmxcIixcInBsXCIsXCJwbVwiXSk7dCh5KHtrZXl3b3JkczpSLGhhc2hDb21tZW50czohMCxtdWx0aUxpbmVTdHJpbmdzOiEwLHJlZ2V4TGl0ZXJhbHM6ITB9KSxbXCJyYlwiLFwicnVieVwiXSk7dCh5KHtrZXl3b3JkczpGLGNTdHlsZUNvbW1lbnRzOiEwLHJlZ2V4TGl0ZXJhbHM6ITB9KSxbXCJqYXZhc2NyaXB0XCIsXCJqc1wiXSk7dCh5KHtrZXl3b3JkczpcImFsbCxhbmQsYnksY2F0Y2gsY2xhc3MsZWxzZSxleHRlbmRzLGZhbHNlLGZpbmFsbHksZm9yLGlmLGluLGlzLGlzbnQsbG9vcCxuZXcsbm8sbm90LG51bGwsb2Ysb2ZmLG9uLG9yLHJldHVybixzdXBlcix0aGVuLHRocm93LHRydWUsdHJ5LHVubGVzcyx1bnRpbCx3aGVuLHdoaWxlLHllc1wiLGhhc2hDb21tZW50czozLGNTdHlsZUNvbW1lbnRzOiEwLG11bHRpbGluZVN0cmluZ3M6ITAsdHJpcGxlUXVvdGVkU3RyaW5nczohMCxyZWdleExpdGVyYWxzOiEwfSksW1wiY29mZmVlXCJdKTt0KEcoW10sW1tcInN0clwiLC9eW1xcc1xcU10rL11dKSxbXCJyZWdleFwiXSk7XG52YXIgWT1FLlBSPXtjcmVhdGVTaW1wbGVMZXhlcjpHLHJlZ2lzdGVyTGFuZ0hhbmRsZXI6dCxzb3VyY2VEZWNvcmF0b3I6eSxQUl9BVFRSSUJfTkFNRTpcImF0blwiLFBSX0FUVFJJQl9WQUxVRTpcImF0dlwiLFBSX0NPTU1FTlQ6XCJjb21cIixQUl9ERUNMQVJBVElPTjpcImRlY1wiLFBSX0tFWVdPUkQ6XCJrd2RcIixQUl9MSVRFUkFMOlwibGl0XCIsUFJfTk9DT0RFOlwibm9jb2RlXCIsUFJfUExBSU46XCJwbG5cIixQUl9QVU5DVFVBVElPTjpcInB1blwiLFBSX1NPVVJDRTpcInNyY1wiLFBSX1NUUklORzpcInN0clwiLFBSX1RBRzpcInRhZ1wiLFBSX1RZUEU6XCJ0eXBcIixwcmV0dHlQcmludE9uZTpFLnByZXR0eVByaW50T25lPWZ1bmN0aW9uKGEsZCxmKXtmPWZ8fCExO2Q9ZHx8bnVsbDt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2IuaW5uZXJIVE1MPVwiPHByZT5cIithK1wiPC9wcmU+XCI7Yj1iLmZpcnN0Q2hpbGQ7ZiYmTChiLGYsITApO00oe2o6ZCxtOmYsaDpiLGw6MSxhOm51bGwsaTpudWxsLGM6bnVsbCxcbmc6bnVsbH0pO3JldHVybiBiLmlubmVySFRNTH0scHJldHR5UHJpbnQ6RS5wcmV0dHlQcmludD1mdW5jdGlvbihhLGQpe2Z1bmN0aW9uIGYoKXtmb3IodmFyIGI9RS5QUl9TSE9VTERfVVNFX0NPTlRJTlVBVElPTj9jLm5vdygpKzI1MDpJbmZpbml0eTtwPHQubGVuZ3RoJiZjLm5vdygpPGI7cCsrKXtmb3IodmFyIGQ9dFtwXSxsPWcsbT1kO209bS5wcmV2aW91c1NpYmxpbmc7KXt2YXIgbj1tLm5vZGVUeXBlLHU9KDc9PT1ufHw4PT09bikmJm0ubm9kZVZhbHVlO2lmKHU/IS9eXFw/P3ByZXR0aWZ5XFxiLy50ZXN0KHUpOjMhPT1ufHwvXFxTLy50ZXN0KG0ubm9kZVZhbHVlKSlicmVhaztpZih1KXtsPXt9O3UucmVwbGFjZSgvXFxiKFxcdyspPShbXFx3Oi4lKy1dKykvZyxmdW5jdGlvbihhLGIsYyl7bFtiXT1jfSk7YnJlYWt9fW09ZC5jbGFzc05hbWU7aWYoKGwhPT1nfHxyLnRlc3QobSkpJiYhZS50ZXN0KG0pKXtuPSExO2Zvcih1PWQucGFyZW50Tm9kZTt1O3U9dS5wYXJlbnROb2RlKWlmKHEudGVzdCh1LnRhZ05hbWUpJiZcbnUuY2xhc3NOYW1lJiZyLnRlc3QodS5jbGFzc05hbWUpKXtuPSEwO2JyZWFrfWlmKCFuKXtkLmNsYXNzTmFtZSs9XCIgcHJldHR5cHJpbnRlZFwiO249bC5sYW5nO2lmKCFuKXt2YXIgbj1tLm1hdGNoKHcpLEM7IW4mJihDPVYoZCkpJiZ6LnRlc3QoQy50YWdOYW1lKSYmKG49Qy5jbGFzc05hbWUubWF0Y2godykpO24mJihuPW5bMV0pfWlmKHkudGVzdChkLnRhZ05hbWUpKXU9MTtlbHNlIHZhciB1PWQuY3VycmVudFN0eWxlLHg9di5kZWZhdWx0Vmlldyx1PSh1PXU/dS53aGl0ZVNwYWNlOngmJnguZ2V0Q29tcHV0ZWRTdHlsZT94LmdldENvbXB1dGVkU3R5bGUoZCxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKFwid2hpdGUtc3BhY2VcIik6MCkmJlwicHJlXCI9PT11LnN1YnN0cmluZygwLDMpO3g9bC5saW5lbnVtczsoeD1cInRydWVcIj09PXh8fCt4KXx8KHg9KHg9bS5tYXRjaCgvXFxibGluZW51bXNcXGIoPzo6KFxcZCspKT8vKSk/eFsxXSYmeFsxXS5sZW5ndGg/K3hbMV06ITA6ITEpO3gmJkwoZCx4LHUpO1xuTSh7ajpuLGg6ZCxtOngsbDp1LGE6bnVsbCxpOm51bGwsYzpudWxsLGc6bnVsbH0pfX19cDx0Lmxlbmd0aD9FLnNldFRpbWVvdXQoZiwyNTApOlwiZnVuY3Rpb25cIj09PXR5cGVvZiBhJiZhKCl9Zm9yKHZhciBiPWR8fGRvY3VtZW50LmJvZHksdj1iLm93bmVyRG9jdW1lbnR8fGRvY3VtZW50LGI9W2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwcmVcIiksYi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNvZGVcIiksYi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInhtcFwiKV0sdD1bXSxuPTA7bjxiLmxlbmd0aDsrK24pZm9yKHZhciBsPTAsbT1iW25dLmxlbmd0aDtsPG07KytsKXQucHVzaChiW25dW2xdKTt2YXIgYj1udWxsLGM9RGF0ZTtjLm5vd3x8KGM9e25vdzpmdW5jdGlvbigpe3JldHVybituZXcgRGF0ZX19KTt2YXIgcD0wLHc9L1xcYmxhbmcoPzp1YWdlKT8tKFtcXHcuXSspKD8hXFxTKS8scj0vXFxicHJldHR5cHJpbnRcXGIvLGU9L1xcYnByZXR0eXByaW50ZWRcXGIvLHk9L3ByZXx4bXAvaSx6PS9eY29kZSQvaSxcbnE9L14oPzpwcmV8Y29kZXx4bXApJC9pLGc9e307ZigpfX0sSD1FLmRlZmluZTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgSCYmSC5hbWQmJkgoXCJnb29nbGUtY29kZS1wcmV0dGlmeVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIFl9KX0pKCk7fSgpXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qXHQxOS4gTEFaWSBMT0FEIEdPT0dMRSBNQVBTXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qXG5cdGxhenlMb2FkR29vZ2xlTWFwcyB2MS4wLjEsIHVwZGF0ZWQgMjAxNS0xMS0wN1xuXHRCeSBPc3ZhbGRhcyBWYWx1dGlzLCB3d3cub3N2YWxkYXMuaW5mb1xuXHRBdmFpbGFibGUgZm9yIHVzZSB1bmRlciB0aGUgTUlUIExpY2Vuc2VcbiovXG5cbjt3aW5kb3cuZ29vZ2xlTWFwc1NjcmlwdExvYWRlZD1mdW5jdGlvbigpeyQod2luZG93KS50cmlnZ2VyKFwiZ29vZ2xlTWFwc1NjcmlwdExvYWRlZFwiKX0sZnVuY3Rpb24oaSxhKXtcInVzZSBzdHJpY3RcIjt2YXIgZT1pKGEpLG49aShcImJvZHlcIiksbz1lLmhlaWdodCgpLHQ9MCxyPWZ1bmN0aW9uKGksYSl7dmFyIGU9bnVsbDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj10aGlzLG89YXJndW1lbnRzO2NsZWFyVGltZW91dChlKSxlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmFwcGx5KG4sbyl9LGkpfX0scz1mdW5jdGlvbihpLGEpe3ZhciBlLG47cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG89dGhpcyx0PWFyZ3VtZW50cyxyPStuZXcgRGF0ZTtlJiZlK2k+cj8oY2xlYXJUaW1lb3V0KG4pLG49c2V0VGltZW91dChmdW5jdGlvbigpe2U9cixhLmFwcGx5KG8sdCl9LGkpKTooZT1yLGEuYXBwbHkobyx0KSl9fSxjPSExLGw9ITEscD1pKFtdKSxnPWZ1bmN0aW9uKCl7dD1lLnNjcm9sbFRvcCgpLHAuZWFjaChmdW5jdGlvbigpe3ZhciBhPWkodGhpcyksZT1hLmRhdGEoXCJvcHRpb25zXCIpO2lmKGEub2Zmc2V0KCkudG9wLXQ+MSpvKXJldHVybiEwO2lmKCFjJiYhbCl7dmFyIHI9e2NhbGxiYWNrOlwiZ29vZ2xlTWFwc1NjcmlwdExvYWRlZFwiLHNpZ25lZF9pbjplLnNpZ25lZF9pbn07ZS5hcGlfa2V5JiYoci5hcGlfa2V5PWUuYXBpX2tleSksZS5saWJyYXJpZXMmJihyLmxpYnJhcmllcz1lLmxpYnJhcmllcyksZS5sYW5ndWFnZSYmKHIubGFuZ3VhZ2U9ZS5sYW5ndWFnZSksZS5yZWdpb24mJihyLnJlZ2lvbj1lLnJlZ2lvbiksbi5hcHBlbmQoJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP3Y9My5leHAmJytpLnBhcmFtKHIpKydcIj48L3NjcmlwdD4nKSxsPSEwfWlmKCFjKXJldHVybiEwO3ZhciBzPW5ldyBnb29nbGUubWFwcy5NYXAodGhpcyx7em9vbToxNX0pO2UuY2FsbGJhY2shPT0hMSYmZS5jYWxsYmFjayh0aGlzLHMpLHA9cC5ub3QoYSl9KX07ZS5vbihcImdvb2dsZU1hcHNTY3JpcHRMb2FkZWRcIixmdW5jdGlvbigpe2M9ITAsZygpfSkub24oXCJzY3JvbGxcIixzKDUwMCxnKSkub24oXCJyZXNpemVcIixyKDFlMyxmdW5jdGlvbigpe289ZS5oZWlnaHQoKSxnKCl9KSksaS5mbi5sYXp5TG9hZEdvb2dsZU1hcHM9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9aS5leHRlbmQoe2FwaV9rZXk6ITEsbGlicmFyaWVzOiExLHNpZ25lZF9pbjohMSxsYW5ndWFnZTohMSxyZWdpb246ITEsY2FsbGJhY2s6ITF9LGEpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPWkodGhpcyk7ZS5kYXRhKFwib3B0aW9uc1wiLGEpLHA9cC5hZGQoZSl9KSxnKCksdGhpcy5kZWJvdW5jZT1yLHRoaXMudGhyb3R0bGU9cyx0aGlzfX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG5cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRTQ1JPTEwgTkFWSUdBVElPTiBISUdITElHSFRcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICB2YXIgaGVhZGVyV3JhcHBlciA9IHBhcnNlSW50KCQoJy5uYXZiYXInKS5oZWlnaHQoKSwgMTApO1xuICAgIHZhciBoZWFkZXJfaGVpZ2h0ID0gJCgnLm5hdmJhcicpLmhlaWdodCgpO1xuICAgIHZhciBzaHJpbmtlZF9oZWFkZXJfaGVpZ2h0ID0gNjU7XG4gICAgdmFyIGZpcnN0U3R5bGUgPSB7XG4gICAgICAgICdwYWRkaW5nLXRvcCc6ICcnICsgc2hyaW5rZWRfaGVhZGVyX2hlaWdodCArICdweCcsXG4gICAgICAgICdtYXJnaW4tdG9wJzogJy0nICsgc2hyaW5rZWRfaGVhZGVyX2hlaWdodCArICdweCdcbiAgICB9O1xuICAgICQoJy5vbmVwYWdlIHNlY3Rpb24nKS5jc3MoZmlyc3RTdHlsZSk7XG4gICAgdmFyIHNlY29uZFN0eWxlID0ge1xuICAgICAgICAncGFkZGluZy10b3AnOiAnJyArIGhlYWRlcl9oZWlnaHQgKyAncHgnLFxuICAgICAgICAnbWFyZ2luLXRvcCc6ICctJyArIGhlYWRlcl9oZWlnaHQgKyAncHgnXG4gICAgfTtcbiAgICAkKCcub25lcGFnZSBzZWN0aW9uOmZpcnN0LW9mLXR5cGUnKS5jc3Moc2Vjb25kU3R5bGUpO1xuICAgIHZhciBvZmZzZXRUb2xlcmFuY2UgPSAtKGhlYWRlcl9oZWlnaHQpO1xuICAgIC8vRGV0ZWN0aW5nIHVzZXIncyBzY3JvbGxcbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICAvL0NoZWNrIHNjcm9sbCBwb3NpdGlvblxuICAgICAgICB2YXIgc2Nyb2xsUG9zaXRpb24gPSBwYXJzZUludCgkKHRoaXMpLnNjcm9sbFRvcCgpLCAxMCk7XG4gICAgICAgIC8vTW92ZSB0cm91Z2ggZWFjaCBtZW51IGFuZCBjaGVjayBpdHMgcG9zaXRpb24gd2l0aCBzY3JvbGwgcG9zaXRpb24gdGhlbiBhZGQgY3VycmVudCBjbGFzc1xuICAgICAgICAkKCcub25lcGFnZSAubmF2YmFyIHVsLm5hdmJhci1uYXYgYScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhpc0hyZWYgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICAgIHZhciB0aGlzVHJ1ZVBvc2l0aW9uID0gcGFyc2VJbnQoJCh0aGlzSHJlZikub2Zmc2V0KCkudG9wLCAxMCk7XG4gICAgICAgICAgICB2YXIgdGhpc1Bvc2l0aW9uID0gdGhpc1RydWVQb3NpdGlvbiAtIGhlYWRlcldyYXBwZXIgLSBvZmZzZXRUb2xlcmFuY2U7XG4gICAgICAgICAgICBpZiAoc2Nyb2xsUG9zaXRpb24gPj0gdGhpc1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgJCgnLmN1cnJlbnQnKS5yZW1vdmVDbGFzcygnY3VycmVudCcpO1xuICAgICAgICAgICAgICAgICQoJy5uYXZiYXIgdWwubmF2YmFyLW5hdiBhW2hyZWY9JyArIHRoaXNIcmVmICsgJ10nKS5wYXJlbnQoJ2xpJykuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vSWYgd2UncmUgYXQgdGhlIGJvdHRvbSBvZiB0aGUgcGFnZSwgbW92ZSBwb2ludGVyIHRvIHRoZSBsYXN0IHNlY3Rpb25cbiAgICAgICAgdmFyIGJvdHRvbVBhZ2UgPSBwYXJzZUludCgkKGRvY3VtZW50KS5oZWlnaHQoKSwgMTApIC0gcGFyc2VJbnQoJCh3aW5kb3cpLmhlaWdodCgpLCAxMCk7XG4gICAgICAgIGlmIChzY3JvbGxQb3NpdGlvbiA9PSBib3R0b21QYWdlIHx8IHNjcm9sbFBvc2l0aW9uID49IGJvdHRvbVBhZ2UpIHtcbiAgICAgICAgICAgICQoJy5jdXJyZW50JykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQnKTtcbiAgICAgICAgICAgICQoJy5vbmVwYWdlIC5uYXZiYXIgdWwubmF2YmFyLW5hdiBhOmxhc3QnKS5wYXJlbnQoJ2xpJykuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRTVElDS1kgSEVBREVSXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIHZhciBtZW51ID0gJCgnLm5hdmJhcicpLFxuICAgICAgICBwb3MgPSBtZW51Lm9mZnNldCgpO1xuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gcG9zLnRvcCArIG1lbnUuaGVpZ2h0KCkgJiYgbWVudS5oYXNDbGFzcygnZGVmYXVsdCcpICYmICQodGhpcykuc2Nyb2xsVG9wKCkgPiAzMDApIHtcbiAgICAgICAgICAgIG1lbnUuZmFkZU91dCgnZmFzdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2RlZmF1bHQnKS5hZGRDbGFzcygnZml4ZWQnKS5mYWRlSW4oJ2Zhc3QnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuc2Nyb2xsVG9wKCkgPD0gcG9zLnRvcCArIDMwMCAmJiBtZW51Lmhhc0NsYXNzKCdmaXhlZCcpKSB7XG4gICAgICAgICAgICBtZW51LmZhZGVPdXQoMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZml4ZWQnKS5hZGRDbGFzcygnZGVmYXVsdCcpLmZhZGVJbigwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgJCgnLm9mZnNldCcpLmNzcygncGFkZGluZy10b3AnLCAkKCcubmF2YmFyJykuaGVpZ2h0KCkgKyAncHgnKTtcbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuXHQgICAgJCgnLm9mZnNldCcpLmNzcygncGFkZGluZy10b3AnLCAkKCcubmF2YmFyJykuaGVpZ2h0KCkgKyAncHgnKTtcblx0fSk7XG4gICAgJCgnLm9uZXBhZ2UgLm5hdmJhciAubmF2IGxpIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLm5hdmJhciAubmF2YmFyLWNvbGxhcHNlLmluJykuY29sbGFwc2UoJ2hpZGUnKTtcbiAgICAgICAgJCgnLm5hdi1iYXJzJykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgIH0pO1xuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRIQU1CVVJHRVIgTUVOVSBJQ09OXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIHZhciB0b2dnbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtYmFyc1wiKTtcbiAgICBmb3IgKHZhciBpID0gdG9nZ2xlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB2YXIgdG9nZ2xlID0gdG9nZ2xlc1tpXTtcbiAgICAgICAgdG9nZ2xlSGFuZGxlcih0b2dnbGUpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gdG9nZ2xlSGFuZGxlcih0b2dnbGUpIHtcbiAgICAgICAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1hY3RpdmVcIikgPT09IHRydWUpID8gdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtYWN0aXZlXCIpOiB0aGlzLmNsYXNzTGlzdC5hZGQoXCJpcy1hY3RpdmVcIik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgLypcdExPQ0FMU0NST0xMXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgICQoJy5uYXZiYXIsIC5zY3JvbGwnKS5sb2NhbFNjcm9sbCh7XG4gICAgICAgIGhhc2g6IHRydWVcbiAgICB9KTtcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAvKlx0SVNPVE9QRSBQT1JURk9MSU8gR1JJRFxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRMSUdIVEdBTExFUllcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgJCgnLmxpZ2h0LWdhbGxlcnknKS5saWdodEdhbGxlcnkoe1xuICAgICAgICB0aHVtYm5haWw6IHRydWUsXG4gICAgICAgIHNlbGVjdG9yOiAnLmxnaXRlbScsXG4gICAgICAgIGFuaW1hdGVUaHVtYjogdHJ1ZSxcbiAgICAgICAgc2hvd1RodW1iQnlEZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgZG93bmxvYWQ6IGZhbHNlLFxuICAgICAgICBhdXRvcGxheUNvbnRyb2xzOiBmYWxzZSxcbiAgICAgICAgdGh1bWJXaWR0aDogMTAwLFxuICAgICAgICB0aHVtYkNvbnRIZWlnaHQ6IDgwLFxuICAgICAgICB2aWRlb01heFdpZHRoOiAnMTAwMHB4J1xuICAgIH0pO1xuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRPV0wgQ0FST1VTRUxcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgJCgnLmJsb2ctY2Fyb3VzZWwnKS5vd2xDYXJvdXNlbCh7XG4gICAgICAgIGxvb3A6IGZhbHNlLFxuICAgICAgICBtYXJnaW46IDE1LFxuICAgICAgICBuYXY6IHRydWUsXG4gICAgICAgIG5hdkNvbnRhaW5lcjogJy5uYXYtb3V0c2lkZS1ibG9nJyxcbiAgICAgICAgbmF2Q2xhc3M6IFsnYnRuIGJ0bi1zcXVhcmUgbmF2LW91dHNpZGUtcHJldicsICdidG4gYnRuLXNxdWFyZSBuYXYtb3V0c2lkZS1uZXh0J10sXG4gICAgICAgIG5hdlRleHQ6IFsnPGkgY2xhc3M9XCJmYSBmYS1jaGV2cm9uLWxlZnRcIj48L2k+JywgJzxpIGNsYXNzPVwiZmEgZmEtY2hldnJvbi1yaWdodFwiPjwvaT4nXSxcbiAgICAgICAgZG90czogZmFsc2UsXG4gICAgICAgIHJlc3BvbnNpdmU6IHtcbiAgICAgICAgICAgIDA6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDQ4MDoge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiAyXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxMDI0OiB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IDNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJy5wb3J0Zm9saW8tY2Fyb3VzZWwnKS5vd2xDYXJvdXNlbCh7XG4gICAgICAgIGxvb3A6IGZhbHNlLFxuICAgICAgICBtYXJnaW46IDE1LFxuICAgICAgICBuYXY6IHRydWUsXG4gICAgICAgIG5hdkNvbnRhaW5lcjogJy5uYXYtb3V0c2lkZS1wb3J0Zm9saW8nLFxuICAgICAgICBuYXZDbGFzczogWydidG4gYnRuLXNxdWFyZSBuYXYtb3V0c2lkZS1wcmV2JywgJ2J0biBidG4tc3F1YXJlIG5hdi1vdXRzaWRlLW5leHQnXSxcbiAgICAgICAgbmF2VGV4dDogWyc8aSBjbGFzcz1cImZhIGZhLWNoZXZyb24tbGVmdFwiPjwvaT4nLCAnPGkgY2xhc3M9XCJmYSBmYS1jaGV2cm9uLXJpZ2h0XCI+PC9pPiddLFxuICAgICAgICBkb3RzOiBmYWxzZSxcbiAgICAgICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAgICAgMDoge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiAxXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgNDgwOiB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IDJcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDEwMjQ6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogM1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDE0NDA6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogNFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgJCgnLnNob3AnKS5vd2xDYXJvdXNlbCh7XG4gICAgICAgIGxvb3A6IGZhbHNlLFxuICAgICAgICBtYXJnaW46IDMwLFxuICAgICAgICBuYXY6IHRydWUsXG4gICAgICAgIG5hdkNvbnRhaW5lcjogJy5uYXYtb3V0c2lkZS1zaG9wJyxcbiAgICAgICAgbmF2Q2xhc3M6IFsnYnRuIGJ0bi1zcXVhcmUgbmF2LW91dHNpZGUtcHJldicsICdidG4gYnRuLXNxdWFyZSBuYXYtb3V0c2lkZS1uZXh0J10sXG4gICAgICAgIG5hdlRleHQ6IFsnPGkgY2xhc3M9XCJmYSBmYS1jaGV2cm9uLWxlZnRcIj48L2k+JywgJzxpIGNsYXNzPVwiZmEgZmEtY2hldnJvbi1yaWdodFwiPjwvaT4nXSxcbiAgICAgICAgZG90czogZmFsc2UsXG4gICAgICAgIHJlc3BvbnNpdmU6IHtcbiAgICAgICAgICAgIDA6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDQ4MDoge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiAyXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxMDI0OiB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IDNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxNDQwOiB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IDRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJy50ZXN0aW1vbmlhbHMuY29sMycpLm93bENhcm91c2VsKHtcbiAgICAgICAgYXV0b3BsYXk6IHRydWUsXG4gICAgICAgIGF1dG9wbGF5VGltZW91dDogMTAwMDAsXG4gICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgIG1hcmdpbjogMzAsXG4gICAgICAgIG5hdjogZmFsc2UsXG4gICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICByZXNwb25zaXZlOiB7XG4gICAgICAgICAgICAwOiB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogMlxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMTAyNDoge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiAzXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkKCcudGVzdGltb25pYWxzLmNvbDEnKS5vd2xDYXJvdXNlbCh7XG4gICAgICAgIGF1dG9wbGF5OiB0cnVlLFxuICAgICAgICBhdXRvcGxheVRpbWVvdXQ6IDUwMDAsXG4gICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgbmF2OiBmYWxzZSxcbiAgICAgICAgZG90czogZmFsc2UsXG4gICAgICAgIGl0ZW1zOiAxXG4gICAgfSk7XG4gICAgJCgnLnRlYW0nKS5vd2xDYXJvdXNlbCh7XG4gICAgICAgIGxvb3A6IGZhbHNlLFxuICAgICAgICBtYXJnaW46IDE1LFxuICAgICAgICBuYXY6IHRydWUsXG4gICAgICAgIG5hdkNvbnRhaW5lcjogJy5uYXYtb3V0c2lkZS10ZWFtJyxcbiAgICAgICAgbmF2Q2xhc3M6IFsnYnRuIGJ0bi1zcXVhcmUgbmF2LW91dHNpZGUtcHJldicsICdidG4gYnRuLXNxdWFyZSBuYXYtb3V0c2lkZS1uZXh0J10sXG4gICAgICAgIG5hdlRleHQ6IFsnPGkgY2xhc3M9XCJpY29uLWxlZnQtb3BlblwiPjwvaT4nLCAnPGkgY2xhc3M9XCJpY29uLXJpZ2h0LW9wZW5cIj48L2k+J10sXG4gICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICByZXNwb25zaXZlOiB7XG4gICAgICAgICAgICAwOiB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA0ODA6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogMlxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMTAyNDoge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiAzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMTQ0MDoge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiA0XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkKCcubnVtYmVyLWNhcm91c2VsJykub3dsQ2Fyb3VzZWwoe1xuICAgICAgICBsb29wOiBmYWxzZSxcbiAgICAgICAgbWFyZ2luOiAxNSxcbiAgICAgICAgbmF2OiBmYWxzZSxcbiAgICAgICAgZG90czogZmFsc2UsXG4gICAgICAgIHJlc3BvbnNpdmU6IHtcbiAgICAgICAgICAgIDA6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDQ4MDoge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiAyXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxMDI0OiB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IDNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxNDQwOiB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IDRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJy5jbGllbnRzJykub3dsQ2Fyb3VzZWwoe1xuICAgICAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICAgICAgYXV0b3BsYXlUaW1lb3V0OiAzMDAwLFxuICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgIG5hdjogZmFsc2UsXG4gICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICByZXNwb25zaXZlOiB7XG4gICAgICAgICAgICAwOiB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IDJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA0ODA6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogM1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDc2ODoge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiA0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMTIwMDoge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiA2XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkKCcuYmFzaWMtc2xpZGVyJykub3dsQ2Fyb3VzZWwoe1xuICAgICAgICBpdGVtczogMSxcbiAgICAgICAgbmF2OiB0cnVlLFxuICAgICAgICBuYXZUZXh0OiBbJycsICcnXSxcbiAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgYXV0b0hlaWdodDogZmFsc2UsXG4gICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgIG1hcmdpbjogMFxuICAgIH0pO1xuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRSRVZPTFVUSU9OXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgICQoXCIjc2xpZGVyMVwiKS5yZXZvbHV0aW9uKHtcbiAgICAgICAgc2xpZGVyVHlwZTogXCJzdGFuZGFyZFwiLFxuICAgICAgICBzbGlkZXJMYXlvdXQ6IFwiYXV0b1wiLFxuICAgICAgICBzcGlubmVyOiBcInNwaW5uZXJcIixcbiAgICAgICAgZGVsYXk6IDkwMDAsXG4gICAgICAgIHNoYWRvdzogMCxcbiAgICAgICAgZ3JpZHdpZHRoOiAxMTcwLFxuICAgICAgICBncmlkaGVpZ2h0OiA3MDAsXG4gICAgICAgIHJlc3BvbnNpdmVMZXZlbHM6IFs0MDk2LCAxMDI0LCA3NzgsIDQ4MF0sXG4gICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgIGFycm93czoge1xuICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBoaWRlX29ubGVhdmU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b3VjaDp7XG5cdCAgICAgICAgXHR0b3VjaGVuYWJsZWQ6XCJvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1bGxldHM6IHtcbiAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGhpZGVfb25sZWF2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaF9hbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgICB2X2FsaWduOiBcImJvdHRvbVwiLFxuICAgICAgICAgICAgICAgIHNwYWNlOiA1LFxuICAgICAgICAgICAgICAgIGhfb2Zmc2V0OiAwLFxuICAgICAgICAgICAgICAgIHZfb2Zmc2V0OiAyMFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgJChcIiNzbGlkZXIyXCIpLnJldm9sdXRpb24oe1xuICAgICAgICBzbGlkZXJUeXBlOiBcInN0YW5kYXJkXCIsXG4gICAgICAgIHNsaWRlckxheW91dDogXCJmdWxsc2NyZWVuXCIsXG4gICAgICAgIGZ1bGxTY3JlZW5PZmZzZXRDb250YWluZXI6IFwiLm5hdmJhclwiLFxuICAgICAgICBzcGlubmVyOiBcInNwaW5uZXJcIixcbiAgICAgICAgZGVsYXk6IDkwMDAsXG4gICAgICAgIHNoYWRvdzogMCxcbiAgICAgICAgZ3JpZHdpZHRoOiAxMTcwLFxuICAgICAgICBncmlkaGVpZ2h0OiA3MDAsXG4gICAgICAgIHJlc3BvbnNpdmVMZXZlbHM6IFs0MDk2LCAxMDI0LCA3NzgsIDQ4MF0sXG4gICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgIGFycm93czoge1xuICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBoaWRlX29ubGVhdmU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b3VjaDp7XG5cdCAgICAgICAgXHR0b3VjaGVuYWJsZWQ6XCJvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1bGxldHM6IHtcbiAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGhpZGVfb25sZWF2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaF9hbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgICB2X2FsaWduOiBcImJvdHRvbVwiLFxuICAgICAgICAgICAgICAgIHNwYWNlOiA1LFxuICAgICAgICAgICAgICAgIGhfb2Zmc2V0OiAwLFxuICAgICAgICAgICAgICAgIHZfb2Zmc2V0OiAyMFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgJChcIiNzbGlkZXIzXCIpLnJldm9sdXRpb24oe1xuICAgICAgICBzbGlkZXJUeXBlOiBcInN0YW5kYXJkXCIsXG4gICAgICAgIHNsaWRlckxheW91dDogXCJhdXRvXCIsXG4gICAgICAgIHNwaW5uZXI6IFwic3Bpbm5lclwiLFxuICAgICAgICBkZWxheTogOTAwMCxcbiAgICAgICAgc2hhZG93OiAwLFxuICAgICAgICBncmlkd2lkdGg6IDExNzAsXG4gICAgICAgIGdyaWRoZWlnaHQ6IDYwMCxcbiAgICAgICAgcmVzcG9uc2l2ZUxldmVsczogWzQwOTYsIDEwMjQsIDc3OCwgNDgwXSxcbiAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgYXJyb3dzOiB7XG4gICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGhpZGVfb25sZWF2ZTogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvdWNoOntcblx0ICAgICAgICBcdHRvdWNoZW5hYmxlZDpcIm9uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnVsbGV0czoge1xuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaGlkZV9vbmxlYXZlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBoX2FsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgIHZfYWxpZ246IFwiYm90dG9tXCIsXG4gICAgICAgICAgICAgICAgc3BhY2U6IDUsXG4gICAgICAgICAgICAgICAgaF9vZmZzZXQ6IDAsXG4gICAgICAgICAgICAgICAgdl9vZmZzZXQ6IDIwXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkKFwiI2Zsb3dcIikucmV2b2x1dGlvbih7XG4gICAgICAgIHNsaWRlclR5cGU6IFwiY2Fyb3VzZWxcIixcblxuICAgICAgICBzbGlkZXJMYXlvdXQ6IFwiYXV0b1wiLFxuICAgICAgICBkb3R0ZWRPdmVybGF5OiBcIm5vbmVcIixcbiAgICAgICAgZGVsYXk6IDkwMDAsXG4gICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgIGFycm93czoge1xuICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBoaWRlX29ubGVhdmU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b3VjaDp7XG5cdCAgICAgICAgXHR0b3VjaGVuYWJsZWQ6XCJvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1bGxldHM6IHtcbiAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGhpZGVfb25sZWF2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaF9hbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgICB2X2FsaWduOiBcImJvdHRvbVwiLFxuICAgICAgICAgICAgICAgIHNwYWNlOiA1LFxuICAgICAgICAgICAgICAgIGhfb2Zmc2V0OiAwLFxuICAgICAgICAgICAgICAgIHZfb2Zmc2V0OiAyMFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjYXJvdXNlbDoge1xuICAgICAgICAgICAgbWF4Um90YXRpb246IDEwLFxuICAgICAgICAgICAgdmFyeV9yb3RhdGlvbjogXCJvblwiLFxuICAgICAgICAgICAgbWluU2NhbGU6IDEwLFxuICAgICAgICAgICAgdmFyeV9zY2FsZTogXCJvZmZcIixcbiAgICAgICAgICAgIGhvcml6b250YWxfYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgICB2ZXJ0aWNhbF9hbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICAgIGZhZGVvdXQ6IFwib25cIixcbiAgICAgICAgICAgIHZhcnlfZmFkZTogXCJvblwiLFxuICAgICAgICAgICAgbWF4VmlzaWJsZUl0ZW1zOiA1LFxuICAgICAgICAgICAgaW5maW5pdHk6IFwib25cIixcbiAgICAgICAgICAgIHNwYWNlOiAxMCxcbiAgICAgICAgICAgIHN0cmV0Y2g6IFwib2ZmXCJcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2l2ZUxldmVsczogWzEyNDAsIDEwMjQsIDc3OCwgNDgwXSxcbiAgICAgICAgZ3JpZHdpZHRoOiA2MDAsXG4gICAgICAgIGdyaWRoZWlnaHQ6IDQwMCxcbiAgICAgICAgbGF6eVR5cGU6IFwibm9uZVwiLFxuICAgICAgICBzaGFkb3c6IDAsXG4gICAgICAgIHNwaW5uZXI6IFwib2ZmXCIsXG4gICAgICAgIHN0b3BMb29wOiBcIm9uXCIsXG4gICAgICAgIHN0b3BBZnRlckxvb3BzOiAwLFxuICAgICAgICBzdG9wQXRTbGlkZTogMSxcbiAgICAgICAgc2h1ZmZsZTogXCJvZmZcIixcbiAgICAgICAgYXV0b0hlaWdodDogXCJvZmZcIixcbiAgICAgICAgZnVsbFNjcmVlbkFsaWduRm9yY2U6IFwib2ZmXCIsXG4gICAgICAgIGZ1bGxTY3JlZW5PZmZzZXRDb250YWluZXI6IFwiXCIsXG4gICAgICAgIGZ1bGxTY3JlZW5PZmZzZXQ6IFwiXCIsXG4gICAgICAgIGRpc2FibGVQcm9ncmVzc0JhcjogXCJvblwiLFxuICAgICAgICBoaWRlVGh1bWJzT25Nb2JpbGU6IFwib2ZmXCIsXG4gICAgICAgIGhpZGVTbGlkZXJBdExpbWl0OiAwLFxuICAgICAgICBoaWRlQ2FwdGlvbkF0TGltaXQ6IDAsXG4gICAgICAgIGhpZGVBbGxDYXB0aW9uQXRMaWxtaXQ6IDAsXG4gICAgICAgIGRlYnVnTW9kZTogZmFsc2UsXG4gICAgICAgIGZhbGxiYWNrczoge1xuICAgICAgICAgICAgc2ltcGxpZnlBbGw6IFwib2ZmXCIsXG4gICAgICAgICAgICBuZXh0U2xpZGVPbldpbmRvd0ZvY3VzOiBcIm9mZlwiLFxuICAgICAgICAgICAgZGlzYWJsZUZvY3VzTGlzdGVuZXI6IGZhbHNlLFxuICAgICAgICB9XG5cbiAgICB9KTtcbiAgICAkKFwiI3NsaWRlci12aWRlb1wiKS5yZXZvbHV0aW9uKHtcbiAgICAgICAgc2xpZGVyVHlwZTogXCJzdGFuZGFyZFwiLFxuICAgICAgICBqc0ZpbGVMb2NhdGlvbjogXCIuLi8uLi9yZXZvbHV0aW9uL2pzL1wiLFxuICAgICAgICBzbGlkZXJMYXlvdXQ6IFwiYXV0b1wiLFxuICAgICAgICBkb3R0ZWRPdmVybGF5OiBcIm5vbmVcIixcbiAgICAgICAgZGVsYXk6IDkwMDAsXG4gICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgIGtleWJvYXJkTmF2aWdhdGlvbjogXCJvZmZcIixcbiAgICAgICAgICAgIGtleWJvYXJkX2RpcmVjdGlvbjogXCJob3Jpem9udGFsXCIsXG4gICAgICAgICAgICBtb3VzZVNjcm9sbE5hdmlnYXRpb246IFwib2ZmXCIsXG4gICAgICAgICAgICBvbkhvdmVyU3RvcDogXCJvZmZcIixcbiAgICAgICAgICAgIGFycm93czoge1xuICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBoaWRlX29ubGVhdmU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b3VjaDp7XG5cdCAgICAgICAgXHR0b3VjaGVuYWJsZWQ6XCJvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1bGxldHM6IHtcbiAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGhpZGVfb25sZWF2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaF9hbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgICB2X2FsaWduOiBcImJvdHRvbVwiLFxuICAgICAgICAgICAgICAgIHNwYWNlOiA1LFxuICAgICAgICAgICAgICAgIGhfb2Zmc2V0OiAwLFxuICAgICAgICAgICAgICAgIHZfb2Zmc2V0OiAyMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRodW1ibmFpbHM6IHtcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJlcmlueWVuXCIsXG4gICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMjAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA2OCxcbiAgICAgICAgICAgICAgICBtaW5fd2lkdGg6IDkwLFxuICAgICAgICAgICAgICAgIHdyYXBwZXJfcGFkZGluZzogMCxcbiAgICAgICAgICAgICAgICB3cmFwcGVyX2NvbG9yOiBcInRyYW5zcGFyZW50XCIsXG4gICAgICAgICAgICAgICAgd3JhcHBlcl9vcGFjaXR5OiBcIjFcIixcbiAgICAgICAgICAgICAgICB0bXA6ICc8c3BhbiBjbGFzcz1cInRwLXRodW1iLW92ZXJcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJ0cC10aHVtYi1pbWFnZVwiPjwvc3Bhbj4nLFxuICAgICAgICAgICAgICAgIHZpc2libGVBbW91bnQ6IDEwLFxuICAgICAgICAgICAgICAgIGhpZGVfb25tb2JpbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGhpZGVfb25sZWF2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBcImhvcml6b250YWxcIixcbiAgICAgICAgICAgICAgICBzcGFuOiB0cnVlLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcIm91dGVyLWJvdHRvbVwiLFxuICAgICAgICAgICAgICAgIHNwYWNlOiAxMCxcbiAgICAgICAgICAgICAgICBoX2FsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgIHZfYWxpZ246IFwiYm90dG9tXCIsXG4gICAgICAgICAgICAgICAgaF9vZmZzZXQ6IDAsXG4gICAgICAgICAgICAgICAgdl9vZmZzZXQ6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ3JpZHdpZHRoOiAxMjMwLFxuICAgICAgICBncmlkaGVpZ2h0OiA2OTIsXG4gICAgICAgIGxhenlUeXBlOiBcIm5vbmVcIixcbiAgICAgICAgc2hhZG93OiAwLFxuICAgICAgICBzcGlubmVyOiBcInNwaW5uZXIyXCIsXG4gICAgICAgIHN0b3BMb29wOiBcIm9uXCIsXG4gICAgICAgIHN0b3BBZnRlckxvb3BzOiAwLFxuICAgICAgICBzdG9wQXRTbGlkZTogMSxcbiAgICAgICAgc2h1ZmZsZTogXCJvZmZcIixcbiAgICAgICAgYXV0b0hlaWdodDogXCJvZmZcIixcbiAgICAgICAgZGlzYWJsZVByb2dyZXNzQmFyOiBcIm9uXCIsXG4gICAgICAgIGhpZGVUaHVtYnNPbk1vYmlsZTogXCJvZmZcIixcbiAgICAgICAgaGlkZVNsaWRlckF0TGltaXQ6IDAsXG4gICAgICAgIGhpZGVDYXB0aW9uQXRMaW1pdDogMCxcbiAgICAgICAgaGlkZUFsbENhcHRpb25BdExpbG1pdDogMCxcbiAgICAgICAgZGVidWdNb2RlOiBmYWxzZSxcbiAgICAgICAgZmFsbGJhY2tzOiB7XG4gICAgICAgICAgICBzaW1wbGlmeUFsbDogXCJvZmZcIixcbiAgICAgICAgICAgIG5leHRTbGlkZU9uV2luZG93Rm9jdXM6IFwib2ZmXCIsXG4gICAgICAgICAgICBkaXNhYmxlRm9jdXNMaXN0ZW5lcjogZmFsc2UsXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAvKlx0UEFSQUxMQVggTU9CSUxFXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL3dlYk9TL2kpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKSB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQb2QvaSkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKSkge1xuICAgICAgICAkKCcucGFyYWxsYXgnKS5hZGRDbGFzcygnbW9iaWxlJyk7XG4gICAgfVxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRCQUNLR1JPVU5EIFZJREVPIFBBUkFMTEFYXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgICQoJyN2aWRlby13b3JrJykuYmFja2dyb3VuZFZpZGVvKHtcbiAgICAgICAgJG91dGVyV3JhcDogJCgnLm91dGVyLXdyYXAnKSxcbiAgICAgICAgcGF1c2VWaWRlb09uVmlld0xvc3M6IGZhbHNlLFxuICAgICAgICBwYXJhbGxheE9wdGlvbnM6IHtcbiAgICAgICAgICAgIGVmZmVjdDogMS45XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAvKlx0SU1BR0UgSUNPTiBIT1ZFUlxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAkKCcub3ZlcmxheS5pY29uIC5pbmZvJykucHJlcGVuZCgnPHNwYW4gY2xhc3M9XCJpY29uLW1vcmVcIj48L3NwYW4+Jyk7XG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgLypcdFRBQiBDT0xMQVBTRVxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAkKCcjdGFiMScpLnRhYkNvbGxhcHNlKHtcblx0XHR0YWJzQ2xhc3M6ICdoaWRkZW4tc20gaGlkZGVuLXhzJyxcblx0XHRhY2NvcmRpb25DbGFzczogJ3Zpc2libGUtc20gdmlzaWJsZS14cydcblx0fSk7XG5cdCQoJyN0YWIxJykub24oJ3Nob3duLWFjY29yZGlvbi5icy50YWJjb2xsYXBzZScsIGZ1bmN0aW9uKCl7XG5cdCAgICAkKCcucGFuZWwtZ3JvdXAnKS5maW5kKCcucGFuZWwtZGVmYXVsdDpoYXMoXCIuaW5cIiknKS5hZGRDbGFzcygncGFuZWwtYWN0aXZlJyk7XG5cdCAgICAkKCcucGFuZWwtZ3JvdXAnKS5vbignc2hvd24uYnMuY29sbGFwc2UnLCBmdW5jdGlvbihlKSB7XG5cdCAgICAgICAgJChlLnRhcmdldCkuY2xvc2VzdCgnLnBhbmVsLWRlZmF1bHQnKS5hZGRDbGFzcygnIHBhbmVsLWFjdGl2ZScpO1xuXHQgICAgfSkub24oJ2hpZGRlbi5icy5jb2xsYXBzZScsIGZ1bmN0aW9uKGUpIHtcblx0ICAgICAgICAkKGUudGFyZ2V0KS5jbG9zZXN0KCcucGFuZWwtZGVmYXVsdCcpLnJlbW92ZUNsYXNzKCcgcGFuZWwtYWN0aXZlJyk7XG5cdCAgICB9KTtcblx0fSk7XG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgLypcdFRPR0dMRVxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAkKCcucGFuZWwtZ3JvdXAnKS5maW5kKCcucGFuZWwtZGVmYXVsdDpoYXMoXCIuaW5cIiknKS5hZGRDbGFzcygncGFuZWwtYWN0aXZlJyk7XG4gICAgJCgnLnBhbmVsLWdyb3VwJykub24oJ3Nob3duLmJzLmNvbGxhcHNlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAkKGUudGFyZ2V0KS5jbG9zZXN0KCcucGFuZWwtZGVmYXVsdCcpLmFkZENsYXNzKCcgcGFuZWwtYWN0aXZlJyk7XG4gICAgfSkub24oJ2hpZGRlbi5icy5jb2xsYXBzZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgJChlLnRhcmdldCkuY2xvc2VzdCgnLnBhbmVsLWRlZmF1bHQnKS5yZW1vdmVDbGFzcygnIHBhbmVsLWFjdGl2ZScpO1xuICAgIH0pO1xuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRQUk9HUkVTUyBCQVJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgJCgnLnByb2dyZXNzLWxpc3QgLnByb2dyZXNzIC5iYXInKS5wcm9ncmVzc0Jhcih7XG4gICAgICAgIHNoYWRvdzogZmFsc2UsXG4gICAgICAgIHBlcmNlbnRhZ2U6IGZhbHNlLFxuICAgICAgICBhbmltYXRpb246IHRydWUsXG4gICAgICAgIGhlaWdodDogMTVcbiAgICB9KTtcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAvKlx0REFUQSBSRUxcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgJCgnYVtkYXRhLXJlbF0nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKHRoaXMpLmF0dHIoJ3JlbCcsICQodGhpcykuZGF0YSgncmVsJykpO1xuICAgIH0pO1xuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRUT09MVElQXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgaWYgKCQoXCJbcmVsPXRvb2x0aXBdXCIpLmxlbmd0aCkge1xuICAgICAgICAkKFwiW3JlbD10b29sdGlwXVwiKS50b29sdGlwKCk7XG4gICAgfVxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRQUkVUVElGWVxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICB3aW5kb3cucHJldHR5UHJpbnQgJiYgcHJldHR5UHJpbnQoKVxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRDT1VOVEVSIFVQXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgICQoJy5jb3VudGVyJykuY291bnRlclVwKHtcbiAgICAgICAgZGVsYXk6IDUwLFxuICAgICAgICB0aW1lOiAxMDAwXG4gICAgfSk7XG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgLypcdFZBTklMTEFcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICB2YXIgbXlGb3JtO1xuICAgIG15Rm9ybSA9IG5ldyBWYW5pbGxhRm9ybSgkKFwiZm9ybS52YW5pbGxhLWZvcm1cIikpO1xuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRHTyBUTyBUT1BcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAkLnNjcm9sbFVwKHtcbiAgICAgICAgc2Nyb2xsTmFtZTogJ3Njcm9sbFVwJyxcbiAgICAgICAgLy8gRWxlbWVudCBJRFxuICAgICAgICBzY3JvbGxEaXN0YW5jZTogMzAwLFxuICAgICAgICAvLyBEaXN0YW5jZSBmcm9tIHRvcC9ib3R0b20gYmVmb3JlIHNob3dpbmcgZWxlbWVudCAocHgpXG4gICAgICAgIHNjcm9sbEZyb206ICd0b3AnLFxuICAgICAgICAvLyAndG9wJyBvciAnYm90dG9tJ1xuICAgICAgICBzY3JvbGxTcGVlZDogMzAwLFxuICAgICAgICAvLyBTcGVlZCBiYWNrIHRvIHRvcCAobXMpXG4gICAgICAgIGVhc2luZ1R5cGU6ICdsaW5lYXInLFxuICAgICAgICAvLyBTY3JvbGwgdG8gdG9wIGVhc2luZyAoc2VlIGh0dHA6Ly9lYXNpbmdzLm5ldC8pXG4gICAgICAgIGFuaW1hdGlvbjogJ2ZhZGUnLFxuICAgICAgICAvLyBGYWRlLCBzbGlkZSwgbm9uZVxuICAgICAgICBhbmltYXRpb25JblNwZWVkOiAyMDAsXG4gICAgICAgIC8vIEFuaW1hdGlvbiBpbiBzcGVlZCAobXMpXG4gICAgICAgIGFuaW1hdGlvbk91dFNwZWVkOiAyMDAsXG4gICAgICAgIC8vIEFuaW1hdGlvbiBvdXQgc3BlZWQgKG1zKVxuICAgICAgICBzY3JvbGxUZXh0OiAnPHNwYW4gY2xhc3M9XCJidG4gYnRuLXNxdWFyZVwiPjxpIGNsYXNzPVwiaWNvbi11cC1vcGVuXCI+PC9pPjwvc3Bhbj4nLFxuICAgICAgICAvLyBUZXh0IGZvciBlbGVtZW50LCBjYW4gY29udGFpbiBIVE1MXG4gICAgICAgIHNjcm9sbFRpdGxlOiBmYWxzZSxcbiAgICAgICAgLy8gU2V0IGEgY3VzdG9tIDxhPiB0aXRsZSBpZiByZXF1aXJlZC4gRGVmYXVsdHMgdG8gc2Nyb2xsVGV4dFxuICAgICAgICBzY3JvbGxJbWc6IGZhbHNlLFxuICAgICAgICAvLyBTZXQgdHJ1ZSB0byB1c2UgaW1hZ2VcbiAgICAgICAgYWN0aXZlT3ZlcmxheTogZmFsc2UsXG4gICAgICAgIC8vIFNldCBDU1MgY29sb3IgdG8gZGlzcGxheSBzY3JvbGxVcCBhY3RpdmUgcG9pbnQsIGUuZyAnIzAwRkZGRidcbiAgICAgICAgekluZGV4OiAxMDAxIC8vIFotSW5kZXggZm9yIHRoZSBvdmVybGF5XG4gICAgfSk7XG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgLypcdElOU1RBR1JBTVxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIHZhciBpbnN0YWdyYW1GZWVkID0gbmV3IEluc3RhZmVlZCh7XG4gICAgICAgIHRhcmdldDogJ2luc3RhZmVlZC13aWRnZXQnLFxuICAgICAgICBnZXQ6ICd1c2VyJyxcbiAgICAgICAgbGltaXQ6IDYsXG4gICAgICAgIHVzZXJJZDogMTIxNTc2MzgyNixcbiAgICAgICAgYWNjZXNzVG9rZW46ICcxMjE1NzYzODI2LmYxNjI3ZWEuNTEyZDNhOWIzMzRhNGM5MWFjMmU4M2Q0ZjRkOWIyOTEnLFxuICAgICAgICByZXNvbHV0aW9uOiAnbG93X3Jlc29sdXRpb24nLFxuICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJpdGVtIGNvbC14cy00IGNvbC1zbS02IGNvbC1tZC00XCI+PGZpZ3VyZT48YSBocmVmPVwie3tsaW5rfX1cIiB0YXJnZXQ9XCJfYmxhbmtcIj48ZGl2IGNsYXNzPVwib3ZlcmxheSBpY29uXCI+PGRpdiBjbGFzcz1cImluZm9cIj48L2Rpdj48L2Rpdj48aW1nIHNyYz1cInt7aW1hZ2V9fVwiIC8+PC9hPjwvZmlndXJlPjwvZGl2PicsXG4gICAgICAgIGFmdGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJyNpbnN0YWZlZWQtd2lkZ2V0IC5vdmVybGF5Lmljb24gLmluZm8nKS5wcmVwZW5kKCc8c3BhbiBjbGFzcz1cImljb24tbW9yZVwiPjwvc3Bhbj4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJyNpbnN0YWZlZWQtd2lkZ2V0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgaW5zdGFncmFtRmVlZC5ydW4oKTtcbiAgICB9KTtcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAvKlx0RklUVklEUyBWSURFT1xuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAkKCcucGxheWVyJykuZml0VmlkcygpO1xuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIC8qXHRDSVJDTEUgUFJPR1JFU1NcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICBpZiAoJCgnLmNpcmNsZS1wcm9ncmVzcy13cmFwcGVyJykubGVuZ3RoKSB7XG4gICAgICAgIHZhciBjaXJjbGUxID0gbmV3IFByb2dyZXNzQmFyLkNpcmNsZSgnLmNpcmNsZS5maXJzdCcsIHtcbiAgICAgICAgICAgIGNvbG9yOiAnIzMyYmVhNicsXG4gICAgICAgICAgICB0cmFpbENvbG9yOiAncmdiYSgwLDAsMCwwLjA1KScsXG4gICAgICAgICAgICBzdHJva2VXaWR0aDogNCxcbiAgICAgICAgICAgIHRyYWlsV2lkdGg6IDQsXG4gICAgICAgICAgICBkdXJhdGlvbjogNDUwMCxcbiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VJbk91dCcsXG4gICAgICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6ICcwLjQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RlcDogZnVuY3Rpb24oc3RhdGUsIGJhcikge1xuICAgICAgICAgICAgICAgIGJhci5zZXRUZXh0KChiYXIudmFsdWUoKSAqIDEwMCkudG9GaXhlZCgwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjaXJjbGUxLmFuaW1hdGUoMC40KTtcbiAgICAgICAgdmFyIGNpcmNsZTIgPSBuZXcgUHJvZ3Jlc3NCYXIuQ2lyY2xlKCcuY2lyY2xlLnNlY29uZCcsIHtcbiAgICAgICAgICAgIGNvbG9yOiAnI2YyYmUzZScsXG4gICAgICAgICAgICB0cmFpbENvbG9yOiAncmdiYSgwLDAsMCwwLjA1KScsXG4gICAgICAgICAgICBzdHJva2VXaWR0aDogNCxcbiAgICAgICAgICAgIHRyYWlsV2lkdGg6IDQsXG4gICAgICAgICAgICBkdXJhdGlvbjogNDUwMCxcbiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VJbk91dCcsXG4gICAgICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6ICcwLjgnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RlcDogZnVuY3Rpb24oc3RhdGUsIGJhcikge1xuICAgICAgICAgICAgICAgIGJhci5zZXRUZXh0KChiYXIudmFsdWUoKSAqIDEwMCkudG9GaXhlZCgwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjaXJjbGUyLmFuaW1hdGUoMC44KTtcbiAgICAgICAgdmFyIGNpcmNsZTMgPSBuZXcgUHJvZ3Jlc3NCYXIuQ2lyY2xlKCcuY2lyY2xlLnRoaXJkJywge1xuICAgICAgICAgICAgY29sb3I6ICcjZTA0ZjVmJyxcbiAgICAgICAgICAgIHRyYWlsQ29sb3I6ICdyZ2JhKDAsMCwwLDAuMDUpJyxcbiAgICAgICAgICAgIHN0cm9rZVdpZHRoOiA0LFxuICAgICAgICAgICAgdHJhaWxXaWR0aDogNCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA0NTAwLFxuICAgICAgICAgICAgZWFzaW5nOiAnZWFzZUluT3V0JyxcbiAgICAgICAgICAgIHRleHQ6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogJzAuMzQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RlcDogZnVuY3Rpb24oc3RhdGUsIGJhcikge1xuICAgICAgICAgICAgICAgIGJhci5zZXRUZXh0KChiYXIudmFsdWUoKSAqIDEwMCkudG9GaXhlZCgwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjaXJjbGUzLmFuaW1hdGUoMC4zNCk7XG4gICAgICAgIHZhciBjaXJjbGU0ID0gbmV3IFByb2dyZXNzQmFyLkNpcmNsZSgnLmNpcmNsZS5mb3VydGgnLCB7XG4gICAgICAgICAgICBjb2xvcjogJyM5NTRlOWQnLFxuICAgICAgICAgICAgdHJhaWxDb2xvcjogJ3JnYmEoMCwwLDAsMC4wNSknLFxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDQsXG4gICAgICAgICAgICB0cmFpbFdpZHRoOiA0LFxuICAgICAgICAgICAgZHVyYXRpb246IDQ1MDAsXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5PdXQnLFxuICAgICAgICAgICAgdGV4dDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiAnMC40NSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGVwOiBmdW5jdGlvbihzdGF0ZSwgYmFyKSB7XG4gICAgICAgICAgICAgICAgYmFyLnNldFRleHQoKGJhci52YWx1ZSgpICogMTAwKS50b0ZpeGVkKDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNpcmNsZTQuYW5pbWF0ZSgwLjQ1KTtcbiAgICB9XG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdC8qXHRXT1cgQU5JTUFUSU9OXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRuZXcgV09XKCkuaW5pdCgpO1xuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0LypcdExBWlkgTE9BRCBHT09HTEUgTUFQU1xuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0O1xuXHQoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XG5cdCAgICB2YXIgJHdpbmRvdyA9ICQod2luZG93KSxcblx0ICAgICAgICBtYXBJbnN0YW5jZXMgPSBbXSxcblx0ICAgICAgICAkcGx1Z2luSW5zdGFuY2UgPSAkKCcuZ29vZ2xlLW1hcCcpLmxhenlMb2FkR29vZ2xlTWFwcyh7XG5cdCAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihjb250YWluZXIsIG1hcCkge1xuXHQgICAgICAgICAgICAgICAgdmFyICRjb250YWluZXIgPSAkKGNvbnRhaW5lciksXG5cdCAgICAgICAgICAgICAgICAgICAgY2VudGVyID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZygkY29udGFpbmVyLmF0dHIoJ2RhdGEtbGF0JyksICRjb250YWluZXIuYXR0cignZGF0YS1sbmcnKSk7XG5cblx0ICAgICAgICAgICAgICAgIG1hcC5zZXRPcHRpb25zKHtcblx0ICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IGNlbnRlcixcblx0ICAgICAgICAgICAgICAgICAgICB6b29tOiAxNSxcblx0ICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSxcblx0ICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbE9wdGlvbnM6IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGdvb2dsZS5tYXBzLlpvb21Db250cm9sU3R5bGUuREVGQVVMVCxcblx0ICAgICAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgICAgIGRpc2FibGVEb3VibGVDbGlja1pvb206IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgICAgIG1hcFR5cGVDb250cm9sOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgIG1hcFR5cGVDb250cm9sT3B0aW9uczoge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogZ29vZ2xlLm1hcHMuTWFwVHlwZUNvbnRyb2xTdHlsZS5EUk9QRE9XTl9NRU5VLFxuXHQgICAgICAgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgc2NhbGVDb250cm9sOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZSxcblx0ICAgICAgICAgICAgICAgICAgICBzdHJlZXRWaWV3Q29udHJvbDogdHJ1ZSxcblx0ICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG5cdCAgICAgICAgICAgICAgICAgICAgb3ZlcnZpZXdNYXBDb250cm9sOiBmYWxzZSxcblx0ICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQLFxuXHQgICAgICAgICAgICAgICAgICAgIHN0eWxlczogW3tcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVyczogW3tcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdHVyYXRpb246IC0xMDBcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtbWE6IDFcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfV1cblx0ICAgICAgICAgICAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0LnN0cm9rZVwiLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXJzOiBbe1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogXCJvZmZcIlxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVR5cGU6IFwicG9pLmJ1c2luZXNzXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0XCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcnM6IFt7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBcIm9mZlwiXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlVHlwZTogXCJwb2kuYnVzaW5lc3NcIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFR5cGU6IFwibGFiZWxzLmljb25cIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVyczogW3tcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IFwib2ZmXCJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfV1cblx0ICAgICAgICAgICAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVUeXBlOiBcInBvaS5wbGFjZV9vZl93b3JzaGlwXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0XCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcnM6IFt7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBcIm9mZlwiXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlVHlwZTogXCJwb2kucGxhY2Vfb2Zfd29yc2hpcFwiLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogXCJsYWJlbHMuaWNvblwiLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXJzOiBbe1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogXCJvZmZcIlxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVR5cGU6IFwicm9hZFwiLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogXCJnZW9tZXRyeVwiLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXJzOiBbe1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogXCJzaW1wbGlmaWVkXCJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfV1cblx0ICAgICAgICAgICAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVUeXBlOiBcIndhdGVyXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcnM6IFt7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBcIm9uXCJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F0dXJhdGlvbjogNTBcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtbWE6IDBcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHVlOiBcIiM1MGE1ZDFcIlxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVR5cGU6IFwiYWRtaW5pc3RyYXRpdmUubmVpZ2hib3Job29kXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVscy50ZXh0LmZpbGxcIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVyczogW3tcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiMzMzMzMzNcIlxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVR5cGU6IFwicm9hZC5sb2NhbFwiLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogXCJsYWJlbHMudGV4dFwiLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXJzOiBbe1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAwLjVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiIzMzMzMzM1wiXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlVHlwZTogXCJ0cmFuc2l0LnN0YXRpb25cIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFR5cGU6IFwibGFiZWxzLmljb25cIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVyczogW3tcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbW1hOiAxXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdHVyYXRpb246IDUwXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICAgICAgICAgICAgfV1cblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG5cdCAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGNlbnRlcixcblx0ICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcFxuXHQgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICQuZGF0YShtYXAsICdjZW50ZXInLCBjZW50ZXIpO1xuXHQgICAgICAgICAgICAgICAgbWFwSW5zdGFuY2VzLnB1c2gobWFwKTtcblxuXHQgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZUNlbnRlciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICQuZGF0YShtYXAsICdjZW50ZXInLCBtYXAuZ2V0Q2VudGVyKCkpO1xuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ2RyYWdlbmQnLCB1cGRhdGVDZW50ZXIpO1xuXHQgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnem9vbV9jaGFuZ2VkJywgdXBkYXRlQ2VudGVyKTtcblx0ICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZShtYXAsICdpZGxlJywgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5hZGRDbGFzcygnaXMtbG9hZGVkJyk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAkd2luZG93Lm9uKCdyZXNpemUnLCAkcGx1Z2luSW5zdGFuY2UuZGVib3VuY2UoMTAwMCwgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgJC5lYWNoKG1hcEluc3RhbmNlcywgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHRoaXMuc2V0Q2VudGVyKCQuZGF0YSh0aGlzLCAnY2VudGVyJykpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSkpO1xuXG5cdH0pKGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHQvKlx0TE9BRElOR1xuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0JCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24oKSB7XG5cdCAgICAkKFwiLmNpcmNsZS1wcm9ncmVzcy13cmFwcGVyIHN0cm9uZ1wiKS5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwidmlzaWJsZVwiKTtcblx0fSk7XG59KTtcbiIsIi8qIVxuICogZXZlbnRpZSB2MS4wLjZcbiAqIGV2ZW50IGJpbmRpbmcgaGVscGVyXG4gKiAgIGV2ZW50aWUuYmluZCggZWxlbSwgJ2NsaWNrJywgbXlGbiApXG4gKiAgIGV2ZW50aWUudW5iaW5kKCBlbGVtLCAnY2xpY2snLCBteUZuIClcbiAqIE1JVCBsaWNlbnNlXG4gKi9cblxuLypqc2hpbnQgYnJvd3NlcjogdHJ1ZSwgdW5kZWY6IHRydWUsIHVudXNlZDogdHJ1ZSAqL1xuLypnbG9iYWwgZGVmaW5lOiBmYWxzZSwgbW9kdWxlOiBmYWxzZSAqL1xuXG4oIGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbnZhciBiaW5kID0gZnVuY3Rpb24oKSB7fTtcblxuZnVuY3Rpb24gZ2V0SUVFdmVudCggb2JqICkge1xuICB2YXIgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7XG4gIC8vIGFkZCBldmVudC50YXJnZXRcbiAgZXZlbnQudGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQgfHwgb2JqO1xuICByZXR1cm4gZXZlbnQ7XG59XG5cbmlmICggZG9jRWxlbS5hZGRFdmVudExpc3RlbmVyICkge1xuICBiaW5kID0gZnVuY3Rpb24oIG9iaiwgdHlwZSwgZm4gKSB7XG4gICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoIHR5cGUsIGZuLCBmYWxzZSApO1xuICB9O1xufSBlbHNlIGlmICggZG9jRWxlbS5hdHRhY2hFdmVudCApIHtcbiAgYmluZCA9IGZ1bmN0aW9uKCBvYmosIHR5cGUsIGZuICkge1xuICAgIG9ialsgdHlwZSArIGZuIF0gPSBmbi5oYW5kbGVFdmVudCA/XG4gICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gZ2V0SUVFdmVudCggb2JqICk7XG4gICAgICAgIGZuLmhhbmRsZUV2ZW50LmNhbGwoIGZuLCBldmVudCApO1xuICAgICAgfSA6XG4gICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gZ2V0SUVFdmVudCggb2JqICk7XG4gICAgICAgIGZuLmNhbGwoIG9iaiwgZXZlbnQgKTtcbiAgICAgIH07XG4gICAgb2JqLmF0dGFjaEV2ZW50KCBcIm9uXCIgKyB0eXBlLCBvYmpbIHR5cGUgKyBmbiBdICk7XG4gIH07XG59XG5cbnZhciB1bmJpbmQgPSBmdW5jdGlvbigpIHt9O1xuXG5pZiAoIGRvY0VsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciApIHtcbiAgdW5iaW5kID0gZnVuY3Rpb24oIG9iaiwgdHlwZSwgZm4gKSB7XG4gICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIGZuLCBmYWxzZSApO1xuICB9O1xufSBlbHNlIGlmICggZG9jRWxlbS5kZXRhY2hFdmVudCApIHtcbiAgdW5iaW5kID0gZnVuY3Rpb24oIG9iaiwgdHlwZSwgZm4gKSB7XG4gICAgb2JqLmRldGFjaEV2ZW50KCBcIm9uXCIgKyB0eXBlLCBvYmpbIHR5cGUgKyBmbiBdICk7XG4gICAgdHJ5IHtcbiAgICAgIGRlbGV0ZSBvYmpbIHR5cGUgKyBmbiBdO1xuICAgIH0gY2F0Y2ggKCBlcnIgKSB7XG4gICAgICAvLyBjYW4ndCBkZWxldGUgd2luZG93IG9iamVjdCBwcm9wZXJ0aWVzXG4gICAgICBvYmpbIHR5cGUgKyBmbiBdID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIGV2ZW50aWUgPSB7XG4gIGJpbmQ6IGJpbmQsXG4gIHVuYmluZDogdW5iaW5kXG59O1xuXG4vLyAtLS0tLSBtb2R1bGUgZGVmaW5pdGlvbiAtLS0tLSAvL1xuXG5pZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcbiAgLy8gQU1EXG4gIGRlZmluZSggZXZlbnRpZSApO1xufSBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICkge1xuICAvLyBDb21tb25KU1xuICBtb2R1bGUuZXhwb3J0cyA9IGV2ZW50aWU7XG59IGVsc2Uge1xuICAvLyBicm93c2VyIGdsb2JhbFxuICB3aW5kb3cuZXZlbnRpZSA9IGV2ZW50aWU7XG59XG5cbn0pKCB3aW5kb3cgKTtcbiIsIi8qIVxuICogRXZlbnRFbWl0dGVyIHY1LjIuNCAtIGdpdC5pby9lZVxuICogVW5saWNlbnNlIC0gaHR0cDovL3VubGljZW5zZS5vcmcvXG4gKiBPbGl2ZXIgQ2FsZHdlbGwgLSBodHRwOi8vb2xpLm1lLnVrL1xuICogQHByZXNlcnZlXG4gKi9cblxuOyhmdW5jdGlvbiAoZXhwb3J0cykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8qKlxuICAgICAqIENsYXNzIGZvciBtYW5hZ2luZyBldmVudHMuXG4gICAgICogQ2FuIGJlIGV4dGVuZGVkIHRvIHByb3ZpZGUgZXZlbnQgZnVuY3Rpb25hbGl0eSBpbiBvdGhlciBjbGFzc2VzLlxuICAgICAqXG4gICAgICogQGNsYXNzIEV2ZW50RW1pdHRlciBNYW5hZ2VzIGV2ZW50IHJlZ2lzdGVyaW5nIGFuZCBlbWl0dGluZy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7fVxuXG4gICAgLy8gU2hvcnRjdXRzIHRvIGltcHJvdmUgc3BlZWQgYW5kIHNpemVcbiAgICB2YXIgcHJvdG8gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlO1xuICAgIHZhciBvcmlnaW5hbEdsb2JhbFZhbHVlID0gZXhwb3J0cy5FdmVudEVtaXR0ZXI7XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGxpc3RlbmVyIGZvciB0aGUgZXZlbnQgaW4gaXRzIHN0b3JhZ2UgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uW119IGxpc3RlbmVycyBBcnJheSBvZiBsaXN0ZW5lcnMgdG8gc2VhcmNoIHRocm91Z2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgTWV0aG9kIHRvIGxvb2sgZm9yLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gSW5kZXggb2YgdGhlIHNwZWNpZmllZCBsaXN0ZW5lciwgLTEgaWYgbm90IGZvdW5kXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5kZXhPZkxpc3RlbmVyKGxpc3RlbmVycywgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXJzW2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGEgbWV0aG9kIHdoaWxlIGtlZXBpbmcgdGhlIGNvbnRleHQgY29ycmVjdCwgdG8gYWxsb3cgZm9yIG92ZXJ3cml0aW5nIG9mIHRhcmdldCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgdGFyZ2V0IG1ldGhvZC5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGFsaWFzZWQgbWV0aG9kXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWxpYXMobmFtZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYWxpYXNDbG9zdXJlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbbmFtZV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0ZW5lciBhcnJheSBmb3IgdGhlIHNwZWNpZmllZCBldmVudC5cbiAgICAgKiBXaWxsIGluaXRpYWxpc2UgdGhlIGV2ZW50IG9iamVjdCBhbmQgbGlzdGVuZXIgYXJyYXlzIGlmIHJlcXVpcmVkLlxuICAgICAqIFdpbGwgcmV0dXJuIGFuIG9iamVjdCBpZiB5b3UgdXNlIGEgcmVnZXggc2VhcmNoLiBUaGUgb2JqZWN0IGNvbnRhaW5zIGtleXMgZm9yIGVhY2ggbWF0Y2hlZCBldmVudC4gU28gL2JhW3J6XS8gbWlnaHQgcmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIGJhciBhbmQgYmF6LiBCdXQgb25seSBpZiB5b3UgaGF2ZSBlaXRoZXIgZGVmaW5lZCB0aGVtIHdpdGggZGVmaW5lRXZlbnQgb3IgYWRkZWQgc29tZSBsaXN0ZW5lcnMgdG8gdGhlbS5cbiAgICAgKiBFYWNoIHByb3BlcnR5IGluIHRoZSBvYmplY3QgcmVzcG9uc2UgaXMgYW4gYXJyYXkgb2YgbGlzdGVuZXIgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmV0dXJuIHRoZSBsaXN0ZW5lcnMgZnJvbS5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbltdfE9iamVjdH0gQWxsIGxpc3RlbmVyIGZ1bmN0aW9ucyBmb3IgdGhlIGV2ZW50LlxuICAgICAqL1xuICAgIHByb3RvLmdldExpc3RlbmVycyA9IGZ1bmN0aW9uIGdldExpc3RlbmVycyhldnQpIHtcbiAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuX2dldEV2ZW50cygpO1xuICAgICAgICB2YXIgcmVzcG9uc2U7XG4gICAgICAgIHZhciBrZXk7XG5cbiAgICAgICAgLy8gUmV0dXJuIGEgY29uY2F0ZW5hdGVkIGFycmF5IG9mIGFsbCBtYXRjaGluZyBldmVudHMgaWZcbiAgICAgICAgLy8gdGhlIHNlbGVjdG9yIGlzIGEgcmVndWxhciBleHByZXNzaW9uLlxuICAgICAgICBpZiAoZXZ0IGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IHt9O1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50cy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGV2dC50ZXN0KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Vba2V5XSA9IGV2ZW50c1trZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gZXZlbnRzW2V2dF0gfHwgKGV2ZW50c1tldnRdID0gW10pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGxpc3Qgb2YgbGlzdGVuZXIgb2JqZWN0cyBhbmQgZmxhdHRlbnMgaXQgaW50byBhIGxpc3Qgb2YgbGlzdGVuZXIgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3RbXX0gbGlzdGVuZXJzIFJhdyBsaXN0ZW5lciBvYmplY3RzLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9uW119IEp1c3QgdGhlIGxpc3RlbmVyIGZ1bmN0aW9ucy5cbiAgICAgKi9cbiAgICBwcm90by5mbGF0dGVuTGlzdGVuZXJzID0gZnVuY3Rpb24gZmxhdHRlbkxpc3RlbmVycyhsaXN0ZW5lcnMpIHtcbiAgICAgICAgdmFyIGZsYXRMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdmFyIGk7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgZmxhdExpc3RlbmVycy5wdXNoKGxpc3RlbmVyc1tpXS5saXN0ZW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmxhdExpc3RlbmVycztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgcmVxdWVzdGVkIGxpc3RlbmVycyB2aWEgZ2V0TGlzdGVuZXJzIGJ1dCB3aWxsIGFsd2F5cyByZXR1cm4gdGhlIHJlc3VsdHMgaW5zaWRlIGFuIG9iamVjdC4gVGhpcyBpcyBtYWlubHkgZm9yIGludGVybmFsIHVzZSBidXQgb3RoZXJzIG1heSBmaW5kIGl0IHVzZWZ1bC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIHJldHVybiB0aGUgbGlzdGVuZXJzIGZyb20uXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBbGwgbGlzdGVuZXIgZnVuY3Rpb25zIGZvciBhbiBldmVudCBpbiBhbiBvYmplY3QuXG4gICAgICovXG4gICAgcHJvdG8uZ2V0TGlzdGVuZXJzQXNPYmplY3QgPSBmdW5jdGlvbiBnZXRMaXN0ZW5lcnNBc09iamVjdChldnQpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuZ2V0TGlzdGVuZXJzKGV2dCk7XG4gICAgICAgIHZhciByZXNwb25zZTtcblxuICAgICAgICBpZiAobGlzdGVuZXJzIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0ge307XG4gICAgICAgICAgICByZXNwb25zZVtldnRdID0gbGlzdGVuZXJzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8IGxpc3RlbmVycztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaXNWYWxpZExpc3RlbmVyIChsaXN0ZW5lcikge1xuICAgICAgICBpZiAodHlwZW9mIGxpc3RlbmVyID09PSAnZnVuY3Rpb24nIHx8IGxpc3RlbmVyIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKGxpc3RlbmVyICYmIHR5cGVvZiBsaXN0ZW5lciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkTGlzdGVuZXIobGlzdGVuZXIubGlzdGVuZXIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBsaXN0ZW5lciBmdW5jdGlvbiB0byB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuICAgICAqIFRoZSBsaXN0ZW5lciB3aWxsIG5vdCBiZSBhZGRlZCBpZiBpdCBpcyBhIGR1cGxpY2F0ZS5cbiAgICAgKiBJZiB0aGUgbGlzdGVuZXIgcmV0dXJucyB0cnVlIHRoZW4gaXQgd2lsbCBiZSByZW1vdmVkIGFmdGVyIGl0IGlzIGNhbGxlZC5cbiAgICAgKiBJZiB5b3UgcGFzcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhcyB0aGUgZXZlbnQgbmFtZSB0aGVuIHRoZSBsaXN0ZW5lciB3aWxsIGJlIGFkZGVkIHRvIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIGF0dGFjaCB0aGUgbGlzdGVuZXIgdG8uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgTWV0aG9kIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBldmVudCBpcyBlbWl0dGVkLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyB0cnVlIHRoZW4gaXQgd2lsbCBiZSByZW1vdmVkIGFmdGVyIGNhbGxpbmcuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRMaXN0ZW5lcihldnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICghaXNWYWxpZExpc3RlbmVyKGxpc3RlbmVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChldnQpO1xuICAgICAgICB2YXIgbGlzdGVuZXJJc1dyYXBwZWQgPSB0eXBlb2YgbGlzdGVuZXIgPT09ICdvYmplY3QnO1xuICAgICAgICB2YXIga2V5O1xuXG4gICAgICAgIGZvciAoa2V5IGluIGxpc3RlbmVycykge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGluZGV4T2ZMaXN0ZW5lcihsaXN0ZW5lcnNba2V5XSwgbGlzdGVuZXIpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyc1trZXldLnB1c2gobGlzdGVuZXJJc1dyYXBwZWQgPyBsaXN0ZW5lciA6IHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxuICAgICAgICAgICAgICAgICAgICBvbmNlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIGFkZExpc3RlbmVyXG4gICAgICovXG4gICAgcHJvdG8ub24gPSBhbGlhcygnYWRkTGlzdGVuZXInKTtcblxuICAgIC8qKlxuICAgICAqIFNlbWktYWxpYXMgb2YgYWRkTGlzdGVuZXIuIEl0IHdpbGwgYWRkIGEgbGlzdGVuZXIgdGhhdCB3aWxsIGJlXG4gICAgICogYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIGl0cyBmaXJzdCBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBhdHRhY2ggdGhlIGxpc3RlbmVyIHRvLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIE1ldGhvZCB0byBiZSBjYWxsZWQgd2hlbiB0aGUgZXZlbnQgaXMgZW1pdHRlZC4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSB0aGVuIGl0IHdpbGwgYmUgcmVtb3ZlZCBhZnRlciBjYWxsaW5nLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLmFkZE9uY2VMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZE9uY2VMaXN0ZW5lcihldnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZExpc3RlbmVyKGV2dCwge1xuICAgICAgICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxuICAgICAgICAgICAgb25jZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2YgYWRkT25jZUxpc3RlbmVyLlxuICAgICAqL1xuICAgIHByb3RvLm9uY2UgPSBhbGlhcygnYWRkT25jZUxpc3RlbmVyJyk7XG5cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIGFuIGV2ZW50IG5hbWUuIFRoaXMgaXMgcmVxdWlyZWQgaWYgeW91IHdhbnQgdG8gdXNlIGEgcmVnZXggdG8gYWRkIGEgbGlzdGVuZXIgdG8gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuIElmIHlvdSBkb24ndCBkbyB0aGlzIHRoZW4gaG93IGRvIHlvdSBleHBlY3QgaXQgdG8ga25vdyB3aGF0IGV2ZW50IHRvIGFkZCB0bz8gU2hvdWxkIGl0IGp1c3QgYWRkIHRvIGV2ZXJ5IHBvc3NpYmxlIG1hdGNoIGZvciBhIHJlZ2V4PyBOby4gVGhhdCBpcyBzY2FyeSBhbmQgYmFkLlxuICAgICAqIFlvdSBuZWVkIHRvIHRlbGwgaXQgd2hhdCBldmVudCBuYW1lcyBzaG91bGQgYmUgbWF0Y2hlZCBieSBhIHJlZ2V4LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBjcmVhdGUuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uZGVmaW5lRXZlbnQgPSBmdW5jdGlvbiBkZWZpbmVFdmVudChldnQpIHtcbiAgICAgICAgdGhpcy5nZXRMaXN0ZW5lcnMoZXZ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFVzZXMgZGVmaW5lRXZlbnQgdG8gZGVmaW5lIG11bHRpcGxlIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nW119IGV2dHMgQW4gYXJyYXkgb2YgZXZlbnQgbmFtZXMgdG8gZGVmaW5lLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLmRlZmluZUV2ZW50cyA9IGZ1bmN0aW9uIGRlZmluZUV2ZW50cyhldnRzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZ0cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgdGhpcy5kZWZpbmVFdmVudChldnRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGxpc3RlbmVyIGZ1bmN0aW9uIGZyb20gdGhlIHNwZWNpZmllZCBldmVudC5cbiAgICAgKiBXaGVuIHBhc3NlZCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhcyB0aGUgZXZlbnQgbmFtZSwgaXQgd2lsbCByZW1vdmUgdGhlIGxpc3RlbmVyIGZyb20gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lciBmcm9tLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIE1ldGhvZCB0byByZW1vdmUgZnJvbSB0aGUgZXZlbnQuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8ucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihldnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGV2dCk7XG4gICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgdmFyIGtleTtcblxuICAgICAgICBmb3IgKGtleSBpbiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXhPZkxpc3RlbmVyKGxpc3RlbmVyc1trZXldLCBsaXN0ZW5lcik7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyc1trZXldLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIHJlbW92ZUxpc3RlbmVyXG4gICAgICovXG4gICAgcHJvdG8ub2ZmID0gYWxpYXMoJ3JlbW92ZUxpc3RlbmVyJyk7XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGxpc3RlbmVycyBpbiBidWxrIHVzaW5nIHRoZSBtYW5pcHVsYXRlTGlzdGVuZXJzIG1ldGhvZC5cbiAgICAgKiBJZiB5b3UgcGFzcyBhbiBvYmplY3QgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHlvdSBjYW4gYWRkIHRvIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLiBUaGUgb2JqZWN0IHNob3VsZCBjb250YWluIGtleSB2YWx1ZSBwYWlycyBvZiBldmVudHMgYW5kIGxpc3RlbmVycyBvciBsaXN0ZW5lciBhcnJheXMuIFlvdSBjYW4gYWxzbyBwYXNzIGl0IGFuIGV2ZW50IG5hbWUgYW5kIGFuIGFycmF5IG9mIGxpc3RlbmVycyB0byBiZSBhZGRlZC5cbiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBhZGQgdGhlIGFycmF5IG9mIGxpc3RlbmVycyB0byBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuXG4gICAgICogWWVhaCwgdGhpcyBmdW5jdGlvbiBkb2VzIHF1aXRlIGEgYml0LiBUaGF0J3MgcHJvYmFibHkgYSBiYWQgdGhpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R8UmVnRXhwfSBldnQgQW4gZXZlbnQgbmFtZSBpZiB5b3Ugd2lsbCBwYXNzIGFuIGFycmF5IG9mIGxpc3RlbmVycyBuZXh0LiBBbiBvYmplY3QgaWYgeW91IHdpc2ggdG8gYWRkIHRvIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb25bXX0gW2xpc3RlbmVyc10gQW4gb3B0aW9uYWwgYXJyYXkgb2YgbGlzdGVuZXIgZnVuY3Rpb25zIHRvIGFkZC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5hZGRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBhZGRMaXN0ZW5lcnMoZXZ0LCBsaXN0ZW5lcnMpIHtcbiAgICAgICAgLy8gUGFzcyB0aHJvdWdoIHRvIG1hbmlwdWxhdGVMaXN0ZW5lcnNcbiAgICAgICAgcmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyhmYWxzZSwgZXZ0LCBsaXN0ZW5lcnMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGxpc3RlbmVycyBpbiBidWxrIHVzaW5nIHRoZSBtYW5pcHVsYXRlTGlzdGVuZXJzIG1ldGhvZC5cbiAgICAgKiBJZiB5b3UgcGFzcyBhbiBvYmplY3QgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHlvdSBjYW4gcmVtb3ZlIGZyb20gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuIFRoZSBvYmplY3Qgc2hvdWxkIGNvbnRhaW4ga2V5IHZhbHVlIHBhaXJzIG9mIGV2ZW50cyBhbmQgbGlzdGVuZXJzIG9yIGxpc3RlbmVyIGFycmF5cy5cbiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhbiBldmVudCBuYW1lIGFuZCBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgdG8gYmUgcmVtb3ZlZC5cbiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byByZW1vdmUgdGhlIGxpc3RlbmVycyBmcm9tIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdHxSZWdFeHB9IGV2dCBBbiBldmVudCBuYW1lIGlmIHlvdSB3aWxsIHBhc3MgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIG5leHQuIEFuIG9iamVjdCBpZiB5b3Ugd2lzaCB0byByZW1vdmUgZnJvbSBtdWx0aXBsZSBldmVudHMgYXQgb25jZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uW119IFtsaXN0ZW5lcnNdIEFuIG9wdGlvbmFsIGFycmF5IG9mIGxpc3RlbmVyIGZ1bmN0aW9ucyB0byByZW1vdmUuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8ucmVtb3ZlTGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKGV2dCwgbGlzdGVuZXJzKSB7XG4gICAgICAgIC8vIFBhc3MgdGhyb3VnaCB0byBtYW5pcHVsYXRlTGlzdGVuZXJzXG4gICAgICAgIHJldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnModHJ1ZSwgZXZ0LCBsaXN0ZW5lcnMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFZGl0cyBsaXN0ZW5lcnMgaW4gYnVsay4gVGhlIGFkZExpc3RlbmVycyBhbmQgcmVtb3ZlTGlzdGVuZXJzIG1ldGhvZHMgYm90aCB1c2UgdGhpcyB0byBkbyB0aGVpciBqb2IuIFlvdSBzaG91bGQgcmVhbGx5IHVzZSB0aG9zZSBpbnN0ZWFkLCB0aGlzIGlzIGEgbGl0dGxlIGxvd2VyIGxldmVsLlxuICAgICAqIFRoZSBmaXJzdCBhcmd1bWVudCB3aWxsIGRldGVybWluZSBpZiB0aGUgbGlzdGVuZXJzIGFyZSByZW1vdmVkICh0cnVlKSBvciBhZGRlZCAoZmFsc2UpLlxuICAgICAqIElmIHlvdSBwYXNzIGFuIG9iamVjdCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHlvdSBjYW4gYWRkL3JlbW92ZSBmcm9tIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLiBUaGUgb2JqZWN0IHNob3VsZCBjb250YWluIGtleSB2YWx1ZSBwYWlycyBvZiBldmVudHMgYW5kIGxpc3RlbmVycyBvciBsaXN0ZW5lciBhcnJheXMuXG4gICAgICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYW4gZXZlbnQgbmFtZSBhbmQgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIHRvIGJlIGFkZGVkL3JlbW92ZWQuXG4gICAgICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gbWFuaXB1bGF0ZSB0aGUgbGlzdGVuZXJzIG9mIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIFRydWUgaWYgeW91IHdhbnQgdG8gcmVtb3ZlIGxpc3RlbmVycywgZmFsc2UgaWYgeW91IHdhbnQgdG8gYWRkLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdHxSZWdFeHB9IGV2dCBBbiBldmVudCBuYW1lIGlmIHlvdSB3aWxsIHBhc3MgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIG5leHQuIEFuIG9iamVjdCBpZiB5b3Ugd2lzaCB0byBhZGQvcmVtb3ZlIGZyb20gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbltdfSBbbGlzdGVuZXJzXSBBbiBvcHRpb25hbCBhcnJheSBvZiBsaXN0ZW5lciBmdW5jdGlvbnMgdG8gYWRkL3JlbW92ZS5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBwcm90by5tYW5pcHVsYXRlTGlzdGVuZXJzID0gZnVuY3Rpb24gbWFuaXB1bGF0ZUxpc3RlbmVycyhyZW1vdmUsIGV2dCwgbGlzdGVuZXJzKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIHZhciBzaW5nbGUgPSByZW1vdmUgPyB0aGlzLnJlbW92ZUxpc3RlbmVyIDogdGhpcy5hZGRMaXN0ZW5lcjtcbiAgICAgICAgdmFyIG11bHRpcGxlID0gcmVtb3ZlID8gdGhpcy5yZW1vdmVMaXN0ZW5lcnMgOiB0aGlzLmFkZExpc3RlbmVycztcblxuICAgICAgICAvLyBJZiBldnQgaXMgYW4gb2JqZWN0IHRoZW4gcGFzcyBlYWNoIG9mIGl0cyBwcm9wZXJ0aWVzIHRvIHRoaXMgbWV0aG9kXG4gICAgICAgIGlmICh0eXBlb2YgZXZ0ID09PSAnb2JqZWN0JyAmJiAhKGV2dCBpbnN0YW5jZW9mIFJlZ0V4cCkpIHtcbiAgICAgICAgICAgIGZvciAoaSBpbiBldnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZ0Lmhhc093blByb3BlcnR5KGkpICYmICh2YWx1ZSA9IGV2dFtpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGFzcyB0aGUgc2luZ2xlIGxpc3RlbmVyIHN0cmFpZ2h0IHRocm91Z2ggdG8gdGhlIHNpbmd1bGFyIG1ldGhvZFxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGUuY2FsbCh0aGlzLCBpLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgcGFzcyBiYWNrIHRvIHRoZSBtdWx0aXBsZSBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGUuY2FsbCh0aGlzLCBpLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBTbyBldnQgbXVzdCBiZSBhIHN0cmluZ1xuICAgICAgICAgICAgLy8gQW5kIGxpc3RlbmVycyBtdXN0IGJlIGFuIGFycmF5IG9mIGxpc3RlbmVyc1xuICAgICAgICAgICAgLy8gTG9vcCBvdmVyIGl0IGFuZCBwYXNzIGVhY2ggb25lIHRvIHRoZSBtdWx0aXBsZSBtZXRob2RcbiAgICAgICAgICAgIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgIHNpbmdsZS5jYWxsKHRoaXMsIGV2dCwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBsaXN0ZW5lcnMgZnJvbSBhIHNwZWNpZmllZCBldmVudC5cbiAgICAgKiBJZiB5b3UgZG8gbm90IHNwZWNpZnkgYW4gZXZlbnQgdGhlbiBhbGwgbGlzdGVuZXJzIHdpbGwgYmUgcmVtb3ZlZC5cbiAgICAgKiBUaGF0IG1lYW5zIGV2ZXJ5IGV2ZW50IHdpbGwgYmUgZW1wdGllZC5cbiAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBhIHJlZ2V4IHRvIHJlbW92ZSBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IFtldnRdIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHJlbW92ZSBhbGwgbGlzdGVuZXJzIGZvci4gV2lsbCByZW1vdmUgZnJvbSBldmVyeSBldmVudCBpZiBub3QgcGFzc2VkLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHByb3RvLnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnQoZXZ0KSB7XG4gICAgICAgIHZhciB0eXBlID0gdHlwZW9mIGV2dDtcbiAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuX2dldEV2ZW50cygpO1xuICAgICAgICB2YXIga2V5O1xuXG4gICAgICAgIC8vIFJlbW92ZSBkaWZmZXJlbnQgdGhpbmdzIGRlcGVuZGluZyBvbiB0aGUgc3RhdGUgb2YgZXZ0XG4gICAgICAgIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnRcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbZXZ0XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldnQgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgZXZlbnRzIG1hdGNoaW5nIHRoZSByZWdleC5cbiAgICAgICAgICAgIGZvciAoa2V5IGluIGV2ZW50cykge1xuICAgICAgICAgICAgICAgIGlmIChldmVudHMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBldnQudGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBldmVudHNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGxpc3RlbmVycyBpbiBhbGwgZXZlbnRzXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZXZlbnRzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIHJlbW92ZUV2ZW50LlxuICAgICAqXG4gICAgICogQWRkZWQgdG8gbWlycm9yIHRoZSBub2RlIEFQSS5cbiAgICAgKi9cbiAgICBwcm90by5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBhbGlhcygncmVtb3ZlRXZlbnQnKTtcblxuICAgIC8qKlxuICAgICAqIEVtaXRzIGFuIGV2ZW50IG9mIHlvdXIgY2hvaWNlLlxuICAgICAqIFdoZW4gZW1pdHRlZCwgZXZlcnkgbGlzdGVuZXIgYXR0YWNoZWQgdG8gdGhhdCBldmVudCB3aWxsIGJlIGV4ZWN1dGVkLlxuICAgICAqIElmIHlvdSBwYXNzIHRoZSBvcHRpb25hbCBhcmd1bWVudCBhcnJheSB0aGVuIHRob3NlIGFyZ3VtZW50cyB3aWxsIGJlIHBhc3NlZCB0byBldmVyeSBsaXN0ZW5lciB1cG9uIGV4ZWN1dGlvbi5cbiAgICAgKiBCZWNhdXNlIGl0IHVzZXMgYGFwcGx5YCwgeW91ciBhcnJheSBvZiBhcmd1bWVudHMgd2lsbCBiZSBwYXNzZWQgYXMgaWYgeW91IHdyb3RlIHRoZW0gb3V0IHNlcGFyYXRlbHkuXG4gICAgICogU28gdGhleSB3aWxsIG5vdCBhcnJpdmUgd2l0aGluIHRoZSBhcnJheSBvbiB0aGUgb3RoZXIgc2lkZSwgdGhleSB3aWxsIGJlIHNlcGFyYXRlLlxuICAgICAqIFlvdSBjYW4gYWxzbyBwYXNzIGEgcmVndWxhciBleHByZXNzaW9uIHRvIGVtaXQgdG8gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gZW1pdCBhbmQgZXhlY3V0ZSBsaXN0ZW5lcnMgZm9yLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFthcmdzXSBPcHRpb25hbCBhcnJheSBvZiBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIGVhY2ggbGlzdGVuZXIuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uZW1pdEV2ZW50ID0gZnVuY3Rpb24gZW1pdEV2ZW50KGV2dCwgYXJncykge1xuICAgICAgICB2YXIgbGlzdGVuZXJzTWFwID0gdGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChldnQpO1xuICAgICAgICB2YXIgbGlzdGVuZXJzO1xuICAgICAgICB2YXIgbGlzdGVuZXI7XG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICB2YXIgcmVzcG9uc2U7XG5cbiAgICAgICAgZm9yIChrZXkgaW4gbGlzdGVuZXJzTWFwKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXJzTWFwLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnNNYXBba2V5XS5zbGljZSgwKTtcblxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGxpc3RlbmVyIHJldHVybnMgdHJ1ZSB0aGVuIGl0IHNoYWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGVpdGhlciB3aXRoIGEgYmFzaWMgY2FsbCBvciBhbiBhcHBseSBpZiB0aGVyZSBpcyBhbiBhcmdzIGFycmF5XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lci5vbmNlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2dCwgbGlzdGVuZXIubGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBsaXN0ZW5lci5saXN0ZW5lci5hcHBseSh0aGlzLCBhcmdzIHx8IFtdKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgPT09IHRoaXMuX2dldE9uY2VSZXR1cm5WYWx1ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2dCwgbGlzdGVuZXIubGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIGVtaXRFdmVudFxuICAgICAqL1xuICAgIHByb3RvLnRyaWdnZXIgPSBhbGlhcygnZW1pdEV2ZW50Jyk7XG5cbiAgICAvKipcbiAgICAgKiBTdWJ0bHkgZGlmZmVyZW50IGZyb20gZW1pdEV2ZW50IGluIHRoYXQgaXQgd2lsbCBwYXNzIGl0cyBhcmd1bWVudHMgb24gdG8gdGhlIGxpc3RlbmVycywgYXMgb3Bwb3NlZCB0byB0YWtpbmcgYSBzaW5nbGUgYXJyYXkgb2YgYXJndW1lbnRzIHRvIHBhc3Mgb24uXG4gICAgICogQXMgd2l0aCBlbWl0RXZlbnQsIHlvdSBjYW4gcGFzcyBhIHJlZ2V4IGluIHBsYWNlIG9mIHRoZSBldmVudCBuYW1lIHRvIGVtaXQgdG8gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gZW1pdCBhbmQgZXhlY3V0ZSBsaXN0ZW5lcnMgZm9yLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gT3B0aW9uYWwgYWRkaXRpb25hbCBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIGVhY2ggbGlzdGVuZXIuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZ0KSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW1pdEV2ZW50KGV2dCwgYXJncyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGN1cnJlbnQgdmFsdWUgdG8gY2hlY2sgYWdhaW5zdCB3aGVuIGV4ZWN1dGluZyBsaXN0ZW5lcnMuIElmIGFcbiAgICAgKiBsaXN0ZW5lcnMgcmV0dXJuIHZhbHVlIG1hdGNoZXMgdGhlIG9uZSBzZXQgaGVyZSB0aGVuIGl0IHdpbGwgYmUgcmVtb3ZlZFxuICAgICAqIGFmdGVyIGV4ZWN1dGlvbi4gVGhpcyB2YWx1ZSBkZWZhdWx0cyB0byB0cnVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgbmV3IHZhbHVlIHRvIGNoZWNrIGZvciB3aGVuIGV4ZWN1dGluZyBsaXN0ZW5lcnMuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgcHJvdG8uc2V0T25jZVJldHVyblZhbHVlID0gZnVuY3Rpb24gc2V0T25jZVJldHVyblZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX29uY2VSZXR1cm5WYWx1ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgY3VycmVudCB2YWx1ZSB0byBjaGVjayBhZ2FpbnN0IHdoZW4gZXhlY3V0aW5nIGxpc3RlbmVycy4gSWZcbiAgICAgKiB0aGUgbGlzdGVuZXJzIHJldHVybiB2YWx1ZSBtYXRjaGVzIHRoaXMgb25lIHRoZW4gaXQgc2hvdWxkIGJlIHJlbW92ZWRcbiAgICAgKiBhdXRvbWF0aWNhbGx5LiBJdCB3aWxsIHJldHVybiB0cnVlIGJ5IGRlZmF1bHQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHsqfEJvb2xlYW59IFRoZSBjdXJyZW50IHZhbHVlIHRvIGNoZWNrIGZvciBvciB0aGUgZGVmYXVsdCwgdHJ1ZS5cbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBwcm90by5fZ2V0T25jZVJldHVyblZhbHVlID0gZnVuY3Rpb24gX2dldE9uY2VSZXR1cm5WYWx1ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoJ19vbmNlUmV0dXJuVmFsdWUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29uY2VSZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGV2ZW50cyBvYmplY3QgYW5kIGNyZWF0ZXMgb25lIGlmIHJlcXVpcmVkLlxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgZXZlbnRzIHN0b3JhZ2Ugb2JqZWN0LlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIHByb3RvLl9nZXRFdmVudHMgPSBmdW5jdGlvbiBfZ2V0RXZlbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZXZlbnRzIHx8ICh0aGlzLl9ldmVudHMgPSB7fSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldmVydHMgdGhlIGdsb2JhbCB7QGxpbmsgRXZlbnRFbWl0dGVyfSB0byBpdHMgcHJldmlvdXMgdmFsdWUgYW5kIHJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhpcyB2ZXJzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IE5vbiBjb25mbGljdGluZyBFdmVudEVtaXR0ZXIgY2xhc3MuXG4gICAgICovXG4gICAgRXZlbnRFbWl0dGVyLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgICAgICBleHBvcnRzLkV2ZW50RW1pdHRlciA9IG9yaWdpbmFsR2xvYmFsVmFsdWU7XG4gICAgICAgIHJldHVybiBFdmVudEVtaXR0ZXI7XG4gICAgfTtcblxuICAgIC8vIEV4cG9zZSB0aGUgY2xhc3MgZWl0aGVyIHZpYSBBTUQsIENvbW1vbkpTIG9yIHRoZSBnbG9iYWwgb2JqZWN0XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIEV2ZW50RW1pdHRlcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKXtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBleHBvcnRzLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcbiAgICB9XG59KHRoaXMgfHwge30pKTtcbiJdfQ==
